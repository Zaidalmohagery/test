(self.webpackChunksas4=self.webpackChunksas4||[]).push([[179],{98255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=98255,e.exports=t},48452:function(e,t,a){"use strict";var i=a(39075),n=a(37716),o=a(46237),s=a(88002),r=a(91841);let l=(()=>{class e{constructor(e){this.http=e,this.tokenName="sas4_jwt",this.setLogLevels({info:!0,error:!0,log:!0,debug:!0})}getApiUrl(){let e=localStorage.getItem("sas4_api_url");return(!e||null==e)&&(e="http://localhost:8000/index.php/api/"),e}setLogLevels(e){this.logLevels=e}loadConfig(){let e=this.getApiUrl()+"resources/login";return this.http.get(e)}canActivateChild(){return!!this.siteConfig||this.loadConfig().pipe((0,s.U)(e=>200==e.status&&(this.siteConfig=e.data,!0)))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(r.eN))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var c=a(64762),d=a(69165),u=a(98044),p=a(39895),g=a(49344);let f=(()=>{class e{constructor(e){this.config=e}currentTime(){let e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}prepareMessage(e,t){let a;return a=this.currentTime(),"object"==typeof t&&(t=JSON.stringify(t)),a+=" ["+e+"] ",a+=" "+t,a}info(e,t){this.config.logLevels.info&&console.info(this.prepareMessage(e,t))}log(e,t){this.config.logLevels.log&&console.log(this.prepareMessage(e,t))}error(e,t){this.config.logLevels.error&&console.error(this.prepareMessage(e,t))}debug(e,t){this.config.logLevels.debug&&console.log("%c "+this.prepareMessage(e,t)," background: #222; color: #bada55")}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(l))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();class h{constructor(e,t,a,i,n){this.config=e,this.http=t,this.router=a,this.toastr=i,this.log=n}isTokenExpired(){let e=localStorage.getItem(this.config.tokenName);return!e||""==e||jwt_decode(e).exp-Math.floor(Date.now()/1e3)<0}_post(e,t){var a=this.config.getApiUrl(),i=new r.WM;i.append("Content-Type","application/json");let n={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return this.log.debug("API,_post, url="+a+e,JSON.stringify(t)),this.http.post(a+e,n,{headers:i})}_put(e,t){var a=this.config.getApiUrl(),i=new r.WM;i.append("Content-Type","application/json");let n={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return this.log.debug("API,_put, url="+a+e,JSON.stringify(t)),this.http.put(a+e,n,{headers:i})}_get(e){const t=this.config.getApiUrl();return this.log.debug("API,_get","url="+t+e),this.http.get(t+e)}post(e,t,a=!0){this.isTokenExpired()&&this.router.navigate(["login"]);let i=this.config.getApiUrl(),n=localStorage.getItem(this.config.tokenName),o=(new r.WM).set("authorization","Bearer "+n);o.set("authorization","Bearer "+n),o.set("Content-Type","application/json");let s={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return a||(s=t),this.log.debug("API,post, url="+i+e,JSON.stringify(t)),new d.y(t=>{this.http.post(i+e,s,{headers:o}).subscribe(e=>{t.next(e)},e=>{this.blockUI.stop(),this.log.error("API",e.status),this.toastr.error(403==e.status?"access denied":500==e.status?"server error occurred":"unknown error occurred"),t.error(e)})})}upload(e,t){this.isTokenExpired()&&this.router.navigate(["login"]);let a=this.config.getApiUrl(),i=new r.WM,n=localStorage.getItem(this.config.tokenName);i.append("authorization","Bearer "+n);let o=t;return new d.y(t=>{this.http.post(a+e,o,{headers:i}).subscribe(e=>{t.next(e)},e=>{t.error(e),console.log("error status = "+e.status),403==e.status&&this.toastr.error("access denied"),500==e.status&&this.toastr.error("server error occurred")})})}put(e,t,a=!0){this.isTokenExpired()&&this.router.navigate(["login"]);let i=this.config.getApiUrl(),n=localStorage.getItem(this.config.tokenName),o=(new r.WM).set("authorization","Bearer "+n);o.set("authorization","Bearer "+n),o.set("Content-Type","application/json");let s={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return a||(s=t),this.log.debug("API,post, url="+i+e,JSON.stringify(t)),new d.y(t=>{this.http.put(i+e,s,{headers:o}).subscribe(e=>{t.next(e)},e=>{t.error(e),console.log("error status = "+e.status),403==e.status&&this.toastr.error("access denied"),500==e.status&&this.toastr.error("server error occurred")})})}get(e){this.isTokenExpired();const t=this.config.getApiUrl(),a=localStorage.getItem(this.config.tokenName),i=(new r.WM).set("authorization","Bearer "+a);return new d.y(a=>{this.http.get(t+e,{headers:i}).subscribe(e=>{a.next(e)},e=>{(400===e.status||401===e.status)&&this.router.navigate(["login"]),403===e.status&&this.toastr.error("access denied"),500===e.status&&this.toastr.error("server error occurred"),a.error()})})}delete(e){this.isTokenExpired()&&this.router.navigate(["login"]);var t=this.config.getApiUrl();let a=localStorage.getItem(this.config.tokenName);var i=(new r.WM).set("authorization","Bearer "+a);return i.append("Authorization","Bearer "+a),new d.y(a=>{this.http.delete(t+e,{headers:i}).subscribe(e=>{a.next(e)},e=>{this.blockUI.stop(),500==e.status&&this.toastr.error("server error occurred"),403==e.status&&this.toastr.error("access denied"),a.error(e)})})}goto(e){var t=this.config.getApiUrl();location.href=t+e}downloadFile(e,t=null){this.isTokenExpired();const a=this.config.getApiUrl(),i=localStorage.getItem(this.config.tokenName),n=(new r.WM).set("authorization","Bearer "+i);this.http.get(a+e,{headers:n,responseType:"blob"}).subscribe(e=>{let a=e.type,i=[];i.push(e);let n=document.createElement("a");n.href=window.URL.createObjectURL(new Blob(i,{type:a})),t&&n.setAttribute("download",t),document.body.appendChild(n),n.click()})}xhr(e){const t=this.config.getApiUrl(),a=localStorage.getItem(this.config.tokenName);let i=new XMLHttpRequest;return i.open("GET",t+e),i.setRequestHeader("authorization","Bearer "+a),i}}h.\u0275fac=function(e){return new(e||h)(n.LFG(l),n.LFG(r.eN),n.LFG(p.F0),n.LFG(g._W),n.LFG(f))},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac}),(0,c.gn)([(0,u.bH)()],h.prototype,"blockUI",void 0);let m=(()=>{class e{constructor(){this.months=[{name:"Jan",id:1},{name:"Feb",id:2},{name:"Mar",id:3},{name:"Apr",id:4},{name:"May",id:5},{name:"Jun",id:6},{name:"Jul",id:7},{name:"Aug",id:8},{name:"Spt",id:9},{name:"Oct",id:10},{name:"Nov",id:11},{name:"Dec",id:12}]}array_key_index(e,t,a){let i=0,n=null;for(let o of e)o[t]&&o[t]==a?n=i:i++;return n>=0&&n}now(){var e=new Date;let t=e.getFullYear().toString(),a=(e.getMonth()+1).toString();a.length<2&&(a="0"+a);let i=e.getDate().toString();i.length<2&&(i="0"+i);let n=e.getHours().toString();n.length<2&&(n="0"+n);let o=e.getMinutes().toString();o.length<2&&(o="0"+o);let s=e.getSeconds().toString();return s.length<2&&(s="0"+s),t+"-"+a+"-"+i+" "+n+":"+o+":"+s}guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}bytesFormat(e){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}bpsFormat(e){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}isMobileDevice(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e,t,a,i){this.config=e,this.api=t,this.router=a,this.ch=i,this.permissions=[],this.features=[],this.license_status=0,this.license_expiration=null,this.session_id=null,this.session_id=this.ch.guid()}decode_token(){localStorage.getItem(this.config.tokenName)}isExpired(){let e=localStorage.getItem(this.config.tokenName);return!e||""==e||jwt_decode(e).exp-Math.floor(Date.now()/1e3)<0}clearPermissions(){this.permissions=[]}setPermissions(e){this.permissions=e}has(e){return this.permissions.indexOf("prm_managers_sysadmin")>=0||this.permissions.indexOf(e)>=0}logout(){this.clearPermissions(),localStorage.removeItem(this.config.tokenName),this.router.navigate(["login"])}setProfile(e){this.client=e}reload(){this.api.get("auth").subscribe(e=>{200===e.status&&(this.setProfile(e.client),this.setPermissions(e.permissions),this.license_status=parseInt(e.license_status),this.license_expiration=e.license_expiration||null,this.features=e.features)})}canActivateChild(){return this.permissions.length>0||this.api.get("auth").pipe((0,s.U)(e=>200===e.status&&(this.setProfile(e.client),this.setPermissions(e.permissions),this.license_status=parseInt(e.license_status),this.license_expiration=e.license_expiration||null,this.features=e.features,!0),e=>!1))}checkRoutePermission(e){const t=null==e?void 0:e.data;void 0!==t._value&&void 0!==t._value.prm&&-1===this.permissions.indexOf("prm_managers_sysadmin")&&-1===this.permissions.indexOf(t._value.prm)&&this.router.navigate(["message"],{queryParams:{title:"Access Denied",message:"You do not have permission to access this page"}})}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(l),n.LFG(h),n.LFG(p.F0),n.LFG(m))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e,t){this.auth=e,this.router=t,this.app_version="4.43.0",null===localStorage.getItem("application_version")&&localStorage.setItem("application_version",this.app_version.toString())}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(_),n.Y36(p.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&n._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),e})();var Z=a(3679);let v=(()=>{class e{constructor(){}toggleOpen(e){e.preventDefault(),document.querySelector("body").classList.toggle("aside-menu-hidden")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.lG2({type:e,selectors:[["","appAsideMenuToggler",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",function(e){return t.toggleOpen(e)})}}),e})(),w=(()=>{class e{constructor(e){this.el=e}toggle(){this.el.nativeElement.classList.toggle("open")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq))},e.\u0275dir=n.lG2({type:e,selectors:[["","appNavDropdown",""]]}),e})(),y=(()=>{class e{constructor(e){this.dropdown=e}toggleOpen(e){e.preventDefault(),this.dropdown.toggle()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(w))},e.\u0275dir=n.lG2({type:e,selectors:[["","appNavDropdownToggle",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",function(e){return t.toggleOpen(e)})}}),e})(),x=(()=>{class e{constructor(e){this.el=e}ngOnInit(){const e=this.el.nativeElement,t=e.parentElement;for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq))},e.\u0275dir=n.lG2({type:e,selectors:[["","appHostReplace",""],["app-aside"],["app-breadcrumbs"],["app-footer"],["app-header"],["app-sidebar"],["app-sidebar-footer"],["app-sidebar-form"],["app-sidebar-header"],["app-sidebar-minimizer"],["app-sidebar-nav"],["app-sidebar-nav-dropdown"],["app-sidebar-nav-item"],["app-sidebar-nav-link"],["app-sidebar-nav-title"]]}),e})(),A=(()=>{class e{constructor(){}toggleOpen(e){e.preventDefault(),document.querySelector("body").classList.toggle("sidebar-hidden")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.lG2({type:e,selectors:[["","appSidebarToggler",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",function(e){return t.toggleOpen(e)})}}),e})(),q=(()=>{class e{constructor(){}hasClass(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}toggleOpen(e){e.preventDefault(),document.querySelector("body").classList.toggle("sidebar-mobile-show")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=n.lG2({type:e,selectors:[["","appMobileSidebarToggler",""]],hostBindings:function(e,t){1&e&&n.NdJ("click",function(e){return t.toggleOpen(e)})}}),e})();var T=a(83473),C=a(76321),k=a(1282),U=a(75690);let M=(()=>{class e{constructor(e,t,a){this.api=e,this.auth=t,this.router=a,this.language="en",this.loadedLanguage="en",null==localStorage.getItem("user_language")&&localStorage.setItem("user_language","en"),this.language=localStorage.getItem("user_language"),console.log("loading default language"),this.api._get("resources/language/en").subscribe(e=>{this.words_en=e.words}),this.load(this.language)}ngOnInit(){}load(e){return this.api._get("resources/language/"+e)}translate(e){return this.words&&this.words[e]?this.words[e]:this.words_en&&this.words_en[e]?this.words_en[e]:e}switchLanguage(e){this.api._get("resources/language/"+e).subscribe(e=>{this.words=e.words,this.loadedLanguage=e.info.id})}canActivateChild(){return this.auth.isExpired()?(this.router.navigate(["login"]),!1):(this.language=localStorage.getItem("user_language"),!(!this.words||this.loadedLanguage!=this.language)||this.load(this.language).pipe((0,s.U)(e=>!!e&&(this.words=e.words,this.loadedLanguage=e.info.id,!0))))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(h),n.LFG(_),n.LFG(p.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var F=a(12664),J=a(38583);function O(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",17),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).applyLanguage(t)}),n._uU(1),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.hij(" ",e.name,"")}}function N(e,t){if(1&e&&(n.TgZ(0,"div",15),n.YNc(1,O,2,1,"a",16),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.languages)}}function I(e,t){if(1&e&&(n.TgZ(0,"a",27),n._UZ(1,"i",28),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("header_login_as"),"")}}function Y(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",18),n.TgZ(1,"div",19),n.TgZ(2,"strong"),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"a",20),n._UZ(5,"i",21),n._uU(6),n.qZA(),n.TgZ(7,"a",22),n._UZ(8,"i",23),n._uU(9),n.qZA(),n.YNc(10,I,3,1,"a",24),n._UZ(11,"div",25),n.TgZ(12,"a",17),n.NdJ("click",function(){return n.CHM(e),n.oxw().logout()}),n._UZ(13,"i",26),n._uU(14),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Oqu(e.tr.translate("header_account")),n.xp6(3),n.hij(" ",e.tr.translate("header_profile"),""),n.xp6(3),n.hij(" ",e.tr.translate("header_self_deposit"),""),n.xp6(1),n.Q6J("ngIf",e.auth.has("prm_managers_login_as")),n.xp6(4),n.hij(" ",e.tr.translate("header_logout"),"")}}class Q{constructor(e,t,a,i){this.auth=e,this.tr=t,this.api=a,this.cdr=i,this.languages=[],this.loadLanguages()}logout(){this.auth.logout()}loadLanguages(){this.api._get("resources/languages").subscribe(e=>{this.languages=e.data})}applyLanguage(e){localStorage.setItem("user_language",e.id),this.tr.switchLanguage(e.id),"rtl"===e.direction?this.enableRTL():this.removeRTL(),this.blockUI.start(),window.location.reload()}removeRTL(){var e=document.getElementById("rtl_css");e&&e.parentNode.removeChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","ltr")}enableRTL(){var e=document.createElement("link");e.href="assets/css/rtl.css",e.type="text/css",e.id="rtl_css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","rtl")}}function S(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.footer_text)}}Q.\u0275fac=function(e){return new(e||Q)(n.Y36(_),n.Y36(M),n.Y36(h),n.Y36(n.sBO))},Q.\u0275cmp=n.Xpm({type:Q,selectors:[["app-header"]],decls:20,vars:1,consts:[[1,"app-header","navbar"],["type","button","appMobileSidebarToggler","",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["href","#",1,"navbar-brand"],["type","button","appSidebarToggler","",1,"navbar-toggler","d-md-down-none","mr-auto"],[1,"nav","navbar-nav","ml-auto"],["dropdown","","placement","bottom right",1,"nav-item","dropdown"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false","dropdownToggle","",1,"nav-link",3,"click"],[1,"fa","fa-language","fa-2x"],["class","dropdown-menu dropdown-menu-right","id","language-menu","aria-labelledby","simple-dropdown",4,"dropdownMenu"],["src","assets/img/avatars/user-placeholder.png",1,"img-avatar"],[1,"d-md-down-none"],["class","dropdown-menu dropdown-menu-right","id","profile-menu","aria-labelledby","simple-dropdown",4,"dropdownMenu"],[2,"width","20px"],["type","button","appAsideMenuToggler","",1,"navbar-toggler","d-md-down-none",2,"display","none"],["id","language-menu","aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],["id","profile-menu","aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-header","text-center"],["href","#/manager/profile",1,"dropdown-item"],[1,"fa","fa-user"],["href","#/manager/selfDeposit",1,"dropdown-item"],[1,"fa","fa-credit-card"],["class","dropdown-item","href","#/manager/loginAs",4,"ngIf"],[1,"divider"],[1,"fa","fa-lock"],["href","#/manager/loginAs",1,"dropdown-item"],[1,"fa","fa-user-secret"]],template:function(e,t){1&e&&(n.TgZ(0,"header",0),n.TgZ(1,"button",1),n._UZ(2,"span",2),n.qZA(),n._UZ(3,"a",3),n.TgZ(4,"button",4),n._UZ(5,"span",2),n.qZA(),n.TgZ(6,"ul",5),n.TgZ(7,"li",6),n.TgZ(8,"a",7),n.NdJ("click",function(){return!1}),n._UZ(9,"i",8),n.qZA(),n.YNc(10,N,2,1,"div",9),n.qZA(),n.TgZ(11,"li",6),n.TgZ(12,"a",7),n.NdJ("click",function(){return!1}),n._UZ(13,"img",10),n.TgZ(14,"span",11),n._uU(15),n.qZA(),n.qZA(),n.YNc(16,Y,15,5,"div",12),n.qZA(),n.qZA(),n._UZ(17,"div",13),n.TgZ(18,"button",14),n._UZ(19,"span",2),n.qZA(),n.qZA()),2&e&&(n.xp6(15),n.Oqu(t.auth.client.username))},directives:[F.M2,q,A,k.TOY,k.Mq7,k.HzE,v,J.sg,J.O5],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Q.prototype,"blockUI",void 0);let P=(()=>{class e{constructor(e,t){this.api=e,this.config=t,this.version="4.y.z",this.footer_text=""}ngOnInit(){this.api.get("resources/version").subscribe(e=>{200===e.status&&(this.version=e.data)}),this.config.siteConfig.footer_text&&this.config.siteConfig.footer_text.length>2&&(this.footer_text=this.config.siteConfig.footer_text)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-footer"]],decls:8,vars:3,consts:[[1,"app-footer"],[3,"hidden"],["href","https://sasradius.com"],["href","https://www.snono-systems.com/"],[4,"ngIf"]],template:function(e,t){1&e&&(n.TgZ(0,"footer",0),n.TgZ(1,"span",1),n.TgZ(2,"a",2),n._uU(3,"SAS Radius"),n.qZA(),n._uU(4),n.TgZ(5,"a",3),n._uU(6,"Snono Systems."),n.qZA(),n.qZA(),n.YNc(7,S,2,1,"span",4),n.qZA()),2&e&&(n.xp6(1),n.Q6J("hidden",t.footer_text.length>2),n.xp6(3),n.hij(" v",t.version," \xa9 2022 "),n.xp6(3),n.Q6J("ngIf",t.footer_text.length>2))},directives:[J.O5],encapsulation:2}),e})();var D=a(28044);let H=a(98835),R=a(86295),V=a(65424),L=a(28184);H(D),R(D),V(D),R(D),L(D);let E=(()=>{class e{constructor(e){this.api=e,this.timerHook=null,this.chart=null}ngOnInit(){this.initChart(),this.timerHook=setInterval(()=>this.load(),5e3)}initChart(){this.chart=D.chart("cpu_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:D.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#DF5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"CPU Load",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}load(){this.api.get("advancedDashboard/CpuUsage").subscribe(e=>{200===e.status&&this.chart.series[0].points[0].update(e.data)})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cpu-gauge"]],decls:1,vars:0,consts:[["id","cpu_gauge_container"]],template:function(e,t){1&e&&n._UZ(0,"div",0)},styles:["#cpu_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e})(),K=a(98835),B=a(86295),z=a(65424),j=a(28184);K(D),B(D),z(D),B(D),j(D);let G=(()=>{class e{constructor(e){this.api=e,this.timerHook=null,this.chart=null}ngOnInit(){this.initChart(),this.timerHook=setInterval(()=>this.load(),1e4)}initChart(){this.chart=D.chart("memory_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:D.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#df5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"Memory Usage",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}load(){this.api.get("advancedDashboard/MemoryUsage").subscribe(e=>{200===e.status&&this.chart.series[0].points[0].update(e.data)})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-memory-gauge"]],decls:1,vars:0,consts:[["id","memory_gauge_container"]],template:function(e,t){1&e&&n._UZ(0,"div",0)},styles:["#memory_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e})(),W=(()=>{class e{constructor(e){this.api=e,this.timerHook=null,this.chart=null}ngOnInit(){this.initChart(),this.timerHook=setInterval(()=>this.load(),12e4)}initChart(){this.chart=D.chart("disk_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:D.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#df5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"Disk Usage",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}load(){this.api.get("advancedDashboard/DiskUsage").subscribe(e=>{200===e.status&&this.chart.series[0].points[0].update(e.data)})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-system-disk-gauge"]],decls:1,vars:0,consts:[["id","disk_gauge_container"]],template:function(e,t){1&e&&n._UZ(0,"div",0)},styles:["#disk_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e})();const X=function(e){return{"text-warning":e}},ee=function(e,t){return{"text-success":e,"text-warning":t}},te=function(e,t){return{"text-success":e,"text-danger":t}};let ae=(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.date=new Date,this.filter={type:"hourly",day:this.date.getDate(),month:this.date.getMonth()+1,year:this.date.getFullYear()},this.subscribersData={},this.financeData={},this.systemHealth={},this.timer1min=null,this.timer10min=null}ngOnInit(){this.timer1min=setInterval(()=>{this.loadSubscribersWidget(),this.loadSystemHealthWidget(),this.loadFinanceWidget()},6e4),this.timer10min=setInterval(()=>this.loadOnlineChart(),6e5),this.loadOnlineChart(),this.loadSubscribersWidget(),this.loadFinanceWidget(),this.loadSystemHealthWidget()}loadSubscribersWidget(){this.api.get("advancedDashboard/subscribers").subscribe(e=>{200===e.status&&(this.subscribersData=e.data)})}loadFinanceWidget(){this.api.get("advancedDashboard/finance").subscribe(e=>{200===e.status&&(this.financeData=e.data)})}loadSystemHealthWidget(){this.api.get("advancedDashboard/systemHealth").subscribe(e=>{200===e.status&&(this.systemHealth=e.data)})}loadOnlineChart(){this.api.post("onlineReport",this.filter).subscribe(e=>{if(200===e.status){const t=e.data,a={chart:{type:"area",backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#263946"],[1,"#263946"]]},style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"},text:"Users"},min:0,floor:0,currentMin:0},title:{text:void 0,style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[]};let i=[],n=[];for(let e=0;e<24;e++){let a=0,o=0;t.map(t=>{t.hour==e&&(a=parseInt(t.n_online),o=parseInt(t.n_total))}),i.push([e,a]),n.push([e,o])}const o={name:"Online Users",data:i,pointInterval:1,color:"#65a2f7"};a.series.push({name:"Active Users",data:n,pointInterval:1,color:"#d9d9d9"}),a.series.push(o);const s=D.chart("online_chart_container",a);window.setTimeout(function(){s.reflow()},2e3)}})}ngOnDestroy(){clearInterval(this.timer1min),clearInterval(this.timer10min)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-advanced-dashboard"]],decls:155,vars:82,consts:[[1,"dashboard-container"],[1,"row","row-eq-height"],[1,"col-md-6","col-sm-12","m-10"],[1,"advanced-widget"],[1,"title"],[1,"fa","fa-2x","fa-users","advanced-widget-badge"],[1,"key"],[1,"value"],[1,"value","text-info"],[1,"value","text-success"],[1,"value","text-warning"],[1,"last-tr"],[1,"fa","fa-2x","fa-chart-bar","advanced-widget-badge"],["id","online_chart_container"],[1,"row","row-eq-height","top-buffer"],[1,"fa","fa-2x","fa-dollar-sign","advanced-widget-badge"],[1,"fa","fa-2x","fa-laptop-medical","advanced-widget-badge"],[1,"value",3,"ngClass"],[1,"row","top-buffer"],[1,"col-md-4","col-sm-12"],[1,"fa","fa-2x","fa-robot","advanced-widget-badge"],[1,"fa","fa-2x","fa-microchip","advanced-widget-badge"],[1,"fa","fa-2x","fa-hdd","advanced-widget-badge"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"h5",4),n._uU(5),n.qZA(),n._UZ(6,"i",5),n.TgZ(7,"table"),n.TgZ(8,"tr"),n.TgZ(9,"td",6),n._uU(10),n.qZA(),n.TgZ(11,"td",7),n._uU(12),n.ALo(13,"number"),n.qZA(),n.qZA(),n.TgZ(14,"tr"),n.TgZ(15,"td",6),n._uU(16),n.qZA(),n.TgZ(17,"td",8),n._uU(18),n.ALo(19,"number"),n.qZA(),n.qZA(),n.TgZ(20,"tr"),n.TgZ(21,"td",6),n._uU(22),n.qZA(),n.TgZ(23,"td",9),n._uU(24),n.ALo(25,"number"),n.qZA(),n.qZA(),n.TgZ(26,"tr"),n.TgZ(27,"td",6),n._uU(28),n.qZA(),n.TgZ(29,"td",10),n._uU(30),n.ALo(31,"number"),n.qZA(),n.qZA(),n.TgZ(32,"tr"),n.TgZ(33,"td",6),n._uU(34),n.qZA(),n.TgZ(35,"td",7),n._uU(36),n.ALo(37,"number"),n.qZA(),n.qZA(),n.TgZ(38,"tr"),n.TgZ(39,"td",6),n._uU(40),n.qZA(),n.TgZ(41,"td",7),n._uU(42),n.ALo(43,"number"),n.qZA(),n.qZA(),n.TgZ(44,"tr"),n.TgZ(45,"td",6),n._uU(46),n.qZA(),n.TgZ(47,"td",7),n._uU(48),n.ALo(49,"number"),n.qZA(),n.qZA(),n.TgZ(50,"tr",11),n.TgZ(51,"td",6),n._uU(52),n.qZA(),n.TgZ(53,"td",7),n._uU(54),n.ALo(55,"number"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(56,"div",2),n.TgZ(57,"div",3),n.TgZ(58,"h5",4),n._uU(59),n.qZA(),n._UZ(60,"i",12),n.TgZ(61,"div",13),n._uU(62," Chart is loading... "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(63,"div",14),n.TgZ(64,"div",2),n.TgZ(65,"div",3),n.TgZ(66,"h5",4),n._uU(67),n.qZA(),n._UZ(68,"i",15),n.TgZ(69,"table"),n.TgZ(70,"tr"),n.TgZ(71,"td",6),n._uU(72),n.qZA(),n.TgZ(73,"td",7),n._uU(74),n.qZA(),n.qZA(),n.TgZ(75,"tr"),n.TgZ(76,"td",6),n._uU(77),n.qZA(),n.TgZ(78,"td",7),n._uU(79),n.qZA(),n.qZA(),n.TgZ(80,"tr"),n.TgZ(81,"td",6),n._uU(82),n.qZA(),n.TgZ(83,"td",7),n._uU(84),n.qZA(),n.qZA(),n.TgZ(85,"tr"),n.TgZ(86,"td",6),n._uU(87),n.qZA(),n.TgZ(88,"td",7),n._uU(89),n.qZA(),n.qZA(),n.TgZ(90,"tr"),n.TgZ(91,"td",6),n._uU(92),n.qZA(),n.TgZ(93,"td",7),n._uU(94),n.qZA(),n.qZA(),n.TgZ(95,"tr",11),n.TgZ(96,"td",6),n._uU(97),n.qZA(),n.TgZ(98,"td",7),n._uU(99),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(100,"div",2),n.TgZ(101,"div",3),n.TgZ(102,"h5",4),n._uU(103),n.qZA(),n._UZ(104,"i",16),n.TgZ(105,"table"),n.TgZ(106,"tr"),n.TgZ(107,"td",6),n._uU(108),n.qZA(),n.TgZ(109,"td",7),n._uU(110),n.qZA(),n.qZA(),n.TgZ(111,"tr"),n.TgZ(112,"td",6),n._uU(113),n.qZA(),n.TgZ(114,"td",17),n._uU(115),n.qZA(),n.qZA(),n.TgZ(116,"tr"),n.TgZ(117,"td",6),n._uU(118),n.qZA(),n.TgZ(119,"td",17),n._uU(120),n.qZA(),n.qZA(),n.TgZ(121,"tr"),n.TgZ(122,"td",6),n._uU(123),n.qZA(),n.TgZ(124,"td",7),n._uU(125),n.qZA(),n.qZA(),n.TgZ(126,"tr"),n.TgZ(127,"td",6),n._uU(128),n.qZA(),n.TgZ(129,"td",7),n._uU(130),n.qZA(),n.qZA(),n.TgZ(131,"tr",11),n.TgZ(132,"td",6),n._uU(133),n.qZA(),n.TgZ(134,"td",17),n._uU(135),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(136,"div",18),n.TgZ(137,"div",19),n.TgZ(138,"div",3),n.TgZ(139,"h5",4),n._uU(140),n.qZA(),n._UZ(141,"i",20),n._UZ(142,"app-cpu-gauge"),n.qZA(),n.qZA(),n.TgZ(143,"div",19),n.TgZ(144,"div",3),n.TgZ(145,"h5",4),n._uU(146),n.qZA(),n._UZ(147,"i",21),n._UZ(148,"app-memory-gauge"),n.qZA(),n.qZA(),n.TgZ(149,"div",19),n.TgZ(150,"div",3),n.TgZ(151,"h5",4),n._uU(152),n.qZA(),n._UZ(153,"i",22),n._UZ(154,"app-system-disk-gauge"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Oqu(t.tr.translate("aboard_label_subscribers")),n.xp6(5),n.Oqu(t.tr.translate("widget_title_total_users")),n.xp6(2),n.Oqu(n.xi3(13,50,null==t.subscribersData?null:t.subscribersData.total,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_online_users")),n.xp6(2),n.Oqu(n.xi3(19,53,null==t.subscribersData?null:t.subscribersData.online,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_active_users")),n.xp6(2),n.Oqu(n.xi3(25,56,null==t.subscribersData?null:t.subscribersData.active,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_expired_users")),n.xp6(2),n.Oqu(n.xi3(31,59,null==t.subscribersData?null:t.subscribersData.expired,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_expiring_today")),n.xp6(2),n.Oqu(n.xi3(37,62,null==t.subscribersData?null:t.subscribersData.expiring_today,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_about_expire")),n.xp6(2),n.Oqu(n.xi3(43,65,null==t.subscribersData?null:t.subscribersData.expiring_soon,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("widget_title_fup_online")),n.xp6(2),n.Oqu(n.xi3(49,68,null==t.subscribersData?null:t.subscribersData.fup,"1.0-0")),n.xp6(4),n.Oqu(t.tr.translate("menu_managers")),n.xp6(2),n.Oqu(n.xi3(55,71,null==t.subscribersData?null:t.subscribersData.managers,"1.0-0")),n.xp6(5),n.Oqu(t.tr.translate("aboard_label_online_users")),n.xp6(8),n.Oqu(t.tr.translate("aboard_label_finance")),n.xp6(5),n.Oqu(t.tr.translate("widget_title_balance")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.balance),n.xp6(3),n.Oqu(t.tr.translate("widget_title_reward_points")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.reward_points),n.xp6(3),n.Oqu(t.tr.translate("aboard_activations_today")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.activations),n.xp6(3),n.Oqu(t.tr.translate("aboard_registrations_today")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.registrations),n.xp6(3),n.Oqu(t.tr.translate("aboard_outstanding_debts")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.outstanding_debts),n.xp6(3),n.Oqu(t.tr.translate("aboard_outstanding_claims")),n.xp6(2),n.Oqu(null==t.financeData?null:t.financeData.outstanding_claims),n.xp6(4),n.Oqu(t.tr.translate("aboard_label_system_health")),n.xp6(5),n.Oqu(t.tr.translate("aboard_server_uptime")),n.xp6(2),n.Oqu(null==t.systemHealth?null:t.systemHealth.uptime),n.xp6(3),n.Oqu(t.tr.translate("aboard_backup")),n.xp6(1),n.Q6J("ngClass",n.VKq(74,X,(null==t.systemHealth.backup?null:t.systemHealth.backup.indexOf("system disk"))>0)),n.xp6(1),n.Oqu(null==t.systemHealth?null:t.systemHealth.backup),n.xp6(3),n.Oqu(t.tr.translate("aboard_network_status")),n.xp6(1),n.Q6J("ngClass",n.WLB(76,ee,"Internet Reachable"===t.systemHealth.network,"Internet Reachable"!==t.systemHealth.network)),n.xp6(1),n.Oqu(t.systemHealth.network),n.xp6(3),n.Oqu(t.tr.translate("aboard_label_db_time")),n.xp6(2),n.Oqu(t.systemHealth.db_time),n.xp6(3),n.Oqu(t.tr.translate("aboard_label_timezone")),n.xp6(2),n.Oqu(t.systemHealth.timezone),n.xp6(3),n.Oqu(t.tr.translate("aboard_license_status")),n.xp6(1),n.Q6J("ngClass",n.WLB(79,te,"active"==t.systemHealth.license,"active"!=t.systemHealth.license)),n.xp6(1),n.Oqu(null==t.systemHealth?null:t.systemHealth.license),n.xp6(5),n.Oqu(t.tr.translate("aboard_label_cpu")),n.xp6(6),n.Oqu(t.tr.translate("aboard_label_memory")),n.xp6(6),n.Oqu(t.tr.translate("aboard_label_disk")))},directives:[J.mk,E,G,W],pipes:[J.JJ],styles:[".dashboard-container[_ngcontent-%COMP%]{background:#314757;width:100%;height:100%;padding:10px}.advanced-widget[_ngcontent-%COMP%]{background:#263946;border:8px solid #263946;box-shadow:inset 0 0 0 1px rgba(255,255,255,.34);box-sizing:border-box;padding:10px;height:100%}.advanced-widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:rgba(254,254,254,.93);text-transform:uppercase}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.24);height:35px}.advanced-widget[_ngcontent-%COMP%]   .last-tr[_ngcontent-%COMP%]{border-bottom:unset!important}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(45,45,45,.4)}.advanced-widget[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{color:#62b5c7}.advanced-widget-badge[_ngcontent-%COMP%]{color:rgba(255,255,255,.73);position:absolute;right:35px;top:15px}.advanced-widget[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff;font-weight:600;direction:ltr}#online_chart_container[_ngcontent-%COMP%]{max-height:250px}@media (min-width:767px){.top-buffer[_ngcontent-%COMP%]{margin-top:10px}}"]}),e})();function ie(e,t){if(1&e&&n._UZ(0,"app-dashboard-simple-widget",5),2&e){const e=n.oxw(2);n.Q6J("data",e._widgetData)}}function ne(e,t){if(1&e&&n._UZ(0,"app-dashboard-percentage-widget",6),2&e){const e=n.oxw(2);n.Q6J("data",e._widgetData)}}function oe(e,t){if(1&e&&n._UZ(0,"app-dashboard-data-list-widget",6),2&e){const e=n.oxw(2);n.Q6J("data",e._widgetData)}}function se(e,t){if(1&e&&n._UZ(0,"app-dashboard-gauge-widget",6),2&e){const e=n.oxw(2);n.Q6J("data",e._widgetData)}}function re(e,t){if(1&e&&n._UZ(0,"app-dashboard-simple-widget2",6),2&e){const e=n.oxw(2);n.Q6J("data",e._widgetData)}}function le(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",1),n.TgZ(1,"div",2),n.NdJ("click",function(){return n.CHM(e),n.oxw()._clicked()}),n.YNc(2,ie,1,1,"app-dashboard-simple-widget",3),n.YNc(3,ne,1,1,"app-dashboard-percentage-widget",4),n.YNc(4,oe,1,1,"app-dashboard-data-list-widget",4),n.YNc(5,se,1,1,"app-dashboard-gauge-widget",4),n.YNc(6,re,1,1,"app-dashboard-simple-widget2",4),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngSwitch",e._widgetData.type),n.xp6(1),n.Q6J("ngSwitchCase",1),n.xp6(1),n.Q6J("ngSwitchCase",2),n.xp6(1),n.Q6J("ngSwitchCase",4),n.xp6(1),n.Q6J("ngSwitchCase",5),n.xp6(1),n.Q6J("ngSwitchCase",6)}}let ce=(()=>{class e{constructor(){this.click=new n.vpe,this._widgetData=null}ngOnChanges(){this._widgetData=this.widget}ngOnInit(){}_clicked(){this.click.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-widget"]],inputs:{widget:"widget"},outputs:{click:"click"},features:[n.TTD],decls:1,vars:1,consts:[["class","full-height",4,"ngIf"],[1,"full-height"],[1,"full-height",3,"ngSwitch","click"],["class","full-height",3,"data",4,"ngSwitchCase"],[3,"data",4,"ngSwitchCase"],[1,"full-height",3,"data"],[3,"data"]],template:function(e,t){1&e&&n.YNc(0,le,7,6,"div",0),2&e&&n.Q6J("ngIf",t._widgetData)},styles:[".full-height{height:100%}\n"],encapsulation:2}),e})();function de(e,t){1&e&&(n.TgZ(0,"div",3),n._UZ(1,"i",4),n._uU(2," Your license is about to expire soon.\n"),n.qZA())}function ue(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"strong"),n._uU(2),n.qZA(),n.TgZ(3,"button",6),n.NdJ("click",function(){return n.CHM(e),n.oxw().alert.dismissed=!0}),n.TgZ(4,"span",7),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.Gre("alert alert-",null==e.alert?null:e.alert.type," alert-dismissible fade show text-center"),n.xp6(2),n.Oqu(null==e.alert?null:e.alert.text)}}function pe(e,t){1&e&&n._UZ(0,"app-advanced-dashboard")}function ge(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10),n.TgZ(1,"div",11),n.TgZ(2,"img",12),n.NdJ("error",function(){return n.CHM(e),n.oxw(2).logo_url="assets/img/sas.png"}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.s9C("src",e.logo_url,n.LSH)}}function fe(e,t){if(1&e&&(n.TgZ(0,"div"),n._UZ(1,"app-dashboard-widget",15),n.qZA()),2&e){const e=t.$implicit;n.Gre("widget-component col-md-",e.width," col-sm-12"),n.xp6(1),n.Q6J("widget",e)}}function he(e,t){if(1&e&&(n.TgZ(0,"div",13),n.YNc(1,fe,2,4,"div",14),n.qZA()),2&e){const e=t.$implicit;n.Q6J("id",e.id),n.xp6(1),n.Q6J("ngForOf",e.widgets)}}function me(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,ge,3,1,"div",8),n.YNc(2,he,2,2,"div",9),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf","1"==e.config.siteConfig.site_show_logo),n.xp6(1),n.Q6J("ngForOf",e.dashboard_rows)}}let _e=(()=>{class e{constructor(e,t,a){this.api=e,this.config=t,this.auth=a,this.dashboard_rows=[],this.logo_url="",this.license_about_expire=!1,this.alert={enabled:!1},this.dashboard_id=null,this.load(),this.logo_url=this.config.getApiUrl()+"resources/logo"}load(){this.api.get("dashboard").subscribe(e=>{200===e.status&&(this.dashboard_rows=e.data.widgets,this.alert=e.data.alert,this.alert.dismissed=!1,this.dashboard_id=e.data.id)})}setDefaultLogo(){this.logo_url="assets/img/sas.png"}checkLicenseExpiration(){var e=new Date,t=Date.parse(this.auth.license_expiration),a=e.getTime(),i=Math.abs(t-a);Math.ceil(i/864e5)<4&&(this.license_about_expire=!0)}ngOnInit(){this.checkLicenseExpiration()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(l),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:4,consts:[["class","alert alert-danger",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"fa","fa-exclamation-circle"],["role","alert"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","row d-sm-none d-xs-none d-md-block",4,"ngIf"],["class","row row-flex",3,"id",4,"ngFor","ngForOf"],[1,"row","d-sm-none","d-xs-none","d-md-block"],[1,"col","logo-container","d-none","d-sm-none","d-md-block"],[3,"src","error"],[1,"row","row-flex",3,"id"],[3,"class",4,"ngFor","ngForOf"],[3,"widget"]],template:function(e,t){1&e&&(n.YNc(0,de,3,0,"div",0),n.YNc(1,ue,6,4,"div",1),n.YNc(2,pe,1,0,"app-advanced-dashboard",2),n.YNc(3,me,3,2,"div",2)),2&e&&(n.Q6J("ngIf",!0===t.license_about_expire),n.xp6(1),n.Q6J("ngIf",t.alert&&!0===t.alert.enabled&&!t.alert.dismissed),n.xp6(1),n.Q6J("ngIf",0===t.dashboard_id),n.xp6(1),n.Q6J("ngIf",t.dashboard_id>0))},directives:[J.O5,ae,J.sg,ce],styles:[".widget-component[_ngcontent-%COMP%]{margin-bottom:.5em}.logo-container[_ngcontent-%COMP%]{text-align:center;padding:20px;width:100%}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:500px}"]}),e})();var be=a(45435);function Ze(e,t){1&e&&(n.TgZ(0,"div",2),n._uU(1," License is inactive. Please check your "),n.TgZ(2,"a",3),n._uU(3,"license"),n.qZA(),n._uU(4,".\n"),n.qZA())}function ve(e,t){if(1&e&&(n.TgZ(0,"a",8),n._uU(1),n.qZA()),2&e){const e=n.oxw(2).$implicit;n.Q6J("routerLink",e.url),n.xp6(1),n.Oqu(e.label.title)}}function we(e,t){if(1&e&&(n.TgZ(0,"span",8),n._uU(1),n.qZA()),2&e){const e=n.oxw(2).$implicit;n.Q6J("routerLink",e.url),n.xp6(1),n.Oqu(e.label.title)}}const ye=function(e){return{active:e}};function xe(e,t){if(1&e&&(n.TgZ(0,"li",6),n.YNc(1,ve,2,2,"a",7),n.YNc(2,we,2,2,"span",7),n.qZA()),2&e){const e=n.oxw().last;n.Q6J("ngClass",n.VKq(3,ye,e)),n.xp6(1),n.Q6J("ngIf",!e),n.xp6(1),n.Q6J("ngIf",e)}}function Ae(e,t){if(1&e&&n.YNc(0,xe,3,5,"li",5),2&e){const e=t.$implicit,a=t.last;n.Q6J("ngIf",e.label.title&&"/"==e.url.substring(e.url.length-1)||e.label.title&&a)}}function qe(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,Ae,1,1,"ng-template",4),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.breadcrumbs)}}let Te=(()=>{class e{constructor(e,t,a){this.router=e,this.route=t,this.auth=a,this.router.events.pipe((0,be.h)(e=>e instanceof p.m2)).subscribe(e=>{this.breadcrumbs=[];let t=this.route.root,a="";do{const e=t.children;t=null,e.forEach(e=>{"primary"===e.outlet&&(a+="/"+e.snapshot.url.map(e=>e.path).join("/"),this.breadcrumbs.push({label:e.snapshot.data,url:a}),t=e)})}while(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.F0),n.Y36(p.gz),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-breadcrumbs"]],decls:2,vars:2,consts:[["style","width: 100%; background-color: #ffdbd1; padding: 10px;",4,"ngIf"],[4,"ngIf"],[2,"width","100%","background-color","#ffdbd1","padding","10px"],["href","#/settings/license"],["ngFor","",3,"ngForOf"],["class","breadcrumb-item",3,"ngClass",4,"ngIf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"routerLink"]],template:function(e,t){1&e&&(n.YNc(0,Ze,5,0,"div",0),n.YNc(1,qe,2,1,"div",1)),2&e&&(n.Q6J("ngIf",1!=t.auth.license_status&&t.auth.has("prm_managers_sysadmin")),n.xp6(1),n.Q6J("ngIf",1==t.auth.license_status))},directives:[J.O5,J.sg,J.mk,p.yS,p.rH],encapsulation:2}),e})(),Ce=(()=>{class e{constructor(e){this.translator=e}transform(e){return this.translator.translate(e)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M,16))},e.\u0275pipe=n.Yjl({name:"translate",type:e,pure:!0}),e})();function ke(e,t){1&e&&n._UZ(0,"li",5)}function Ue(e,t){if(1&e&&n._UZ(0,"app-sidebar-nav-title",6),2&e){const e=n.oxw().$implicit;n.Q6J("title",e)}}function Me(e,t){if(1&e&&n._UZ(0,"app-sidebar-nav-item",7),2&e){const e=n.oxw().$implicit;n.Q6J("item",e)}}function Fe(e,t){if(1&e&&(n.YNc(0,ke,1,0,"li",3),n.YNc(1,Ue,1,1,"ng-template",4),n.YNc(2,Me,1,1,"ng-template",4)),2&e){const e=t.$implicit,a=n.oxw();n.Q6J("ngIf",a.isDivider(e)),n.xp6(1),n.Q6J("ngIf",a.isTitle(e)),n.xp6(1),n.Q6J("ngIf",!a.isDivider(e)&&!a.isTitle(e))}}function Je(e,t){if(1&e&&(n.TgZ(0,"li",2),n._UZ(1,"app-sidebar-nav-link",3),n.qZA()),2&e){const e=n.oxw();n.Q6J("ngClass",e.hasClass()?"nav-item "+e.item.class:"nav-item"),n.xp6(1),n.Q6J("link",e.item)}}function Oe(e,t){if(1&e&&(n.TgZ(0,"li",4),n._UZ(1,"app-sidebar-nav-dropdown",3),n.qZA()),2&e){const e=n.oxw();n.ekj("open",e.isActive()),n.Q6J("ngClass",e.hasClass()?"nav-item nav-dropdown "+e.item.class:"nav-item nav-dropdown"),n.xp6(1),n.Q6J("link",e.item)}}function Ne(e,t){if(1&e&&n._UZ(0,"i"),2&e){const e=n.oxw(2);n.Tol(e.link.icon)}}function Ie(e,t){if(1&e&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.Q6J("ngClass","badge badge-"+e.link.badge.variant),n.xp6(1),n.Oqu(e.link.badge.text)}}const Ye=function(e){return[e]},Qe=function(){return{}};function Se(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",2),n.NdJ("click",function(){return n.CHM(e),n.oxw().hideMobile()}),n.YNc(1,Ne,1,3,"i",3),n._uU(2),n.ALo(3,"translate"),n.YNc(4,Ie,2,2,"span",4),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngClass",e.hasVariant()?"nav-link nav-link-"+e.link.variant:"nav-link")("routerLink",n.VKq(8,Ye,e.link.url))("routerLinkActiveOptions",n.DdM(10,Qe)),n.xp6(1),n.Q6J("ngIf",e.isIcon()),n.xp6(1),n.hij(" ",n.lcZ(3,6,e.link.name)," "),n.xp6(2),n.Q6J("ngIf",e.isBadge())}}function Pe(e,t){if(1&e&&n._UZ(0,"i"),2&e){const e=n.oxw(2);n.Tol(e.link.icon)}}function De(e,t){if(1&e&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.Q6J("ngClass","badge badge-"+e.link.badge.variant),n.xp6(1),n.Oqu(e.link.badge.text)}}function He(e,t){if(1&e&&(n.TgZ(0,"a",6),n.YNc(1,Pe,1,3,"i",3),n._uU(2),n.ALo(3,"translate"),n.YNc(4,De,2,2,"span",4),n.qZA()),2&e){const e=n.oxw();n.s9C("href",e.link.url,n.LSH),n.Q6J("ngClass",e.hasVariant()?"nav-link nav-link-"+e.link.variant:"nav-link"),n.xp6(1),n.Q6J("ngIf",e.isIcon()),n.xp6(1),n.hij(" ",n.lcZ(3,5,e.link.name)," "),n.xp6(2),n.Q6J("ngIf",e.isBadge())}}function Re(e,t){if(1&e&&n._UZ(0,"i"),2&e){const e=n.oxw();n.Tol(e.link.icon)}}function Ve(e,t){if(1&e&&(n.TgZ(0,"span",5),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.Q6J("ngClass","badge badge-"+e.link.badge.variant),n.xp6(1),n.Oqu(e.link.badge.text)}}function Le(e,t){1&e&&n._UZ(0,"app-sidebar-nav-item",6),2&e&&n.Q6J("item",t.$implicit)}let Ee=(()=>{class e{constructor(e,t){this.api=e,this.config=t,this.navigation=[],this.menu_logo_url=null,this.load()}isDivider(e){return!!e.divider}isTitle(e){return!!e.title}ngOnInit(){var e;if((null===(e=this.config.siteConfig)||void 0===e?void 0:e.menu_logo.length)>4){this.menu_logo_url=this.config.getApiUrl()+"resources/menuLogo";const e=document.getElementsByClassName("navbar-brand")[0];console.log(e),e&&document.styleSheets[0].insertRule(".navbar-brand { background-image: url("+this.menu_logo_url+") !important;}",0)}}load(){let e,t=[];this.api.get("resources/menu").subscribe(a=>{let i=a;for(let n of i)if("root"==n.parent){e={name:n.title,url:n.link,icon:n.icon,weight:n.weight};for(let t of i)if("root"!=t.parent&&t.parent==n.name){let a={name:t.title,url:t.link,icon:t.icon};e.children||(e.children=[]),e.children.push(a)}t.push(e)}t.sort(function(e,t){return e.weight<t.weight?-1:1}),this.navigation=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sidebar-nav"]],decls:3,vars:1,consts:[[1,"sidebar-nav"],[1,"nav"],["ngFor","",3,"ngForOf"],["class","nav-divider",4,"ngIf"],[3,"ngIf"],[1,"nav-divider"],[3,"title"],[3,"item"]],template:function(e,t){1&e&&(n.TgZ(0,"nav",0),n.TgZ(1,"ul",1),n.YNc(2,Fe,3,3,"ng-template",2),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngForOf",t.navigation))},directives:function(){return[J.sg,J.O5,x,je,Ke]},encapsulation:2}),e})(),Ke=(()=>{class e{constructor(e){this.router=e}hasClass(){return!!this.item.class}isDropdown(){return!!this.item.children}thisUrl(){return this.item.url}isActive(){return this.router.isActive(this.thisUrl(),!1)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sidebar-nav-item"]],inputs:{item:"item"},decls:3,vars:2,consts:[[3,"ngClass",4,"ngIf","ngIfElse"],["dropdown",""],[3,"ngClass"],[3,"link"],["routerLinkActive","open","appNavDropdown","",3,"ngClass"]],template:function(e,t){if(1&e&&(n.YNc(0,Je,2,2,"li",0),n.YNc(1,Oe,2,4,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.isDropdown())("ngIfElse",e)}},directives:function(){return[J.O5,J.mk,x,Be,p.Od,w,ze]},encapsulation:2}),e})(),Be=(()=>{class e{constructor(){}hasVariant(){return!!this.link.variant}isBadge(){return!!this.link.badge}isExternalLink(){return"http"===this.link.url.substring(0,4)}isIcon(){return!!this.link.icon}hideMobile(){document.body.classList.contains("sidebar-mobile-show")&&document.body.classList.toggle("sidebar-mobile-show")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sidebar-nav-link"]],inputs:{link:"link"},decls:3,vars:2,consts:[["routerLinkActive","active",3,"ngClass","routerLink","routerLinkActiveOptions","click",4,"ngIf","ngIfElse"],["external",""],["routerLinkActive","active",3,"ngClass","routerLink","routerLinkActiveOptions","click"],[3,"class",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","href"]],template:function(e,t){if(1&e&&(n.YNc(0,Se,5,11,"a",0),n.YNc(1,He,5,7,"ng-template",null,1,n.W1O)),2&e){const e=n.MAs(2);n.Q6J("ngIf",!t.isExternalLink())("ngIfElse",e)}},directives:[J.O5,p.yS,p.Od,J.mk],pipes:[Ce],encapsulation:2}),e})(),ze=(()=>{class e{constructor(){}isBadge(){return!!this.link.badge}isIcon(){return!!this.link.icon}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sidebar-nav-dropdown"]],inputs:{link:"link"},decls:7,vars:6,consts:[["appNavDropdownToggle","",1,"nav-link","nav-dropdown-toggle"],[3,"class",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"nav-dropdown-items"],["ngFor","",3,"ngForOf"],[3,"ngClass"],[3,"item"]],template:function(e,t){1&e&&(n.TgZ(0,"a",0),n.YNc(1,Re,1,3,"i",1),n._uU(2),n.ALo(3,"translate"),n.YNc(4,Ve,2,2,"span",2),n.qZA(),n.TgZ(5,"ul",3),n.YNc(6,Le,1,1,"ng-template",4),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.isIcon()),n.xp6(1),n.hij(" ",n.lcZ(3,4,t.link.name)," "),n.xp6(2),n.Q6J("ngIf",t.isBadge()),n.xp6(2),n.Q6J("ngForOf",t.link.children))},directives:[y,J.O5,J.sg,J.mk,x,Ke],pipes:[Ce],encapsulation:2}),e})(),je=(()=>{class e{constructor(e,t){this.el=e,this.renderer=t}ngOnInit(){const e=this.el.nativeElement,t=this.renderer.createElement("li"),a=this.renderer.createText(this.title.name);if(this.renderer.addClass(t,"nav-title"),this.title.class&&this.renderer.addClass(t,this.title.class),this.title.wrapper){const e=this.renderer.createElement(this.title.wrapper.element);this.renderer.appendChild(e,a),this.renderer.appendChild(t,e)}else this.renderer.appendChild(t,a);this.renderer.appendChild(e,t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq),n.Y36(n.Qsj))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sidebar-nav-title"]],inputs:{title:"title"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})(),Ge=(()=>{class e{prompt(e,t){return t||(t=""),this.response=new d.y(a=>{swal({title:e,input:"text",showCancelButton:!0,confirmButtonText:"Ok",allowOutsideClick:!1,animation:!1,inputValue:t}).then(function(e){a.next(e),a.complete()},function(){a.complete()})}),this.response}confirm(e){return this.response=new d.y(t=>{swal({title:e.title,text:e.text,type:e.type,showCancelButton:!0,animation:!1,confirmButtonText:e.confirmButtonText||"Ok"}).then(function(){t.next("ok"),t.complete()},function(){t.complete()})}),this.response}alert(e){swal(e.title||"",e.text,e.type||"default")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var We=a(63301);let $e=(()=>{class e{constructor(){this.data=[],this.container="",this.onNodeSelected=new n.vpe,this.selectedNode=null,this.tree=null}ngOnInit(){}init_tree(){const e=this;jQuery(this.container).jstree(),void 0!==jQuery(this.container).jstree().destroy&&(console.log("destroying a tree"),jQuery(this.container).jstree().destroy()),jQuery(this.container).jstree({plugins:["search","types"],core:{multiple:!1,data:this.data,check_callback:!0}}).on("changed.jstree",function(t,a){e.selectedNode=a.selected[0],e.onNodeSelected.emit(a.selected[0])}),this.tree=jQuery(this.container).jstree(!0)}ngOnChanges(){this.init_tree()}getSelectedNode(){return this.tree.get_node(this.selectedNode)}addNode(e){let t=this.tree.create_node(e.parent,e,"last");return t||(this.tree.create_node("#",{id:e.parent,text:e.parent,type:"folder",state:{opened:!0}},"last"),t=this.tree.create_node(e.parent,e,"last")),t}deleteNode(e){return this.tree.delete_node(e)}getAllNodes(){return this.tree.get_json("#",{flat:!0})}search(e){this.tree.search(e)}ngAfterViewChecked(){null!==this.tree&&void 0!==this.tree.search||this.init_tree()}destroyTree(){delete this.tree,this.tree=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["js-tree"]],inputs:{data:"data",container:"container"},outputs:{onNodeSelected:"onNodeSelected"},features:[n.TTD],decls:1,vars:0,consts:[["id","my_tree"]],template:function(e,t){1&e&&n._UZ(0,"div",0)},encapsulation:2}),e})();var Xe=a(17238);const et=["data_table"],tt=["advancedFilter"];function at(e,t){if(1&e&&(n.TgZ(0,"span",39),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.lnq(" \xa0\xa0\xa0\xa0| ",e.tr.translate("global_table_label_found")," ",e.dataTable.totalItems," \xa0",e.tr.translate("global_table_label_records")," ")}}function it(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",40),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw()._onCustomHeaderAction(t.action)}),n.TgZ(1,"span",12),n._UZ(2,"i"),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Tol(e.icon)}}function nt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li"),n.TgZ(1,"div",43),n.TgZ(2,"div",44),n.TgZ(3,"input",45),n.NdJ("change",function(){const t=n.CHM(e).$implicit;return n.oxw(2).toggleColumn(t.dataKey)}),n.qZA(),n.TgZ(4,"label",46),n._uU(5),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(3),n.MGl("id","column_selector_",e.dataKey,""),n.Q6J("checked",!e.hidden),n.xp6(1),n.MGl("for","column_selector_",e.dataKey,""),n.xp6(1),n.Oqu(e.label)}}function ot(e,t){if(1&e&&(n.TgZ(0,"ul",41),n.YNc(1,nt,6,4,"li",42),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.modelViewConfig.columns)}}function st(e,t){1&e&&n._UZ(0,"i",47)}function rt(e,t){1&e&&n._UZ(0,"i",48)}function lt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ul",49),n.TgZ(1,"li"),n.TgZ(2,"div",50),n.NdJ("click",function(){return n.CHM(e),n.oxw().setRefresh(0)}),n._UZ(3,"i",47),n._uU(4," No Refresh "),n.qZA(),n.qZA(),n.TgZ(5,"li"),n.TgZ(6,"div",50),n.NdJ("click",function(){return n.CHM(e),n.oxw().setRefresh(5)}),n._UZ(7,"i",51),n._uU(8," 5 secs "),n.qZA(),n.qZA(),n.TgZ(9,"li"),n.TgZ(10,"div",50),n.NdJ("click",function(){return n.CHM(e),n.oxw().setRefresh(10)}),n._UZ(11,"i",51),n._uU(12," 10 secs "),n.qZA(),n.qZA(),n.TgZ(13,"li"),n.TgZ(14,"div",50),n.NdJ("click",function(){return n.CHM(e),n.oxw().setRefresh(20)}),n._UZ(15,"i",51),n._uU(16," 20 secs "),n.qZA(),n.qZA(),n.qZA()}}function ct(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",52),n.NdJ("click",function(){return n.CHM(e),n.oxw().toggleAdvancedFilter()}),n.TgZ(1,"span",12),n._UZ(2,"i",53),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.s9C("pTooltip",e.tr.translate("table_show_hide_filter"))}}function dt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",54),n.NdJ("click",function(){return n.CHM(e),n.oxw().export()}),n.TgZ(1,"span",12),n._UZ(2,"i",55),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.s9C("pTooltip",e.tr.translate("table_export_data"))}}function ut(e,t){if(1&e&&n._UZ(0,"i"),2&e){const e=n.oxw(2).$implicit;n.Tol(e.icon)}}function pt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",66),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw(3).fire_action(t.name)}),n.YNc(1,ut,1,3,"i",67),n._uU(2),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw(3);n.Q6J("hidden",e.acl&&!t.auth.has(e.acl)),n.xp6(1),n.Q6J("ngIf",e.icon),n.xp6(1),n.hij("\xa0 ",e.label," ")}}const gt=function(e,t){return{"divider dropdown-divider":e,"action-disabled":t}};function ft(e,t){if(1&e&&(n.TgZ(0,"li",64),n.YNc(1,pt,3,3,"a",65),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(3);n.Q6J("ngClass",n.WLB(2,gt,e.type&&"separator"==e.type,e.requiresRow&&!a.currentRow&&!(e.multipleRows&&a.selectedRows().length>0))),n.xp6(1),n.Q6J("ngIf",!e.type||"separator"!=e.type)}}function ht(e,t){if(1&e&&(n.TgZ(0,"ul",62),n.YNc(1,ft,2,5,"li",63),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",e.modelViewConfig.actions)}}function mt(e,t){if(1&e&&(n.TgZ(0,"div",56),n.TgZ(1,"div",57),n.TgZ(2,"button",58),n._UZ(3,"i",59),n._uU(4),n._UZ(5,"span",60),n.qZA(),n.YNc(6,ht,2,1,"ul",61),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.hij(" ",e.tr.translate("global_table_actions")," ")}}function _t(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",68),n.TgZ(1,"i",23),n.NdJ("click",function(){return n.CHM(e),n.oxw().reload()}),n.qZA(),n.qZA()}}function bt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"data-table",71,72),n.NdJ("dataLoaded",function(){return n.CHM(e),n.oxw(2).fire_onDataLoaded()})("dataLoading",function(){return n.CHM(e),n.oxw(2).fire_onDataLoading()})("onCellClicked",function(t){return n.CHM(e),n.oxw(2).fire_cellClicked(t)})("onCellMiddleClicked",function(t){return n.CHM(e),n.oxw(2).fire_cellMiddleClicked(t)})("onRowSelected",function(t){return n.CHM(e),n.oxw(2).fire_rowSelected(t)})("onAction",function(t){return n.CHM(e),n.oxw(2).fire_action(t)})("networkError",function(){return n.CHM(e),n.oxw(2).fire_networkError()})("onUrlFilterChanged",function(t){return n.CHM(e),n.oxw(2).fire_dataTableUrlChanged(t)})("onAdvancedFilterLoadedFromUrl",function(t){return n.CHM(e),n.oxw(2).fire_advancedTableLoadedFromUrl(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("tableConfig",e.tableConfig)}}function Zt(e,t){if(1&e&&(n.TgZ(0,"div",69),n.YNc(1,bt,2,1,"data-table",70),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.tableConfig)}}function vt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"advanced-filter",73,74),n.NdJ("changed",function(t){return n.CHM(e),n.oxw().onAdvancedFilterChanged(t)})("close",function(){return n.CHM(e),n.oxw().toggleAdvancedFilter()}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("fields",e.advancedFilterFields)("options",e.advancedFilterOptions)}}class wt{constructor(e,t,a){this.auth=e,this.tr=t,this.ch=a,this.advancedFilterFields=[],this.advancedFilterOptions={},this.onDataLoading=new n.vpe,this.onDataLoaded=new n.vpe,this.onCellClicked=new n.vpe,this.onCellMiddleClicked=new n.vpe,this.onAction=new n.vpe,this.onRowSelected=new n.vpe,this.currentRow=null,this.searchKeyword=null,this.loading=!1,this.advancedFilterVisible=!1,this.rowsCount=0,this.timerHook=null,this.refreshInterval=0}ngOnInit(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()})}ngOnChanges(){let e={columns:this.modelViewConfig.columns,dataUrl:this.modelViewConfig.dataUrl,rowsPerPage:this.modelViewConfig.rowsPerPage||10,page:this.modelViewConfig.page||1,primaryKey:this.modelViewConfig.primaryKey||"id",allowSelect:this.modelViewConfig.allowSelect||!1,allowMultipleSelect:this.modelViewConfig.allowMultipleSelect||!1,hasInlineActions:this.modelViewConfig.hasInlineActions||!1,actions:this.modelViewConfig.actions||null,sortBy:this.modelViewConfig.sortBy||null,direction:this.modelViewConfig.direction||"asc",useUrlFilter:this.modelViewConfig.useUrlFilter||!1};e.useUrlFilter=!1!==this.modelViewConfig.useUrlFilter,this.tableConfig=e,this.modelViewConfig.showAdvancedFilter&&!0===this.modelViewConfig.showAdvancedFilter&&(this.advancedFilterVisible=!0),this.loadLocalConfig()}fire_action(e){for(let t of this.tableConfig.actions)if(t.name==e&&t.requiresRow&&!this.currentRow)return;this.onAction.emit({action:e,row:this.currentRow})}fire_rowSelected(e){this.currentRow=e,this.onRowSelected.emit(e)}fire_cellClicked(e){this.onCellClicked.emit(e)}fire_cellMiddleClicked(e){this.onCellMiddleClicked.emit(e)}reload(){this.dataTable.load()}toggleColumn(e){let t=0,a=this.tableConfig.columns.slice();for(let i of a){if(i.dataKey==e){let e=!1;a[t].hidden&&!0===a[t].hidden&&(e=!0),a[t].hidden=!e}t++}this.updateLocalConfig(),this.reload()}fire_onDataLoading(){this.onDataLoading.emit(!0),this.loading=!0,this.blockUI.start("loading...")}fire_onDataLoaded(){this.onDataLoaded.emit(!0),this.loading=!1,this.blockUI.stop()}fire_networkError(){this.blockUI.stop(),this.loading=!1}fire_dataTableUrlChanged(e){e.search&&e.search.length>0&&(this.searchKeyword=e.search)}selectedRows(){return this.dataTable.selectedRows()}onAdvancedFilterChanged(e){this.dataTable.setAdvancedFilter(e),this.ch.isMobileDevice()&&this.toggleAdvancedFilter()}toggleAdvancedFilter(){this.advancedFilterVisible=!this.advancedFilterVisible}updateLocalConfig(){this.modelViewConfig.id&&localStorage.setItem(this.modelViewConfig.id+"_columns",JSON.stringify(this.tableConfig.columns))}loadLocalConfig(){if(this.modelViewConfig.id){let e=this.modelViewConfig.id;if(localStorage.getItem(e+"_columns")){let t=localStorage.getItem(e+"_columns"),a=JSON.parse(t);for(let e of a)if(e.hidden||!1===e.hidden)for(let t=0;t<this.modelViewConfig.columns.length;t++)this.modelViewConfig.columns[t].dataKey==e.dataKey&&(this.modelViewConfig.columns[t].hidden=e.hidden)}}}setRefresh(e){this.refreshInterval=1e3*e,(0===e||null!=this.timerHook)&&clearInterval(this.timerHook),this.refreshInterval>1e3&&(this.timerHook=setInterval(()=>this.reload(),this.refreshInterval))}export(){let e=!0;!0===this.modelViewConfig.exportPagination&&(e=!1),this.dataTable.export(e)}ngOnDestroy(){clearInterval(this.timerHook)}_onCustomHeaderAction(e){this.onAction.emit({action:e,row:null})}setAdvancedFilter(e){this.advancedFilter.dynamicForm.setFormValue(e)}fire_advancedTableLoadedFromUrl(e){const t=Object.keys(e);let a=[];t.map(t=>{a[t]=e[t]}),setTimeout((function(){this.advancedFilter.dynamicForm.setFormValue(a)}).bind(this),1e3)}}wt.\u0275fac=function(e){return new(e||wt)(n.Y36(_),n.Y36(M),n.Y36(m))},wt.\u0275cmp=n.Xpm({type:wt,selectors:[["model-table-view"]],viewQuery:function(e,t){if(1&e&&(n.Gf(et,5),n.Gf(tt,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.dataTable=e.first),n.iGM(e=n.CRH())&&(t.advancedFilter=e.first)}},inputs:{modelViewConfig:"modelViewConfig",advancedFilterFields:"advancedFilterFields",advancedFilterOptions:"advancedFilterOptions"},outputs:{onDataLoading:"onDataLoading",onDataLoaded:"onDataLoaded",onCellClicked:"onCellClicked",onCellMiddleClicked:"onCellMiddleClicked",onAction:"onAction",onRowSelected:"onRowSelected"},features:[n.TTD],decls:44,vars:25,consts:[[1,"row"],[1,"col"],[1,"card"],[1,"card-header",3,"hidden"],["class","header-rows-count d-none d-sm-none d-md-inline d-lg-inline",4,"ngIf"],[1,"card-actions","columns-switcher"],[3,"click",4,"ngFor","ngForOf"],["dropdown",""],["dropdownToggle","",1,"text-muted",3,"pTooltip"],[1,"fa","fa-list"],["id","table-fields-menu","class","table-fields-menu dropdown-menu hold-on-click","role","menu","style","margin-right: 100px;",4,"dropdownMenu"],[3,"hidden"],[1,"text-muted"],[1,"fa","fa-cog","fa-spin"],["dropdown","",1,"d-none","d-sm-none","d-md-block"],[1,"fa","fa-stopwatch"],["class","fa fa-pause",4,"ngIf"],["class","fa fa-play blink",4,"ngIf"],["id","table-refresh-selector","class","dropdown-menu","role","menu","style","margin-right: 100px;",4,"dropdownMenu"],["class","d-md-block",3,"pTooltip","click",4,"ngIf"],["class","d-none d-sm-none d-md-block",3,"pTooltip","click",4,"ngIf"],["tooltip","reload data",3,"hidden","pTooltip"],[1,"text-muted",2,"cursor","pointer"],[1,"fa","fa-sync",3,"click"],[1,"card-body"],[1,"row","justify-content-end","toolbar-row"],["class","col-md-auto col-xs-12 table-toolbar",4,"ngIf"],[1,"col-md-auto","ml-auto","table-toolbar",3,"hidden"],[1,"form-group","pull-right"],[1,"input-group"],["type","text","id","search","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fa","fa-search"],["class","input-group-addon text-muted","style","cursor: pointer;",4,"ngIf"],["class","col-12",4,"blockUI"],[1,"advanced-filter-container","row","justify-content-end",3,"hidden"],[1,"col","col-md-4","col-sm-6","col-xs-12","align-self-end",2,"height","100%","min-height","100%"],["id","advancedFilter","style","height:100%;",3,"fields","options","changed","close",4,"ngIf"],[1,"header-rows-count","d-none","d-sm-none","d-md-inline","d-lg-inline"],[3,"click"],["id","table-fields-menu","role","menu",1,"table-fields-menu","dropdown-menu","hold-on-click",2,"margin-right","100px"],[4,"ngFor","ngForOf"],[1,"dropdown-item","dropdown-item-small",2,"text-align","left"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"],[1,"fa","fa-pause"],[1,"fa","fa-play","blink"],["id","table-refresh-selector","role","menu",1,"dropdown-menu",2,"margin-right","100px"],[1,"dropdown-item",3,"click"],[1,"fa","fa-clock"],[1,"d-md-block",3,"pTooltip","click"],[1,"fa","fa-filter"],[1,"d-none","d-sm-none","d-md-block",3,"pTooltip","click"],[1,"fa","fa-file-export"],[1,"col-md-auto","col-xs-12","table-toolbar"],["dropdown","",1,"btn-group","model-action-btn-group"],["dropdownToggle","","type","button",1,"btn","btn-primary","dropdown-toggle","actions-button"],[1,"fa","fa-wrench"],[1,"caret"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","dropdown-item",3,"hidden","click",4,"ngIf"],[1,"dropdown-item",3,"hidden","click"],[3,"class",4,"ngIf"],[1,"input-group-addon","text-muted",2,"cursor","pointer"],[1,"col-12"],["name","data_table",3,"tableConfig","dataLoaded","dataLoading","onCellClicked","onCellMiddleClicked","onRowSelected","onAction","networkError","onUrlFilterChanged","onAdvancedFilterLoadedFromUrl",4,"ngIf"],["name","data_table",3,"tableConfig","dataLoaded","dataLoading","onCellClicked","onCellMiddleClicked","onRowSelected","onAction","networkError","onUrlFilterChanged","onAdvancedFilterLoadedFromUrl"],["data_table",""],["id","advancedFilter",2,"height","100%",3,"fields","options","changed","close"],["advancedFilter",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i"),n._uU(5),n.YNc(6,at,2,3,"span",4),n.TgZ(7,"div",5),n.YNc(8,it,3,3,"a",6),n.TgZ(9,"a",7),n.TgZ(10,"span",8),n._UZ(11,"i",9),n.qZA(),n.YNc(12,ot,2,1,"ul",10),n.qZA(),n.TgZ(13,"a",11),n.TgZ(14,"span",12),n._UZ(15,"i",13),n.qZA(),n.qZA(),n.TgZ(16,"a",14),n.TgZ(17,"span",8),n._UZ(18,"i",15),n._uU(19,"\xa0 "),n.YNc(20,st,1,0,"i",16),n.YNc(21,rt,1,0,"i",17),n.qZA(),n.YNc(22,lt,17,0,"ul",18),n.qZA(),n.YNc(23,ct,3,1,"a",19),n.YNc(24,dt,3,1,"a",20),n.TgZ(25,"a",21),n.TgZ(26,"span",22),n.TgZ(27,"i",23),n.NdJ("click",function(){return t.reload()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",24),n.TgZ(29,"div",25),n.YNc(30,mt,7,1,"div",26),n.TgZ(31,"div",27),n.TgZ(32,"div",28),n.TgZ(33,"div",29),n.TgZ(34,"input",30),n.NdJ("ngModelChange",function(e){return t.searchKeyword=e})("keydown.enter",function(){return t.dataTable.search(t.searchKeyword)}),n.qZA(),n.TgZ(35,"div",31),n.TgZ(36,"span",32),n.NdJ("click",function(){return t.dataTable.search(t.searchKeyword)}),n._UZ(37,"i",33),n.qZA(),n.qZA(),n.YNc(38,_t,2,0,"span",34),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",0),n.YNc(40,Zt,2,1,"div",35),n.qZA(),n.qZA(),n.qZA(),n.TgZ(41,"div",36),n.TgZ(42,"div",37),n.YNc(43,vt,2,2,"advanced-filter",38),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Q6J("hidden",!1===t.modelViewConfig.hasHeader),n.xp6(1),n.Tol(t.modelViewConfig.icon),n.xp6(1),n.hij(" ",t.modelViewConfig.title," "),n.xp6(1),n.Q6J("ngIf",(null==t.modelViewConfig?null:t.modelViewConfig.showRowsCount)&&!0===(null==t.modelViewConfig?null:t.modelViewConfig.showRowsCount)&&(null==t.dataTable?null:t.dataTable.totalItems)),n.xp6(2),n.Q6J("ngForOf",t.modelViewConfig.headerActions),n.xp6(2),n.s9C("pTooltip",t.tr.translate("table_show_hide_columns")),n.xp6(3),n.Q6J("hidden",!t.loading),n.xp6(4),n.s9C("pTooltip",t.tr.translate("table_toggle_refresh_timer")),n.xp6(3),n.Q6J("ngIf",0==t.refreshInterval),n.xp6(1),n.Q6J("ngIf",t.refreshInterval>0),n.xp6(2),n.Q6J("ngIf",!0===t.modelViewConfig.hasAdvancedFilter),n.xp6(1),n.Q6J("ngIf",!0===t.modelViewConfig.allowExport),n.xp6(1),n.s9C("pTooltip",t.tr.translate("table_reload")),n.Q6J("hidden",t.loading),n.xp6(5),n.Q6J("ngIf",t.modelViewConfig.actions),n.xp6(1),n.Q6J("hidden",!t.modelViewConfig.showSearchBox),n.xp6(3),n.s9C("placeholder",t.tr.translate("placeholder_search")),n.Q6J("ngModel",t.searchKeyword),n.xp6(4),n.Q6J("ngIf",!1===t.modelViewConfig.hasHeader),n.xp6(2),n.Q6J("blockUI","data-table"),n.xp6(1),n.Q6J("hidden",!t.advancedFilterVisible)("@enterAnimation",void 0),n.xp6(2),n.Q6J("ngIf",t.advancedFilterFields.length>0))},styles:[".action-disabled{color:#e3e8ec;cursor:not-allowed}.dropdown-item{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dropdown-item .action-disabled{cursor:not-allowed}.actions-button{min-width:120px}.card-actions .text-muted{cursor:pointer}.advanced-filter-container{position:absolute;top:0px;width:100%;height:100%;z-index:99;pointer-events:none}.dropdown-item-small{padding-top:2px!important;padding-bottom:2px!important}.header-rows-count{font-size:smaller}.columns-switcher .custom-control{min-height:1.1rem}label{margin-bottom:0!important}.model-action-btn-group{width:100%}.p-sidebar-content{height:100%;width:100%}\n"],encapsulation:2,data:{animation:[(0,Xe.X$)("enterAnimation",[(0,Xe.eR)(":enter",[(0,Xe.oB)({transform:"translateX(100%)",opacity:1}),(0,Xe.jt)("200ms",(0,Xe.oB)({transform:"translateX(0)",opacity:0}))]),(0,Xe.eR)(":leave",[(0,Xe.oB)({transform:"translateX(0)",opacity:0}),(0,Xe.jt)("200ms",(0,Xe.oB)({transform:"translateX(100%)",opacity:1}))])])]}}),(0,c.gn)([(0,u.bH)()],wt.prototype,"blockUI",void 0);var yt=a(36949);const xt=["acl_model_view"],At=["availablePermissionsTree"],qt=["givenPermissionsTree"],Tt=["dashboard_modal"],Ct=["restriction_modal"];function kt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",26,27),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().actionFired(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1})("onRowSelected",function(t){return n.CHM(e),n.oxw().onAclGroupSelected(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}function Ut(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().onSavePermissions()}),n._UZ(1,"i",29),n.qZA()}}function Mt(e,t){if(1&e&&(n.TgZ(0,"option",43),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Ft(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",30),n.TgZ(1,"h4",31),n._uU(2,"Set Group Dashboard"),n.qZA(),n.TgZ(3,"button",32),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",33),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",34),n.TgZ(7,"form",35),n.TgZ(8,"div",36),n.TgZ(9,"label"),n._uU(10,"Select Dashboard"),n.qZA(),n.TgZ(11,"select",37),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().selected_dashboard=t}),n.YNc(12,Mt,2,2,"option",38),n.qZA(),n.TgZ(13,"small",39),n._uU(14,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",40),n.TgZ(16,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(17,"Close"),n.qZA(),n.TgZ(18,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw().setDashboard()}),n._uU(19,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(11),n.Q6J("ngModel",e.selected_dashboard),n.xp6(1),n.Q6J("ngForOf",e.dashboard_list),n.xp6(6),n.Q6J("disabled",!e.selected_dashboard)}}function Jt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",30),n.TgZ(1,"h4",31),n._uU(2,"Restrict Group"),n.qZA(),n.TgZ(3,"button",32),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",33),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",34),n.TgZ(7,"form",35),n.TgZ(8,"div",36),n.TgZ(9,"label"),n._uU(10,"Restrict Usage To Only Following Managers"),n.qZA(),n.TgZ(11,"div",44),n.TgZ(12,"div",45),n.TgZ(13,"p-multiSelect",46),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().selected_managers=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"small",39),n._uU(15,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",40),n.TgZ(17,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(18,"Close"),n.qZA(),n.TgZ(19,"button",47),n.NdJ("click",function(){return n.CHM(e),n.oxw().setRestriction()}),n._uU(20,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(13),n.Q6J("options",e.manager_list)("ngModel",e.selected_managers)("filter",!0)}}class Ot{constructor(e,t,a,i,n,o,s){this.api=e,this.log=t,this.swal=a,this.toastr=i,this.modalService=n,this.translate=o,this.ref=s,this.columns=[{dataKey:"name",label:"Group",class:"href"},{dataKey:"dashboard_name",label:"Dashboard"},{dataKey:"total",label:"Permissions"}],this.actions=[{name:"create",label:"Create",icon:"fa fa-plus"},{name:"copy",label:"Copy",icon:"fa fa-copy",acl:"prm_managers_sysadmin",requiresRow:!0,inline:!0},{name:"",label:"",type:"separator"},{name:"restrict",label:"Restrict To...",icon:"fa fa-users",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"dashboard",label:"Set Dashboard...",icon:"fa fa-tachometer-alt",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"",label:"",type:"separator"},{name:"rename",label:"Rename",icon:"fa fa-edit",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:"Delete",icon:"fa fa-trash",requiresRow:!0,inline:!0,acl:"prm_any"}],this.modelViewConfig=null,this.loading=!1,this.selected_dashboard=null,this.selected_managers=[],this.selectedRow=null,this.availablePermissionsNodes=[],this.givenPermissionsNodes=[],this.deleteButtonEnabled=!1,this.addButtonEnabled=!1,this.removeButtonEnabled=!1,this.saveButtonEnabled=!1,this.dashboard_list=[],this.manager_list=[],this.selectize_config={highlight:!1,create:!1,persist:!0,plugins:["dropdown_direction","remove_button"],dropdownDirection:"down",labelField:"username",valueField:"id",maxItems:1e3},this.loadDashboardList(),this.loadManagerList()}create(){this.swal.prompt("Group Name").subscribe(e=>{this.api.post("aclgroup",{name:e}).subscribe(e=>{this.modelView.reload()},e=>{})})}copy(){let e=this.selectedRow;this.swal.prompt("New Group Name").subscribe(t=>{this.api.post("aclgroup/copy",{group_id:e,name:t}).subscribe(e=>{this.modelView.reload()},e=>{})})}rename(){let e=this.selectedRow;this.swal.prompt("New Group Name").subscribe(t=>{this.api.put("aclgroup/"+e,{name:t}).subscribe(e=>{200==e.status&&(this.toastr.success(this.translate.translate(e.message)),this.modelView.reload())})})}setDashboard(){let e=this.selectedRow;e&&this.selected_dashboard&&(this.blockUI.start(),this.api.put("aclgroup/"+e,{dashboard_id:this.selected_dashboard}).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(this.translate.translate(e.message)),this.activeModal.hide(),this.modelView.reload())}))}ngOnInit(){this.modelViewConfig={title:"Security Groups",icon:"fa fa-lock",columns:this.columns,dataUrl:"index/acl",page:1,showSearchBox:!0,rowsPerPage:5,primaryKey:"id",actions:this.actions,allowSelect:!0,allowMultipleSelect:!0,hasInlineActions:!0,id:"acl_table"}}actionFired(e){switch(e.action){case"create":this.create();break;case"rename":this.rename();break;case"dashboard":this.showDashboardSelector();break;case"delete":this.destroy();break;case"restrict":this.showRestrictionModal();break;case"copy":this.copy()}}onAclGroupSelected(e){const t=e.id;this.selectedRow=t,this.showAclGroupPermissions(t),this.showGivenAclGroupPermissions(t)}showAclGroupPermissions(e){this.blockUI.start(),this.api.get("acl/available/"+e).subscribe(e=>{this.blockUI.stop();var t=[],a=[];let i=e.data,n=[];for(let o of i)if(n.indexOf(o.category)<0){let e=o.category;t[e]=[],n.push(o.category),a.push({id:e,text:e,state:{opened:!0},parent:"#",icon:"fa fa-folder font-yellow"})}for(let o of i){t[o.category].push(o.permission);let e={id:o.permission,text:this.translate.translate(o.permission),parent:o.category,icon:"fa fa-eye-slash font-blue"};a.push(e)}this.availablePermissionsNodes=a},e=>{this.blockUI.stop()})}showGivenAclGroupPermissions(e){this.blockUI.start(),this.api.get("acl/given/"+e).subscribe(e=>{this.blockUI.stop();var t=[],a=[];let i=e.data,n=[];for(let o of i)if(n.indexOf(o.acl_item.category)<0){let e=o.acl_item.category;t[e]=[],n.push(o.acl_item.category),a.push({id:e,text:e,state:{opened:!0},parent:"#",icon:"fa fa-folder font-yellow"})}for(let o of i){t[o.acl_item.category].push(o.acl_item.permission);let e={id:o.acl_item.permission,text:this.translate.translate(o.acl_item.permission),parent:o.acl_item.category,icon:"fa fa-eye font-green"};a.push(e)}this.givenPermissionsNodes=a},e=>{this.blockUI.stop()})}onAvailablePermissionsTreeSelected(){"#"!==this.availablePermissionsTree.getSelectedNode().parent&&(this.addButtonEnabled=!0)}onGivenPermissionsTreeSelected(){"#"!==this.givenPermissionsTree.getSelectedNode().parent&&(this.removeButtonEnabled=!0)}onGrandPermission(){let e=this.availablePermissionsTree.getSelectedNode();this.givenPermissionsTree.addNode({parent:e.parent,id:e.id,text:e.text,icon:"fa fa-eye font-blue"}),this.availablePermissionsTree.deleteNode(e.id),this.addButtonEnabled=!1,this.saveButtonEnabled=!0}onRevokePermission(){let e=this.givenPermissionsTree.getSelectedNode();this.availablePermissionsTree.addNode({parent:e.parent,id:e.id,text:e.text,icon:"fa fa-eye font-blue"}),this.givenPermissionsTree.deleteNode(e.id),this.removeButtonEnabled=!1,this.saveButtonEnabled=!0}onSavePermissions(){let e=this.selectedRow,t=this.givenPermissionsTree.getAllNodes(),a=[];for(let i of t)"#"!=i.parent&&a.push(i.id);this.api.post("acl/updateItems/"+e,a).subscribe(e=>{this.saveButtonEnabled=!1,this.addButtonEnabled=!1,this.removeButtonEnabled=!1})}showDashboardSelector(){this.activeModal=this.modalService.show(this.dashboardModal)}loadDashboardList(){this.api.get("dashboardManager").subscribe(e=>{this.dashboard_list=e.data,this.dashboard_list.unshift({id:0,name:"Professional Dashboard"})})}loadManagerList(){this.api.get("index/manager").subscribe(e=>{e.data.map(e=>{this.manager_list.push({value:e.id,label:e.username})})})}destroy(){let e=this.selectedRow;this.swal.confirm({title:"Delete Group",type:"warning",text:"Delete Selected Group ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start(),this.api.delete("aclgroup/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.toastr.success(e.message),this.modelView.reload()):this.toastr.error(e.message)})})}showRestrictionModal(){this.selected_managers=[],this.blockUI.start(),this.api.get("aclgroup/allowedManagers/"+this.selectedRow).subscribe(e=>{this.blockUI.stop(),this.selected_managers=e.data,this.activeModal=this.modalService.show(this.restrictionModal)})}setRestriction(){this.activeModal.hide();let e={group_id:this.selectedRow,managers:this.selected_managers};console.log(e),this.blockUI.start(),this.api.post("acl/restrict",e).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(e.message),this.modelView.reload())})}}Ot.\u0275fac=function(e){return new(e||Ot)(n.Y36(h),n.Y36(f),n.Y36(Ge),n.Y36(g._W),n.Y36(We.tT),n.Y36(M),n.Y36(n.sBO))},Ot.\u0275cmp=n.Xpm({type:Ot,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&(n.Gf(xt,5),n.Gf(At,5),n.Gf(qt,5),n.Gf(Tt,5),n.Gf(Ct,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.availablePermissionsTree=e.first),n.iGM(e=n.CRH())&&(t.givenPermissionsTree=e.first),n.iGM(e=n.CRH())&&(t.dashboardModal=e.first),n.iGM(e=n.CRH())&&(t.restrictionModal=e.first)}},decls:36,vars:8,consts:[[1,"settings-container"],["name","acl_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onRowSelected",4,"ngIf"],[1,"row"],[1,"col-md-12","col-sm-12"],[1,"col-md-5"],[1,"card"],[1,"card-header","card-success"],[1,"fa","fa-user"],[1,"card-body",2,"max-height","400px","overflow-y","auto"],["id","tree1"],[3,"data","container","onNodeSelected"],["givenPermissionsTree",""],[1,"col-md-2"],[1,"row","col-md-12"],[1,"btn","btn-block","btn-primary",2,"margin-top","50px",3,"disabled","click"],[1,"fa","fa-2x","fa-angle-left"],[1,"btn","btn-block"],[1,"btn","btn-block","btn-primary",3,"disabled","click"],[1,"fa","fa-2x","fa-angle-right"],["class","btn btn-block btn-success ",3,"click",4,"ngIf"],[1,"card-header","card-default"],[1,"fa","fa-desktop"],["id","tree2"],["availablePermissionsTree",""],["dashboard_modal",""],["restriction_modal",""],["name","acl_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onRowSelected"],["acl_model_view",""],[1,"btn","btn-block","btn-success",3,"click"],[1,"fa","fa-2x","fa-save"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["id","dashboard_id","name","selected_dashboard",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","manager_list",3,"options","ngModel","filter","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.YNc(1,kt,2,1,"model-table-view",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",2),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n._UZ(8,"i",7),n._uU(9," Given Permissions "),n.qZA(),n.TgZ(10,"div",8),n.TgZ(11,"div",9),n.TgZ(12,"js-tree",10,11),n.NdJ("onNodeSelected",function(){return t.onGivenPermissionsTreeSelected()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",12),n.TgZ(15,"div",13),n.TgZ(16,"button",14),n.NdJ("click",function(){return t.onGrandPermission()}),n._UZ(17,"i",15),n.qZA(),n._UZ(18,"hr",16),n.TgZ(19,"button",17),n.NdJ("click",function(){return t.onRevokePermission()}),n._UZ(20,"i",18),n.qZA(),n._UZ(21,"hr",16),n.YNc(22,Ut,2,0,"button",19),n.qZA(),n.qZA(),n.TgZ(23,"div",4),n.TgZ(24,"div",5),n.TgZ(25,"div",20),n._UZ(26,"i",21),n._uU(27," Available Permissions "),n.qZA(),n.TgZ(28,"div",8),n.TgZ(29,"div",22),n.TgZ(30,"js-tree",10,23),n.NdJ("onNodeSelected",function(){return t.onAvailablePermissionsTreeSelected()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(32,Ft,20,3,"ng-template",null,24,n.W1O),n.YNc(34,Jt,21,3,"ng-template",null,25,n.W1O),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t.modelViewConfig),n.xp6(11),n.Q6J("data",t.givenPermissionsNodes)("container","#tree1"),n.xp6(4),n.Q6J("disabled",!t.addButtonEnabled),n.xp6(3),n.Q6J("disabled",!t.removeButtonEnabled),n.xp6(3),n.Q6J("ngIf",t.saveButtonEnabled),n.xp6(8),n.Q6J("data",t.availablePermissionsNodes)("container","#tree2"))},directives:[J.O5,$e,wt,Z._Y,Z.JL,Z.F,Z.EJ,Z.JJ,Z.On,J.sg,Z.YN,Z.Kr,yt.NU],styles:[""]}),(0,c.gn)([(0,u.bH)()],Ot.prototype,"blockUI",void 0);var Nt=a(92639);const It=function(e){return{"page-link-active":e}};function Yt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",2),n.TgZ(1,"a",3),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().countChanged(t)}),n._uU(2),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(1),n.Q6J("ngClass",n.VKq(2,It,a.count==e)),n.xp6(1),n.Oqu(e)}}let Qt=(()=>{class e{constructor(){this.selectors=[5,10,50,100,500],this.onCountChanged=new n.vpe,this.count=this.selectors[0]}countChanged(e){this.count=e,this.onCountChanged.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["rows-count-selector"]],inputs:{selectors:"selectors",count:"count"},outputs:{onCountChanged:"onCountChanged"},decls:2,vars:1,consts:[[1,"pagination","page-count-component"],["class","page-item",4,"ngFor","ngForOf"],[1,"page-item"],[1,"page-link",3,"ngClass","click"]],template:function(e,t){1&e&&(n.TgZ(0,"ul",0),n.YNc(1,Yt,3,4,"li",1),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngForOf",t.selectors))},directives:[J.sg,J.mk],styles:[".page-count-component[_ngcontent-%COMP%]{cursor:pointer}.page-count-component[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.page-link-active[_ngcontent-%COMP%]{background-color:#c2cfd6;color:#fff!important;font-weight:bold}"]}),e})();var St=a(28220);let Pt=(()=>{class e{constructor(){this.nasList=["generic","Mikrotik","Cisco","Ubiquti AP","Ubiquti EdgeRouter","Nokia"]}transform(e){return this.nasList[e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Yjl({name:"nasname",type:e,pure:!0}),e})(),Dt=(()=>{class e{constructor(e){this.translator=e}transform(e){let t=parseInt(e),a=t,i=t/1024,n=t/1024/1024;return n>=1?(Math.round(100*n)/100).toString()+" Gb/s":i>=1?(Math.round(100*i)/100).toString()+" Mb/s":(Math.round(100*a)/100).toString()+" Kb/s"}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M,16))},e.\u0275pipe=n.Yjl({name:"bitrate",type:e,pure:!0}),e})(),Ht=(()=>{class e{constructor(e){this.translator=e,this.units=["bytes","KB","MB","GB","TB","PB"]}transform(e=0,t=2){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let a="";e<0&&(a="-",e*=-1);let i=0;for(;e>=1024;)e/=1024,i++;let n=a+e.toFixed(+t);return parseFloat(n)<=0?"0 B":n+" "+this.units[i]}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M,16))},e.\u0275pipe=n.Yjl({name:"bytes",type:e,pure:!0}),e})(),Rt=(()=>{class e{constructor(){}transform(e){let t,a=parseInt(e),i=Math.floor(a/60),n=Math.floor(i/60),o=Math.floor(n/24);return o>0?o.toString()+" Day(s)":n>0?(t=n.toString()+"Hour(s)",t):i>0?i.toString()+" Min":a.toString()+" sec"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Yjl({name:"humanizeSeconds",type:e,pure:!0}),e})();var Vt=a(19966);let Lt=(()=>{class e{constructor(e,t,a,i,n,o,s,r){this.currencyPipe=e,this.nasNamePipe=t,this.bitRate=a,this.bytesPipe=i,this.humanSeconds=n,this.timeSince=o,this.tr=s,this.config=r}transform(e,t,a){let i=e;switch(t.pipe||!1){case"currency":i=this.currencyPipe.transform(e,this.config.siteConfig.site_currency+" ");break;case"nasname":i=this.nasNamePipe.transform(e);break;case"bitrate":i=this.bitRate.transform(e);break;case"bytes":i=this.bytesPipe.transform(e);break;case"duration":i=this.humanSeconds.transform(e);break;case"timeSince":i=this.timeSince.transform(e);break;case"translate":i=this.tr.translate(e)}return i}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(J.H9,16),n.Y36(Pt,16),n.Y36(Dt,16),n.Y36(Ht,16),n.Y36(Rt,16),n.Y36(Vt.Ap,16),n.Y36(M,16),n.Y36(l,16))},e.\u0275pipe=n.Yjl({name:"dataTablePipe",type:e,pure:!0}),e})();function Et(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"input",14),n.NdJ("change",function(){return n.CHM(e),n.oxw(2).toggleSelection()})("ngModelChange",function(t){return n.CHM(e),n.oxw(2).toggleSelectAll=t}),n.qZA(),n._UZ(2,"label",15),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.toggleSelectAll)}}function Kt(e,t){if(1&e&&(n.TgZ(0,"th",11),n.YNc(1,Et,3,1,"div",12),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.tableConfig.allowMultipleSelect)}}function Bt(e,t){1&e&&n._UZ(0,"i",19)}function zt(e,t){1&e&&n._UZ(0,"i",20)}function jt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"th",16),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().sortBy(t.sortBy||t.dataKey)}),n.YNc(1,Bt,1,0,"i",17),n.YNc(2,zt,1,0,"i",18),n._uU(3),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.Q6J("hidden",e.hidden),n.xp6(1),n.Q6J("ngIf",a.payload.sortBy==e.dataKey&&"asc"==a.payload.direction),n.xp6(1),n.Q6J("ngIf",a.payload.sortBy==e.dataKey&&"desc"==a.payload.direction),n.xp6(1),n.hij(" ",a.tr.translate(e.label)," ")}}function Gt(e,t){1&e&&n._UZ(0,"th")}function Wt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"input",23),n.NdJ("change",function(){n.CHM(e);const t=n.oxw(2).$implicit,a=n.oxw();return a.toggleCheckbox(t[a.primaryKey])}),n.qZA(),n._UZ(2,"label",24),n.qZA()}if(2&e){const e=n.oxw(2).$implicit,t=n.oxw();n.xp6(1),n.MGl("id","checkrow_",e[t.primaryKey],""),n.Q6J("checked",t._selectedRows.indexOf(e[t.primaryKey])>=0),n.xp6(1),n.MGl("for","checkrow_",e[t.primaryKey],"")}}function $t(e,t){if(1&e&&(n.TgZ(0,"td",11),n.YNc(1,Wt,3,3,"div",12),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngIf",e.tableConfig.allowMultipleSelect)}}function Xt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",28),n.NdJ("click",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)})("auxclick",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)}),n._uU(1),n.ALo(2,"dataTablePipe"),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,a=n.oxw();n.Q6J("ngClass",e.classFn?e.classFn(t):e.class?e.class:""),n.xp6(1),n.hij(" ",n.xi3(2,2,a.resolveICell(e,t),e)," ")}}function ea(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",29),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit,a=n.oxw().$implicit;return n.oxw().fire_cellClicked(a,t)})("auxclick",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)}),n.ALo(1,"dataTablePipe"),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,a=n.oxw();n.Q6J("ngClass",e.classFn?e.classFn(t):e.class?e.class:"")("innerHTML",n.xi3(1,2,a.resolveICell(e,t),e),n.oJD)}}function ta(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",28),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit,a=n.oxw().$implicit;return n.oxw().fire_cellClicked(a,t)})("auxclick",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)}),n._UZ(1,"i"),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,a=n.oxw();n.Q6J("ngClass",e.classFn?e.classFn(t):e.class?e.class:""),n.xp6(1),n.Tol(a.resolveICell(e,t))}}function aa(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",28),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit,a=n.oxw().$implicit;return n.oxw().fire_cellClicked(a,t)})("auxclick",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)}),n._UZ(1,"img",30),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,a=n.oxw();n.Q6J("ngClass",e.classFn?e.classFn(t):e.class?e.class:""),n.xp6(1),n.s9C("src",a.resolveICell(e,t),n.LSH)}}function ia(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",28),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit,a=n.oxw().$implicit;return n.oxw().fire_cellClicked(a,t)})("auxclick",function(t){n.CHM(e);const a=n.oxw().$implicit,i=n.oxw().$implicit;return n.oxw().fire_cellClicked(i,a,t)}),n._UZ(1,"p-progressBar",31),n.qZA()}if(2&e){const e=n.oxw().$implicit,t=n.oxw().$implicit,a=n.oxw();n.Q6J("ngClass",e.classFn?e.classFn(t):e.class?e.class:""),n.xp6(1),n.Q6J("value",a.resolveICell(e,t))}}function na(e,t){if(1&e&&(n.TgZ(0,"td",25),n.YNc(1,Xt,3,5,"span",26),n.YNc(2,ea,2,5,"span",27),n.YNc(3,ta,2,4,"span",26),n.YNc(4,aa,2,2,"span",26),n.YNc(5,ia,2,2,"span",26),n.qZA()),2&e){const e=t.$implicit;n.Q6J("hidden",e.hidden),n.xp6(1),n.Q6J("ngIf",!e.type||"text"==e.type),n.xp6(1),n.Q6J("ngIf","html"==(null==e?null:e.type)),n.xp6(1),n.Q6J("ngIf","icon"==e.type),n.xp6(1),n.Q6J("ngIf","image"==e.type),n.xp6(1),n.Q6J("ngIf","progress"==e.type)}}const oa=function(e){return{"row-selected":e}};function sa(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",21),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().fire_selectRow(t)})("contextmenu",function(){const t=n.CHM(e).$implicit;return n.oxw().fire_selectRow(t)}),n.YNc(1,$t,2,1,"td",2),n.YNc(2,na,6,6,"td",22),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.Q6J("ngClass",n.VKq(5,oa,e[a.primaryKey]==a.selectedRow))("contextMenu",a.basicMenu)("contextMenuSubject",e),n.xp6(1),n.Q6J("ngIf",a.tableConfig.allowMultipleSelect),n.xp6(1),n.Q6J("ngForOf",a.tableConfig.columns)}}function ra(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"ngb-pagination",33),n.NdJ("pageChange",function(t){return n.CHM(e),n.oxw(2).currentPage=t})("pageChange",function(t){return n.CHM(e),n.oxw(2).pageChanged(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("collectionSize",e.totalItems)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)("maxSize",5)("pageSize",e.payload.count)("page",e.currentPage)}}function la(e,t){if(1&e&&(n.TgZ(0,"div",7),n.TgZ(1,"div",8),n.YNc(2,ra,1,7,"ngb-pagination",32),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngIf",e.totalItems)}}function ca(e,t){if(1&e&&n._UZ(0,"i"),2&e){const e=n.oxw(2).$implicit;n.Tol(e.icon)}}function da(e,t){if(1&e&&(n.YNc(0,ca,1,3,"i",36),n._uU(1)),2&e){const e=n.oxw().$implicit;n.Q6J("ngIf",e.icon),n.xp6(1),n.hij("\xa0 ",e.label," ")}}function ua(e,t){if(1&e){const e=n.EpF();n.YNc(0,da,2,2,"ng-template",35),n.NdJ("execute",function(t){const a=n.CHM(e).$implicit;return n.oxw(2).fire_context_action(t.item,a.name)})}if(2&e){const e=t.$implicit,a=n.oxw(2);n.Q6J("visible",e.inline&&1==e.inline&&e.acl&&a.auth.has(e.acl))}}function pa(e,t){if(1&e&&(n.TgZ(0,"context-menu"),n.YNc(1,ua,1,1,void 0,34),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",null==e.tableConfig?null:e.tableConfig.actions)}}class ga{constructor(e,t,a,i,o,s){this.api=e,this.log=t,this.route=a,this.router=i,this.auth=o,this.tr=s,this.onRowSelected=new n.vpe,this.dataLoaded=new n.vpe,this.dataLoading=new n.vpe,this.onCellClicked=new n.vpe,this.onCellMiddleClicked=new n.vpe,this.networkError=new n.vpe,this.onAction=new n.vpe,this.onUrlFilterChanged=new n.vpe(!0),this.onAdvancedFilterLoadedFromUrl=new n.vpe,this.payload={page:1,count:10},this.lastPayload=this.payload,this.rows=[],this.selectedRow=null,this._selectedRows=[],this.primaryKey=null,this.currentPage=null,this.totalItems=0,this.toggleSelectAll=!1,this.advancedFilter={},this.basic_keys=["columns","sortBy","direction","search","page","count","from_date","to_date","date_start","date_end"],this.items=[{name:"John",otherProperty:"Foo"},{name:"Joe",otherProperty:"Bar"}],this.contextMenuItems=[]}load(){this.dataLoading.emit(!0),this.payload.columns=this.visibleColumns(),this.payload.direction||(this.payload.direction="asc"),this.lastPayload=this.payload,this.api.post(this.tableConfig.dataUrl,this.payload).subscribe(e=>{this.rows=e.data,this.totalItems=e.total,this.dataLoaded.emit(!0)},e=>{this.networkError.emit(-1)})}visibleColumns(){let e=[];return this.tableConfig.columns.map(t=>{t.hidden||e.push(t.dataKey)}),e}export(e=!0){this.payload.direction||(this.payload.direction="asc"),this.lastPayload=this.payload;let t={};t=Object.assign(t,this.payload),e&&(t.page=1,t.count=25e4),t.export=!0,this.blockUI.start(),this.api.post(this.tableConfig.dataUrl,t).subscribe(e=>{this.blockUI.stop(),this.payload=this.lastPayload,this.api.downloadFile("storage/tmp/"+e.data,"sas4_export.xlsx")},e=>{this.blockUI.stop(),this.networkError.emit(-1)})}ngOnChanges(){const e=["page","count","direction","soryBy","search"];this.primaryKey=this.tableConfig.primaryKey||"id",null==this.tableConfig.useUrlFilter&&(this.tableConfig.useUrlFilter=!0),this.route.queryParamMap.pipe((0,s.U)(e=>e.params)).subscribe(t=>{if(t&&t.filter){let a=JSON.parse(CryptoJS.AES.decrypt(t.filter,"abcdefghijuklmno0123456789012345").toString(CryptoJS.enc.Utf8));Object.keys(a).map(t=>{-1===e.indexOf(t)&&(this.payload[t]=a[t],this.basic_keys.indexOf(t)<0&&(this.advancedFilter[t]=a[t]))}),this.payload.page=a.page||1,this.payload.count=a.count||10,this.payload.direction=a.direction||"asc",this.payload.sortBy=a.sortBy||null,this.payload.search=a.search||"",this.currentPage=a.page,this.onAdvancedFilterLoadedFromUrl.emit(this.advancedFilter),this.load(),a.search&&a.search.length>0&&this.onUrlFilterChanged.emit(a)}else this.reset_payload(),this.load()}),this.populateContextMenu()}ngOnInit(){}navigate(e){e||(e=this.payload);const t={...e,...this.advancedFilter};let a=CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString();if(!0===this.tableConfig.useUrlFilter)this.router.navigate(["."],{queryParams:{filter:a},relativeTo:this.route});else{const t=e;this.payload.page=t.page||1,this.payload.count=t.count||10,this.payload.direction=t.direction||"asc",this.payload.sortBy=t.sortBy||null,this.payload.search=t.search||"",this.currentPage=t.page,this.load()}}reset_payload(){this.payload.page=this.tableConfig.page?this.tableConfig.page:1,this.payload.count=this.tableConfig.rowsPerPage||10,this.payload.sortBy=this.tableConfig.sortBy||null,this.payload.direction=this.tableConfig.direction||"asc",this.payload.search="",this.currentPage=1}fire_selectRow(e){if(!this.tableConfig.allowSelect)return;let t=this.tableConfig.primaryKey||"id";(!this.selectedRow||this.selectedRow!=e[t])&&(this.onRowSelected.emit(e),this.selectedRow=e[t])}countChanged(e){this.payload.page=1,this.currentPage=1,this.payload.count=e,this.navigate()}pageChanged(e){console.log(e),this.payload.page=e,(!0===this.tableConfig.useUrlFilter&&void 0!==this.route.snapshot.queryParams.filter||e>0)&&this.navigate()}sortBy(e){"none"!==e&&(this.payload.direction=this.lastPayload.direction?"asc"==this.lastPayload.direction?"desc":"asc":"desc",this.payload.sortBy=e,this.navigate())}search(e){this.currentPage=1,this.selectedRow=null,this._selectedRows=[],this.payload.search=e,this.onRowSelected.emit(null),this.navigate()}toggleSelection(){if(this.toggleSelectAll)for(let e of this.rows)this._selectedRows.push(e.id);else this._selectedRows=[]}fire_cellClicked(e,t,a=null){let i={row:e,column:t.dataKey};a&&1===a.button&&this.onCellMiddleClicked.emit(i),a&&0===a.button&&this.onCellClicked.emit(i),a||this.onCellClicked.emit(i)}resolveICell(e,t){let a="";if(e.parentKey){let i=e.parentKey,n=e.dataKey;a=t[i]&&t[i][n]?t[i][n]:""}else a=t[e.dataKey];return e.dataResolver?e.dataResolver(a,t):a}resolveClass(e,t){return""}selectedRows(){let e=[];for(let t of this.rows)this._selectedRows.indexOf(t[this.primaryKey])>=0&&e.push(t);return e}toggleCheckbox(e){let t=this._selectedRows.indexOf(e);t<0?this._selectedRows.push(e):this._selectedRows.splice(t,1)}setAdvancedFilter(e){this.payload.page=1,this.advancedFilter=e,this.navigate()}fire_context_action(e,t){this.fire_selectRow(e),this.fire_action(t)}fire_action(e){this.onAction.emit(e)}populateContextMenu(){if(this.tableConfig.hasInlineActions)for(const e of this.tableConfig.actions)this.contextMenuItems.push("separator"===e.type?{separator:!0}:{label:e.label,icon:e.icon});else this.contextMenuItems=[]}}ga.\u0275fac=function(e){return new(e||ga)(n.Y36(h),n.Y36(f),n.Y36(p.gz),n.Y36(p.F0),n.Y36(_),n.Y36(M))},ga.\u0275cmp=n.Xpm({type:ga,selectors:[["data-table"]],viewQuery:function(e,t){if(1&e&&n.Gf(Nt.GI,5),2&e){let e;n.iGM(e=n.CRH())&&(t.basicMenu=e.first)}},inputs:{tableConfig:"tableConfig"},outputs:{onRowSelected:"onRowSelected",dataLoaded:"dataLoaded",dataLoading:"dataLoading",onCellClicked:"onCellClicked",onCellMiddleClicked:"onCellMiddleClicked",networkError:"networkError",onAction:"onAction",onUrlFilterChanged:"onUrlFilterChanged",onAdvancedFilterLoadedFromUrl:"onAdvancedFilterLoadedFromUrl"},features:[n.TTD],decls:15,vars:7,consts:[[1,"table-responsive"],["role","grid",1,"table","table-outline","datatable","dataTable","no-footer","sas-table","table-hover","table-sm",2,"border-collapse","collapse !important"],["width","2%",4,"ngIf"],[3,"hidden","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","contextMenu","contextMenuSubject","click","contextmenu",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","col-md-6"],[1,"text-center","text-sm-center","text-md-right",2,"width","100%"],[1,"dt-rows-count-selector","d-inline-block","d-md-block",3,"count","onCountChanged"],["class","col-12 col-md-6",4,"ngIf"],["width","2%"],["class","custom-control custom-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","toggleSelectAll","id","toggleSelectAll",1,"custom-control-input",3,"ngModel","change","ngModelChange"],["for","toggleSelectAll",1,"custom-control-label"],[3,"hidden","click"],["class","fa fa-sort-asc",4,"ngIf"],["class","fa fa-sort-desc",4,"ngIf"],[1,"fa","fa-sort-asc"],[1,"fa","fa-sort-desc"],[3,"ngClass","contextMenu","contextMenuSubject","click","contextmenu"],[3,"hidden",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"],[3,"hidden"],[3,"ngClass","click","auxclick",4,"ngIf"],[3,"ngClass","innerHTML","click","auxclick",4,"ngIf"],[3,"ngClass","click","auxclick"],[3,"ngClass","innerHTML","click","auxclick"],[3,"src"],[3,"value"],["class","dt-pagination d-inline-block d-md-block",3,"collectionSize","rotate","ellipses","boundaryLinks","maxSize","pageSize","page","pageChange",4,"ngIf"],[1,"dt-pagination","d-inline-block","d-md-block",3,"collectionSize","rotate","ellipses","boundaryLinks","maxSize","pageSize","page","pageChange"],[4,"ngFor","ngForOf"],["contextMenuItem","",3,"visible","execute"],[3,"class",4,"ngIf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"table",1),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.YNc(4,Kt,2,1,"th",2),n.YNc(5,jt,4,4,"th",3),n.YNc(6,Gt,1,0,"th",4),n.qZA(),n.qZA(),n.TgZ(7,"tbody"),n.YNc(8,sa,3,7,"tr",5),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",6),n.TgZ(10,"div",7),n.TgZ(11,"div",8),n.TgZ(12,"rows-count-selector",9),n.NdJ("onCountChanged",function(e){return t.countChanged(e)}),n.qZA(),n.qZA(),n.qZA(),n.YNc(13,la,3,1,"div",10),n.qZA(),n.YNc(14,pa,2,1,"context-menu",4)),2&e&&(n.xp6(4),n.Q6J("ngIf",t.tableConfig.allowMultipleSelect),n.xp6(1),n.Q6J("ngForOf",t.tableConfig.columns),n.xp6(1),n.Q6J("ngIf",t.tableConfig.hasInlineActions),n.xp6(2),n.Q6J("ngForOf",t.rows),n.xp6(4),n.Q6J("count",t.payload.count),n.xp6(1),n.Q6J("ngIf",t.payload.page),n.xp6(1),n.Q6J("ngIf",!0===(null==t.tableConfig?null:t.tableConfig.hasInlineActions)))},directives:[J.O5,J.sg,Qt,Z.Wl,Z.JJ,Z.On,J.mk,Nt.HW,St.k,F.N9,Nt.GI,Nt.n5],pipes:[Lt],styles:[".href[_ngcontent-%COMP%]{color:#00f!important;cursor:pointer}.href[_ngcontent-%COMP%]:hover{text-decoration:underline!important}.row-selected[_ngcontent-%COMP%]{background-color:#73add8!important;color:#fff}.row-selected[_ngcontent-%COMP%]   .href[_ngcontent-%COMP%]{color:#fff!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-select:none}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.45rem}.dt-pagination[_ngcontent-%COMP%]{float:right}@media (max-width: 744px){.dt-pagination[_ngcontent-%COMP%]{float:unset;text-align:center}.dt-rows-count-selector[_ngcontent-%COMP%]{float:unset}}"]}),(0,c.gn)([(0,u.bH)()],ga.prototype,"blockUI",void 0);var fa=a(99451);class ha{constructor(e,t,a,i,n,o,s){this.tr=e,this.api=t,this.config=a,this.auth=i,this.ref=n,this.toastr=o,this.dialogConfig=s,this.payDebtForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1},this.manager_id=null}ngOnInit(){this.manager_id=this.dialogConfig.data.manager_id,this.blockUI.start(),this.api.get("manager/debt/"+this.manager_id).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.payDebtForm.manager_id=this.manager_id,this.payDebtForm.manager_username=e.data.username,this.payDebtForm.debt_for_me=Math.abs(parseFloat(e.data.debt_for_me)),this.payDebtForm.debt=Math.abs(parseFloat(e.data.total)))})}dismiss(){this.ref.close()}deposit(){this.blockUI.start(),this.api.post("manager/payDebt",this.payDebtForm).subscribe(e=>{this.blockUI.stop(),this.ref.close(),200===e.status?this.toastr.success(this.tr.translate(e.message)):this.toastr.error(this.tr.translate(e.message))})}}ha.\u0275fac=function(e){return new(e||ha)(n.Y36(M),n.Y36(h),n.Y36(l),n.Y36(_),n.Y36(fa.E7),n.Y36(g._W),n.Y36(fa.S))},ha.\u0275cmp=n.Xpm({type:ha,selectors:[["app-manager-pay-debt"]],decls:39,vars:19,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"mb-1",2,"width","100%"],[2,"direction","ltr"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"label",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"small",4),n._uU(6,"\xa0"),n.qZA(),n.qZA(),n.TgZ(7,"div",1),n.TgZ(8,"label"),n._uU(9),n.qZA(),n.TgZ(10,"input",5,6),n.NdJ("ngModelChange",function(e){return t.payDebtForm.amount=e}),n.qZA(),n.TgZ(12,"small",4),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",1),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("ngModelChange",function(e){return t.payDebtForm.comment=e}),n.qZA(),n.TgZ(19,"small",4),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"table",9),n.TgZ(22,"tr"),n.TgZ(23,"td"),n._uU(24),n.qZA(),n.TgZ(25,"td",10),n.TgZ(26,"strong"),n._uU(27),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"tr"),n.TgZ(29,"td"),n._uU(30),n.qZA(),n.TgZ(31,"td",10),n.TgZ(32,"strong"),n._uU(33),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",11),n.TgZ(35,"button",12),n.NdJ("click",function(){return t.dismiss()}),n._uU(36),n.qZA(),n.TgZ(37,"button",13),n.NdJ("click",function(){return t.deposit()}),n._uU(38),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.tr.translate("manager_depodrawal_form_username")),n.xp6(1),n.s9C("value",t.payDebtForm.manager_username),n.xp6(5),n.Oqu(t.tr.translate("manager_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",t.payDebtForm.amount),n.xp6(6),n.Oqu(t.tr.translate("manager_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",t.payDebtForm.comment),n.xp6(7),n.AsE("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.manager_username,""),n.xp6(3),n.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt,""),n.xp6(3),n.HOy("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.manager_username," ",t.tr.translate("global_debt_for")," ",t.auth.client.username,""),n.xp6(3),n.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt_for_me,""),n.xp6(3),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!t.payDebtForm.amount||t.payDebtForm.amount<=0||t.payDebtForm.amount>t.payDebtForm.debt_for_me),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,Z.wV,Z.Fj,Z.JJ,Z.On],styles:[".form[_ngcontent-%COMP%]{min-width:450px}"]}),(0,c.gn)([(0,u.bH)()],ha.prototype,"blockUI",void 0);var ma=a(50103),_a=a(12332);class ba{constructor(e,t,a,i,n){this.api=e,this.dialogConfig=t,this.toastr=a,this.ref=i,this.tr=n,this.group_list=[],this.group_id=-1,this.manager=null,this.propagate_managers=!1,this.propagate_users=!1}ngOnInit(){this.manager=this.dialogConfig.data.manager,this.group_id=this.manager.group_id;const e=[];this.api.get("group").subscribe(t=>{if(200===t.status){for(const a of t.data)e.push({value:a.id,label:a.name});e.unshift({value:-1,label:this.tr.translate("global_none")}),this.group_list=e}})}dismiss(){this.ref.close()}submit(){this.blockUI.start(),this.api.post("manager/group",{manager_id:this.manager.id,group_id:this.group_id,propagate_managers:this.propagate_managers,propagate_users:this.propagate_users}).subscribe(e=>{this.blockUI.stop(),200===e.status&&this.toastr.success(this.tr.translate(e.message)),this.ref.close()})}}ba.\u0275fac=function(e){return new(e||ba)(n.Y36(h),n.Y36(fa.S),n.Y36(g._W),n.Y36(fa.E7),n.Y36(M))},ba.\u0275cmp=n.Xpm({type:ba,selectors:[["app-manager-assign-group"]],decls:22,vars:15,consts:[[1,"form",2,"width","400px"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["appendTo","body","name","group_id",3,"filter","autoDisplayFirst","options","ngModel","ngModelChange"],[1,"form-group","mt-3"],["name","propagate_managers",3,"binary","label","ngModel","ngModelChange"],[1,"form-group","mt-2"],["name","propagate_users",3,"binary","label","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"label",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"small",4),n._uU(6,"\xa0"),n.qZA(),n.qZA(),n.TgZ(7,"div",1),n.TgZ(8,"label"),n._uU(9),n.qZA(),n.TgZ(10,"p-dropdown",5),n.NdJ("ngModelChange",function(e){return t.group_id=e}),n.qZA(),n.qZA(),n.TgZ(11,"div",6),n._UZ(12,"label"),n.TgZ(13,"p-checkbox",7),n.NdJ("ngModelChange",function(e){return t.propagate_managers=e}),n.qZA(),n.qZA(),n.TgZ(14,"div",8),n._UZ(15,"label"),n.TgZ(16,"p-checkbox",9),n.NdJ("ngModelChange",function(e){return t.propagate_users=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",10),n.TgZ(18,"button",11),n.NdJ("click",function(){return t.dismiss()}),n._uU(19),n.qZA(),n.TgZ(20,"button",12),n.NdJ("click",function(){return t.submit()}),n._uU(21),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.tr.translate("global_username")),n.xp6(1),n.s9C("value",null==t.manager?null:t.manager.username),n.xp6(5),n.Oqu(t.tr.translate("global_group")),n.xp6(1),n.Q6J("filter",!0)("autoDisplayFirst",!1)("options",t.group_list)("ngModel",t.group_id),n.xp6(3),n.s9C("label",t.tr.translate("group_assign_propagate_managers")),n.Q6J("binary",!0)("ngModel",t.propagate_managers),n.xp6(3),n.s9C("label",t.tr.translate("group_assign_propagate_users")),n.Q6J("binary",!0)("ngModel",t.propagate_users),n.xp6(3),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(2),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,ma.Lt,Z.JJ,Z.On,_a.XZ],styles:[""]}),(0,c.gn)([(0,u.bH)()],ba.prototype,"blockUI",void 0);var Za=a(24879);const va=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}};class wa{constructor(e,t,a,i,n,o,s,r){this.api=e,this.auth=t,this.tr=a,this.toastr=i,this.ch=n,this.ref=o,this.dialogConfig=s,this.config=r,this.depositForm={manager_id:null,my_balance:0,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.manager_id=null}ngOnInit(){this.manager_id=this.dialogConfig.data.manager_id,this.api.get("manager/"+this.manager_id).subscribe(e=>{200===e.status&&(this.depositForm.manager_id=this.manager_id,this.depositForm.my_balance=this.auth.client.balance,this.depositForm.manager_username=e.data.username,this.depositForm.balance=e.data.balance,this.depositForm.transaction_id=this.ch.guid())})}dismiss(){this.ref.close()}deposit(){this.blockUI.start(),this.api.post("manager/deposit",this.depositForm).subscribe(e=>{this.blockUI.stop(),this.ref.close(),200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.auth.reload()):this.toastr.error(this.tr.translate(e.message))})}}wa.\u0275fac=function(e){return new(e||wa)(n.Y36(h),n.Y36(_),n.Y36(M),n.Y36(g._W),n.Y36(m),n.Y36(fa.E7),n.Y36(fa.S),n.Y36(l))},wa.\u0275cmp=n.Xpm({type:wa,selectors:[["app-manager-deposit-form"]],decls:44,vars:27,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","manager_balance"],["type","text","readonly","","id","manager_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control","font-weight-bold",3,"ngModel","options","ngModelChange"],["amount","ngModel"],[1,"text-muted"],["name","isLoan",3,"label","ngModel","binary","ngModelChange"],["for","my_balance"],["type","text","readonly","","id","my_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","comment","placeholder","",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"label",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"small",4),n._uU(6,"\xa0"),n.qZA(),n.qZA(),n.TgZ(7,"div",1),n.TgZ(8,"label",5),n._uU(9),n.qZA(),n._UZ(10,"input",6),n.ALo(11,"currency"),n.TgZ(12,"small",4),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",1),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("ngModelChange",function(e){return t.depositForm.amount=e}),n.qZA(),n.TgZ(19,"small",9),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.TgZ(21,"div",1),n.TgZ(22,"p-checkbox",10),n.NdJ("ngModelChange",function(e){return t.depositForm.is_loan=e}),n.qZA(),n.TgZ(23,"small",4),n._uU(24,"\xa0"),n.qZA(),n.qZA(),n.TgZ(25,"div",1),n.TgZ(26,"label",11),n._uU(27),n.qZA(),n._UZ(28,"input",12),n.ALo(29,"currency"),n.TgZ(30,"small",4),n._uU(31,"\xa0"),n.qZA(),n.qZA(),n.TgZ(32,"div",1),n.TgZ(33,"label"),n._uU(34),n.qZA(),n.TgZ(35,"input",13,14),n.NdJ("ngModelChange",function(e){return t.depositForm.comment=e}),n.qZA(),n.TgZ(37,"small",4),n._uU(38,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",15),n.TgZ(40,"button",16),n.NdJ("click",function(){return t.dismiss()}),n._uU(41),n.qZA(),n.TgZ(42,"button",17),n.NdJ("click",function(){return t.deposit()}),n._uU(43),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.tr.translate("global_manager")),n.xp6(1),n.s9C("value",t.depositForm.manager_username),n.xp6(5),n.AsE("",t.tr.translate("managers_table_balance")," (",t.depositForm.manager_username,")"),n.xp6(1),n.s9C("value",n.xi3(11,19,t.depositForm.balance,t.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(t.tr.translate("manager_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",t.depositForm.amount)("options",n.VKq(25,va,t.config.siteConfig.site_currency+" ")),n.xp6(5),n.MGl("label"," \xa0",t.tr.translate("manager_depodrawal_form_loan"),"\xa0"),n.Q6J("ngModel",t.depositForm.is_loan)("binary",!0),n.xp6(5),n.AsE("",t.tr.translate("managers_table_balance")," (",t.auth.client.username,")"),n.xp6(1),n.s9C("value",n.xi3(29,22,t.auth.client.balance,t.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(t.tr.translate("manager_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",t.depositForm.comment),n.xp6(6),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!t.depositForm.amount||t.depositForm.amount<=0),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,Z.Fj,Za.g1,Z.JJ,Z.On,_a.XZ],pipes:[J.H9],styles:[""]}),(0,c.gn)([(0,u.bH)()],wa.prototype,"blockUI",void 0);const ya=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}};class xa{constructor(e,t,a,i,n,o,s,r){this.api=e,this.auth=t,this.tr=a,this.toastr=i,this.ch=n,this.ref=o,this.dialogConfig=s,this.config=r,this.withdrawalForm={manager_id:null,my_balance:0,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.manager_id=null}ngOnInit(){this.manager_id=this.dialogConfig.data.manager_id,this.api.get("manager/"+this.manager_id).subscribe(e=>{200===e.status&&(this.withdrawalForm.manager_id=this.manager_id,this.withdrawalForm.my_balance=this.auth.client.balance,this.withdrawalForm.manager_username=e.data.username,this.withdrawalForm.balance=e.data.balance,this.withdrawalForm.transaction_id=this.ch.guid())})}dismiss(){this.ref.close()}deduct(){console.log(this.withdrawalForm),this.api.post("manager/withdraw",this.withdrawalForm).subscribe(e=>{this.blockUI.stop(),this.ref.close(),200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.auth.reload()):this.toastr.error(this.tr.translate(e.message))})}}xa.\u0275fac=function(e){return new(e||xa)(n.Y36(h),n.Y36(_),n.Y36(M),n.Y36(g._W),n.Y36(m),n.Y36(fa.E7),n.Y36(fa.S),n.Y36(l))},xa.\u0275cmp=n.Xpm({type:xa,selectors:[["app-manager-withdrawal-form"]],decls:44,vars:27,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","manager_balance"],["type","text","readonly","","id","manager_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control","font-weight-bold",3,"ngModel","options","ngModelChange"],["amount","ngModel"],[1,"text-muted"],["name","isLoan",3,"label","ngModel","binary","ngModelChange"],["for","my_balance"],["type","text","readonly","","id","my_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","comment","placeholder","",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"label",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"small",4),n._uU(6,"\xa0"),n.qZA(),n.qZA(),n.TgZ(7,"div",1),n.TgZ(8,"label",5),n._uU(9),n.qZA(),n._UZ(10,"input",6),n.ALo(11,"currency"),n.TgZ(12,"small",4),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",1),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("ngModelChange",function(e){return t.withdrawalForm.amount=e}),n.qZA(),n.TgZ(19,"small",9),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.TgZ(21,"div",1),n.TgZ(22,"p-checkbox",10),n.NdJ("ngModelChange",function(e){return t.withdrawalForm.is_loan=e}),n.qZA(),n.TgZ(23,"small",4),n._uU(24,"\xa0"),n.qZA(),n.qZA(),n.TgZ(25,"div",1),n.TgZ(26,"label",11),n._uU(27),n.qZA(),n._UZ(28,"input",12),n.ALo(29,"currency"),n.TgZ(30,"small",4),n._uU(31,"\xa0"),n.qZA(),n.qZA(),n.TgZ(32,"div",1),n.TgZ(33,"label"),n._uU(34),n.qZA(),n.TgZ(35,"input",13,14),n.NdJ("ngModelChange",function(e){return t.withdrawalForm.comment=e}),n.qZA(),n.TgZ(37,"small",4),n._uU(38,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",15),n.TgZ(40,"button",16),n.NdJ("click",function(){return t.dismiss()}),n._uU(41),n.qZA(),n.TgZ(42,"button",17),n.NdJ("click",function(){return t.deduct()}),n._uU(43),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.tr.translate("global_manager")),n.xp6(1),n.s9C("value",t.withdrawalForm.manager_username),n.xp6(5),n.AsE("",t.tr.translate("managers_table_balance")," (",t.withdrawalForm.manager_username,")"),n.xp6(1),n.s9C("value",n.xi3(11,19,t.withdrawalForm.balance,t.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(t.tr.translate("manager_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",t.withdrawalForm.amount)("options",n.VKq(25,ya,t.config.siteConfig.site_currency+" ")),n.xp6(5),n.MGl("label"," \xa0",t.tr.translate("manager_depodrawal_form_loan"),"\xa0"),n.Q6J("ngModel",t.withdrawalForm.is_loan)("binary",!0),n.xp6(5),n.AsE("",t.tr.translate("managers_table_balance")," (",t.auth.client.username,")"),n.xp6(1),n.s9C("value",n.xi3(29,22,t.auth.client.balance,t.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(t.tr.translate("manager_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",t.withdrawalForm.comment),n.xp6(6),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!t.withdrawalForm.amount||t.withdrawalForm.amount<=0),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,Z.Fj,Za.g1,Z.JJ,Z.On,_a.XZ],pipes:[J.H9],styles:[""]}),(0,c.gn)([(0,u.bH)()],xa.prototype,"blockUI",void 0);var Aa=a(77498),qa=a(13928);const Ta=["managers_tree"];class Ca{constructor(e,t){this.api=e,this.auth=t,this.treeNodes=[],this.manager_id=null,this.onManagerSelected=new n.vpe}ngOnInit(){const e=[];this.api.get("manager/tree").subscribe(t=>{const a=t;for(const i of a)(1===i.id||null==i.parent_id)&&(i.parent_id="#"),e.push({id:i.id,text:i.username,parent:i.parent_id,icon:"fa fa-user"});this.treeNodes=e})}_onNodeSelected(){const e=this.managersTree.getSelectedNode();this.onManagerSelected.emit({id:e.id,username:e.text,parent_id:e.parent})}search(){this.managersTree.search(this.search_string)}}Ca.\u0275fac=function(e){return new(e||Ca)(n.Y36(h),n.Y36(_))},Ca.\u0275cmp=n.Xpm({type:Ca,selectors:[["app-managers-tree"]],viewQuery:function(e,t){if(1&e&&n.Gf(Ta,5),2&e){let e;n.iGM(e=n.CRH())&&(t.managersTree=e.first)}},inputs:{showSearch:"showSearch"},outputs:{onManagerSelected:"onManagerSelected"},decls:11,vars:4,consts:[[1,"tree-container"],[1,"p-fluid",3,"hidden"],[1,"ui-sm-12","ui-g-12","ui-md-12"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","search managers...",1,"p-inputtext","p-component",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],[1,"fa","fa-search"],["id","tree1"],[3,"data","container","onNodeSelected"],["managers_tree",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"input",4),n.NdJ("ngModelChange",function(e){return t.search_string=e})("ngModelChange",function(){return t.search()}),n.qZA(),n.TgZ(5,"span",5),n._UZ(6,"i",6),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(7,"hr"),n.TgZ(8,"div",7),n.TgZ(9,"js-tree",8,9),n.NdJ("onNodeSelected",function(){return t._onNodeSelected()}),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("hidden",!t.showSearch),n.xp6(3),n.Q6J("ngModel",t.search_string),n.xp6(5),n.Q6J("data",t.treeNodes)("container","#tree1"))},directives:[Z.Fj,qa.o,Z.JJ,Z.On,$e],styles:[".tree-container[_ngcontent-%COMP%]{padding:10px;background:white;width:100%;height:100%}#tree1[_ngcontent-%COMP%]{overflow:auto;height:85%}"]}),(0,c.gn)([(0,u.bH)()],Ca.prototype,"blockUI",void 0);const ka=["manager_model_view"],Ua=["rename_modal"];function Ma(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",6,7),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw(2).onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw(2).onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw(2).loading=!0})("onCellMiddleClicked",function(t){return n.CHM(e),n.oxw(2).onCellMiddleClicked(t)})("onDataLoaded",function(){return n.CHM(e),n.oxw(2).loading=!1}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}function Fa(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",8),n.TgZ(1,"h4",9),n._uU(2),n.qZA(),n.TgZ(3,"button",10),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n.TgZ(4,"span",11),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",12),n.TgZ(7,"form",13),n.TgZ(8,"div",14),n.TgZ(9,"label"),n._uU(10),n.qZA(),n._UZ(11,"input",15),n.TgZ(12,"small",16),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",14),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",17,18),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).renameForm.new_username=t})("keydown.enter",function(){return n.CHM(e),n.oxw(2).rename()}),n.qZA(),n.TgZ(19,"small",16),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",19),n.TgZ(22,"button",20),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n._uU(23),n.qZA(),n.TgZ(24,"button",21),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).rename()}),n._uU(25),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.tr.translate("manager_rename_form_title")),n.xp6(8),n.Oqu(e.tr.translate("manager_rename_form_current_username")),n.xp6(1),n.s9C("value",e.renameForm.username),n.xp6(5),n.Oqu(e.tr.translate("manager_rename_form_new_username")),n.xp6(1),n.Q6J("ngModel",e.renameForm.new_username),n.xp6(6),n.Oqu(e.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!e.renameForm.new_username||e.renameForm.new_username.length<1),n.xp6(1),n.Oqu(e.tr.translate("global_button_submit"))}}function Ja(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.YNc(1,Ma,2,3,"model-table-view",1),n.YNc(2,Fa,26,8,"ng-template",null,2,n.W1O),n.TgZ(4,"p-sidebar",3),n.NdJ("visibleChange",function(t){return n.CHM(e),n.oxw().show_managers_tree=t}),n.TgZ(5,"h4",4),n._uU(6),n.qZA(),n.TgZ(7,"app-managers-tree",5),n.NdJ("onManagerSelected",function(t){return n.CHM(e),n.oxw()._onTreeNodeSelected(t)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.modelViewConfig),n.xp6(3),n.Q6J("visible",e.show_managers_tree),n.xp6(2),n.Oqu(e.tr.translate("mangers_tree_title")),n.xp6(1),n.Q6J("showSearch",!0)}}class Oa{constructor(e,t,a,i,n,o,s,r,l,c){this.api=e,this.router=t,this.modalService=a,this.swal=i,this.toastr=n,this.tr=o,this.ch=s,this.config=r,this.dialogService=l,this.auth=c,this.columns=[{dataKey:"username",label:this.tr.translate("global_username"),classFn:function(e){return 0===e.enabled?"manager_disabled":"href"}},{dataKey:"firstname",label:this.tr.translate("global_firstname")},{dataKey:"lastname",label:this.tr.translate("global_lastname")},{dataKey:"balance",label:this.tr.translate("managers_table_balance"),pipe:"currency"},{dataKey:"loan_balance",label:this.tr.translate("managers_table_loan_balance"),pipe:"currency"},{dataKey:"name",label:this.tr.translate("managers_table_acl_group"),parentKey:"acl_group_details",sortBy:"acl_group_id"},{dataKey:"username",label:this.tr.translate("managers_table_parent"),parentKey:"parent_details",sortBy:"parent_id"},{dataKey:"group_name",label:this.tr.translate("managers_table_group"),parentKey:"group_details",sortBy:"group_id",hidden:!0},{dataKey:"city",label:this.tr.translate("managers_table_city"),hidden:!0},{dataKey:"users_count",label:this.tr.translate("managers_table_users_count")},{dataKey:"reward_points",label:this.tr.translate("managers_table_reward_points"),hidden:!0},{dataKey:"site_name",sortBy:"site_id",parentKey:"site_details",label:"Site",hidden:!0},{dataKey:"discount_rate",label:this.tr.translate("manager_form_discount_rate"),hidden:!0},{dataKey:"created_at",label:this.tr.translate("Creation Date"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",acl:"prm_managers_update",inline:!0,requiresRow:!0},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"rename",label:this.tr.translate("global_actions_rename"),icon:"fa fa-edit",acl:"prm_managers_rename",requiresRow:!0,inline:!0},{name:"assign_group",label:this.tr.translate("manager_actions_assign_group"),icon:"fa fa-edit",acl:"prm_groups_assign",requiresRow:!0,inline:!0},{name:"",label:"",type:"separator"},{name:"deposit",label:this.tr.translate("global_actions_deposit"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_deposit"},{name:"withdraw",label:this.tr.translate("global_actions_withdrawal"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_withdrawal"},{name:"pay_debt",label:this.tr.translate("global_actions_pay_debt"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_deposit"},{name:"",label:"",type:"separator"},{name:"add_reward_points",label:this.tr.translate("manager_actions_add_reward_points"),requiresRow:!0,inline:!0,icon:"fa fa-money",acl:"prm_manager_add_reward_points"},{name:"deduct_reward_points",label:this.tr.translate("manager_actions_deduct_reward_points"),requiresRow:!0,inline:!0,icon:"fa fa-money",acl:"prm_manager_deduct_reward_points"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,inline:!0,acl:"prm_managers_delete"}],this.filterFields=[{key:"parent_id",label:this.tr.translate("managers_table_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"sub_managers",label:this.tr.translate("manager_overview_submanagers"),type:"switch",layout:"vertical",value:1,cols:12},{key:"site_id",label:this.tr.translate("user_form_label_site"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_sites_management"},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"}],this.filterOptions={parent_id:[{value:1,label:"admin"}],group_id:[]},this.headerActions=[{icon:"fal fa-folder-tree",action:"managers_tree",label:"Managers Tree"}],this.show_managers_tree=!1,this.modelViewConfig=null,this.loading=!1,this.site_list=[],this.withdrawalForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,balance:0},this.renameForm={manager_id:null,username:"",new_username:""},this.currency_precision=0,this.loadResources()}ngOnInit(){this.auth.has("prm_managers_sysadmin")&&(this.currency_precision=2),this.modelViewConfig={title:this.tr.translate("managers_table_title"),icon:"fa fa-user-secret",columns:this.columns,dataUrl:"index/manager",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,allowExport:this.auth.has("prm_managers_export"),primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"managers",hasAdvancedFilter:!0,hasInlineActions:!0,id:"managers_index_table",showRowsCount:!0,sortBy:"username",headerActions:this.headerActions}}username_class(e){return"href"}onAction(e){let t=null;switch(e.action){case"new":this.router.navigate(["manager/"]);break;case"edit":t=this.modelView.currentRow.id,this.router.navigate(["manager/"+t]);break;case"deposit":this.showDepositForm();break;case"withdraw":this.showWithdrawalForm();break;case"pay_debt":this.showPayDebtForm();break;case"delete":this.destroy();break;case"rename":this.showRenameForm();break;case"managers_tree":this.showManagersTree();break;case"add_reward_points":this.addRewardPoints();break;case"deduct_reward_points":this.deductRewardPoints();break;case"edit_new_tab":t=this.modelView.currentRow.id,this.router.navigate([]).then(e=>{window.open("#/manager/"+t,"_blank")});break;case"assign_group":this.showAssignGroupDialog()}}onCellClicked(e){"username"==e.column&&this.router.navigate(["manager",e.row.id])}onCellMiddleClicked(e){console.log(e),"username"===e.column&&window.open("#/manager/"+e.row.id,"_blank")}showDepositForm(){const e=this.modelView.currentRow;this.dialogService.open(wa,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:e.id}}).onClose.subscribe(()=>{this.modelView.reload()})}showPayDebtForm(){const e=this.modelView.currentRow;this.dialogService.open(ha,{header:this.tr.translate("global_actions_pay_debt"),data:{manager_id:e.id}}).onClose.subscribe(()=>{this.modelView.reload()})}showWithdrawalForm(){const e=this.modelView.currentRow;this.dialogService.open(xa,{header:this.tr.translate("manager_depodrawal_form_title_withdrawal"),width:"500px",data:{manager_id:e.id}}).onClose.subscribe(()=>{this.modelView.reload()})}addRewardPoints(){let e=this.modelView.currentRow.id;this.swal.prompt(this.tr.translate("manager_label_add_reward_point")).subscribe(t=>{let a=parseInt(t);a>0&&this.api.post("manager/addRewardPoints",{manager_id:e,amount:a}).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.warning(this.tr.translate(e.message))})})}deductRewardPoints(){let e=this.modelView.currentRow.id;this.swal.prompt(this.tr.translate("manager_label_deduct_reward_point")).subscribe(t=>{let a=parseInt(t);a>0&&this.api.post("manager/deductRewardPoints",{manager_id:e,amount:a}).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.warning(this.tr.translate(e.message))})})}showRenameForm(){let e=this.modelView.currentRow;this.renameForm.manager_id=e.id,this.renameForm.username=e.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}rename(){let e=this.renameForm.manager_id,t={username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.put("manager/"+e,t).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.toastr.success("Manager Renamed"),this.modelView.reload()):this.toastr.error("Unable to rename manager"),this.activeModal.hide()},e=>{this.toastr.error("Error Occurred !"),this.activeModal.hide()})}destroy(){this.swal.confirm({title:this.tr.translate("manager_label_delete_manager"),type:"warning",text:this.tr.translate("manager_label_confirm_delete"),confirmButtonText:this.tr.translate("global_yes")}).subscribe(()=>{let e=null;if(this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.blockUI.start("loading..."),this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(let a of t)e.push(a.id);this.api.post("manager/bulkDelete",e).subscribe(e=>{this.blockUI.stop(),200!==e.status?this.toastr.warning(this.tr.translate("msg_unable_delete_some_managers")):(this.toastr.success(this.tr.translate("msg_manager_delete_success")),this.modelView.reload())})}else this.api.delete("manager/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.modelView.reload(),this.toastr.success(this.tr.translate("msg_manager_delete_success"),"")):this.toastr.warning(this.tr.translate("msg_unable_delete_some_managers"))})})}loadResources(){if(this.api.get("index/manager").subscribe(e=>{let t=[{value:-1,label:"All"}];e.data.map(e=>{t.push({value:e.id,label:e.username})}),this.filterOptions.parent_id=t}),this.auth.has("prm_sites_management")&&this.api.get("site").subscribe(e=>{if(200===e.status){for(const t of e.data)this.site_list.push({value:t.id,label:t.name});this.filterOptions.site_id=this.site_list,this.filterOptions.site_id.unshift({value:-1,label:this.tr.translate("global_all")})}}),this.auth.has("prm_groups_assign")){const e=[];this.api.get("group").subscribe(t=>{if(200===t.status){for(const a of t.data)e.push({value:a.id,label:a.name});e.unshift({value:-1,label:this.tr.translate("global_all")}),this.filterOptions.group_id=e}})}}showManagersTree(){this.show_managers_tree=!this.show_managers_tree}_onTreeNodeSelected(e){const t={parent_id:parseInt(e.id),sub_managers:!0};this.modelView.setAdvancedFilter(t),this.modelView.advancedFilter.search(),this.activeModal.hide()}showAssignGroupDialog(){const e=this.modelView.currentRow;this.dialogService.open(ba,{header:this.tr.translate("manager_actions_assign_group"),data:{manager:e}}).onClose.subscribe(()=>{this.modelView.reload()})}}Oa.\u0275fac=function(e){return new(e||Oa)(n.Y36(h),n.Y36(p.F0),n.Y36(We.tT),n.Y36(Ge),n.Y36(g._W),n.Y36(M),n.Y36(m),n.Y36(l),n.Y36(fa.xA),n.Y36(_))},Oa.\u0275cmp=n.Xpm({type:Oa,selectors:[["managers-index"]],viewQuery:function(e,t){if(1&e&&(n.Gf(ka,5),n.Gf(Ua,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.renameModal=e.first)}},features:[n._Bn([fa.xA])],decls:1,vars:1,consts:[[4,"blockUI"],["name","manager_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded",4,"ngIf"],["rename_modal",""],["position","right","baseZIndex","999","styleClass","p-sidebar-md",3,"visible","visibleChange"],[1,"modal-title","text-center"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],["name","manager_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded"],["manager_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","","id","manager_username2",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&n.YNc(0,Ja,8,4,"div",0),2&e&&n.Q6J("blockUI","model-view")},directives:[u.Z2,J.O5,Aa.Y,Ca,wt,Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On],styles:[".manager_disabled{color:#bb3436!important}.tree-container{display:inline-block;min-width:100%;min-height:100px}\n"],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Oa.prototype,"blockUI",void 0);var Na=a(66610),Ia=a(25301),Ya=a(88598),Qa=a(97748);function Sa(e,t){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"h4"),n._uU(2,"\xa0"),n.qZA(),n.TgZ(3,"h4"),n._uU(4),n.qZA(),n._UZ(5,"hr"),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.tr.translate(e._fieldConfig.label))}}function Pa(e,t){1&e&&(n.TgZ(0,"span",29),n._uU(1,"*"),n.qZA())}function Da(e,t){if(1&e&&(n.TgZ(0,"span",30),n._UZ(1,"i"),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Tol(e._fieldConfig.icon)}}function Ha(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",31),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.s9C("pattern",e._fieldConfig.pattern),n.s9C("placeholder",e._fieldConfig.placeholder),n.Q6J("formControlName",e._fieldConfig.key)("id",e._fieldConfig.key)}}function Ra(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",32),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("formControlName",e._fieldConfig.key)("id",e._fieldConfig.key)}}function Va(e,t){if(1&e&&(n.TgZ(0,"option",35),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.text)}}function La(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"select",33),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.YNc(1,Va,2,2,"option",34),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("id",e._fieldConfig.key)("formControlName",e._fieldConfig.key),n.xp6(1),n.Q6J("ngForOf",e._fieldConfig.options)}}function Ea(e,t){if(1&e&&(n.TgZ(0,"option",35),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.Oqu(e.label)}}function Ka(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"select",36),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.YNc(1,Ea,2,2,"option",34),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("id",e._fieldConfig.key)("name",e._fieldConfig.key)("formControlName",e._fieldConfig.key),n.xp6(1),n.Q6J("ngForOf",e._fieldConfig.options)}}function Ba(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",38),n.TgZ(2,"p-dropdown",39),n.NdJ("onChange",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("id",e._fieldConfig.key)("name",e._fieldConfig.key)("autoDisplayFirst",!1)("options",e._fieldConfig.options)("formControlName",e._fieldConfig.key)("placeholder",e._fieldConfig.placeholder)}}function za(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",38),n.TgZ(2,"div",40),n.TgZ(3,"p-dropdown",41),n.NdJ("onChange",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Q6J("id",e._fieldConfig.key)("options",e._fieldConfig.options)("autoDisplayFirst",!1)("formControlName",e._fieldConfig.key)("placeholder",e._fieldConfig.placeholder)("filter",!0)}}function ja(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.TgZ(1,"div",43),n.TgZ(2,"p-multiSelect",44),n.NdJ("onChange",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("id",e._fieldConfig.key)("options",e._fieldConfig.options)("formControlName",e._fieldConfig.key)("filter",!0)}}function Ga(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",41),n.NdJ("onChange",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("id",e._fieldConfig.key)("options",e._fieldConfig.options)("autoDisplayFirst",!1)("formControlName",e._fieldConfig.key)("placeholder",e._fieldConfig.placeholder)("filter",!0)}}function Wa(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"p-inputSwitch",45),n.NdJ("onChange",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("id",e._fieldConfig.key)("formControlName",e._fieldConfig.key)("trueValue",1)("falseValue",0)}}const $a=function(e){return{"font-weight-bold":e}};function Xa(e,t){if(1&e&&(n.TgZ(0,"p",46),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.Q6J("ngClass",n.VKq(2,$a,1==e._fieldConfig.bold)),n.xp6(1),n.Oqu(e._fieldConfig.value)}}function ei(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",37),n.TgZ(1,"div",47),n.TgZ(2,"p-calendar",48),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)})("onSelect",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Q6J("formControlName",e._fieldConfig.key)("name",e._fieldConfig.key)("id",e._fieldConfig.key)}}function ti(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",49),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.s9C("pattern",e._fieldConfig.pattern),n.s9C("placeholder",e._fieldConfig.placeholder),n.Q6J("formControlName",e._fieldConfig.key)("id",e._fieldConfig.key)}}function ai(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",50),n.NdJ("change",function(){return n.CHM(e),n.oxw(2).uploader.uploadAll()}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("name",e._fieldConfig.key)("uploader",e.uploader)}}function ii(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",51),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).onButton(t.action)}),n._UZ(1,"span",52),n.qZA()}if(2&e){const e=t.$implicit;n.Gre("btn ",e.class,""),n.xp6(1),n.Q6J("innerHTML",e.text,n.oJD)}}function ni(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"textarea",53),n.NdJ("change",function(t){return n.CHM(e),n.oxw(2).onChange(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.s9C("placeholder",e._fieldConfig.placeholder),n.Q6J("formControlName",e._fieldConfig.key)("id",e._fieldConfig.key)}}function oi(e,t){1&e&&n._UZ(0,"label")}function si(e,t){if(1&e&&(n.TgZ(0,"p",54),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.hij("",e.tr.translate(e._fieldConfig.label)," is required")}}function ri(e,t){1&e&&n._UZ(0,"p",55)}function li(e,t){if(1&e&&(n.TgZ(0,"p",55),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.Oqu(e._fieldConfig.help)}}const ci=function(e){return{row:e}},di=function(e,t){return{"col-sm-5 text-right":e,"col-md-auto":t}},ui=function(e){return{"pull-right":e}},pi=function(e){return{col:e}};function gi(e,t){if(1&e&&(n.TgZ(0,"div",5),n.TgZ(1,"label",6),n.TgZ(2,"span",7),n.YNc(3,Pa,2,0,"span",8),n._uU(4),n.qZA(),n.qZA(),n.TgZ(5,"div",9),n.TgZ(6,"div",10),n.TgZ(7,"div",11),n.YNc(8,Da,2,3,"span",12),n.YNc(9,Ha,1,4,"input",13),n.YNc(10,Ra,1,2,"input",14),n.YNc(11,La,2,3,"select",15),n.YNc(12,Ka,2,4,"select",16),n.YNc(13,Ba,3,6,"div",17),n.YNc(14,za,4,6,"div",17),n.YNc(15,ja,3,4,"div",18),n.YNc(16,Ga,3,6,"div",18),n.YNc(17,Wa,1,4,"p-inputSwitch",19),n.YNc(18,Xa,2,4,"p",20),n.YNc(19,ei,3,3,"div",17),n.YNc(20,ti,1,4,"input",21),n.YNc(21,ai,1,2,"input",22),n.TgZ(22,"div",23),n.YNc(23,ii,2,4,"button",24),n.qZA(),n.YNc(24,ni,1,3,"textarea",25),n.YNc(25,oi,1,0,"label",26),n.qZA(),n.qZA(),n.YNc(26,si,2,1,"p",27),n.YNc(27,ri,1,0,"p",28),n.YNc(28,li,2,1,"p",28),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.Q6J("formGroup",e.form)("ngClass",n.VKq(31,ci,"horizontal"==e._fieldConfig.layout))("hidden",e._fieldConfig.visible||!1),n.xp6(1),n.Q6J("ngClass",n.WLB(33,di,"horizontal"==e._fieldConfig.layout,"horizontal"!=e._fieldConfig.layout))("hidden",e._fieldConfig.hideLabel),n.uIk("for",e._fieldConfig.key),n.xp6(1),n.Q6J("ngClass",n.VKq(36,ui,"horizontal"==e._fieldConfig.layout)),n.xp6(1),n.Q6J("ngIf",e._fieldConfig.required),n.xp6(1),n.hij(" ",e.tr.translate(e._fieldConfig.label),""),n.xp6(1),n.Q6J("ngSwitch",e._fieldConfig.type)("ngClass",n.VKq(38,pi,"horizontal"==e._fieldConfig.layout)),n.xp6(3),n.Q6J("ngIf",e._fieldConfig.icon),n.xp6(1),n.Q6J("ngSwitchCase","text"),n.xp6(1),n.Q6J("ngSwitchCase","password"),n.xp6(1),n.Q6J("ngSwitchCase","selectmultiple"),n.xp6(1),n.Q6J("ngSwitchCase","plainSelect"),n.xp6(1),n.Q6J("ngSwitchCase","select"),n.xp6(1),n.Q6J("ngSwitchCase","select2"),n.xp6(1),n.Q6J("ngSwitchCase","select2multiple"),n.xp6(1),n.Q6J("ngSwitchCase","selectize"),n.xp6(1),n.Q6J("ngSwitchCase","switch"),n.xp6(1),n.Q6J("ngSwitchCase","label"),n.xp6(1),n.Q6J("ngSwitchCase","date"),n.xp6(1),n.Q6J("ngSwitchCase","clock"),n.xp6(1),n.Q6J("ngSwitchCase","file"),n.xp6(2),n.Q6J("ngForOf",e._fieldConfig.buttons),n.xp6(1),n.Q6J("ngSwitchCase","textarea"),n.xp6(1),n.Q6J("ngSwitchCase","dummy"),n.xp6(1),n.Q6J("ngIf",!e.isValid&&e.isTouched),n.xp6(1),n.Q6J("ngIf",(e.isValid||!e.isTouched)&&!(null!=e._fieldConfig&&e._fieldConfig.help)&&"visible"==e._fieldConfig.helpBlock),n.xp6(1),n.Q6J("ngIf",(null==e._fieldConfig||null==e._fieldConfig.help?null:e._fieldConfig.help.length)>1)}}let fi=(()=>{class e{constructor(e,t,a,i,o){this.ref=e,this.log=t,this.auth=a,this.config=i,this.tr=o,this.changed=new n.vpe,this.action=new n.vpe}get isValid(){return this.form.controls[this._fieldConfig.key].valid}get isTouched(){return this.form.controls[this._fieldConfig.key].touched}subscribeForChanges(){"separator"!=this._fieldConfig.type&&"file"!=this._fieldConfig.type&&"buttonGroup"!=this._fieldConfig.type&&this.form.controls[this._fieldConfig.key].valueChanges.subscribe(e=>{this.changed.emit({key:this._fieldConfig.key,value:e})})}ngOnInit(){this.subscribeForChanges()}ngOnChanges(){this._fieldConfig=this.fieldConfig,this._fieldConfig.key=this.fieldConfig.key,this._fieldConfig.label=this.fieldConfig.label||"",this._fieldConfig.required=this.fieldConfig.required||!1,this._fieldConfig.value=this.fieldConfig.value||null,this._fieldConfig.options=this.options||this.fieldConfig.options||[],this._fieldConfig.icon=this.fieldConfig.icon||null,this._fieldConfig.hidden=this.fieldConfig.hidden||!1,this._fieldConfig.cols=this.fieldConfig.cols||6,this._fieldConfig.pattern=this.fieldConfig.pattern||"",this._fieldConfig.layout=this.fieldConfig.layout||"horizontal",this._fieldConfig.checked=this.fieldConfig.checked||!1,this._fieldConfig.hideLabel=this.fieldConfig.hideLabel||!1,this._fieldConfig.placeholder=this.fieldConfig.placeholder||null,this._fieldConfig.bold=this.fieldConfig.bold||!1,this._fieldConfig.helpBlock=this.formConfig?this.formConfig.helpBlock:"visible",this._fieldConfig.acl=this.fieldConfig.acl||null,this._fieldConfig.buttons=this.fieldConfig.buttons||[],"file"===this._fieldConfig.type&&(this.uploader=new C.bA({url:this.config.getApiUrl()+this._fieldConfig.uploadUrl,isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",additionalParameter:this.form.value,authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}))}onChange(e){let t=null;"switch"===this._fieldConfig.type&&(e&&void 0!==e.checked&&!0===e.checked&&(t=!0),e&&void 0!==e.checked&&!1===e.checked&&(t=!1)),("text"===this._fieldConfig.type||"password"===this._fieldConfig.type)&&(t=e.target.value),this._fieldConfig.type.includes("select")&&(t=e.value),"date"===this._fieldConfig.type&&(t=new Date(e).toLocaleDateString()),this.changed.emit({key:this._fieldConfig.key,value:t,e})}onButton(e){this.action.emit(e)}setOptions(e){this._fieldConfig.options=e,this.ref.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(f),n.Y36(_),n.Y36(l),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["dynamic-form-field"]],inputs:{fieldConfig:"fieldConfig",form:"form",options:"options",formConfig:"formConfig"},outputs:{changed:"changed",action:"action"},features:[n.TTD],decls:4,vars:2,consts:[["class","col-md-12",4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","form-group",3,"formGroup","ngClass","hidden",4,"ngIf"],[1,"col-md-12"],[1,"form-group",3,"formGroup","ngClass","hidden"],[1,"col-form-label",3,"ngClass","hidden"],[3,"ngClass"],["class","required-star",4,"ngIf"],[3,"ngSwitch","ngClass"],[1,"controls"],[1,"input-prepend","input-group","input-group-md"],["class","input-group-addon",4,"ngIf"],["type","text","class","form-control",3,"formControlName","id","pattern","placeholder","change",4,"ngSwitchCase"],["pPassword","","type","password","class","form-control",3,"formControlName","id","change",4,"ngSwitchCase"],["class","form-control","multiple","",3,"id","formControlName","change",4,"ngSwitchCase"],["class","form-control",3,"id","name","formControlName","change",4,"ngSwitchCase"],["class","p-fluid",4,"ngSwitchCase"],["class","ui-g ui-fluid w-100",3,"change",4,"ngSwitchCase"],[3,"id","formControlName","trueValue","falseValue","onChange",4,"ngSwitchCase"],["class","form-control-static",3,"ngClass",4,"ngSwitchCase"],["atp-time-picker","","type","text","class","form-control",3,"formControlName","id","pattern","placeholder","change",4,"ngSwitchCase"],["type","file","ng2FileSelect","",3,"name","uploader","change",4,"ngSwitchCase"],["ngSwitch","'buttonGroup'","role","group",1,"btn-group"],["type","button",3,"class","click",4,"ngFor","ngForOf"],["class","form-control",3,"formControlName","id","placeholder","change",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","help-block text-danger",4,"ngIf"],["class","help-block",4,"ngIf"],[1,"required-star"],[1,"input-group-addon"],["type","text",1,"form-control",3,"formControlName","id","pattern","placeholder","change"],["pPassword","","type","password",1,"form-control",3,"formControlName","id","change"],["multiple","",1,"form-control",3,"id","formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"id","name","formControlName","change"],[1,"p-fluid"],[1,"p-field","p-grid"],[3,"id","name","autoDisplayFirst","options","formControlName","placeholder","onChange"],[1,"p-col-12"],[3,"id","options","autoDisplayFirst","formControlName","placeholder","filter","onChange"],[1,"ui-g","ui-fluid","w-100",3,"change"],[1,"ui-g-12","p-0"],[3,"id","options","formControlName","filter","onChange"],[3,"id","formControlName","trueValue","falseValue","onChange"],[1,"form-control-static",3,"ngClass"],[1,"p-field","p-col-12","p-md-12"],["dateFormat","yy-mm-dd","showButtonBar","true","appendTo","body",3,"formControlName","name","id","change","onSelect"],["atp-time-picker","","type","text",1,"form-control",3,"formControlName","id","pattern","placeholder","change"],["type","file","ng2FileSelect","",3,"name","uploader","change"],["type","button",3,"click"],[3,"innerHTML"],[1,"form-control",3,"formControlName","id","placeholder","change"],[1,"help-block","text-danger"],[1,"help-block"]],template:function(e,t){1&e&&(n.YNc(0,Sa,6,1,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.YNc(3,gi,29,40,"div",3),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf","separator"==t._fieldConfig.type),n.xp6(3),n.Q6J("ngIf","separator"!=t._fieldConfig.type))},directives:[J.O5,Z.JL,Z.sg,J.mk,J.RF,J.n9,J.sg,Z.Fj,Z.JJ,Z.u,Z.c5,Na.QK,Z.K7,Z.YN,Z.Kr,Z.EJ,ma.Lt,yt.NU,Ia.Ql,Ya.f,Qa.ye,C.C6],styles:[".required-star[_ngcontent-%COMP%]{color:red;font-weight:bold}h4[_ngcontent-%COMP%]{font-weight:lighter}.form-control-static[_ngcontent-%COMP%]{margin-top:7px;font-weight:lighter}.form-group[_ngcontent-%COMP%]{margin-bottom:.5rem}.help-block[_ngcontent-%COMP%]{font-size:.7rem}"]}),e})();function hi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form-field",6),n.NdJ("changed",function(t){return n.CHM(e),n.oxw(2).fire_change(t)})("action",function(t){return n.CHM(e),n.oxw(2).fire_action(t)}),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw(2);n.Gre("col-md-",e.cols,""),n.Q6J("formConfig",a.formConfig)("fieldConfig",e)("hidden",a.hiddenFields&&a.hiddenFields.indexOf(e.key)>=0||e.acl&&!a.auth.has(e.acl))("form",a.form)("options",a.options[e.key])}}function mi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",14),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(4).fire_action(t.action)}),n._uU(1),n.qZA()}if(2&e){const e=t.$implicit;n.Gre("btn form-action-button ",e.btnClass,""),n.xp6(1),n.Oqu(e.text)}}function _i(e,t){if(1&e&&(n.TgZ(0,"div",12),n.YNc(1,mi,2,4,"button",13),n.qZA()),2&e){const e=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",e._formConfig.customActions)}}function bi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",7),n._UZ(1,"hr"),n.TgZ(2,"div"),n.YNc(3,_i,2,1,"div",8),n.TgZ(4,"div",9),n.TgZ(5,"button",10),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).fire_submit()}),n._uU(6),n.qZA(),n.TgZ(7,"button",11),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).fire_cancel()}),n._uU(8),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(3),n.Q6J("ngIf",e._formConfig.customActions),n.xp6(2),n.Q6J("hidden",!1===e._formConfig.showSubmitButton),n.xp6(1),n.Oqu(e._formConfig.submitText),n.xp6(1),n.Q6J("hidden",!1===e._formConfig.showDiscardButton),n.xp6(1),n.Oqu(e._formConfig.cancelText)}}function Zi(e,t){if(1&e&&(n.TgZ(0,"form",1,2),n.TgZ(2,"div",3),n.YNc(3,hi,1,8,"dynamic-form-field",4),n.qZA(),n.YNc(4,bi,9,5,"div",5),n.qZA()),2&e){const e=n.oxw();n.Q6J("formGroup",e.form),n.xp6(3),n.Q6J("ngForOf",e._formConfig.fields),n.xp6(1),n.Q6J("ngIf",e._formConfig.customActions||!(!1===e._formConfig.showDiscardButton&&!1===e._formConfig.showSubmitButton))}}let vi=(()=>{class e{constructor(e,t,a){this.ref=e,this.auth=t,this.swal=a,this.submit=new n.vpe,this.cancel=new n.vpe,this.fieldChanged=new n.vpe,this.formChanged=new n.vpe,this.formAction=new n.vpe,this.hiddenFields=[]}ngOnInit(){this.ref.detectChanges()}toFormGroup(e){let t={},a="";return e.forEach(e=>{a=("switch"!=e.type||!0===e.value)&&null,"separator"!=e.type&&(t[e.key]=e.required?new Z.NI(void 0!==e.value?e.value:a,Z.kI.required):new Z.NI(void 0!==e.value?e.value:a)),e.hidden&&this.hiddenFields.push(e.key),e.formControl=t[e.key]}),new Z.cw(t)}ngOnChanges(){this._formConfig=this.formConfig,this._formConfig.layout=this.formConfig.layout||"horizontal",this._formConfig.helpBlock=this.formConfig.helpBlock||"visible",this._formConfig.submitText=this.formConfig.submitText||"Submit",this._formConfig.cancelText=this.formConfig.cancelText||"Cancel",this._formConfig.customActions=this.formConfig.customActions||null,this._formConfig.showSubmitButton=void 0===typeof this.formConfig.showSubmitButton||this.formConfig.showSubmitButton,this._formConfig.showDiscardButton=void 0===typeof this.formConfig.showDiscardButton||this.formConfig.showDiscardButton;for(let e of this.formConfig.fields)e.layout=this._formConfig.layout;this._formConfig.fields=this.formConfig.fields,this.adjustFormFields(),this.form=this.toFormGroup(this._formConfig.fields),this.ref.detectChanges(),this.subscribeForChanges()}regenerate(){this.form=this.toFormGroup(this.formConfig.fields),this.adjustFormFields(),this.ref.detectChanges(),this.subscribeForChanges()}adjustFormFields(){for(let e of this._formConfig.fields)e.disabled&&this.disableField(e.key)}subscribeForChanges(){!this.form||this.form.valueChanges.subscribe(e=>{this.formChanged.emit(e)})}fire_submit(){if("INVALID"==this.form.status){for(let e of this.formConfig.fields){if("separator"==e.type||"file"==e.type)continue;let t=e.key;"INVALID"==this.form.controls[t].status&&(this.form.controls[t].markAsDirty(),this.form.controls[t].markAsTouched())}window.scrollTo(0,0)}"VALID"==this.form.status&&this.submit.emit(this.form)}disableField(e){for(const t of this.formConfig.fields)"separator"!==t.type&&t.key==e&&this.form.controls[e].disable()}enableField(e){for(let t of this.formConfig.fields)t.key==e&&this.form.controls[e].enable()}ignoreField(e){for(let t of this.formConfig.fields)t.key==e&&this.form.controls[e].setErrors(null)}fire_cancel(){this.cancel.emit()}fire_action(e){this.formAction.emit(e)}getForm(){return this.form.value}fire_change(e){this.fieldChanged.emit({key:e.key,value:e.value})}reset(){this._formConfig=this.formConfig,this.regenerate()}hideField(e){-1==this.hiddenFields.indexOf(e)&&this.hiddenFields.push(e)}showField(e){let t=this.hiddenFields.indexOf(e);for(;-1!=t;)this.hiddenFields.splice(t,1),t=this.hiddenFields.indexOf(e)}setFieldValue(e,t){let a=this.formConfig.fields;for(let i=0;i<a.length;i++)"htmlFile"!==a[i].type&&a[i].key==e&&(a[i].value=t);return a}setFormValue(e){let t=Object.keys(e),a=this.formConfig.fields;for(let i of t)a=this.setFieldValue(i,e[i]);this.formConfig.fields=a,this.regenerate()}setLabel(e,t){const a=this.formConfig.fields;for(let i=0;i<a.length;i++)a[i].key===e&&(a[i].label=t)}getLabel(e){let t=null;const a=this.formConfig.fields;for(let i=0;i<a.length;i++)a[i].key===e&&(t=a[i].label);return t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(_),n.Y36(Ge))},e.\u0275cmp=n.Xpm({type:e,selectors:[["dynamic-form"]],inputs:{formConfig:"formConfig",options:"options"},outputs:{submit:"submit",cancel:"cancel",fieldChanged:"fieldChanged",formChanged:"formChanged",formAction:"formAction"},features:[n.TTD],decls:2,vars:1,consts:[["class","form","id","myForm",3,"formGroup",4,"ngIf"],["id","myForm",1,"form",3,"formGroup"],["myForm",""],[1,"row"],[3,"formConfig","fieldConfig","hidden","form","options","class","changed","action",4,"ngFor","ngForOf"],["style","margin-top: 100px;",4,"ngIf"],[3,"formConfig","fieldConfig","hidden","form","options","changed","action"],[2,"margin-top","100px"],["class","form-actions left","style","float: left;",4,"ngIf"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"hidden","click"],["type","button",1,"btn","btn-default","form-action-button",3,"hidden","click"],[1,"form-actions","left",2,"float","left"],["type","button",3,"class","click",4,"ngFor","ngForOf"],["type","button",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.YNc(1,Zi,5,3,"form",0),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",t._formConfig.fields.length>0))},styles:[".form-action-button[_ngcontent-%COMP%]{min-width:100px}"]}),e})();var wi=a(3401);let yi=(()=>{class e{constructor(e,t,a){this.api=e,this.auth=t,this.router=a,this.load()}load(){return this.api._get("resources/forms")}getForm(e){this.forms=JSON.parse(localStorage.getItem("sas_forms"));let t=null;for(let a=0;a<this.forms.length&&!t;a++)this.forms[a].name==e&&(t=a);return null!=t?Object.assign([],this.forms[t].form):null}canActivateChild(){return!!this.forms||this.load().pipe((0,s.U)(e=>e?(this.forms=e.data,localStorage.setItem("sas_forms",JSON.stringify(this.forms)),!0):(console.error("unable to load forms data"),!1)))}}return e.\u0275fac=function(t){return new(t||e)(n.LFG(h),n.LFG(_),n.LFG(p.F0))},e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var xi=a(33013);const Ai=["dynamic_form"];function qi(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"alert",9),n._uU(2),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw();n.xp6(1),n.Q6J("type",e.type)("dismissible",!0),n.xp6(1),n.Oqu(a.tr.translate(e.text))}}function Ti(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",10,11),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().fire_submit(t)})("cancel",function(){return n.CHM(e),n.oxw().cancel.emit()})("formAction",function(t){return n.CHM(e),n.oxw().onFormAction(t)})("fieldChanged",function(t){return n.CHM(e),n.oxw().onChange(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}class Ci{constructor(e,t,a,i){this.api=e,this.route=t,this.tr=a,this.toastr=i,this.header=!0,this.submit=new n.vpe,this.cancel=new n.vpe,this.changed=new n.vpe,this.formChanged=new n.vpe,this.formAction=new n.vpe,this.onLoaded=new n.vpe,this.form_config={layout:"",fields:[],submitText:this.tr.translate("global_button_submit"),cancelText:this.tr.translate("global_button_dismiss")},this.loading=!1,this.mode="store",this.alerts=[],this.primary_key_value=null,this.rowsCount=0}ngOnChanges(){!this.fields||(this.form_config.fields=this.fields,this.form_config.layout="horizontal",this.form_config.helpBlock="hidden",this.route.params.subscribe(e=>{e.id&&(this.load(e.id),this.primary_key_value=e.id)}))}setFieldValue(e,t){let a=this.fields;for(let i=0;i<a.length;i++)a[i].key==e&&(a[i].value=t);return a}setFormValue(e){let t=Object.keys(e),a=this.fields;for(let i of t)a=this.setFieldValue(i,e[i]);return a}fire_submit(e){this.alerts=[];let t=this.resourceRoute,a={};for(let i in e.value)a[i]=e.value[i],""===e.value[i]&&(a[i]=null),"null"===e.value[i]&&(a[i]=null),!1===e.value[i]&&(a[i]=0),!0===e.value[i]&&(a[i]=1);this.loading=!0,this.primary_key_value&&(t=t+"/"+this.primary_key_value),this.blockUI.start("please wait..."),"store"==this.mode?this.api.post(t,a).subscribe(t=>{this.blockUI.stop(),this.loading=!1,200==t.status?this.submit.emit(e):(window.scrollTo(0,0),this.alerts.push({type:"warning",text:t.message}))},e=>{this.blockUI.stop()}):this.api.put(t,a).subscribe(t=>{this.blockUI.stop(),this.loading=!1;const a=t.status;if(200===a)this.submit.emit(e);else if(201===a){window.scrollTo(0,0);for(let e of t.message)this.alerts.push({type:"warning",text:e})}-999===t.status&&this.toastr.warning(this.tr.translate(t.message))},e=>{this.blockUI.stop()})}load(e){let t=this.resourceRoute;t=t+"/"+e,this.loading=!0,this.blockUI.start("loading..."),this.api.get(t).subscribe(e=>{this.blockUI.stop(),this.loading=!1;const t=e.data;this.form_config.fields=this.setFormValue(t),this.formView.regenerate(),this.disableUpdateFields(),this.ignoreUpdateFields(),this.formChanged.emit(e.data),this.mode="update",this.rowsCount=t.total,this.onLoaded.emit(e.data)},e=>{this.blockUI.stop()})}disableUpdateFields(){if(this.disabledOnUpdate)for(let e of this.disabledOnUpdate)this.formView.disableField(e)}ignoreUpdateFields(){if(this.ignoredOnUpdate)for(let e of this.ignoredOnUpdate)this.formView.ignoreField(e)}ignoreField(e){this.formView.ignoreField(e)}enableField(e){this.formView.enableField(e)}disableField(e){this.formView.disableField(e)}hideField(e){this.formView.hideField(e)}showField(e){this.formView.showField(e)}onChange(e){this.changed.emit(e)}onFormChange(e){this.formChanged.emit(e)}onFormAction(e){this.formAction.emit(e)}}Ci.\u0275fac=function(e){return new(e||Ci)(n.Y36(h),n.Y36(p.gz),n.Y36(M),n.Y36(g._W))},Ci.\u0275cmp=n.Xpm({type:Ci,selectors:[["model-form"]],viewQuery:function(e,t){if(1&e&&n.Gf(Ai,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},inputs:{resourceRoute:"resourceRoute",fields:"fields",title:"title",icon:"icon",options:"options",disabledOnUpdate:"disabledOnUpdate",ignoredOnUpdate:"ignoredOnUpdate",header:"header"},outputs:{submit:"submit",cancel:"cancel",changed:"changed",formChanged:"formChanged",formAction:"formAction",onLoaded:"onLoaded"},features:[n.TTD],decls:11,vars:8,consts:[[1,"card"],[1,"card-header",3,"hidden"],[1,"card-actions"],[3,"hidden"],[1,"text-muted"],[1,"fa","fa-cog","fa-spin"],[1,"card-body"],[4,"ngFor","ngForOf"],["id","dynamic_form",3,"formConfig","options","submit","cancel","formAction","fieldChanged","formChanged",4,"ngIf"],[3,"type","dismissible"],["id","dynamic_form",3,"formConfig","options","submit","cancel","formAction","fieldChanged","formChanged"],["dynamic_form",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i"),n._uU(3),n.TgZ(4,"div",2),n.TgZ(5,"a",3),n.TgZ(6,"span",4),n._UZ(7,"i",5),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",6),n.YNc(9,qi,3,3,"div",7),n.YNc(10,Ti,2,2,"dynamic-form",8),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("hidden",!t.header),n.xp6(1),n.Tol(t.icon),n.xp6(1),n.hij(" ",t.title," "),n.xp6(2),n.Q6J("hidden",!t.loading),n.xp6(4),n.Q6J("ngForOf",t.alerts),n.xp6(1),n.Q6J("ngIf",t.fields))},directives:[J.sg,J.O5,k.wxo,vi],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Ci.prototype,"blockUI",void 0);var ki=a(45121);function Ui(e,t){1&e&&(n.TgZ(0,"div",11),n._uU(1," No Records Found "),n.qZA())}function Mi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",14),n._uU(1),n.TgZ(2,"span"),n.TgZ(3,"a",15),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).deletePPP(t.id)}),n._UZ(4,"i",16),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.hij(" ",e.service_name," ")}}function Fi(e,t){if(1&e&&(n.TgZ(0,"ul",12),n.YNc(1,Mi,5,1,"li",13),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.allowed_ppp_list)}}const Ji=function(){return["username"]},Oi=function(){return["username","password","confirm_password"]},Ni=function(){return{width:"400px"}};let Ii=(()=>{class e{constructor(e,t,a,i,n,o,s,r,l,c){this.api=e,this.log=t,this.router=a,this.formLoader=i,this.auth=n,this.location=o,this.tr=s,this.toastr=r,this.route=l,this.confirmationService=c,this.hasHeader=!0,this.acl_list=null,this.managers_list=null,this.site_list=[],this.ppp_dialog_visible=!1,this.allowed_ppp_list=[],this.ppp_user_input="",this.nas_list=[],this.group_list=[],this.options={parent_id:[],acl_group_id:[],site_id:[],group_id:[]}}ngOnInit(){this.formFields=this.formLoader.getForm("manager_form"),this.loadResources(),this.route.params.subscribe(e=>{e.id&&(this.manager_id=e.id,this.loadAllowedPPP())})}loadResources(){this.api.get("index/acl").subscribe(e=>{this.acl_list=[];for(let t of e.data)this.acl_list.push({value:t.id,label:t.name});this.options.acl_group_id=this.acl_list}),this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.parent_id=this.managers_list}),this.api.get("nas").subscribe(e=>{if(200===e.status){for(const t of e.data)this.nas_list.push({value:t.id,label:t.shortname});this.options.allowed_nases=this.nas_list}}),this.auth.has("prm_groups_assign")&&this.api.get("group").subscribe(e=>{if(200===e.status){for(const t of e.data)this.group_list.push({value:t.id,label:t.name});this.group_list.unshift({value:-1,label:this.tr.translate("global_none")}),this.options.group_id=this.group_list}}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(e=>{if(200===e.status){for(const t of e.data)this.site_list.push({value:t.id,label:t.name});this.options.site_id=this.site_list,this.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"})}onSubmit(e){this.toastr.success(this.tr.translate("rsp_success")),this.router.navigate(["managers/index"])}onFormAction(e){"ppp_service_editor"===e&&(this.ppp_dialog_visible=!0,this.ppp_user_input="")}loadAllowedPPP(){this.api.get("manager/ppp/"+this.manager_id).subscribe(e=>{200===e.status&&(this.allowed_ppp_list=e.data)})}addPPP(){this.ppp_user_input.length<1||this.api.post("manager/ppp",{manager_id:this.manager_id,service_name:this.ppp_user_input}).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.loadAllowedPPP(),this.ppp_user_input="")})}deletePPP(e){this.confirmationService.confirm({message:"Delete selected service?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.api.delete("manager/ppp/"+e).subscribe(e=>{this.toastr.success(this.tr.translate(e.message)),this.loadAllowedPPP()})}})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(f),n.Y36(p.F0),n.Y36(yi),n.Y36(_),n.Y36(J.Ye),n.Y36(M),n.Y36(g._W),n.Y36(p.gz),n.Y36(xi.YP))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-form"]],inputs:{hasHeader:"hasHeader"},decls:14,vars:21,consts:[[3,"fields","options","title","icon","resourceRoute","disabledOnUpdate","ignoredOnUpdate","header","submit","formAction","cancel"],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","aria-describedby","button-addon2","placeholder","PPP service name","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-plus"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0),n.NdJ("submit",function(e){return t.onSubmit(e)})("formAction",function(e){return t.onFormAction(e)})("cancel",function(){return t.location.back()}),n.qZA(),n.TgZ(1,"p-dialog",1),n.NdJ("visibleChange",function(e){return t.ppp_dialog_visible=e}),n.TgZ(2,"p-header"),n._uU(3),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"div",3),n.TgZ(6,"input",4),n.NdJ("ngModelChange",function(e){return t.ppp_user_input=e}),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"button",6),n.NdJ("click",function(){return t.addPPP()}),n._UZ(9,"i",7),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",8),n.YNc(11,Ui,2,0,"div",9),n.YNc(12,Fi,2,1,"ul",10),n.qZA(),n.qZA(),n._UZ(13,"p-confirmDialog")),2&e&&(n.Q6J("fields",t.formFields)("options",t.options)("title","Manager Form")("icon","fa fa-user-secret")("resourceRoute","manager")("disabledOnUpdate",n.DdM(18,Ji))("ignoredOnUpdate",n.DdM(19,Oi))("header",t.hasHeader),n.xp6(1),n.Akn(n.DdM(20,Ni)),n.Q6J("visible",t.ppp_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),n.xp6(2),n.hij(" ",t.tr.translate("manager_ppp_dialog_title")," "),n.xp6(3),n.Q6J("ngModel",t.ppp_user_input),n.xp6(5),n.Q6J("ngIf",0===t.allowed_ppp_list.length),n.xp6(1),n.Q6J("ngIf",t.allowed_ppp_list.length>0))},directives:[Ci,ki.V,xi.h4,Z.Fj,Z.JJ,Z.On,J.O5,T.Q,J.sg],encapsulation:2}),e})();const Yi=["advanced_filter"];function Qi(e,t){if(1&e&&n._UZ(0,"dynamic-form",9,10),2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let Si=(()=>{class e{constructor(e){this.tr=e,this.fields=[],this.options={},this.changed=new n.vpe,this.close=new n.vpe,this.form_config={layout:"vertical",fields:[],showDiscardButton:!1,showSubmitButton:!1},this.advancedFilter={}}ngOnChanges(){this.fields.length>0&&(this.form_config.fields=this.fields)}search(){this.advancedFilter=[];const e=this.dynamicForm.getForm(),t=Object.keys(e);console.log(e);for(const a of t)this.advancedFilter[a]=0===e[a]||e[a]&&null!==e[a]&&""!==e[a]?e[a]:"";this.changed.emit(this.advancedFilter)}reset(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["advanced-filter"]],viewQuery:function(e,t){if(1&e&&n.Gf(Yi,5),2&e){let e;n.iGM(e=n.CRH())&&(t.dynamicForm=e.first)}},inputs:{fields:"fields",options:"options"},outputs:{changed:"changed",close:"close"},features:[n.TTD],decls:11,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-actions"],[3,"click"],[1,"text-muted"],[1,"fa","fa-times"],[1,"card-body"],["id","advanced_filter",3,"formConfig","options",4,"ngIf"],[1,"btn","btn-secondary","search-button",3,"click"],["id","advanced_filter",3,"formConfig","options"],["advanced_filter",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._uU(2),n.TgZ(3,"div",2),n.TgZ(4,"a",3),n.NdJ("click",function(){return t.close.emit()}),n.TgZ(5,"span",4),n._UZ(6,"i",5),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.YNc(8,Qi,2,2,"dynamic-form",7),n.TgZ(9,"button",8),n.NdJ("click",function(){return t.search()}),n._uU(10),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.hij(" \xa0",t.tr.translate("global_label_advanced_filter")," "),n.xp6(6),n.Q6J("ngIf",t.fields),n.xp6(2),n.Oqu(t.tr.translate("global_button_search")))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{height:100%;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border:1px solid #b2b2b2;background-color:#f5f5f5}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .col-form-label{padding-top:0!important}"]}),e})();const Pi=["profileFormView"];function Di(e,t){if(1&e&&(n.TgZ(0,"a",8),n._uU(1,"Daily Policies"),n.qZA()),2&e){const e=n.oxw(2);n.MGl("href","#/profile/policies/",e.profile_id,"",n.LSH)}}function Hi(e,t){if(1&e&&(n.TgZ(0,"div",3),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.YNc(4,Di,2,1,"a",7),n._uU(5,"\xa0|\xa0 "),n.TgZ(6,"a",8),n._uU(7,"Custom Radius Attributes"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Q6J("ngIf",e.auth.has("prm_profiles_policy_manager")),n.xp6(2),n.MGl("href","#/radius/custom/profile/",e.profile_id,"",n.LSH)}}let Ri=(()=>{class e{constructor(e,t,a,i,n,o,s,r){this.api=e,this.log=t,this.location=a,this.route=i,this.auth=n,this.config=o,this.router=s,this.tr=r,this.profile_id=null,this.managers_list=[],this.site_list=[],this.ippool_list=[],this.formFields=[{key:"separator1",label:this.tr.translate("profile_form_basic_info"),type:"separator",cols:12},{key:"name",label:this.tr.translate("profile_form_name"),type:"text",cols:6,required:!0},{key:"enabled",label:this.tr.translate("global_enabled"),type:"switch",cols:6,value:1},{key:"price",label:this.tr.translate("profile_form_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!0},{key:"available_ucp",label:this.tr.translate("profile_form_available_ucp"),type:"switch",value:1,cols:6},{key:"downrate",label:this.tr.translate("profile_form_downrate"),type:"text",pattern:"[0-9]*",placeholder:"0",value:0,required:!0,cols:6},{key:"uprate",label:"profile_form_uprate",type:"text",pattern:"[0-9]*",placeholder:"0",value:0,required:!0,cols:6},{key:"type",label:"profile_form_type",type:"select",value:0,required:!0,placeholder:"profile type",cols:6,options:[{value:0,label:this.tr.translate("profile_form_type_prepaid")},{value:1,label:this.tr.translate("profile_form_type_postpaid")},{value:2,label:this.tr.translate("profile_form_type_fup")},{value:3,label:this.tr.translate("profile_form_type_extension")}]},{key:"extension_allowed_profiles",label:"profile_form_allowed_to_extend",type:"select2multiple",cols:6,required:!1,value:[],options:[],hidden:!0},{key:"description",label:"profile_form_description",type:"text",cols:6,required:!1},{key:"vat",label:"profile_form_vat",type:"text",pattern:"[0-9.]*",placeholder:"0",value:"0",cols:6,required:!1},{key:"separator2",type:"separator",label:"profile_form_service_limits",cols:12},{key:"limit_expiration",label:"profile_form_limit_expiration",type:"switch",value:0,cols:6},{key:"expiration_amount",label:"profile_form_expiration_units",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"expiration_unit",label:"",type:"select",value:1,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_days")},{value:1,label:this.tr.translate("global_months")},{value:2,label:this.tr.translate("global_hours")}]},{key:"limit_uptime",label:"profile_form_limit_uptime",type:"switch",value:0,cols:6},{key:"uptime_amount",label:"profile_form_uptime_units",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_hours")}]},{key:"limit_download",label:"profile_form_limit_download",type:"switch",value:0,cols:6},{key:"download_amount",label:"profile_form_download_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"limit_upload",label:"profile_form_limit_upload",type:"switch",value:0,cols:6},{key:"upload_amount",label:"profile_form_upload_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"limit_traffic",label:"profile_form_limit_total_traffic",type:"switch",value:0,cols:6},{key:"traffic_amount",label:"profile_form_total_traffic_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"sepearator3",type:"separator",label:"profile_form_daily_quota",cols:12},{key:"daily_download_limit",label:"profile_form_daily_download_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_upload_limit",label:"profile_form_daily_upload_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_traffic_limit",label:"profile_form_daily_traffic_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_uptime_limit",label:"profile_form_daily_uptime_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:4},{key:"daily_uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_hours")}]},{key:"separator3",type:"separator",label:"profile_form_advanced_settings",cols:12},{key:"ippool_mode",label:"profile_form_pool_mode",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_pool_nas")},{value:1,label:this.tr.translate("profile_form_pool_sas")}]},{key:"pool",label:"profile_form_pool_name",type:"text",required:!1,cols:6},{key:"sas_ippool_id",label:"SAS4 Pool Name",type:"select2",options:[],hidden:!0},{key:"burst_enabled",label:"profile_form_enable_burst",type:"switch",value:0,cols:6},{key:"burst_limit_dl",label:"Download Burst Limit",type:"text",pattern:"[0-9]*",placeholder:"kbps",hidden:!0,required:!1,cols:6},{key:"burst_limit_ul",label:"Upload Burst Limit",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_threshold_dl",label:"Download Burst Threshold",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_threshold_ul",label:"Upload Burst Threshold",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_time_dl",label:"Download Burst Time (sec)",type:"text",pattern:"[0-9]*",placeholder:"seconds",required:!1,hidden:!0,cols:6},{key:"burst_time_ul",label:"Upload Burst Time (sec)",type:"text",pattern:"[0-9]*",placeholder:"seconds",required:!1,hidden:!0,cols:6},{key:"expired_next_profile_id",label:"profile_form_expired_next_profile",type:"select",value:null},{key:"quota_next_profile_id",label:"profile_form_quota_next_profile",type:"select",value:null},{key:"daily_next_profile_id",label:"profile_form_daily_next_profile",type:"select",value:null},{key:"ignore_static_ip",label:"profile_form_ignore_static_ip",type:"switch",value:0,cols:6},{key:"private",label:"profile_form_privacy",type:"select",value:0,options:[{value:0,label:"public"},{value:1,label:"private"}]},{key:"allowed_managers",label:"profile_form_privacy_allowed_managers",type:"select2multiple",value:[],options:[],hidden:!0},{key:"allow_submanagers",label:"profile_form_privacy_sub_managers",type:"switch",value:0,hidden:!0},{key:"site_id",label:"profile_form_site",type:"select2",value:null,acl:"prm_sites_management",options:[]},{key:"allowed_services",label:"profile_form_allowed_services",type:"select",value:0,options:[{value:0,label:"any"},{value:1,label:"PPP"},{value:2,label:"Hotspot"}]},{key:"fixed_expiration_time",label:"profile_form_fix_expiration_time",type:"switch",value:0,cols:6},{key:"expiration_time",label:"profile_form_expiration_time",type:"clock",cols:6,hidden:!0},{key:"debitable",label:"profile_form_debitable_service",type:"switch",value:0,cols:6},{key:"no_freezone",label:"profile_form_freezone",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_freezone_allowed")},{value:1,label:this.tr.translate("profile_form_no_freezone")}],cols:6},{key:"max_price",label:this.tr.translate("profile_form_max_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!1},{key:"max_ucp_price",label:this.tr.translate("profile_form_max_ucp_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!1},{key:"expiration_grace_period",label:"profile_form_grace_period",type:"text",pattern:"[0-9.]*",cols:6,required:!1},{key:"hotspot_separate_session",label:"profile_form_separate_hotspot_session",type:"switch",value:0,cols:6,helpBlock:"visible",help:"Allow users to login with ppp and hotspot simultaneously"},{key:"ignore_pool_on_hotspot",label:"profile_form_ignore_pool_on_hotspot",type:"switch",value:!1,cols:6},{key:"separator4",label:"Mikrotik Settings",type:"separator",cols:12},{key:"mikrotik_cir_download",label:"Download CIR (kbps)",type:"text",pattern:"[0-9.]*",required:!1},{key:"mikrotik_cir_upload",label:"Upload CIR (kbps)",type:"text",pattern:"[0-9.]*",required:!1},{key:"mikrotik_addresslist",label:"Address List",type:"text",required:!1},{key:"mikrotik_queue_priority",label:"Queue Priority",type:"text",pattern:"[0-9.]*",required:!1,value:"8"},{key:"sepearator8",type:"separator",label:"Cisco Options",cols:12},{key:"cisco_qos_policy_in",label:"QOS-Policy-In",type:"text",value:0,cols:6},{key:"cisco_qos_policy_out",label:"QOS-Policy-Out",type:"text",value:0,cols:6},{key:"separator5",label:"profile_form_billing_options",type:"separator",cols:12},{key:"monthly",label:"profile_form_monthly_account",type:"switch",value:0},{key:"monthly_start_day",label:"profile_form_monthly_start_day",type:"text",value:"1",pattern:"[0-9]*",required:!1,hidden:!0},{key:"monthly_charge_entire_month",label:"profile_form_monthly_charge_full",type:"switch",value:0,hidden:!0},{key:"carry_over",label:"profile_form_carry_over",type:"switch",value:0},{key:"reset_daily_traffic",label:"profile_form_reset_daily_traffic",type:"switch",value:0},{key:"reset_expiration_on_activation",label:"profile_form_reset_expiration",type:"switch",value:0},{key:"quota_addition_date",label:"profile_form_quota_addition_date",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_quota_immediate")},{value:1,label:this.tr.translate("profile_form_quota_next")}]},{key:"preserve_traffic_counters_expired",label:"profile_form_preserve_counters",type:"switch",value:0},{key:"separator6",label:"profile_forward_reward_points",type:"separator",cols:12},{key:"reward_points_awarded",label:"profile_form_awarded_points",type:"text",value:"0",pattern:"[0-9]*",required:!1},{key:"reward_points_allow_activation",label:"profile_form_allow_activation",type:"switch",value:!1},{key:"reward_points_required",label:"profile_form_required_points",type:"text",value:"0",pattern:"[0-9]*",required:!1},{key:"sepearator7",type:"separator",label:"profile_form_initial_values",cols:12},{key:"initial_expiration_amount",label:"profile_form_initial_expiration",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"initial_expiration_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_days")},{value:1,label:this.tr.translate("global_months")},{value:2,label:this.tr.translate("global_hours")}]},{key:"initial_traffic_amount",label:"profile_form_initial_traffic",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"initial_uptime_amount",label:"profile_form_initial_uptime",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"initial_uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_days")}]}],this.options={expired_next_profile_id:[{value:null,label:"None"}],quota_next_profile_id:[{value:null,label:"None"}],daily_next_profile_id:[{value:null,label:"None"}],allowed_managers:[],site_id:[{value:null,label:"any"}],extension_allowed_profiles:[]},this.fupProfiles=[],this.allowed_extension_fields=["name","enabled","price","available_ucp","type","extension_allowed_profiles","description","vat","expiration_amount","expiration_unit","limit_expiration","limit_uptime","uptime_amount","uptime_unit","limit_download","download_amount","limit_upload","upload_amount","limit_traffic","traffic_amount","reward_points_allow_activation","reward_points_required"],n.has("prm_profiles_update")?(this.route.params.subscribe(e=>{e.id&&(this.profile_id=e.id)}),this.loadResources()):this.router.navigate(["dashboard"])}ngOnInit(){!this.auth.has("prm_profiles_index")&&!this.auth.has("prm_managers_sysadmin")&&this.router.navigate(["dashboard"])}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(const t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.allowed_managers=this.managers_list}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(e=>{if(200===e.status){for(const t of e.data)this.site_list.push({value:t.id,label:t.name});this.options.site_id=this.site_list,this.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"}),this.api.get("list/profile/2").subscribe(e=>{200===e.status&&e.data.map(e=>{this.fupProfiles.push({value:e.id,label:e.name})}),this.fupProfiles.push({value:null,label:"None"}),this.options.expired_next_profile_id=this.fupProfiles,this.options.quota_next_profile_id=this.fupProfiles,this.options.daily_next_profile_id=this.fupProfiles});let e=[];this.api.get("list/profile/0").subscribe(t=>{200===t.status&&(t.data.map(t=>{e.push({value:t.id,label:t.name})}),this.options.extension_allowed_profiles=e)}),this.api.get("index/ippool").subscribe(e=>{200===e.status&&(e.data.map(e=>{this.ippool_list.push({value:e.id,label:e.name})}),this.options.sas_ippool_id=this.ippool_list)})}onFormChanged(e){1===e.burst_enabled&&(this.profileFormView.showField("burst_limit_dl"),this.profileFormView.showField("burst_limit_ul"),this.profileFormView.showField("burst_threshold_dl"),this.profileFormView.showField("burst_threshold_ul"),this.profileFormView.showField("burst_time_dl"),this.profileFormView.showField("burst_time_ul")),0===e.burst_enabled&&(this.profileFormView.hideField("burst_limit_dl"),this.profileFormView.hideField("burst_limit_ul"),this.profileFormView.hideField("burst_threshold_dl"),this.profileFormView.hideField("burst_threshold_ul"),this.profileFormView.hideField("burst_time_dl"),this.profileFormView.hideField("burst_time_ul")),1==e.monthly&&(this.profileFormView.showField("monthly_start_day"),this.profileFormView.showField("monthly_charge_entire_month")),1!=e.monthly&&(this.profileFormView.hideField("monthly_start_day"),this.profileFormView.hideField("monthly_charge_entire_month")),"1"==e.private&&(this.profileFormView.showField("allowed_managers"),this.profileFormView.showField("allow_submanagers")),"1"!=e.private&&(this.profileFormView.hideField("allowed_managers"),this.profileFormView.hideField("allow_submanagers")),1==e.fixed_expiration_time&&this.profileFormView.showField("expiration_time"),1!=e.fixed_expiration_time&&this.profileFormView.hideField("expiration_time"),1===e.ippool_mode&&(this.profileFormView.showField("sas_ippool_id"),this.profileFormView.hideField("pool")),0===e.ippool_mode&&(this.profileFormView.hideField("sas_ippool_id"),this.profileFormView.showField("pool")),1!=e.reward_points_allow_activation&&this.profileFormView.hideField("reward_points_required"),1==e.reward_points_allow_activation&&this.profileFormView.showField("reward_points_required"),3===e.type&&this.profileFormView.showField("extension_allowed_profiles"),3!==e.type&&this.profileFormView.hideField("extension_allowed_profiles")}enableAllFields(){for(const e of this.profileFormView.fields)"separator"!==e.type&&this.profileFormView.enableField(e.key)}onSubmit(e){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(f),n.Y36(J.Ye),n.Y36(p.gz),n.Y36(_),n.Y36(l),n.Y36(p.F0),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-profile-form"]],viewQuery:function(e,t){if(1&e&&n.Gf(Pi,5),2&e){let e;n.iGM(e=n.CRH())&&(t.profileFormView=e.first)}},decls:3,vars:6,consts:[["class","card",4,"ngIf"],["name","profileFormView",3,"fields","options","title","icon","resourceRoute","submit","cancel","formChanged"],["profileFormView",""],[1,"card"],[1,"card-body",2,"border","1px solid grey","padding-top","10px","padding-bottom","10px","background","white","box-sizing","border-box"],[1,"toolbar"],[1,"btn-group","float-right"],[3,"href",4,"ngIf"],[3,"href"]],template:function(e,t){1&e&&(n.YNc(0,Hi,8,2,"div",0),n.TgZ(1,"model-form",1,2),n.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()})("formChanged",function(e){return t.onFormChanged(e)}),n.qZA()),2&e&&(n.Q6J("ngIf",null!=t.profile_id),n.xp6(1),n.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("profile_form_title"))("icon","fa fa-puzzle-piece")("resourceRoute","profile"))},directives:[J.O5,Ci],encapsulation:2}),e})(),Vi=(()=>{class e{constructor(e,t,a,i){this.location=e,this.formsLoader=t,this.auth=a,this.api=i,this.site_list=[],this.options={},this.formFields=this.formsLoader.getForm("nas_form"),this.options.site_id=[],this.auth.has("prm_sites_management")?this.api.get("site").subscribe(e=>{if(200===e.status){for(const t of e.data)this.site_list.push({value:t.id,label:t.name});this.options.site_id=this.site_list,this.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"})}onSubmit(e){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(J.Ye),n.Y36(yi),n.Y36(_),n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-nas-form"]],decls:1,vars:5,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0),n.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),n.qZA()),2&e&&n.Q6J("fields",t.formFields)("options",t.options)("title","NAS Form")("icon","fa fa-server")("resourceRoute","nas")},directives:[Ci],encapsulation:2}),e})();const Li=["nas_model_view"];function Ei(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",2,3),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}class Ki{constructor(e,t,a,i,n,o){this.router=e,this.toastr=t,this.api=a,this.swal=i,this.confirmationService=n,this.auth=o,this.columns=[{dataKey:"shortname",label:"Name",class:"href"},{dataKey:"nasname",label:"IP Address"},{dataKey:"type",label:"Type",pipe:"nasname"},{dataKey:"secret",label:"Secret"},{dataKey:"online_users_count",label:"Online Users",sortBy:"online_users_count"},{dataKey:"ping_time",label:"RTT",dataResolver:function(e,t){return 1!==t.monitor?"-":-1===t.ping_time?"timeout":e+"ms"},classFn:function(e){return 1!==e.monitor?"":e.ping_time>2e3||e.ping_time<0?"text-secondary":e.ping_time>500?"text-warning":"text-success"}},{dataKey:"ping_loss",label:"Packet Loss %",dataResolver:function(e,t){return 1!==t.monitor?"-":e+"%"},classFn:function(e){return 1!==e.monitor?"":e.ping_loss>=50?"text-danger":e.ping_loss>=25?"text-warning":"text-success"}}],this.actions=[{name:"new",label:"New",icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:"NAS List",icon:"fa fa-server",columns:this.columns,dataUrl:"index/nas",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:this.auth.has("prm_nas_export"),modelName:"nas",hasAdvancedFilter:!1,showRowsCount:!0}}onAction(e){switch(e.action){case"new":this.router.navigate(["nas/"]);break;case"delete":this.destroy();break;case"reboot":this.reboot()}}onCellClicked(e){"shortname"===e.column&&this.router.navigate(["nas",e.row.id])}destroy(){this.swal.confirm({title:"Delete NAS",type:"warning",text:"Delete Selected NAS ?",confirmButtonText:"Yes"}).subscribe(()=>{let e=null;if(this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.blockUI.start("loading..."),this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(let a of t)e.push(a.id);this.api.post("nas/bulkDelete",e).subscribe(e=>{this.blockUI.stop(),200!==e.status?this.toastr.warning("Unable to delete some NASs"):(this.toastr.success("NAS(s) deleted"),this.modelView.reload())})}else this.api.delete("nas/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.modelView.reload(),this.toastr.success("NAS Deleted","")):this.toastr.warning("Unable to delete NAS")})})}reboot(){const e=[];0===this.modelView.selectedRows().length&&null===this.modelView.currentRow||(this.modelView.selectedRows().map(t=>{e.push(t.id)}),e.push(this.modelView.currentRow.id),this.confirmationService.confirm({message:"Reboot selected NAS(s)",accept:()=>{this.api.post("nas/reboot",{rows:e}).subscribe(e=>{})}}))}}Ki.\u0275fac=function(e){return new(e||Ki)(n.Y36(p.F0),n.Y36(g._W),n.Y36(h),n.Y36(Ge),n.Y36(xi.YP),n.Y36(_))},Ki.\u0275cmp=n.Xpm({type:Ki,selectors:[["app-nas-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(Li,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:2,vars:1,consts:[["name","nas_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","nas_model_view",3,"modelViewConfig","onAction","onCellClicked"],["nas_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,Ei,2,1,"model-table-view",0),n._UZ(1,"p-confirmDialog",1)),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,T.Q,wt],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Ki.prototype,"blockUI",void 0);const Bi=["profile_model_view"];function zi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",2,3),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw(2).onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw(2).onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw(2).loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw(2).loading=!1}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("modelViewConfig",e.modelViewConfig)}}function ji(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,zi,2,1,"model-table-view",1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.modelViewConfig)}}class Gi{constructor(e,t,a,i,n,o,s){this.api=e,this.router=t,this.modalService=a,this.swal=i,this.tr=n,this.auth=o,this.toastr=s,this.columns=[{dataKey:"name",label:this.tr.translate("profiles_table_name"),class:"href"},{dataKey:"price",label:this.tr.translate("global_price"),pipe:"currency"},{dataKey:"pool",label:this.tr.translate("profiles_table_pool_name")},{dataKey:"downrate",label:this.tr.translate("profiles_table_downrate"),pipe:"bitrate"},{dataKey:"uprate",label:this.tr.translate("profiles_table_uprate"),pipe:"bitrate"},{dataKey:"type",label:this.tr.translate("global_type"),dataResolver:this.profileTypeResolver},{dataKey:"expiration_amount",label:this.tr.translate("profiles_table_expiry"),dataResolver:this.profileExpiryResolver},{dataKey:"monthly",label:this.tr.translate("profiles_table_monthly"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"burst_enabled",label:this.tr.translate("profiles_table_burst"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"limit_expiration",label:this.tr.translate("profiles_table_expires"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"users_count",label:this.tr.translate("profiles_table_users")},{dataKey:"site_name",parentKey:"site_details",label:this.tr.translate("profiles_table_site"),hidden:!0},{dataKey:"online_users_count",label:this.tr.translate("profiles_table_online_users")},{dataKey:"expiration_grace_period",label:this.tr.translate("profiles_table_grace_period"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_profiles_create"},{name:"",label:"",type:"separator"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_profiles_create",inline:!0},{name:"copy",label:this.tr.translate("global_actions_copy"),icon:"fa fa-copy",requiresRow:!0,acl:"prm_profiles_create",inline:!0},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,acl:"prm_profiles_delete",inline:!0}],this.modelViewConfig=null,this.loading=!1}ngOnInit(){this.modelViewConfig={title:"Profiles List",icon:"fa fa-puzzle-piece",columns:this.columns,dataUrl:"index/profile",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"profiles",hasInlineActions:!0,hasAdvancedFilter:!1,showRowsCount:!0,allowExport:this.auth.has("prm_managers_sysadmin")}}onCellClicked(e){"name"===e.column&&this.auth.has("prm_profiles_update")&&this.router.navigate(["profile",e.row.id])}profileTypeResolver(e){switch(e){case 0:return"Prepaid";case 1:return"Postpaid";case 2:return"FUP";case 3:return"Extension"}}profileExpiryResolver(e,t){let a=e.toString(),i="Day(s)";return 1==t.expiration_unit&&(i="Month(s)"),2==t.expiration_unit&&(i="Hour(s)"),3==t.expiration_unit&&(i="Minute(s)"),a+" "+i}onAction(e){switch(e.action){case"new":this.router.navigate(["profile/"]);break;case"edit":this.router.navigate(["profile",this.modelView.currentRow.id]);break;case"delete":this.destroy();break;case"copy":this.copy()}}destroy(){this.swal.confirm({title:"Delete Profile(s)",type:"warning",text:"Delete Selected Profile(s) ?",confirmButtonText:"Yes"}).subscribe(()=>{let e=null;if(this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.blockUI.start("loading..."),this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(let a of t)e.push(a.id);this.api.post("profile/bulkDelete",e).subscribe(e=>{this.blockUI.stop(),200!=e.status?this.toastr.warning("Unable to delete some profiles"):(this.toastr.success("profile(s) deleted"),this.modelView.reload())})}else this.api.delete("profile/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.modelView.reload(),this.toastr.success("profile Deleted","")):this.toastr.warning("Unable to delete profile")})})}copy(){let e=null;this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.swal.prompt("New Profile Name").subscribe(t=>{this.api.post("profile/copy",{profile_id:e,new_name:t}).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})})}}function Wi(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"div",38),n.TgZ(2,"div",6),n.TgZ(3,"label"),n._uU(4,"Traffic Threshold (MB)"),n.qZA(),n.TgZ(5,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.threshold1=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngModel",e.policyForm.threshold1)}}function $i(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",4),n.TgZ(1,"div",38),n.TgZ(2,"div",6),n.TgZ(3,"label"),n._uU(4,"Start Time"),n.qZA(),n.TgZ(5,"ngb-timepicker",40),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.start_time=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",38),n.TgZ(7,"div",6),n.TgZ(8,"label"),n._uU(9,"End Time"),n.qZA(),n.TgZ(10,"ngb-timepicker",40),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.end_time=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngModel",e.policyForm.start_time),n.xp6(5),n.Q6J("ngModel",e.policyForm.end_time)}}function Xi(e,t){1&e&&(n.TgZ(0,"option",9),n._uU(1,"Accounting"),n.qZA())}function en(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",43),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.TgZ(4,"label"),n._uU(5,"Download Burst Limit"),n.qZA(),n.TgZ(6,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_limit_dl=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"label"),n._uU(10,"Upload Burst Limit"),n.qZA(),n.TgZ(11,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_limit_ul=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",4),n.TgZ(13,"div",5),n.TgZ(14,"div",6),n.TgZ(15,"label"),n._uU(16,"Download Burst Threshold"),n.qZA(),n.TgZ(17,"input",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_threshold_dl=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"div",5),n.TgZ(19,"div",6),n.TgZ(20,"label"),n._uU(21,"Upload Burst Threshold"),n.qZA(),n.TgZ(22,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_threshold_ul=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",4),n.TgZ(24,"div",5),n.TgZ(25,"div",6),n.TgZ(26,"label"),n._uU(27,"Download Burst Time (sec)"),n.qZA(),n.TgZ(28,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_time_dl=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(29,"div",5),n.TgZ(30,"div",6),n.TgZ(31,"label"),n._uU(32,"Upload Burst Time (sec)"),n.qZA(),n.TgZ(33,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).policyForm.bandwidth.burst_time_ul=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(6),n.Q6J("ngModel",e.policyForm.bandwidth.burst_limit_dl),n.xp6(5),n.Q6J("ngModel",e.policyForm.bandwidth.burst_limit_ul),n.xp6(6),n.Q6J("ngModel",e.policyForm.bandwidth.burst_threshold_dl),n.xp6(5),n.Q6J("ngModel",e.policyForm.bandwidth.burst_threshold_ul),n.xp6(6),n.Q6J("ngModel",e.policyForm.bandwidth.burst_time_dl),n.xp6(5),n.Q6J("ngModel",e.policyForm.bandwidth.burst_time_ul)}}function tn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",41),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.TgZ(4,"label"),n._uU(5,"Download Rate (kbps)"),n.qZA(),n.TgZ(6,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.bandwidth.downrate=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"label"),n._uU(10,"Upload Rate (kbps)"),n.qZA(),n.TgZ(11,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.bandwidth.uprate=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",4),n.TgZ(13,"div",5),n.TgZ(14,"div",6),n.TgZ(15,"label"),n._uU(16,"Enable Burst"),n.qZA(),n._UZ(17,"br"),n.TgZ(18,"p-inputSwitch",40),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.bandwidth.burst_enabled=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(19,en,34,6,"div",42),n.qZA()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngModel",e.policyForm.bandwidth.downrate),n.xp6(5),n.Q6J("ngModel",e.policyForm.bandwidth.uprate),n.xp6(7),n.Q6J("ngModel",e.policyForm.bandwidth.burst_enabled),n.xp6(1),n.Q6J("ngIf",e.policyForm.bandwidth.burst_enabled)}}function an(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",45),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.TgZ(4,"label"),n._uU(5,"Download Ratio (%)"),n.qZA(),n.TgZ(6,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.accounting.dlratio=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"label"),n._uU(10,"Upload Ratio (%)"),n.qZA(),n.TgZ(11,"input",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.accounting.ulratio=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngModel",e.policyForm.accounting.dlratio),n.xp6(5),n.Q6J("ngModel",e.policyForm.accounting.ulratio)}}function nn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",46),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.TgZ(4,"label"),n._uU(5,"Address-List"),n.qZA(),n.TgZ(6,"input",47),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.address_list=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngModel",e.policyForm.address_list)}}function on(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",48),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n.TgZ(4,"label"),n._uU(5,"qos-policy-in"),n.qZA(),n.TgZ(6,"input",47),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.cisco_policy.qos_policy_in=t}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"label"),n._uU(10,"qos-policy-out"),n.qZA(),n.TgZ(11,"input",47),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().policyForm.cisco_policy.qos_policy_out=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngModel",e.policyForm.cisco_policy.qos_policy_in),n.xp6(5),n.Q6J("ngModel",e.policyForm.cisco_policy.qos_policy_out)}}Gi.\u0275fac=function(e){return new(e||Gi)(n.Y36(h),n.Y36(p.F0),n.Y36(We.tT),n.Y36(Ge),n.Y36(M),n.Y36(_),n.Y36(g._W))},Gi.\u0275cmp=n.Xpm({type:Gi,selectors:[["app-profiles-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(Bi,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[[4,"blockUI"],["name","profile_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","profile_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["profile_model_view",""]],template:function(e,t){1&e&&n.YNc(0,ji,2,1,"div",0),2&e&&n.Q6J("blockUI","model-view")},directives:[u.Z2,J.O5,wt],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Gi.prototype,"blockUI",void 0);let sn=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.router=a,this.location=i,this.policyForm={id:null,type:0,profile_id:null,start_time:{hour:null,minute:null},end_time:{hour:null,minute:null},dow:0,threshold1:null,target:0,bandwidth:{downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},accounting:{dlratio:100,ulratio:100},cisco_policy:{qos_policy_out:"",qos_policy_in:""},address_list:""},this.dow=[],this.dayValue=[0,1,2,4,8,16,32,64],this.policyId=null;for(let n=0;n<8;n++)this.dow[n]=0;this.route.params.subscribe(e=>{e.profile_id&&(this.policyForm.profile_id=e.profile_id),e.policy_id&&(this.policyId=e.policy_id,this.api.get("policy/"+this.policyId).subscribe(e=>{if(this.policyForm=e,0==this.policyForm.target&&(this.policyForm.bandwidth=JSON.parse(e.target_options),this.policyForm.accounting={dlratio:100,ulratio:100}),1==this.policyForm.target&&(this.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},this.policyForm.accounting=JSON.parse(e.target_options)),2==this.policyForm.target&&(this.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},this.policyForm.accounting={dlratio:100,ulratio:100}),3==this.policyForm.target&&(this.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},this.policyForm.address_list=JSON.parse(e.target_options).address_list),4==this.policyForm.target&&(this.policyForm.cisco_policy=JSON.parse(e.target_options)),this.checkDays(this.policyForm.dow),0==this.policyForm.type){let t=e.start_time.split(":"),a=e.end_time.split(":");this.policyForm.start_time={hour:parseInt(t[0]),minute:parseInt(t[1])},this.policyForm.end_time={hour:parseInt(a[0]),minute:parseInt(a[1])}}}))})}toggleDOW(e){let t=this.policyForm.dow;this.dow[e]?t+=this.dayValue[e]:t-=this.dayValue[e],this.policyForm.dow=t}save(){this.policyForm.id?this.api.put("policy/"+this.policyForm.id,this.policyForm).subscribe(e=>{this.router.navigate(["/profile/policies/",this.policyForm.profile_id])}):this.api.post("policy",this.policyForm).subscribe(e=>{this.router.navigate(["/profile/policies/",this.policyForm.profile_id])})}checkDays(e){this.dow=[0,0,0,0,0,0,0,0],1&e&&(this.dow[1]=1),2&e&&(this.dow[2]=1),4&e&&(this.dow[3]=1),8&e&&(this.dow[4]=1),16&e&&(this.dow[5]=1),32&e&&(this.dow[6]=1),64&e&&(this.dow[7]=1)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(p.F0),n.Y36(J.Ye))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:78,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","cb_1",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_1",1,"custom-control-label"],["type","checkbox","id","cb_2",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_2",1,"custom-control-label"],["type","checkbox","id","cb_3",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_3",1,"custom-control-label"],["type","checkbox","id","cb_4",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_4",1,"custom-control-label"],["type","checkbox","id","cb_5",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_5",1,"custom-control-label"],["type","checkbox","id","cb_6",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_6",1,"custom-control-label"],["type","checkbox","id","cb_7",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_7",1,"custom-control-label"],["value","1",4,"ngIf"],["value","2"],["value","3"],["value","4"],["id","bandwidth",4,"ngIf"],["id","accounting",4,"ngIf"],["id","addresslist",4,"ngIf"],["id","cisco_policy",4,"ngIf"],[1,"form-actions","right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],[1,"col-sm-6"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["id","bandwidth"],["id","burst",4,"ngIf"],["id","burst"],["type","number","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"],["id","accounting"],["id","addresslist"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["id","cisco_policy"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Policy Form "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"label"),n._uU(9,"Policy Type"),n.qZA(),n.TgZ(10,"select",7),n.NdJ("ngModelChange",function(e){return t.policyForm.type=e}),n.TgZ(11,"option",8),n._uU(12,"Time Based"),n.qZA(),n.TgZ(13,"option",9),n._uU(14,"Traffic Based"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div"),n.YNc(16,Wi,6,1,"div",10),n.YNc(17,$i,11,2,"div",10),n.TgZ(18,"div",4),n.TgZ(19,"div",11),n.TgZ(20,"div",6),n.TgZ(21,"label"),n._uU(22,"Days Of Week"),n.qZA(),n.TgZ(23,"div"),n.TgZ(24,"div",12),n.TgZ(25,"input",13),n.NdJ("ngModelChange",function(e){return t.dow[1]=e})("change",function(){return t.toggleDOW(1)}),n.qZA(),n.TgZ(26,"label",14),n._uU(27,"Sun"),n.qZA(),n.qZA(),n.TgZ(28,"div",12),n.TgZ(29,"input",15),n.NdJ("ngModelChange",function(e){return t.dow[2]=e})("change",function(){return t.toggleDOW(2)}),n.qZA(),n.TgZ(30,"label",16),n._uU(31,"Mon"),n.qZA(),n.qZA(),n.TgZ(32,"div",12),n.TgZ(33,"input",17),n.NdJ("ngModelChange",function(e){return t.dow[3]=e})("change",function(){return t.toggleDOW(3)}),n.qZA(),n.TgZ(34,"label",18),n._uU(35,"Tus"),n.qZA(),n.qZA(),n.TgZ(36,"div",12),n.TgZ(37,"input",19),n.NdJ("ngModelChange",function(e){return t.dow[4]=e})("change",function(){return t.toggleDOW(4)}),n.qZA(),n.TgZ(38,"label",20),n._uU(39,"Wed"),n.qZA(),n.qZA(),n.TgZ(40,"div",12),n.TgZ(41,"input",21),n.NdJ("ngModelChange",function(e){return t.dow[5]=e})("change",function(){return t.toggleDOW(5)}),n.qZA(),n.TgZ(42,"label",22),n._uU(43,"Thr"),n.qZA(),n.qZA(),n.TgZ(44,"div",12),n.TgZ(45,"input",23),n.NdJ("ngModelChange",function(e){return t.dow[6]=e})("change",function(){return t.toggleDOW(6)}),n.qZA(),n.TgZ(46,"label",24),n._uU(47,"Fri"),n.qZA(),n.qZA(),n.TgZ(48,"div",12),n.TgZ(49,"input",25),n.NdJ("ngModelChange",function(e){return t.dow[7]=e})("change",function(){return t.toggleDOW(7)}),n.qZA(),n.TgZ(50,"label",26),n._uU(51,"Sat"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(52,"div",4),n.TgZ(53,"div",5),n.TgZ(54,"div",6),n.TgZ(55,"label"),n._uU(56,"Target"),n.qZA(),n.TgZ(57,"select",7),n.NdJ("ngModelChange",function(e){return t.policyForm.target=e}),n.TgZ(58,"option",8),n._uU(59,"Bandwidth"),n.qZA(),n.YNc(60,Xi,2,0,"option",27),n.TgZ(61,"option",28),n._uU(62,"Terminate"),n.qZA(),n.TgZ(63,"option",29),n._uU(64,"Mikrotik Address-List"),n.qZA(),n.TgZ(65,"option",30),n._uU(66,"Cisco Policy"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(67,tn,20,4,"div",31),n.YNc(68,an,12,2,"div",32),n.YNc(69,nn,7,1,"div",33),n.YNc(70,on,12,2,"div",34),n.qZA(),n.TgZ(71,"div"),n._UZ(72,"hr"),n.TgZ(73,"div",35),n.TgZ(74,"button",36),n.NdJ("click",function(){return t.save()}),n._uU(75,"Save"),n.qZA(),n.TgZ(76,"button",37),n.NdJ("click",function(){return t.router.navigate(["/profile/policies",t.policyForm.profile_id])}),n._uU(77,"Cancel "),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(10),n.Q6J("ngModel",t.policyForm.type),n.xp6(6),n.Q6J("ngIf",1==t.policyForm.type),n.xp6(1),n.Q6J("ngIf",0==t.policyForm.type),n.xp6(8),n.Q6J("ngModel",t.dow[1]),n.xp6(4),n.Q6J("ngModel",t.dow[2]),n.xp6(4),n.Q6J("ngModel",t.dow[3]),n.xp6(4),n.Q6J("ngModel",t.dow[4]),n.xp6(4),n.Q6J("ngModel",t.dow[5]),n.xp6(4),n.Q6J("ngModel",t.dow[6]),n.xp6(4),n.Q6J("ngModel",t.dow[7]),n.xp6(8),n.Q6J("ngModel",t.policyForm.target),n.xp6(3),n.Q6J("ngIf",0==t.policyForm.type),n.xp6(7),n.Q6J("ngIf",0==t.policyForm.target),n.xp6(1),n.Q6J("ngIf",1==t.policyForm.target),n.xp6(1),n.Q6J("ngIf",3==t.policyForm.target),n.xp6(1),n.Q6J("ngIf",4==t.policyForm.target))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.O5,Z.Wl,Z.wV,Z.Fj,F.Pm,Ia.Ql],styles:[".custom-checkbox[_ngcontent-%COMP%]{float:left;margin-left:10px}"]}),e})();function rn(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij("",e.threshold1," MB")}}function ln(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Bandwidth"),n.qZA())}function cn(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Accounting"),n.qZA())}function dn(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Terminate"),n.qZA())}function un(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Address-List"),n.qZA())}function pn(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Cisco Policy"),n.qZA())}function gn(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bitrate"),n.ALo(3,"bitrate"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.AsE("",n.lcZ(2,2,e.target_options.downrate)," / ",n.lcZ(3,4,e.target_options.uprate),"")}}function fn(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.AsE("",e.target_options.dlratio,"% / ",e.target_options.ulratio,"%")}}function hn(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(null==e.target_options?null:e.target_options.address_list)}}function mn(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.AsE("",null==e.target_options?null:e.target_options.qos_policy_in," / ",null==e.target_options?null:e.target_options.qos_policy_out,"")}}const _n=function(e){return[e]};function bn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n.YNc(6,rn,2,1,"span",11),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.YNc(10,ln,2,0,"span",11),n.YNc(11,cn,2,0,"span",11),n.YNc(12,dn,2,0,"span",11),n.YNc(13,un,2,0,"span",11),n.YNc(14,pn,2,0,"span",11),n.qZA(),n.TgZ(15,"td"),n.YNc(16,gn,4,6,"span",11),n.YNc(17,fn,2,2,"span",11),n.YNc(18,hn,2,1,"span",11),n.YNc(19,mn,2,2,"span",11),n.qZA(),n.TgZ(20,"td"),n.TgZ(21,"div",12),n.TgZ(22,"a",3),n._UZ(23,"i",13),n.qZA(),n._uU(24," \xa0\xa0\xa0 "),n.TgZ(25,"a",14),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).destroy(t.id)}),n._UZ(26,"i",15),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.hij(" ",e.start_time," "),n.xp6(2),n.hij(" ",e.end_time," "),n.xp6(2),n.Q6J("ngIf",e.threshold1),n.xp6(2),n.hij(" ",e.days," "),n.xp6(2),n.Q6J("ngIf",0==e.target),n.xp6(1),n.Q6J("ngIf",1==e.target),n.xp6(1),n.Q6J("ngIf",2==e.target),n.xp6(1),n.Q6J("ngIf",3==e.target),n.xp6(1),n.Q6J("ngIf",4==e.target),n.xp6(2),n.Q6J("ngIf",0==e.target),n.xp6(1),n.Q6J("ngIf",1==e.target),n.xp6(1),n.Q6J("ngIf",3==e.target),n.xp6(1),n.Q6J("ngIf",4==e.target),n.xp6(3),n.Q6J("routerLink",n.VKq(14,_n,"/profile/policy/"+a.profile_id+"/"+e.id))}}function Zn(e,t){if(1&e&&(n.TgZ(0,"table",8),n.TgZ(1,"thead"),n.TgZ(2,"tr",9),n.TgZ(3,"th"),n._uU(4,"From"),n.qZA(),n.TgZ(5,"th"),n._uU(6,"To"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Threshold (MB)"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Days"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Target"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"Target Details"),n.qZA(),n._UZ(15,"th"),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,bn,27,16,"tr",10),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(17),n.Q6J("ngForOf",e.policyList)}}const vn=function(e){return["/profile/policy/",e]};let wn=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.swal=a,this.toastr=i,this.profile_id=null,this.timeBasedPolicies=[],this.trafficBasedPolicies=[],this.policyIndexType=0,this.policyList=[],this.route.params.subscribe(e=>{e.profile_id&&(this.profile_id=e.profile_id,this.loadIndex(this.profile_id))})}loadIndex(e){this.api.get("index/policy/"+e).subscribe(e=>{let t=e.data;this.policyList=e.data;for(let a=0;a<t.length;a++)t[a].days=this.daysOfWeek(t[a].dow),t[a].target_options=JSON.parse(t[a].target_options),0==t[a].type&&this.timeBasedPolicies.push(t[a]),1==t[a].type&&this.trafficBasedPolicies.push(t[a])})}daysOfWeek(e){let t=[];return 127==e?(t.push("Every Day"),t):(1&e&&t.push("SUN"),2&e&&t.push("MON"),4&e&&t.push("TUS"),8&e&&t.push("WED"),16&e&&t.push("THR"),32&e&&t.push("FRI"),64&e&&t.push("SAT"),t)}destroy(e){this.swal.confirm({title:"Delete Policy",type:"warning",text:"Delete Selected Policy ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("policy/"+e).subscribe(e=>{this.timeBasedPolicies=[],this.trafficBasedPolicies=[],this.loadIndex(this.profile_id),this.toastr.success("Policy Deleted","")})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(Ge),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:9,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-actions"],[3,"routerLink"],[1,"text-muted",2,"cursor","pointer"],[1,"fa","fa-plus"],[1,"card-body"],["class","table dataTable table-hover table-outline","role","grid","style","border-collapse: collapse !important",4,"ngIf"],["role","grid",1,"table","dataTable","table-hover","table-outline",2,"border-collapse","collapse !important"],["role","row"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-row-actions"],[1,"fa","fa-2x","fa-edit"],[2,"cursor","pointer",3,"click"],[1,"fa","fa-2x","fa-trash"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._uU(2," Profile Policies "),n.TgZ(3,"div",2),n.TgZ(4,"a",3),n.TgZ(5,"span",4),n._UZ(6,"i",5),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.YNc(8,Zn,18,1,"table",7),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("routerLink",n.VKq(2,vn,t.profile_id)),n.xp6(4),n.Q6J("ngIf",0==t.policyIndexType))},directives:[p.yS,J.O5,J.sg],pipes:[Dt],styles:[".PolicyList[_ngcontent-%COMP%]{list-style:none;-webkit-padding-start:0px;-moz-padding-start:0px}.PolicyListItem[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;background:#f1f3f8;margin-top:10px;border:1px dashed grey}.policy-item-label[_ngcontent-%COMP%]{font-size:14px;text-transform:capitalize;display:block}.policy-item-value[_ngcontent-%COMP%]{font-size:16px;text-transform:capitalize;color:#3a3a3a;font-weight:bold;display:block}.policy-item-actions[_ngcontent-%COMP%]{opacity:.1}.policy-item-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.PolicyListItem[_ngcontent-%COMP%]:hover   .policy-item-actions[_ngcontent-%COMP%]{opacity:1}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:bold}.table-row-actions[_ngcontent-%COMP%]{opacity:.1}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .table-row-actions[_ngcontent-%COMP%]{opacity:1}"]}),e})();const yn=["userForm"];function xn(e,t){1&e&&(n.TgZ(0,"div",13),n._UZ(1,"i",14),n._uU(2," Passwords do not match"),n.qZA())}function An(e,t){1&e&&(n.TgZ(0,"div",15),n._uU(1," No Records Found "),n.qZA())}function qn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",18),n._uU(1),n.TgZ(2,"span"),n.TgZ(3,"a",19),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).deleteMac(t.id)}),n._UZ(4,"i",20),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.hij(" ",e.mac," ")}}function Tn(e,t){if(1&e&&(n.TgZ(0,"ul",16),n.YNc(1,qn,5,1,"li",17),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.allowed_mac_list)}}const Cn=function(){return["username","profile_id"]},kn=function(){return["username","password","confirm_password"]},Un=function(){return{width:"400px"}};let Mn=(()=>{class e{constructor(e,t,a,i,n,o,s,r,l){this.api=e,this.swal=t,this.auth=a,this.location=i,this.toastr=n,this.formLoader=o,this.ch=s,this.route=r,this.tr=l,this.hasHeader=!0,this.passwordsMismatch=!1,this.advancedFields=[{key:"separator3",label:this.tr.translate("user_form_label_advanced"),type:"separator",cols:12},{key:"expiration",label:this.tr.translate("user_form_label_expiration"),required:!1,value:this.ch.now(),placeholder:"YYYY-MM-DD hh:mm:ss",type:"text",pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}"},{key:"simultaneous_sessions",label:this.tr.translate("users_table_simultaneous_sessions"),type:"text",pattern:"[0-9]*",value:1,required:!1},{key:"static_ip",label:this.tr.translate("users_table_static_ip"),type:"text"},{key:"mikrotik_winbox_group",label:"Mikrotik Winbox Group",type:"text"},{key:"mikrotik_framed_route",label:"Mikrotik Framed Route",type:"text"},{key:"mikrotik_addresslist",label:"Mikrotik Address List",type:"text"},{key:"mikrotik_ipv6_prefix",label:"IPv6 Prefix",type:"text"},{key:"user_type",label:this.tr.translate("user_form_label_user_type"),type:"select",options:[{value:0,label:"Regular User"},{value:1,label:"Wireless Access Point"}],value:"0"},{key:"restricted",label:this.tr.translate("user_form_label_restricted"),type:"switch",value:!1}],this.options={site_id:[],group_id:[],parent_id:[],profile_id:[]},this.managers_list=[],this.profiles_list=[],this.group_list=[],this.site_list=[],this.mac_dialog_visible=!1,this.mac_user_input="",this.user_id="",this.allowed_mac_list=[];let c=this.formLoader.getForm("user_form");c[6].value=this.auth.client.id,this.formFields=c,this.auth.has("prm_users_advanced")&&(this.formFields=this.formFields.concat(this.advancedFields)),this.loadResources()}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.loadAllowedMacList())}),setTimeout(()=>{this.auth.has("prm_managers_sysadmin")&&this.userForm.enableField("profile_id")},4e3)}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.parent_id=this.managers_list}),this.api.get("list/profile/5").subscribe(e=>{this.profiles_list=[];for(const t of e.data)this.profiles_list.push({value:t.id,label:t.name});this.options.profile_id=this.profiles_list}),this.auth.has("prm_groups_assign")&&this.api.get("group").subscribe(e=>{if(200===e.status){for(const t of e.data)this.group_list.push({value:t.id,label:t.name});this.group_list.unshift({value:-1,label:this.tr.translate("global_none")}),this.options.group_id=this.group_list}}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(e=>{if(200==e.status){for(let t of e.data)this.site_list.push({value:t.id,label:t.name});this.options.site_id=this.site_list,this.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id=[{value:null,label:"Any"}]}onFormAction(e){"mac_editor"==e&&(this.mac_dialog_visible=!0)}addMac(){this.api.post("mac",{mac:this.mac_user_input,user_id:this.user_id}).subscribe(e=>{this.mac_user_input="",200===e.status&&this.loadAllowedMacList()})}loadAllowedMacList(){this.api.get("mac/"+this.user_id).subscribe(e=>{200===e.status&&(this.allowed_mac_list=e.data)})}deleteMac(e){this.api.delete("mac/"+e.toString()).subscribe(e=>{200===e.status&&this.loadAllowedMacList()})}onSubmit(e){this.toastr.success(this.tr.translate("msg_update_success")),this.location.back()}dataChanged(e){this.passwordsMismatch=e.password!=e.confirm_password,1==e.user_type&&(console.log("ignoring password"),this.userForm.ignoreField("password"),this.userForm.ignoreField("confirm_password"))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(Ge),n.Y36(_),n.Y36(J.Ye),n.Y36(g._W),n.Y36(yi),n.Y36(m),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["user-form"]],viewQuery:function(e,t){if(1&e&&n.Gf(yn,5),2&e){let e;n.iGM(e=n.CRH())&&(t.userForm=e.first)}},inputs:{hasHeader:"hasHeader"},decls:15,vars:22,consts:[["class","alert alert-warning",4,"ngIf"],["name","userForm",3,"fields","options","title","icon","resourceRoute","disabledOnUpdate","ignoredOnUpdate","header","formAction","submit","cancel","formChanged"],["userForm",""],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","placeholder","xx:xx:xx:xx:xx:xx","aria-label","xx:xx:xx:xx:xx","aria-describedby","button-addon2","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-plus"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(n.YNc(0,xn,3,0,"div",0),n.TgZ(1,"model-form",1,2),n.NdJ("formAction",function(e){return t.onFormAction(e)})("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()})("formChanged",function(e){return t.dataChanged(e)}),n.qZA(),n.TgZ(3,"p-dialog",3),n.NdJ("visibleChange",function(e){return t.mac_dialog_visible=e}),n.TgZ(4,"p-header"),n._uU(5),n.qZA(),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n.TgZ(8,"input",6),n.NdJ("ngModelChange",function(e){return t.mac_user_input=e}),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"button",8),n.NdJ("click",function(){return t.addMac()}),n._UZ(11,"i",9),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",10),n.YNc(13,An,2,0,"div",11),n.YNc(14,Tn,2,1,"ul",12),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",t.passwordsMismatch),n.xp6(1),n.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("user_form_label"))("icon","fa fa-user")("resourceRoute","user")("disabledOnUpdate",n.DdM(19,Cn))("ignoredOnUpdate",n.DdM(20,kn))("header",t.hasHeader),n.xp6(2),n.Akn(n.DdM(21,Un)),n.Q6J("visible",t.mac_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),n.xp6(2),n.hij(" ",t.tr.translate("user_mac_dialog_title")," "),n.xp6(3),n.Q6J("ngModel",t.mac_user_input),n.xp6(5),n.Q6J("ngIf",0===t.allowed_mac_list.length),n.xp6(1),n.Q6J("ngIf",t.allowed_mac_list.length>0))},directives:[J.O5,Ci,ki.V,xi.h4,Z.Fj,Z.JJ,Z.On,J.sg],encapsulation:2}),e})();class Fn{constructor(e,t,a,i,n,o,s){this.tr=e,this.api=t,this.config=a,this.auth=i,this.ref=n,this.toastr=o,this.dialogConfig=s,this.payDebtForm={user_id:null,username:"",amount:null,comment:"",transaction_id:null,is_loan:!1},this.user_id=null}ngOnInit(){this.user_id=this.dialogConfig.data.user_id,this.blockUI.start(),this.api.get("user/debt/"+this.user_id).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.payDebtForm.user_id=this.user_id,this.payDebtForm.username=e.data.username,this.payDebtForm.debt_for_me=Math.abs(parseFloat(e.data.debt_for_me)),this.payDebtForm.debt=Math.abs(parseFloat(e.data.total)))})}dismiss(){this.ref.close()}deposit(){this.blockUI.start(),this.api.post("user/payDebt",this.payDebtForm).subscribe(e=>{this.blockUI.stop(),this.ref.close(),200===e.status?this.toastr.success(this.tr.translate(e.message)):this.toastr.error(this.tr.translate(e.message))})}}function Jn(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",3),n.TgZ(2,"div",4),n.TgZ(3,"label",21),n._uU(4),n.qZA(),n._UZ(5,"input",22),n.TgZ(6,"small",11),n._uU(7,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",3),n.TgZ(9,"div",4),n.TgZ(10,"label",23),n._uU(11),n.qZA(),n._UZ(12,"input",24),n.TgZ(13,"small",11),n._uU(14,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.tr.translate("global_username")),n.xp6(1),n.s9C("value",e.userData.username),n.xp6(6),n.Oqu(e.tr.translate("global_owner")),n.xp6(1),n.s9C("value",e.userData.parent_username)}}function On(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",3),n.TgZ(2,"div",4),n.TgZ(3,"label",25),n._uU(4),n.qZA(),n._UZ(5,"input",26),n.TgZ(6,"small",11),n._uU(7,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",3),n.TgZ(9,"div",4),n.TgZ(10,"label",27),n._uU(11),n.qZA(),n._UZ(12,"input",28),n.TgZ(13,"small",11),n._uU(14,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.tr.translate("global_profile")),n.xp6(1),n.s9C("value",e.userData.profile_name),n.xp6(6),n.Oqu(e.tr.translate("global_expiration")),n.xp6(1),n.s9C("value",e.userData.expiration)}}function Nn(e,t){if(1&e&&(n.TgZ(0,"label",29),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.tr.translate("user_compensation_title_days"))}}function In(e,t){if(1&e&&(n.TgZ(0,"label",29),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.tr.translate("user_compensation_title_traffic"))}}function Yn(e,t){if(1&e&&(n.TgZ(0,"label",29),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(e.tr.translate("user_compensation_title_uptime"))}}Fn.\u0275fac=function(e){return new(e||Fn)(n.Y36(M),n.Y36(h),n.Y36(l),n.Y36(_),n.Y36(fa.E7),n.Y36(g._W),n.Y36(fa.S))},Fn.\u0275cmp=n.Xpm({type:Fn,selectors:[["app-user-pay-debt"]],decls:39,vars:19,consts:[[1,"form"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"mb-1",2,"width","100%"],[2,"direction","ltr"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.TgZ(1,"div",1),n.TgZ(2,"label",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.TgZ(5,"small",4),n._uU(6,"\xa0"),n.qZA(),n.qZA(),n.TgZ(7,"div",1),n.TgZ(8,"label"),n._uU(9),n.qZA(),n.TgZ(10,"input",5,6),n.NdJ("ngModelChange",function(e){return t.payDebtForm.amount=e}),n.qZA(),n.TgZ(12,"small",4),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",1),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",7,8),n.NdJ("ngModelChange",function(e){return t.payDebtForm.comment=e}),n.qZA(),n.TgZ(19,"small",4),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"table",9),n.TgZ(22,"tr"),n.TgZ(23,"td"),n._uU(24),n.qZA(),n.TgZ(25,"td",10),n.TgZ(26,"strong"),n._uU(27),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"tr"),n.TgZ(29,"td"),n._uU(30),n.qZA(),n.TgZ(31,"td",10),n.TgZ(32,"strong"),n._uU(33),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(34,"div",11),n.TgZ(35,"button",12),n.NdJ("click",function(){return t.dismiss()}),n._uU(36),n.qZA(),n.TgZ(37,"button",13),n.NdJ("click",function(){return t.deposit()}),n._uU(38),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Oqu(t.tr.translate("user_depodrawal_form_username")),n.xp6(1),n.s9C("value",t.payDebtForm.username),n.xp6(5),n.Oqu(t.tr.translate("user_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",t.payDebtForm.amount),n.xp6(6),n.Oqu(t.tr.translate("user_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",t.payDebtForm.comment),n.xp6(7),n.AsE("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.username,""),n.xp6(3),n.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt,""),n.xp6(3),n.HOy("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.username," ",t.tr.translate("global_debt_for")," ",t.auth.client.username,""),n.xp6(3),n.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt_for_me,""),n.xp6(3),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!t.payDebtForm.amount||t.payDebtForm.amount<=0||t.payDebtForm.amount>t.payDebtForm.debt_for_me),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,Z.wV,Z.Fj,Z.JJ,Z.On],styles:[""]}),(0,c.gn)([(0,u.bH)()],Fn.prototype,"blockUI",void 0);let Qn=(()=>{class e{constructor(e,t,a,i,n){this.tr=e,this.api=t,this.ref=a,this.dialogConfig=i,this.toastr=n,this.compensationForm={user_ids:null,target:-1,amount:"",comment:"",days:0,traffic:0,uptime:0},this.userData={}}ngOnInit(){this.user_id=null;const e=this.dialogConfig.data.rows;this.compensationForm.user_ids=e,1===e.length&&(this.user_id=this.dialogConfig.data.rows[0],this.api.get("user/"+this.user_id).subscribe(e=>{200===e.status&&(this.userData=e.data)}))}submit(){this.compensationForm[this.compensationForm.target]=this.compensationForm.amount,this.api.post("compensation",this.compensationForm).subscribe(e=>{this.ref.close(),200===e.status&&this.toastr.success(this.tr.translate(e.message))})}dismiss(){this.ref.close()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M),n.Y36(h),n.Y36(fa.E7),n.Y36(fa.S),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-compensation"]],decls:38,vars:20,consts:[[1,"form"],["class","row",4,"ngIf"],[1,"row"],[1,"col","col-md-6"],[1,"from-group"],["for","target"],["type","select","id","target","name","target",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["value","-1","disabled",""],["value","days"],["value","traffic"],["value","uptime"],[1,"form-text","text-muted"],[1,"from-group",3,"hidden"],["for","amount",4,"ngIf"],["type","number","name","amount","id","amount",1,"form-control","font-weight-bold",3,"ngModel","placeholder","ngModelChange"],[1,"col","col-md-12"],["for","comment"],["name","comment","id","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","username"],["type","text","readonly","","id","username",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","owner"],["type","text","readonly","","id","owner",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","profile"],["type","text","readonly","","id","profile",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","expiration"],["type","text","readonly","","id","expiration",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","amount"]],template:function(e,t){1&e&&(n.TgZ(0,"form",0),n.YNc(1,Jn,15,4,"div",1),n.YNc(2,On,15,4,"div",1),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"label",5),n._uU(7),n.qZA(),n.TgZ(8,"select",6),n.NdJ("ngModelChange",function(e){return t.compensationForm.target=e}),n.TgZ(9,"option",7),n._uU(10),n.qZA(),n.TgZ(11,"option",8),n._uU(12),n.qZA(),n.TgZ(13,"option",9),n._uU(14),n.qZA(),n.TgZ(15,"option",10),n._uU(16),n.qZA(),n.qZA(),n.TgZ(17,"small",11),n._uU(18,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",3),n.TgZ(20,"div",12),n.YNc(21,Nn,2,1,"label",13),n.YNc(22,In,2,1,"label",13),n.YNc(23,Yn,2,1,"label",13),n.TgZ(24,"input",14),n.NdJ("ngModelChange",function(e){return t.compensationForm.amount=e}),n.qZA(),n.TgZ(25,"small",11),n._uU(26,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"div",2),n.TgZ(28,"div",15),n.TgZ(29,"div",12),n.TgZ(30,"label",16),n._uU(31),n.qZA(),n.TgZ(32,"textarea",17),n.NdJ("ngModelChange",function(e){return t.compensationForm.comment=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(33,"div",18),n.TgZ(34,"button",19),n.NdJ("click",function(){return t.dismiss()}),n._uU(35),n.qZA(),n.TgZ(36,"button",20),n.NdJ("click",function(){return t.submit()}),n._uU(37),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("ngIf",null!==t.user_id),n.xp6(1),n.Q6J("ngIf",null!==t.user_id),n.xp6(5),n.Oqu(t.tr.translate("user_compensation_target")),n.xp6(1),n.Q6J("ngModel",t.compensationForm.target),n.xp6(2),n.Oqu(t.tr.translate("user_compensation_target_select")),n.xp6(2),n.Oqu(t.tr.translate("user_compensation_target_days")),n.xp6(2),n.Oqu(t.tr.translate("user_compensation_target_traffic")),n.xp6(2),n.Oqu(t.tr.translate("user_compensation_target_uptime")),n.xp6(4),n.Q6J("hidden",-1==t.compensationForm.target),n.xp6(1),n.Q6J("ngIf","days"===t.compensationForm.target),n.xp6(1),n.Q6J("ngIf","traffic"===t.compensationForm.target),n.xp6(1),n.Q6J("ngIf","uptime"===t.compensationForm.target),n.xp6(1),n.s9C("placeholder",t.tr.translate(t.compensationForm.target)),n.Q6J("ngModel",t.compensationForm.amount),n.xp6(5),n.Q6J("hidden",-1==t.compensationForm.target),n.xp6(2),n.Oqu(t.tr.translate("global_comment")),n.xp6(1),n.Q6J("ngModel",t.compensationForm.comment),n.xp6(3),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",-1==t.compensationForm.target||(null==t.compensationForm?null:t.compensationForm.amount)<1),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")))},directives:[Z._Y,Z.JL,Z.F,J.O5,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,Z.wV,Z.Fj],styles:[""]}),e})(),Sn=(()=>{class e{constructor(e,t,a,i){this.api=e,this.tr=t,this.ch=a,this.toastr=i,this.i=1,this.series=[],this.dl_series_data=[],this.ul_series_data=[],this.finished=new n.vpe}ngOnInit(){}setUserId(e){this.user_id=e}pullLiveTrafficData(){this.xhr=this.api.xhr("user/liveTraffic/"+this.user_id),this.xhr.onprogress=(function(e){let t=this.xhr.responseText.split("\n");t=t[t.length-2];let a=t.split(","),i=parseInt(a[0]),n=parseInt(a[1]);var o=this.chart.series[0].data.length>25,s=this.chart.series[1].data.length>25,r=(new Date).getTime();let l=[r,i],c=[r,n];this.rx_rate=this.ch.bpsFormat(i),this.tx_rate=this.ch.bpsFormat(n),this.chart.series[0].addPoint(l,!0,o),this.chart.series[1].addPoint(c,!0,s)}).bind(this),this.xhr.onload=(function(e){"bad_session"===this.xhr.responseText&&this.toastr.warning("Bad Session"),this.finished.emit()}).bind(this),this.xhr.send()}stopPolling(){this.xhr.abort()}start(){setTimeout((function(){this.initChart()}).bind(this),1e3)}initChart(){this.chart=D.chart("chart_container",{chart:{type:"line",zoomType:null},legend:{enabled:!0},title:{text:this.tr.translate("user_live_traffic_chart_title")},xAxis:{type:"datetime",tickPixelInterval:90,labels:{formatter:function(){return D.dateFormat("%M:%S",this.value)}}},yAxis:{minPadding:.1,maxPadding:.1,title:{text:"Bit Rate"},labels:{formatter:function(){let e=this.value;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}}},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}}}),this.chart.addSeries({name:"DL",data:[],color:"#ce2c48"}),this.chart.addSeries({name:"UL",data:[],color:"#95adce"});var e=(new Date).getTime();this.chart.series[0].addPoint([e,0],!1),this.chart.series[1].addPoint([e,0],!0),this.pullLiveTrafficData()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M),n.Y36(m),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-live-traffic"]],outputs:{finished:"finished"},decls:15,vars:2,consts:[["id","chart_container",1,"chart_container"],[1,"text-center"],[1,"fad","fa-compact-disc","fa-3x","fa-spin"],[1,"row",2,"margin-right","unset","margin-left","unset"],[1,"col-6"],[1,"rate-title"],[1,"rate-value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n._UZ(2,"i",2),n.qZA(),n.qZA(),n._UZ(3,"hr"),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"span",5),n._uU(7,"RX rate"),n.qZA(),n.TgZ(8,"span",6),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"div",4),n.TgZ(11,"span",5),n._uU(12,"TX rate"),n.qZA(),n.TgZ(13,"span",6),n._uU(14),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(9),n.hij(" ",t.rx_rate,""),n.xp6(5),n.hij(" ",t.tx_rate,""))},styles:[".chart_container[_ngcontent-%COMP%]{width:100%}.rate-title[_ngcontent-%COMP%]{font-size:14px;font-weight:lighter}.rate-value[_ngcontent-%COMP%]{font-size:18px;margin-left:15px}"]}),e})();const Pn=["user_model_view"],Dn=["deposit_modal"],Hn=["withdrawal_modal"],Rn=["rename_modal"],Vn=["live_traffic"],Ln=["liveTrafficDialog"],En=["add_traffic_modal"];function Kn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",19,20),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw(2).onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw(2).onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw(2).loading=!0})("onCellMiddleClicked",function(t){return n.CHM(e),n.oxw(2).onCellMiddleClicked(t)})("onDataLoaded",function(){return n.CHM(e),n.oxw(2).loading=!1}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}function Bn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.TgZ(1,"h4",22),n._uU(2),n.qZA(),n.TgZ(3,"button",23),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n.TgZ(4,"span",24),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",25),n.TgZ(7,"form",26),n.TgZ(8,"div",27),n.TgZ(9,"label",28),n._uU(10),n.qZA(),n._UZ(11,"input",29),n.TgZ(12,"small",30),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",27),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"select",31,32),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).traffic_form.target=t}),n.TgZ(19,"option",33),n._uU(20,"Download + Upload"),n.qZA(),n.TgZ(21,"option",34),n._uU(22,"Download"),n.qZA(),n.TgZ(23,"option",35),n._uU(24,"Upload"),n.qZA(),n.qZA(),n.TgZ(25,"small",30),n._uU(26,"\xa0"),n.qZA(),n.qZA(),n.TgZ(27,"div",27),n.TgZ(28,"label"),n._uU(29),n.qZA(),n.TgZ(30,"input",36,37),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).traffic_form.amount=t}),n.qZA(),n.TgZ(32,"small",30),n._uU(33,"\xa0"),n.qZA(),n.qZA(),n.TgZ(34,"div",27),n.TgZ(35,"label"),n._uU(36),n.qZA(),n.TgZ(37,"input",38,39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).traffic_form.comment=t}),n.qZA(),n.TgZ(39,"small",30),n._uU(40,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(41,"div",40),n.TgZ(42,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n._uU(43),n.qZA(),n.TgZ(44,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).addTraffic()}),n._uU(45),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.tr.translate("user_traffic_form_title")),n.xp6(8),n.Oqu(e.tr.translate("global_username")),n.xp6(1),n.s9C("value",e.traffic_form.username),n.xp6(5),n.Oqu(e.tr.translate("user_traffic_form_target")),n.xp6(1),n.Q6J("ngModel",e.traffic_form.target),n.xp6(12),n.Oqu(e.tr.translate("user_traffic_form_amount")),n.xp6(1),n.Q6J("ngModel",e.traffic_form.amount),n.xp6(6),n.Oqu(e.tr.translate("global_comment")),n.xp6(1),n.Q6J("ngModel",e.traffic_form.comment),n.xp6(6),n.Oqu(e.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!e.traffic_form.amount||0===e.traffic_form.amount),n.xp6(1),n.Oqu(e.tr.translate("global_button_submit"))}}const zn=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}};function jn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.TgZ(1,"h4",22),n._uU(2),n.qZA(),n.TgZ(3,"button",23),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n.TgZ(4,"span",24),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",25),n.TgZ(7,"form",26),n.TgZ(8,"div",27),n.TgZ(9,"label",28),n._uU(10),n.qZA(),n._UZ(11,"input",43),n.TgZ(12,"small",30),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",27),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",44,37),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).deposit_form.amount=t}),n.qZA(),n.TgZ(19,"small",30),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.TgZ(21,"div",27),n.TgZ(22,"label"),n._uU(23),n.qZA(),n.TgZ(24,"input",38,39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).deposit_form.comment=t}),n.qZA(),n.TgZ(26,"small",30),n._uU(27,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",40),n.TgZ(29,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n._uU(30),n.qZA(),n.TgZ(31,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).deposit()}),n._uU(32),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.tr.translate("user_depodrawal_form_title_deposit")),n.xp6(8),n.Oqu(e.tr.translate("user_depodrawal_form_username")),n.xp6(1),n.s9C("value",e.deposit_form.user_username),n.xp6(5),n.Oqu(e.tr.translate("user_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",e.deposit_form.amount)("options",n.VKq(11,zn,e.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(e.tr.translate("user_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",e.deposit_form.comment),n.xp6(6),n.Oqu(e.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!e.deposit_form.amount||e.deposit_form.amount<=0),n.xp6(1),n.Oqu(e.tr.translate("global_button_submit"))}}function Gn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.TgZ(1,"h4",22),n._uU(2),n.qZA(),n.TgZ(3,"button",23),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n.TgZ(4,"span",24),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",25),n.TgZ(7,"form",26),n.TgZ(8,"div",27),n.TgZ(9,"label",28),n._uU(10),n.qZA(),n._UZ(11,"input",43),n.TgZ(12,"small",30),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",27),n.TgZ(15,"label"),n._uU(16),n.qZA(),n.TgZ(17,"input",36,37),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).withdrawal_form.amount=t}),n.qZA(),n.TgZ(19,"small",30),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.TgZ(21,"div",27),n.TgZ(22,"label"),n._uU(23),n.qZA(),n.TgZ(24,"input",45,39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).withdrawal_form.comment=t}),n.qZA(),n.TgZ(26,"small",30),n._uU(27,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"div",40),n.TgZ(29,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n._uU(30),n.qZA(),n.TgZ(31,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).withdraw()}),n._uU(32),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(2),n.Oqu(e.tr.translate("user_depodrawal_form_title_withdrawal")),n.xp6(8),n.Oqu(e.tr.translate("user_depodrawal_form_username")),n.xp6(1),n.s9C("value",e.withdrawal_form.user_username),n.xp6(5),n.Oqu(e.tr.translate("user_depodrawal_form_amount")),n.xp6(1),n.Q6J("ngModel",e.withdrawal_form.amount),n.xp6(6),n.Oqu(e.tr.translate("user_depodrawal_form_comment")),n.xp6(1),n.Q6J("ngModel",e.withdrawal_form.comment)("options",n.VKq(11,zn,e.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(e.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!e.withdrawal_form.amount||e.withdrawal_form.amount<=0),n.xp6(1),n.Oqu(e.tr.translate("global_button_submit"))}}function Wn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.TgZ(1,"h4",22),n._uU(2),n.qZA(),n.TgZ(3,"button",23),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n.TgZ(4,"span",24),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",25),n.TgZ(7,"form",26),n.TgZ(8,"div",27),n.TgZ(9,"label",28),n._uU(10),n.qZA(),n._UZ(11,"input",46),n.TgZ(12,"small",30),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",27),n.TgZ(15,"label",47),n._uU(16),n.qZA(),n._uU(17,"s "),n.TgZ(18,"input",48,49),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).rename_form.new_username=t})("keydown.enter",function(){return n.CHM(e),n.oxw(2).rename()}),n.qZA(),n.TgZ(20,"small",30),n._uU(21,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",40),n.TgZ(23,"button",41),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).activeModal.hide()}),n._uU(24),n.qZA(),n.TgZ(25,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).rename()}),n._uU(26),n.qZA(),n.qZA()}if(2&e){const e=n.MAs(19),t=n.oxw(2);n.xp6(2),n.Oqu(t.tr.translate("user_rename_form_title")),n.xp6(8),n.Oqu(t.tr.translate("user_rename_form_current_username")),n.xp6(1),n.s9C("value",t.rename_form.username),n.xp6(5),n.Oqu(t.tr.translate("user_rename_form_new_username")),n.xp6(2),n.Q6J("ngModel",t.rename_form.new_username),n.xp6(6),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Q6J("disabled",!t.rename_form.new_username||t.rename_form.new_username.length<1||e.invalid),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit"))}}const $n=function(){return{width:"750px"}};function Xn(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.YNc(1,Kn,2,3,"model-table-view",7),n.YNc(2,Bn,46,12,"ng-template",null,8,n.W1O),n.YNc(4,jn,33,13,"ng-template",null,9,n.W1O),n.YNc(6,Gn,33,13,"ng-template",null,10,n.W1O),n.YNc(8,Wn,27,8,"ng-template",null,11,n.W1O),n.TgZ(10,"p-sidebar",12),n.NdJ("visibleChange",function(t){return n.CHM(e),n.oxw().show_managers_tree=t}),n.TgZ(11,"h4",13),n._uU(12),n.qZA(),n.TgZ(13,"app-managers-tree",14),n.NdJ("onManagerSelected",function(t){return n.CHM(e),n.oxw()._onTreeNodeSelected(t)}),n.qZA(),n.qZA(),n.TgZ(14,"p-dialog",15,16),n.NdJ("visibleChange",function(t){return n.CHM(e),n.oxw().traffic_dialog_visible=t})("onShow",function(){return n.CHM(e),n.oxw().liveTraffic.start()})("onHide",function(){return n.CHM(e),n.oxw().liveTraffic.stopPolling()}),n.TgZ(16,"app-user-live-traffic",17,18),n.NdJ("finished",function(){return n.CHM(e),n.oxw().traffic_dialog_visible=!1}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.modelViewConfig),n.xp6(9),n.Q6J("visible",e.show_managers_tree),n.xp6(2),n.Oqu(e.tr.translate("mangers_tree_title")),n.xp6(1),n.Q6J("showSearch",!0),n.xp6(1),n.Akn(n.DdM(10,$n)),n.MGl("header","User Traffic - ",e.traffic_dialog_user,""),n.Q6J("visible",e.traffic_dialog_visible)("modal",!0)("draggable",!0)}}class eo{constructor(e,t,a,i,n,o,s,r,l,c){this.api=e,this.router=t,this.modalService=a,this.swal=i,this.toastr=n,this.tr=o,this.dialogService=s,this.ch=r,this.config=l,this.auth=c,this.columns=[{dataKey:"n_row",label:"#",hidden:!0},{dataKey:"idx",type:"html",sortBy:"none",label:this.tr.translate("users_table_status"),dataResolver:function(e,t){return 1!==t.online_status||!0===t.status.expiration&&!0===t.status.traffic&&0!==t.enable?1===t.online_status?"<span class='user_online'>\u2588\u2588</span>":"\u2588\u2588":"<span class='user_online'>\u2588</span>\u2588"},classFn:function(e){let t=e.status;return 0===e.enable?"user_disabled":!1===t.status&&!1===t.expiration?"user_expired":!0===t.status&&!1===t.traffic?"user_traffic_depleted":"user_active"}},{dataKey:"id",sortBy:"id",hidden:!0,label:this.tr.translate("users_table_user_id")},{dataKey:"username",label:this.tr.translate("users_table_username"),classFn:function(e){return 0===e.enabled?"user_disabled":1===e.online_status?"href username_online":"href"}},{dataKey:"firstname",label:this.tr.translate("users_table_firstname")},{dataKey:"lastname",label:this.tr.translate("users_table_lastname")},{dataKey:"expiration",label:this.tr.translate("users_table_expiration")},{dataKey:"parent_username",label:this.tr.translate("users_table_parent"),sortBy:"parent_id"},{dataKey:"name",label:this.tr.translate("users_table_profile"),parentKey:"profile_details",sortBy:"profile_id",classFn:function(e){return"href"}},{dataKey:"balance",label:this.tr.translate("users_table_balance"),pipe:"currency",hidden:!0},{dataKey:"loan_balance",label:this.tr.translate("managers_table_loan_balance"),pipe:"currency"},{dataKey:"group_name",label:this.tr.translate("managers_table_group"),parentKey:"group_details",sortBy:"group_id",hidden:!0},{dataKey:"traffic",label:this.tr.translate("users_table_daily_traffic"),parentKey:"daily_traffic_details",pipe:"bytes",sortBy:"none"},{dataKey:"city",label:this.tr.translate("users_table_city"),hidden:!0},{dataKey:"remaining_days",label:this.tr.translate("users_table_remaining_days"),hidden:!1,sortBy:"expiration"},{dataKey:"static_ip",label:this.tr.translate("users_table_static_ip"),hidden:!0},{dataKey:"notes",label:this.tr.translate("users_table_notes"),hidden:!0},{dataKey:"last_online",label:this.tr.translate("users_table_last_online"),hidden:!0,sortBy:"last_online"},{dataKey:"company",label:this.tr.translate("users_table_company"),hidden:!0},{dataKey:"simultaneous_sessions",label:this.tr.translate("users_table_simultaneous_sessions"),hidden:!0},{dataKey:"used_traffic",label:this.tr.translate("users_table_used_traffic"),hidden:!0,type:"progress",sortBy:"none"},{dataKey:"phone",label:this.tr.translate("users_table_phone"),hidden:!0},{dataKey:"address",label:this.tr.translate("users_table_address"),hidden:!0},{dataKey:"contract_id",label:this.tr.translate("user_form_label_contract"),hidden:!0},{dataKey:"created_at",label:this.tr.translate("user_overview_created_on"),hidden:!0},{dataKey:"available_traffic",label:this.tr.translate("user_table_available_traffic"),pipe:"bytes",hidden:!0,sortBy:"id"},{dataKey:"national_id",label:this.tr.translate("user_form_label_national_id"),hidden:!0},{dataKey:"mikrotik_ipv6_prefix",label:"IPv6 Prefix",hidden:!0},{dataKey:"site_name",label:"Site",parentKey:"site_details",sortBy:"site_id",hidden:!0},{dataKey:"pin_tries",label:this.tr.translate("users_table_pin_tries"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_users_create"},{name:"",label:"",type:"separator"},{name:"show_live_traffic",label:this.tr.translate("global_actions_live_traffic"),icon:"fal fa-chart-area",acl:"prm_users_live_traffic",inline:!0},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update"},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"rename",label:this.tr.translate("global_actions_rename"),icon:"fa fa-edit",requiresRow:!0,inline:!0,acl:"prm_users_rename"},{name:"",label:"",type:"separator"},{name:"add_traffic",label:this.tr.translate("users_action_add_traffic"),icon:"fa fa-abacus",requiresRow:!0,inline:!0,acl:"prm_users_add_traffic"},{name:"activate",label:this.tr.translate("users_action_activate"),icon:"fa fa-flash",requiresRow:!0,inline:!0,acl:"prm_users_activate"},{name:"extend",label:this.tr.translate("users_action_extend"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_extend"},{name:"compensate",label:this.tr.translate("users_action_compensate"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_compensate"},{name:"addon",label:this.tr.translate("users_action_addon"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_addon"},{name:"profile",label:this.tr.translate("users_action_change_profile"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_change_profile"},{name:"",label:"",type:"separator"},{name:"deposit",label:this.tr.translate("global_actions_deposit"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_users_deposit"},{name:"withdraw",label:this.tr.translate("global_actions_withdrawal"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_users_withdrawal"},{name:"pay_debt",label:this.tr.translate("global_actions_pay_debt"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_any"},{name:"",label:"",type:"separator"},{name:"cancel",label:this.tr.translate("users_action_cancel"),icon:"fal fa-stop-circle",multipleRows:!1,requiresRow:!0,inline:!0,acl:"prm_users_cancel"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_users_delete"}],this.filterFields=[{key:"status",label:this.tr.translate("users_filter_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_active")},{value:2,label:this.tr.translate("users_status_expired")},{value:3,label:this.tr.translate("users_status_disabled")},{value:4,label:this.tr.translate("users_status_expiring_soon")},{value:5,label:this.tr.translate("users_status_expiring_today")}]},{key:"connection",label:this.tr.translate("users_filter_connection"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_offline")},{value:2,label:this.tr.translate("users_status_online")}]},{key:"profile_id",label:this.tr.translate("users_filter_profile"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]},{key:"parent_id",label:this.tr.translate("users_filter_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"},{key:"site_id",label:this.tr.translate("user_form_label_site"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_sites_management"},{key:"sub_users",label:this.tr.translate("users_filter_sub_users"),type:"switch",layout:"vertical",value:1,cols:12},{key:"mac",label:"MAC",type:"text",layout:"vertical",value:"",cols:12}],this.filterOptions={parent_id:[],profile_id:[],group_id:[]},this.headerActions=[{icon:"fal fa-folder-tree",action:"managers_tree",label:"Managers Tree"}],this.deposit_form={user_id:null,user_username:"",amount:null,comment:"",transaction_id:null},this.withdrawal_form={user_id:null,user_username:"",amount:null,comment:"",transaction_id:null},this.rename_form={user_id:null,username:"",new_username:""},this.traffic_form={user_id:null,username:"",amount:null,comment:"",transaction_id:null,target:"rxtx_mbytes"},this.modelViewConfig=null,this.loading=!1,this.site_list=[],this.show_managers_tree=!1,this.traffic_dialog_visible=!1,this.traffic_dialog_user="",this.loadResources()}ngOnInit(){this.modelViewConfig={title:this.tr.translate("users_table_title"),icon:"fa fa-users",columns:this.columns,dataUrl:"index/user",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"users",hasAdvancedFilter:!0,hasInlineActions:!0,allowExport:this.auth.has("prm_users_export"),id:"users_index_table",showRowsCount:!0,sortBy:"username",headerActions:this.headerActions}}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"show_live_traffic":this.showLiveTraffic(e);break;case"new":this.router.navigate(["user/"]);break;case"edit":this.router.navigate(["user/"+t]);break;case"deposit":this.showDepositForm();break;case"withdraw":this.showWithdrawalForm();break;case"add_traffic":this.showAddTrafficForm();break;case"delete":this.destroy();break;case"rename":this.showRenameForm();break;case"activate":this.modelView.selectedRows().length<=1?this.router.navigate(["user/activate/"+t]):this.bulkActivation();break;case"profile":this.router.navigate(["user/profile/"+t]);break;case"extend":this.router.navigate(["user/extend/"+t]);break;case"cancel":this.cancelSubscription(e.row);break;case"managers_tree":this.showManagersTree();break;case"edit_new_tab":this.router.navigate([]).then(e=>{window.open("#/user/"+t,"_blank")});break;case"addon":this.router.navigate(["user/addon/"+t]);break;case"pay_debt":this.showPayDebtForm();break;case"compensate":this.showCompensationDialog()}}onCellClicked(e){"username"===e.column&&this.router.navigate(["user",e.row.id]),"name"===e.column&&this.auth.has("prm_profiles_update")&&this.router.navigate(["profile",e.row.profile_id]),"expiration"===e.column&&this.auth.has("prm_users_advanced")&&this.alterExpiration(e)}onCellMiddleClicked(e){"username"===e.column&&window.open("#/user/"+e.row.id,"_blank")}showAddTrafficForm(){const e=this.modelView.currentRow;this.traffic_form.amount=null,this.traffic_form.user_id=e.id,this.traffic_form.comment="",this.traffic_form.target="rxtx_mbytes",this.traffic_form.username=e.username,this.traffic_form.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.trafficModal)}showCompensationDialog(){const e=this.modelView.currentRow,t=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(e=>{t.push(e.id)}):t.push(e.id),0!==t.length&&this.dialogService.open(Qn,{header:this.tr.translate("user_compensation_title"),width:"500px",data:{rows:t}}).onClose.subscribe(()=>{this.modelView.reload()})}showDepositForm(){const e=this.modelView.currentRow;this.deposit_form.amount=null,this.deposit_form.user_id=e.id,this.deposit_form.comment="",this.deposit_form.user_username=e.username,this.deposit_form.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.depositModal)}deposit(){this.activeModal.hide(),this.api.post("user/deposit",this.deposit_form).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.warning(this.tr.translate(e.message))})}addTraffic(){this.activeModal.hide(),this.api.post("user/addTraffic",this.traffic_form).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}showWithdrawalForm(){const e=this.modelView.currentRow;this.withdrawal_form.amount=null,this.withdrawal_form.user_id=e.id,this.withdrawal_form.comment="",this.withdrawal_form.transaction_id=this.ch.guid(),this.withdrawal_form.user_username=e.username,this.activeModal=this.modalService.show(this.withdrawalModal)}withdraw(){this.activeModal.hide(),this.api.post("user/withdraw",this.withdrawal_form).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.warning(this.tr.translate(e.message))})}showPayDebtForm(){const e=this.modelView.currentRow;this.dialogService.open(Fn,{header:this.tr.translate("global_actions_pay_debt"),data:{user_id:e.id}}).onClose.subscribe(()=>{this.modelView.reload()})}showRenameForm(){let e=this.modelView.currentRow;this.rename_form.user_id=e.id,this.rename_form.username=e.username,this.rename_form.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}rename(){let e=this.rename_form.user_id,t={new_username:this.rename_form.new_username};this.blockUI.start(this.tr.translate("msg_wait")),this.api.post("user/rename/"+e,t).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.toastr.success(this.tr.translate("msg_user_rename_success")),this.modelView.reload()):this.toastr.error(this.tr.translate("msg_user_rename_error")),this.activeModal.hide()},e=>{this.toastr.error(this.tr.translate("msg_user_rename_error")),this.activeModal.hide()})}destroy(){this.modelView.selectedRows().length<1&&!this.modelView.currentRow||this.swal.confirm({title:this.tr.translate("prompt_delete_user"),type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(()=>{let e=null;if(this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.blockUI.start("loading..."),this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(let a of t)e.push(a.id);this.api.post("user/bulkDelete",e).subscribe(e=>{this.blockUI.stop(),200!=e.status?this.toastr.warning(this.tr.translate("msg_user_delete_warning")):(this.toastr.success(this.tr.translate("msg_user_delete_success")),this.modelView.reload())})}else this.api.delete("user/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.modelView.reload(),this.toastr.success(this.tr.translate("msg_user_delete_success"),"")):this.toastr.warning(this.tr.translate("msg_user_delete_warning"))})})}alterExpiration(e){this.swal.prompt("New Expiration",e.row.expiration).subscribe(t=>{let a={expiration:t,id:e.row.id};this.blockUI.start(),this.api.post("user/expiration",a).subscribe(a=>{this.blockUI.stop(),200==a.status&&(e.row.expiration=t)})})}loadResources(){if(this.api.get("index/manager").subscribe(e=>{const t=[];t.push({value:-1,label:this.tr.translate("global_all")});for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.parent_id=t}),this.auth.has("prm_sites_management")&&this.api.get("site").subscribe(e=>{if(200===e.status){for(let t of e.data)this.site_list.push({value:t.id,label:t.name});this.filterOptions.site_id=this.site_list,this.filterOptions.site_id.unshift({value:-1,label:this.tr.translate("global_all")})}}),this.api.get("list/profile/0").subscribe(e=>{const t=[];t.push({value:-1,label:this.tr.translate("global_all")}),200===e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filterOptions.profile_id=t)}),this.auth.has("prm_groups_assign")){const e=[];this.api.get("group").subscribe(t=>{if(200===t.status){for(const a of t.data)e.push({value:a.id,label:a.name});e.unshift({value:-1,label:this.tr.translate("global_all")}),this.filterOptions.group_id=e}})}}bulkActivation(){let e=[],t=this.modelView.selectedRows();for(let i of t)e.push(i.id);let a=JSON.stringify(e);a=btoa(a),this.router.navigate(["user/bulkActivate",a])}cancelSubscription(e){e.status.expiration&&!1!==e.status.expiration?this.router.navigate(["user/cancel",e.id]):this.toastr.warning("user_expired")}showManagersTree(){this.show_managers_tree=!this.show_managers_tree}_onTreeNodeSelected(e){const t={parent_id:parseInt(e.id),sub_managers:!0};this.modelView.setAdvancedFilter(t),this.modelView.advancedFilter.search(),this.activeModal.hide()}showLiveTraffic(e){1===e.row.online_status?(this.liveTraffic.setUserId(e.row.id),this.traffic_dialog_visible=!0,this.traffic_dialog_user=e.row.username):this.toastr.warning(this.tr.translate("msg_user_not_online"))}}eo.\u0275fac=function(e){return new(e||eo)(n.Y36(h),n.Y36(p.F0),n.Y36(We.tT),n.Y36(Ge),n.Y36(g._W),n.Y36(M),n.Y36(fa.xA),n.Y36(m),n.Y36(l),n.Y36(_))},eo.\u0275cmp=n.Xpm({type:eo,selectors:[["users-index"]],viewQuery:function(e,t){if(1&e&&(n.Gf(Pn,5),n.Gf(Dn,5),n.Gf(Hn,5),n.Gf(Rn,5),n.Gf(Vn,5),n.Gf(Ln,5),n.Gf(En,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.depositModal=e.first),n.iGM(e=n.CRH())&&(t.withdrawalModal=e.first),n.iGM(e=n.CRH())&&(t.renameModal=e.first),n.iGM(e=n.CRH())&&(t.liveTraffic=e.first),n.iGM(e=n.CRH())&&(t.pDialog=e.first),n.iGM(e=n.CRH())&&(t.trafficModal=e.first)}},features:[n._Bn([fa.xA])],decls:16,vars:5,consts:[[1,"legend-box"],[2,"width","100%"],[1,"fa","fa-stop","user_active"],[1,"fa","fa-stop","user_expired"],[1,"fa","fa-stop","user_traffic_depleted"],[1,"fa","fa-stop","user_disabled"],[4,"blockUI"],["name","user_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded",4,"ngIf"],["add_traffic_modal",""],["deposit_modal",""],["withdrawal_modal",""],["rename_modal",""],["position","right","baseZIndex","999","styleClass","p-sidebar-md",3,"visible","visibleChange"],[1,"modal-title","text-center"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],[3,"header","visible","modal","draggable","visibleChange","onShow","onHide"],["liveTrafficDialog",""],["id","live_traffic",3,"finished"],["live_traffic",""],["name","user_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded"],["user_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["for","user_username"],["type","text","readonly","",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["name","target",1,"form-control",3,"ngModel","ngModelChange"],["target","ngModel"],["value","rxtx_mbytes"],["value","rx_mbytes"],["value","tx_mbytes"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text","readonly","","id","user_username",1,"form-control","form-control-plaintext",3,"value"],["name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control",3,"ngModel","options","ngModelChange"],["type","text","name","comment","currencyMask","",1,"form-control",3,"ngModel","options","ngModelChange"],["type","text","readonly","","id","user_username2",1,"form-control","form-control-plaintext",3,"value"],["for","new_username"],["type","text","id","new_username","name","new_username","placeholder","Enter new username","pattern","[a-zA-Z.@_0-9:-]*","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"table",1),n.TgZ(2,"tr"),n.TgZ(3,"td"),n._UZ(4,"i",2),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._UZ(7,"i",3),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._UZ(10,"i",4),n._uU(11),n.qZA(),n.TgZ(12,"td"),n._UZ(13,"i",5),n._uU(14),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(15,Xn,18,11,"div",6)),2&e&&(n.xp6(5),n.hij(" ",t.tr.translate("users_status_active"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_expired"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_traffic_depleted"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_disabled"),""),n.xp6(1),n.Q6J("blockUI","model-view"))},directives:[u.Z2,J.O5,Aa.Y,Ca,ki.V,Sn,wt,Z._Y,Z.JL,Z.F,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,Z.wV,Z.Fj,Za.g1,Z.c5],styles:[".user_disabled{color:#bb3436!important;cursor:pointer}.user_active{color:#9fe22b!important}.user_online{color:#1b9dec}.username_online{font-weight:bold}.user_expired{color:#ff9416}.user_traffic_depleted{color:#e3dd4e}.legend-box{font-size:12px;background:white;margin-bottom:5px;padding:5px 15px;box-sizing:border-box}\n"],encapsulation:2}),(0,c.gn)([(0,u.bH)()],eo.prototype,"blockUI",void 0);var to=a(15971);function ao(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"agm-map",10),n.TgZ(1,"agm-marker",11),n.NdJ("dragEnd",function(t){return n.CHM(e),n.oxw().updateLocation(t)}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("latitude",e.currentGPSLocation.gps_lat)("longitude",e.currentGPSLocation.gps_lng),n.xp6(1),n.Q6J("latitude",e.currentGPSLocation.gps_lat)("longitude",e.currentGPSLocation.gps_lng)("markerDraggable",!0)}}let io=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.tr=a,this.toastr=i,this.currentGPSLocation={gps_lat:34.895158,gps_lng:21.686261},this.user_id=null}updateLocation(e){console.log(e),this.currentGPSLocation.gps_lat=e.coords.lat,this.currentGPSLocation.gps_lng=e.coords.lng,this.api.post("user/location/"+this.user_id.toString(),this.currentGPSLocation).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}load(){this.api.get("user/"+this.user_id.toString()).subscribe(e=>{null!=e.data.gps_lat&&null!=e.data.gps_lng&&(this.currentGPSLocation.gps_lat=parseFloat(e.data.gps_lat),this.currentGPSLocation.gps_lng=parseFloat(e.data.gps_lng))})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.load())})}ngAfterContentInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-location"]],viewQuery:function(e,t){if(1&e&&n.Gf(to.SA,5),2&e){let e;n.iGM(e=n.CRH())&&(t.agmMap=e.first)}},decls:19,vars:4,consts:[[1,"card"],[1,"card-body"],[3,"latitude","longitude",4,"ngIf"],[1,"row",2,"margin-top","20px"],[1,"col"],[1,"ui-fluid"],[1,"p-field"],["type","text pInputText",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"],[3,"latitude","longitude"],[3,"latitude","longitude","markerDraggable","dragEnd"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,ao,2,5,"agm-map",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n.TgZ(7,"label"),n._uU(8,"LAT"),n.qZA(),n.TgZ(9,"input",7),n.NdJ("ngModelChange",function(e){return t.currentGPSLocation.gps_lat=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",4),n.TgZ(11,"div",5),n.TgZ(12,"div",6),n.TgZ(13,"label"),n._uU(14,"LNG"),n.qZA(),n.TgZ(15,"input",7),n.NdJ("ngModelChange",function(e){return t.currentGPSLocation.gps_lng=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",8),n.TgZ(17,"div",9),n.NdJ("click",function(){return t.updateLocation({coords:{lat:t.currentGPSLocation.gps_lat,lng:t.currentGPSLocation.gps_lng}})}),n._uU(18),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngIf",t.currentGPSLocation.gps_lat&&""!=t.currentGPSLocation.gps_lat),n.xp6(7),n.Q6J("ngModel",t.currentGPSLocation.gps_lat),n.xp6(6),n.Q6J("ngModel",t.currentGPSLocation.gps_lng),n.xp6(3),n.Oqu(t.tr.translate("global_button_submit")))},directives:[J.O5,Z.Fj,Z.JJ,Z.On,to.SA,to.pt],styles:["agm-map[_ngcontent-%COMP%]{height:500px}"]}),e})();const no=["user_model_view"],oo=["deposit_modal"],so=["withdrawal_modal"],ro=["rename_modal"];function lo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().activate()}),n._UZ(1,"i",29),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("users_action_activate")," ")}}function co(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().issueInvoice()}),n._UZ(1,"i",30),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("users_action_issue_invoice")," ")}}function uo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().changeProfile()}),n._UZ(1,"i",31),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("users_action_change_profile")," ")}}function po(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().disconnect()}),n._UZ(1,"i",32),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("users_action_disconnect")," ")}}function go(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().showDepositForm()}),n._UZ(1,"i",33),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_deposit")," ")}}function fo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().showWithdrawalForm()}),n._UZ(1,"i",33),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_withdrawal")," ")}}function ho(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().resetDailyTraffic()}),n._UZ(1,"i",34),n._UZ(2,"br"),n._uU(3," Reset Traffic "),n.qZA()}}function mo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().showRenameForm()}),n._UZ(1,"i",35),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_rename")," ")}}function _o(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("click",function(){return n.CHM(e),n.oxw().destroy()}),n._UZ(1,"i",36),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_delete")," ")}}function bo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",37),n._UZ(2,"i",38),n._uU(3," Profile is scheduled to be changed on the "),n.TgZ(4,"b"),n._uU(5),n.qZA(),n._uU(6," to "),n.TgZ(7,"b"),n._uU(8),n.qZA(),n._uU(9," ."),n._UZ(10,"br"),n.TgZ(11,"span",39),n.NdJ("click",function(){return n.CHM(e),n.oxw().cancelProfileChange()}),n._uU(12,"Cancel"),n.qZA(),n._uU(13," Profile Change "),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Oqu(e.overview.next_profile_change.due_date),n.xp6(3),n.Oqu(e.overview.next_profile_change.profile_name)}}function Zo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n.TgZ(6,"button",45),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).cancelAddon(t.id)}),n._UZ(7,"i",46),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.addon_details.name),n.xp6(2),n.Oqu(e.expiration)}}function vo(e,t){if(1&e&&(n.TgZ(0,"div",40),n.TgZ(1,"div",41),n._uU(2),n.qZA(),n.TgZ(3,"div",42),n.TgZ(4,"table",43),n.TgZ(5,"tr"),n.TgZ(6,"th"),n._uU(7),n.qZA(),n.TgZ(8,"th"),n._uU(9),n.qZA(),n._UZ(10,"th"),n.qZA(),n.TgZ(11,"tbody"),n.YNc(12,Zo,8,2,"tr",44),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("user_overview_active_addons")),n.xp6(5),n.Oqu(e.tr.translate("user_overview_addon")),n.xp6(2),n.Oqu(e.tr.translate("global_expiration")),n.xp6(3),n.Q6J("ngForOf",e.overview.addons)}}function wo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",47),n.TgZ(1,"h4",48),n._uU(2,"Deposit Amount"),n.qZA(),n.TgZ(3,"button",49),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",50),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",51),n.TgZ(7,"form",52),n.TgZ(8,"div",53),n.TgZ(9,"label"),n._uU(10,"Username"),n.qZA(),n._UZ(11,"input",54),n.TgZ(12,"small",55),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",53),n.TgZ(15,"label"),n._uU(16,"Amount"),n.qZA(),n.TgZ(17,"input",56,57),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().depositForm.amount=t}),n.qZA(),n.TgZ(19,"small",55),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",58),n.TgZ(22,"button",59),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(23,"Close"),n.qZA(),n.TgZ(24,"button",60),n.NdJ("click",function(){return n.CHM(e),n.oxw().deposit()}),n._uU(25,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(11),n.s9C("value",e.depositForm.user_username),n.xp6(6),n.Q6J("ngModel",e.depositForm.amount),n.xp6(7),n.Q6J("disabled",!e.depositForm.amount||e.depositForm.amount<=0)}}function yo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",47),n.TgZ(1,"h4",48),n._uU(2,"Deduct Amount"),n.qZA(),n.TgZ(3,"button",49),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",50),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",51),n.TgZ(7,"form",52),n.TgZ(8,"div",53),n.TgZ(9,"label"),n._uU(10,"Username"),n.qZA(),n._UZ(11,"input",54),n.TgZ(12,"small",55),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",53),n.TgZ(15,"label"),n._uU(16,"Amount"),n.qZA(),n.TgZ(17,"input",56,57),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().withdrawalForm.amount=t}),n.qZA(),n.TgZ(19,"small",55),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",58),n.TgZ(22,"button",59),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(23,"Close"),n.qZA(),n.TgZ(24,"button",60),n.NdJ("click",function(){return n.CHM(e),n.oxw().withdraw()}),n._uU(25,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(11),n.s9C("value",e.withdrawalForm.user_username),n.xp6(6),n.Q6J("ngModel",e.withdrawalForm.amount),n.xp6(7),n.Q6J("disabled",!e.withdrawalForm.amount||e.withdrawalForm.amount<=0)}}function xo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",47),n.TgZ(1,"h4",48),n._uU(2,"Rename User"),n.qZA(),n.TgZ(3,"button",49),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",50),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",51),n.TgZ(7,"form",52),n.TgZ(8,"div",53),n.TgZ(9,"label"),n._uU(10,"Current Username"),n.qZA(),n._UZ(11,"input",54),n.TgZ(12,"small",55),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",53),n.TgZ(15,"label"),n._uU(16,"New Username"),n.qZA(),n.TgZ(17,"input",61,62),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().renameForm.new_username=t})("keydown.enter",function(){return n.CHM(e),n.oxw().rename()}),n.qZA(),n.TgZ(19,"small",55),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",58),n.TgZ(22,"button",59),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(23,"Close"),n.qZA(),n.TgZ(24,"button",60),n.NdJ("click",function(){return n.CHM(e),n.oxw().rename()}),n._uU(25,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(11),n.s9C("value",e.renameForm.username),n.xp6(6),n.Q6J("ngModel",e.renameForm.new_username),n.xp6(7),n.Q6J("disabled",!e.renameForm.new_username||e.renameForm.new_username.length<1)}}const Ao=function(e){return["/profile",e]};class qo{constructor(e,t,a,i,n,o,s,r,l,c,d){this.api=e,this.route=t,this.modalService=a,this.toastr=i,this.router=n,this.swal=o,this.ch=s,this.auth=r,this.config=l,this.tr=c,this.confirmationService=d,this.depositForm={user_id:null,user_username:"",amount:null},this.withdrawalForm={user_id:null,user_username:"",amount:null},this.renameForm={user_id:null,username:"",new_username:""},this.modelViewConfig=null,this.loading=!1,this.user_id=null,this.overview={}}load(){this.api.get("user/overview/"+this.user_id).subscribe(e=>{this.overview=e.data})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.load())})}showDepositForm(){this.depositForm.amount=null,this.depositForm.user_id=this.user_id,this.depositForm.user_username=this.overview.username,this.depositForm.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.depositModal)}deposit(){this.activeModal.hide(),this.api.post("user/deposit",this.depositForm).subscribe(e=>{200===e.status&&(this.toastr.success("Credit Added Successfully"),this.load())})}showWithdrawalForm(){this.withdrawalForm.amount=null,this.withdrawalForm.user_id=this.user_id,this.withdrawalForm.user_username=this.overview.username,this.withdrawalForm.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.withdrawalModal)}withdraw(){this.activeModal.hide(),this.api.post("user/withdraw",this.withdrawalForm).subscribe(e=>{200===e.status&&(this.toastr.success("Credit Deducted Successfully"),this.load())})}activate(){this.router.navigate(["user/activate",this.user_id])}showRenameForm(){this.renameForm.user_id=this.user_id,this.renameForm.username=this.overview.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}rename(){let e=this.renameForm.user_id,t={new_username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.post("user/rename/"+e,t).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.toastr.success("User Renamed"),this.load()):this.toastr.error("Unable to rename user"),this.activeModal.hide()},e=>{this.toastr.error("Error Occurred !"),this.activeModal.hide()})}changeProfile(){this.router.navigate(["user/profile/"+this.user_id])}cancelProfileChange(){this.swal.confirm({title:"Change Profile",type:"warning",text:"Cancel Scheduled Profile Change ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.get("user/cancelProfileChange/"+this.user_id).subscribe(e=>{200===e.status&&(this.toastr.success(e.message),this.load())})})}destroy(){this.swal.confirm({title:"Delete User",type:"warning",text:"Delete "+this.overview.username+" ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start("loading..."),this.api.delete("user/"+this.user_id).subscribe(e=>{this.blockUI.stop(),200==e.status?(this.router.navigate(["index/users"]),this.toastr.success(e.message,""),this.router.navigate(["users/index"])):this.toastr.warning(e.error)})})}disconnect(){this.swal.confirm({title:"Disconnect User",type:"warning",text:"Disconnect Selected User(s) ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.get("user/disconnect/userid/"+this.user_id.toString()).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.load())})})}issueInvoice(){this.router.navigate(["billing/userInvoiceForm",this.user_id.toString()])}resetDailyTraffic(){this.confirmationService.confirm({message:"Are you sure that you want to perform this action?",accept:()=>{this.api.post("user/resetDailyTraffic",{user_id:this.user_id.toString()}).subscribe(e=>{this.toastr.success(this.tr.translate(e.message))})}})}cancelAddon(e){const t={addon_id:e,user_id:this.user_id};this.confirmationService.confirm({message:"Cancel Addon Subscription ?",accept:()=>{this.api.post("user/cancelAddon",t).subscribe(e=>{200===e.status?(this.load(),this.toastr.success(this.tr.translate(e.message))):this.toastr.error(this.tr.translate(e.message))})}})}}function To(e,t){if(1&e&&(n.TgZ(0,"option",17),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.key),n.xp6(1),n.Oqu(e.text)}}function Co(e,t){if(1&e&&(n.TgZ(0,"option",17),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij("",e,"\xa0")}}function ko(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.rx))}}function Uo(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.tx))}}function Mo(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total))}}function Fo(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total_real))}}function Jo(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n.YNc(4,ko,3,3,"span",21),n.qZA(),n.TgZ(5,"td",20),n.YNc(6,Uo,3,3,"span",21),n.qZA(),n.TgZ(7,"td",20),n.YNc(8,Mo,3,3,"span",21),n.qZA(),n.TgZ(9,"td",20),n.YNc(10,Fo,3,3,"span",21),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.lnq("",a.filter.year,"-",a.filter.month,"-",e.day,""),n.xp6(2),n.Q6J("ngIf",e.rx>0),n.xp6(2),n.Q6J("ngIf",e.tx>0),n.xp6(2),n.Q6J("ngIf",e.total>0),n.xp6(2),n.Q6J("ngIf",e.total_real>0)}}function Oo(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",14),n.TgZ(2,"table",18),n.TgZ(3,"thead"),n.TgZ(4,"tr"),n.TgZ(5,"th"),n._uU(6,"Day"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Download"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Upload"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Total"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"Real Traffic"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"tbody"),n.YNc(16,Jo,11,7,"tr",19),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(16),n.Q6J("ngForOf",e.table_data)}}function No(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.rx))}}function Io(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.tx))}}function Yo(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total))}}function Qo(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total_real))}}function So(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",20),n.YNc(4,No,3,3,"span",21),n.qZA(),n.TgZ(5,"td",20),n.YNc(6,Io,3,3,"span",21),n.qZA(),n.TgZ(7,"td",20),n.YNc(8,Yo,3,3,"span",21),n.qZA(),n.TgZ(9,"td",20),n.YNc(10,Qo,3,3,"span",21),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.AsE("",a.filter.year,"-",e.month,""),n.xp6(2),n.Q6J("ngIf",e.rx>0),n.xp6(2),n.Q6J("ngIf",e.tx>0),n.xp6(2),n.Q6J("ngIf",e.total>0),n.xp6(2),n.Q6J("ngIf",e.total_real>0)}}function Po(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",14),n.TgZ(2,"table",18),n.TgZ(3,"thead"),n.TgZ(4,"tr"),n.TgZ(5,"th"),n._uU(6,"Month"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Download"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Upload"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Total"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"Real Traffic"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"tbody"),n.YNc(16,So,11,6,"tr",19),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(16),n.Q6J("ngForOf",e.table_data)}}qo.\u0275fac=function(e){return new(e||qo)(n.Y36(h),n.Y36(p.gz),n.Y36(We.tT),n.Y36(g._W),n.Y36(p.F0),n.Y36(Ge),n.Y36(m),n.Y36(_),n.Y36(l),n.Y36(M),n.Y36(xi.YP))},qo.\u0275cmp=n.Xpm({type:qo,selectors:[["app-user-overview"]],viewQuery:function(e,t){if(1&e&&(n.Gf(no,5),n.Gf(oo,5),n.Gf(so,5),n.Gf(ro,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.depositModal=e.first),n.iGM(e=n.CRH())&&(t.withdrawalModal=e.first),n.iGM(e=n.CRH())&&(t.renameModal=e.first)}},decls:134,vars:66,consts:[["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"row"],[1,"col-md","col-sm-12","order-2","order-md-1"],[1,"col","col-md-4","text-center"],[1,"user-photo-frame",2,"background-image","url(./assets/img/avatars/user-placeholder.png)"],[1,"image-cover"],[1,"btn","btn-primary","btn-sm",2,"position","absolute","top","50%","left","50%","transform","translate(-50%,-50%)"],[1,"col","col-md-8"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"row",2,"margin-top","10px","margin-left","5px"],["class","col overview-button",3,"click",4,"ngIf"],[2,"margin-top","10px","margin-left","5px"],[1,"col"],["class","row","style","margin-top: 10px; margin-left: 5px;",4,"ngIf"],[1,"col-md","col-sm-12","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item"],[1,"label"],[1,"value"],[3,"routerLink"],["class","card bg-white",4,"ngIf"],["deposit_modal",""],["withdrawal_modal",""],["rename_modal",""],[1,"col","overview-button",3,"click"],[1,"fa","fa-2x","fa-bolt"],[1,"fa","fa-2x","fa-file-invoice-dollar"],[1,"fa","fa-2x","fa-puzzle-piece"],[1,"fa","fa-2x","fa-unlink"],[1,"fa","fa-2x","fa-money-bill-alt"],[1,"fa","fa-2x","fa-sync"],[1,"fa","fa-2x","fa-edit"],[1,"fa","fa-2x","fa-trash"],["role","alert",1,"col","alert","alert-info"],[1,"fa","fa-info-circle"],[1,"fake-link",3,"click"],[1,"card","bg-white"],[1,"card-header"],[1,"card-body"],[1,"table","table-clear",2,"width","100%","border-top","none"],[4,"ngFor","ngForOf"],["type","button","title","cancel addon",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-ban"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"]],template:function(e,t){1&e&&(n._UZ(0,"p-confirmDialog",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",1),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"button",6),n._uU(8,"Change"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"ul",8),n.TgZ(11,"li"),n._UZ(12,"i",9),n._uU(13),n.qZA(),n.TgZ(14,"li"),n._UZ(15,"i",10),n._uU(16),n.qZA(),n.TgZ(17,"li"),n._UZ(18,"i",11),n._uU(19),n.qZA(),n.TgZ(20,"li"),n._UZ(21,"i",12),n._uU(22),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(23,"div",13),n.YNc(24,lo,4,1,"div",14),n.YNc(25,co,4,1,"div",14),n.YNc(26,uo,4,1,"div",14),n.YNc(27,po,4,1,"div",14),n.YNc(28,go,4,1,"div",14),n.YNc(29,fo,4,1,"div",14),n.YNc(30,ho,4,0,"div",14),n.YNc(31,mo,4,1,"div",14),n.YNc(32,_o,4,1,"div",14),n.qZA(),n._UZ(33,"app-user-location",15),n.TgZ(34,"div",13),n._UZ(35,"div",16),n.qZA(),n.YNc(36,bo,14,2,"div",17),n.qZA(),n.TgZ(37,"div",18),n.TgZ(38,"div",19),n.TgZ(39,"li",20),n.TgZ(40,"span",21),n._uU(41),n.qZA(),n.TgZ(42,"span",22),n._uU(43),n.qZA(),n.qZA(),n.TgZ(44,"li",20),n.TgZ(45,"span",21),n._uU(46),n.qZA(),n.TgZ(47,"span",22),n._uU(48),n.qZA(),n.qZA(),n.TgZ(49,"li",20),n.TgZ(50,"span",21),n._uU(51),n.qZA(),n.TgZ(52,"span",22),n._uU(53),n.ALo(54,"currency"),n.qZA(),n.qZA(),n.TgZ(55,"li",20),n.TgZ(56,"span",21),n._uU(57),n.qZA(),n.TgZ(58,"span",22),n._uU(59),n.qZA(),n.qZA(),n.TgZ(60,"li",20),n.TgZ(61,"span",21),n._uU(62),n.qZA(),n.TgZ(63,"span",22),n.TgZ(64,"a",23),n._uU(65),n.qZA(),n.qZA(),n.qZA(),n.TgZ(66,"li",20),n.TgZ(67,"span",21),n._uU(68),n.qZA(),n.TgZ(69,"span",22),n._uU(70),n.ALo(71,"date"),n.qZA(),n.qZA(),n.TgZ(72,"li",20),n.TgZ(73,"span",21),n._uU(74),n.qZA(),n.TgZ(75,"span",22),n._uU(76),n.qZA(),n.qZA(),n.TgZ(77,"li",20),n.TgZ(78,"span",21),n._uU(79),n.qZA(),n.TgZ(80,"span",22),n._uU(81),n.qZA(),n.qZA(),n.TgZ(82,"li",20),n.TgZ(83,"span",21),n._uU(84),n.qZA(),n.TgZ(85,"span",22),n._uU(86),n.qZA(),n.qZA(),n.TgZ(87,"li",20),n.TgZ(88,"span",21),n._uU(89),n.qZA(),n.TgZ(90,"span",22),n._uU(91),n.ALo(92,"bytes"),n.qZA(),n.qZA(),n.TgZ(93,"li",20),n.TgZ(94,"span",21),n._uU(95),n.qZA(),n.TgZ(96,"span",22),n._uU(97),n.ALo(98,"bytes"),n.qZA(),n.qZA(),n.TgZ(99,"li",20),n.TgZ(100,"span",21),n._uU(101),n.qZA(),n.TgZ(102,"span",22),n._uU(103),n.ALo(104,"bytes"),n.qZA(),n.qZA(),n.TgZ(105,"li",20),n.TgZ(106,"span",21),n._uU(107),n.qZA(),n.TgZ(108,"span",22),n._uU(109),n.ALo(110,"humanizeSeconds"),n.qZA(),n.qZA(),n.TgZ(111,"li",20),n.TgZ(112,"span",21),n._uU(113),n.qZA(),n.TgZ(114,"span",22),n._uU(115),n.qZA(),n.qZA(),n.TgZ(116,"li",20),n.TgZ(117,"span",21),n._uU(118),n.qZA(),n.TgZ(119,"span",22),n._uU(120),n.qZA(),n.qZA(),n.TgZ(121,"li",20),n.TgZ(122,"span",21),n._uU(123),n.qZA(),n.TgZ(124,"span",22),n._uU(125),n.qZA(),n.qZA(),n.qZA(),n._UZ(126,"br"),n.YNc(127,vo,13,4,"div",24),n.qZA(),n.qZA(),n.YNc(128,wo,26,3,"ng-template",null,25,n.W1O),n.YNc(130,yo,26,3,"ng-template",null,26,n.W1O),n.YNc(132,xo,26,3,"ng-template",null,27,n.W1O)),2&e&&(n.xp6(13),n.AsE(" ",t.overview.firstname," ",t.overview.lastname,""),n.xp6(3),n.hij(" ",t.overview.phone||"N/A",""),n.xp6(3),n.AsE(" ",t.overview.address||"N/A",", ",t.overview.city,""),n.xp6(3),n.hij(" ",t.overview.email||"N/A",""),n.xp6(2),n.Q6J("ngIf",t.auth.has("prm_users_activate")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_billing")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_change_profile")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_disconnect")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_deposit")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_withdrawal")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_reset_quota")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_rename")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_delete")),n.xp6(4),n.Q6J("ngIf",t.overview&&t.overview.next_profile_change),n.xp6(5),n.Oqu(t.tr.translate("global_label_username")),n.xp6(2),n.Oqu(t.overview.username),n.xp6(3),n.Oqu(t.tr.translate("global_label_password")),n.xp6(2),n.Oqu(t.overview.password),n.xp6(3),n.Oqu(t.tr.translate("global_label_balance")),n.xp6(2),n.Oqu(n.xi3(54,50,t.overview.balance,t.config.siteConfig.site_currency)),n.xp6(4),n.Oqu(t.tr.translate("user_overview_owner")),n.xp6(2),n.Oqu(t.overview.parent_username),n.xp6(3),n.Oqu(t.tr.translate("user_overview_profile")),n.xp6(2),n.Q6J("routerLink",n.VKq(64,Ao,t.overview.profile_id)),n.xp6(1),n.Oqu(t.overview.profile_name),n.xp6(3),n.Oqu(t.tr.translate("user_overview_expiration")),n.xp6(2),n.Oqu(n.xi3(71,53,t.overview.expiration,"medium")),n.xp6(4),n.Oqu(t.tr.translate("user_overview_pin_tries")),n.xp6(2),n.Oqu(t.overview.pin_tries),n.xp6(3),n.Oqu(t.tr.translate("user_overview_status")),n.xp6(2),n.Oqu(!0===t.overview.status?"Active":"Inactive"),n.xp6(3),n.Oqu(t.tr.translate("user_overview_last_login")),n.xp6(2),n.Oqu(t.overview.last_online),n.xp6(3),n.Oqu(t.tr.translate("user_overview_remaining_download")),n.xp6(2),n.Oqu(n.lcZ(92,56,t.overview.remaining_rx)),n.xp6(4),n.Oqu(t.tr.translate("user_overview_remaining_upload")),n.xp6(2),n.Oqu(n.lcZ(98,58,t.overview.remaining_tx)),n.xp6(4),n.Oqu(t.tr.translate("user_overview_remaining_traffic")),n.xp6(2),n.Oqu(n.lcZ(104,60,t.overview.remaining_rxtx)),n.xp6(4),n.Oqu(t.tr.translate("user_overview_remaining_uptime")),n.xp6(2),n.Oqu(n.lcZ(110,62,t.overview.remaining_uptime)),n.xp6(4),n.Oqu(t.tr.translate("user_overview_purchases")),n.xp6(2),n.Oqu(t.overview.total_purchases),n.xp6(3),n.Oqu(t.tr.translate("user_overview_created_on")),n.xp6(2),n.Oqu(t.overview.created_at),n.xp6(3),n.Oqu(t.tr.translate("user_overview_created_by")),n.xp6(2),n.Oqu(t.overview.created_by),n.xp6(2),n.Q6J("ngIf",t.overview.addons&&t.overview.addons.length>0))},directives:[T.Q,J.O5,io,p.yS,J.sg,Z._Y,Z.JL,Z.F,Z.wV,Z.Fj,Z.JJ,Z.On],pipes:[J.H9,J.uU,Ht,Rt],styles:[".list-group-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:normal}.list-group-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;float:right}.user-photo-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #eee;background-size:contain;background-repeat:no-repeat;background-position:center}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.overview-button[_ngcontent-%COMP%]{width:150px;height:100px;font-size:14px;color:#fff;text-align:center;background:#6e84a7;cursor:pointer;border:1px solid #b4bcbf;padding-top:25px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:150px;max-width:150px}.overview-button[_ngcontent-%COMP%]:hover{background:#1f64a7}.overview-button[_ngcontent-%COMP%]:active{background:#6e84a7}.image-cover[_ngcontent-%COMP%]{display:none;position:absolute;x:0;y:0;padding:0;maring:0px;width:100%;height:100%;background:rgba(255,255,255,.5);text-align:center}.user-photo-frame[_ngcontent-%COMP%]:hover   .image-cover[_ngcontent-%COMP%]{display:block}"]}),(0,c.gn)([(0,u.bH)()],qo.prototype,"blockUI",void 0);let Do=(()=>{class e{constructor(e,t){this.api=e,this.route=t,this.months=[{key:1,text:"Jan"},{key:2,text:"Feb"},{key:3,text:"Mar"},{key:4,text:"Apr"},{key:5,text:"May"},{key:6,text:"Jun"},{key:7,text:"Jul"},{key:8,text:"Aug"},{key:9,text:"Spt"},{key:10,text:"Oct"},{key:11,text:"Nov"},{key:12,text:"Dec"}],this.years=[],this.filter={report_type:"daily",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),user_id:null},this.chart_labels_daily=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.chart_labels_monthly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],this.chart_labels=[],this.chart_data=[],this.chart_options={responsive:!0,elements:{line:{fill:!1}}},this.chart_ready=!1,this.table_data=[],this.highcharts_options_monthly={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"31"},yAxis:{title:{text:"Activities"},currentMin:0}};for(let a=(new Date).getFullYear();a>2017;a--)this.years.push(a.toString());this.route.params.subscribe(e=>{e.id&&(this.filter.user_id=e.id,this.load())})}load(){this.chart_data=[],this.table_data=[],this.chart_ready=!1,this.api.post("user/traffic",this.filter).subscribe(e=>{"daily"==this.filter.report_type?(this.drawDailyGraph(e.data),this.populateDailyTable(e.data)):(this.drawMonthlyGraph(e.data),this.populateMonthlyTable(e.data))})}drawDailyGraph(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Traffic"},currentMin:0}},a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1},n={name:"Real Traffic",type:"spline",data:e.total_real,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),t.series.push(n),this.chart=D.chart("chart_container",t)}drawMonthlyGraph(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"12"},yAxis:{title:{text:"Traffic"},currentMin:1}};t.xAxis={type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:this.chart_labels_monthly};let a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1},n={name:"Real Traffic",type:"spline",data:e.total_real,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),t.series.push(n),this.chart=D.chart("chart_container",t)}populateDailyTable(e){let t=0;for(const a of e.rx)this.table_data.push({day:t+1,rx:e.rx[t],tx:e.tx[t],total:e.total[t],free_traffic:e.free_traffic[t],total_real:e.total_real[t]}),t++}populateMonthlyTable(e){let t=0;for(const a of e.rx)this.table_data.push({month:t+1,rx:e.rx[t],tx:e.tx[t],total:e.total[t],free_traffic:e.free_traffic[t],total_real:e.total_real[t]}),t++}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-traffic-data"]],decls:24,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-auto","ml-auto","table-toolbar"],[1,"form-group","pull-right"],[1,"input-group"],["name","type",1,"form-control",3,"ngModel","ngModelChange","change"],["value","daily"],["value","monthly"],["name","month",1,"form-control",3,"ngModel","hidden","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["name","year",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-sync"],[1,"col"],["id","chart_container"],["class","row",4,"ngIf"],[3,"value"],[1,"table","table-bordered","table-hover","table-sm"],[4,"ngFor","ngForOf"],[1,"font-weight-light"],[4,"ngIf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"select",6),n.NdJ("ngModelChange",function(e){return t.filter.report_type=e})("change",function(){return t.load()}),n.TgZ(7,"option",7),n._uU(8,"\xa0Daily\xa0"),n.qZA(),n.TgZ(9,"option",8),n._uU(10,"\xa0Monthly\xa0"),n.qZA(),n.qZA(),n.TgZ(11,"select",9),n.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),n.YNc(12,To,2,2,"option",10),n.qZA(),n.TgZ(13,"select",11),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),n.YNc(14,Co,2,2,"option",10),n.qZA(),n.TgZ(15,"a",12),n.NdJ("click",function(){return t.load()}),n._UZ(16,"i",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"div",2),n.TgZ(18,"div",14),n.TgZ(19,"div",15),n._uU(20," Chart is loading... "),n.qZA(),n.qZA(),n.qZA(),n._UZ(21,"br"),n.YNc(22,Oo,17,1,"div",16),n.YNc(23,Po,17,1,"div",16),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Q6J("ngModel",t.filter.report_type),n.xp6(5),n.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.report_type),n.xp6(1),n.Q6J("ngForOf",t.months),n.xp6(1),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.years),n.xp6(8),n.Q6J("ngIf","daily"==t.filter.report_type),n.xp6(1),n.Q6J("ngIf","monthly"==t.filter.report_type))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,J.O5],pipes:[Ht],encapsulation:2}),e})();function Ho(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let Ro=(()=>{class e{constructor(e,t,a){this.route=e,this.tr=t,this.auth=a,this.tableColumns=[{dataKey:"acctstarttime",label:this.tr.translate("user_session_table_started")},{dataKey:"acctstoptime",label:this.tr.translate("user_session_table_ended")},{dataKey:"framedipaddress",label:this.tr.translate("user_session_table_ip")},{dataKey:"acctoutputoctets",label:this.tr.translate("user_session_table_download"),pipe:"bytes"},{dataKey:"acctinputoctets",label:this.tr.translate("user_session_table_upload"),pipe:"bytes"},{dataKey:"callingstationid",label:this.tr.translate("user_session_table_mac")},{dataKey:"calledstationid",label:this.tr.translate("user_session_table_service")},{dataKey:"nasipaddress",label:"NAS"},{dataKey:"name",parentKey:"profile_details",label:this.tr.translate("user_session_table_profile")},{dataKey:"acctterminatecause",label:this.tr.translate("user_session_table_termination_cause")}],this.modelViewConfig=null}ngOnInit(){!this.auth.has("prm_users_sessions_index")||this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserSessions/"+e.id,primaryKey:"radacctid",sortBy:"acctstarttime",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.gz),n.Y36(M),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-sessions"]],decls:1,vars:1,consts:[["name","sessions_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","sessions_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["sessions_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Ho,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function Vo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let Lo=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("user_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("user_invoice_table_date")},{dataKey:"type",label:this.tr.translate("user_invoice_table_type"),pipe:"translate"},{dataKey:"amount",label:this.tr.translate("user_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("user_invoice_table_description"),pipe:"translate"},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("user_invoice_table_created_by")},{dataKey:"payment_method",label:this.tr.translate("user_invoice_table_method")},{dataKey:"paid",label:this.tr.translate("user_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserInvoices/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-invoices"]],decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["invoices_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Vo,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],encapsulation:2}),e})();function Eo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let Ko=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("user_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("user_receipt_table_date")},{dataKey:"type",label:this.tr.translate("user_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("user_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("user_receipt_table_description")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("user_receipt_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserReceipts/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-receipts"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["receipts_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Eo,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],encapsulation:2}),e})();function Bo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let zo=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("user_history_table_date")},{dataKey:"event",label:this.tr.translate("user_history_table_action")},{dataKey:"description",label:this.tr.translate("user_history_table_description")},{dataKey:"username",parentKey:"manager_details",sortBy:"created_by_manager_id",label:this.tr.translate("user_history_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserHistory/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-history"]],decls:1,vars:1,consts:[["name","user_history_model",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","user_history_model",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["user_history_model",""]],template:function(e,t){1&e&&n.YNc(0,Bo,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();const jo=["fileUpload"],Go=["documents_model_view"];function Wo(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",3,4),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let $o=(()=>{class e{constructor(e,t,a,i,n,o){this.api=e,this.route=t,this.config=a,this.toastr=i,this.swal=n,this.tr=o,this.tableColumns=[{dataKey:"name",label:this.tr.translate("user_document_table_name")},{dataKey:"size",label:this.tr.translate("user_document_table_size"),pipe:"bytes"},{dataKey:"filename",label:"Filename",hidden:!0},{dataKey:"created_at",label:this.tr.translate("user_document_table_date")}],this.actions=[{name:"upload",label:this.tr.translate("global_label_upload"),icon:"fa fa-upload"},{name:"download",label:this.tr.translate("global_label_download"),icon:"fa fa-download",inline:!0,acl:"prm_any",requiresRow:!0},{name:"rename",label:this.tr.translate("global_label_rename"),icon:"fa fa-edit",inline:!0,acl:"prm_any",requiresRow:!0},{name:"delete",label:this.tr.translate("global_label_delete"),icon:"fa fa-trash",inline:!0,acl:"prm_any",requiresRow:!0}],this.modelViewConfig=null,this.route.params.subscribe(e=>{if(e.id){let t=e.id;this.user_id=t,this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserDocuments/"+t,primaryKey:"id",sortBy:"id",direction:"desc",columns:this.tableColumns,useUrlFilter:!1,actions:this.actions,showSearchBox:!0,allowSelect:!0,hasInlineActions:!0}}})}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"upload":this.upload();break;case"download":this.download(t);break;case"rename":this.rename(t);break;case"delete":this.destroy(t)}}ngOnInit(){}upload(){this.uploader=new C.bA({url:this.config.getApiUrl()+"user/document/"+this.user_id,isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.response.subscribe(e=>{this.toastr.success("file_uploaded_successfully"),delete this.uploader;let t=JSON.parse(e).document_id.toString();this.swal.prompt("Document Name").subscribe(e=>{this.api.post("user/document/rename/"+t,{name:e}).subscribe(()=>{this.modelView.reload()})})}),this.fileUploadField.nativeElement.click()}download(e){this.api.downloadFile("user/document/"+e,this.modelView.currentRow.filename)}rename(e){this.swal.prompt("Document Name").subscribe(t=>{this.api.post("user/document/rename/"+e,{name:t}).subscribe(()=>{this.modelView.reload()})})}destroy(e){this.swal.confirm({title:"Delete Document",type:"warning",text:"Delete Selected Document ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("user/document/"+e).subscribe(e=>{this.modelView.reload()})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(l),n.Y36(g._W),n.Y36(Ge),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-documents"]],viewQuery:function(e,t){if(1&e&&(n.Gf(jo,5),n.Gf(Go,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.fileUploadField=e.first),n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:3,vars:2,consts:[["name","documents_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],["name","documents_model_view",3,"modelViewConfig","onAction"],["documents_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,Wo,2,1,"model-table-view",0),n.TgZ(1,"input",1,2),n.NdJ("change",function(){return t.uploader.uploadAll()}),n.qZA()),2&e&&(n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Q6J("uploader",t.uploader))},directives:[J.O5,C.C6,wt],styles:[""]}),e})();function Xo(e,t){1&e&&n._UZ(0,"i",30)}function es(e,t){1&e&&n._UZ(0,"i",30)}function ts(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",8),n._uU(2),n.qZA(),n.TgZ(3,"td",8),n._uU(4),n.qZA(),n.TgZ(5,"td",20),n.YNc(6,Xo,1,0,"i",21),n.qZA(),n.TgZ(7,"td",20),n.YNc(8,es,1,0,"i",21),n.qZA(),n.TgZ(9,"td",8),n.TgZ(10,"button",18),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().edit(t.id)}),n._UZ(11,"i",22),n.qZA(),n.TgZ(12,"button",18),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().destroy(t.id)}),n._UZ(13,"i",23),n.qZA(),n.qZA(),n.TgZ(14,"td",8),n.TgZ(15,"input",24),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.attribute=t}),n.qZA(),n.qZA(),n.TgZ(16,"td",8),n.TgZ(17,"input",25),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.value=t}),n.qZA(),n.qZA(),n.TgZ(18,"td",26),n.TgZ(19,"div",12),n.TgZ(20,"input",27),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.cisco_av_pair=t}),n.qZA(),n._UZ(21,"label",28),n.qZA(),n.qZA(),n.TgZ(22,"td",26),n.TgZ(23,"div",12),n.TgZ(24,"input",27),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.enabled=t}),n.qZA(),n._UZ(25,"label",28),n.qZA(),n.qZA(),n.TgZ(26,"td",29),n.TgZ(27,"button",18),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().updateRecord(t)}),n._UZ(28,"i",19),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(1),n.Q6J("hidden",a.edit_mode&&a.edit_row_id==e.id),n.xp6(1),n.hij(" ",e.attribute," "),n.xp6(1),n.Q6J("hidden",a.edit_mode&&a.edit_row_id==e.id),n.xp6(1),n.hij(" ",e.value," "),n.xp6(1),n.Q6J("hidden",a.edit_mode&&a.edit_row_id==e.id),n.xp6(1),n.Q6J("ngIf",1==e.cisco_av_pair),n.xp6(1),n.Q6J("hidden",a.edit_mode&&a.edit_row_id==e.id),n.xp6(1),n.Q6J("ngIf",1==e.enabled),n.xp6(1),n.Q6J("hidden",a.edit_mode&&a.edit_row_id==e.id),n.xp6(5),n.Q6J("hidden",!a.edit_mode||a.edit_row_id!=e.id),n.xp6(1),n.Q6J("ngModel",e.attribute),n.xp6(1),n.Q6J("hidden",!a.edit_mode||a.edit_row_id!=e.id),n.xp6(1),n.Q6J("ngModel",e.value),n.xp6(1),n.Q6J("hidden",!a.edit_mode||a.edit_row_id!=e.id),n.xp6(2),n.MGl("id","e1_",e.id,""),n.Q6J("ngModel",e.cisco_av_pair),n.xp6(1),n.MGl("for","e1_",e.id,""),n.xp6(1),n.Q6J("hidden",!a.edit_mode||a.edit_row_id!=e.id),n.xp6(2),n.MGl("id","e2_",e.id,""),n.Q6J("ngModel",e.enabled),n.xp6(1),n.MGl("for","e2_",e.id,""),n.xp6(1),n.Q6J("hidden",!a.edit_mode||a.edit_row_id!=e.id)}}let as=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.router=a,this.toastr=i,this.entity=null,this.edit_mode=!1,this.edit_row_id=null,this.entity_id=null,this.attribute_list=[],this.new_record={attribute:"",value:"",cisco_av_pair:!1,enabled:!0,id:null}}ngOnInit(){this.route.params.subscribe(e=>{e.entity&&e.id?(this.entity=e.entity,this.entity_id=e.id,this.load()):(this.entity="user",this.entity_id=e.id,this.load())})}load(){this.api.get("customRadiusAttribute/"+this.entity+"/"+this.entity_id).subscribe(e=>{200===e.status&&(this.attribute_list=e.data)})}addRecord(){this.api.post("customRadiusAttribute",{entity:this.entity,entity_id:this.entity_id,record:this.new_record}).subscribe(e=>{200===e.status?(this.toastr.success(e.message),this.load(),this.new_record={attribute:"",value:"",enabled:!0,cisco_av_pair:!1,id:null}):this.toastr.error(e.message)})}destroy(e){this.api.delete("customRadiusAttribute/"+e.toString()).subscribe(e=>{200===e.status?(this.load(),this.toastr.success(e.message)):this.toastr.error(e.message)})}edit(e){this.edit_row_id=e,this.edit_mode=!0}updateRecord(e){this.edit_row_id=null,this.edit_mode=!1,this.api.put("customRadiusAttribute/"+e.id,e).subscribe(e=>{this.load()})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(p.F0),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-custom-radius-attributes"]],decls:38,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-asterisk"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[3,"hidden"],["type","text","name","new_attribute",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","new_value",1,"form-control",3,"ngModel","ngModelChange"],[2,"text-align","center"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","cb_av_pair",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","cb_av_pair",1,"custom-control-label"],["type","checkbox","id","cb_enabled",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","cb_enabled",1,"custom-control-label"],[1,"text-left"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-save"],[1,"text-center",3,"hidden"],["class","fa fa-check",4,"ngIf"],[1,"fa","fa-edit"],[1,"fa","fa-trash"],["type","text","name","attribute",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","value",1,"form-control",3,"ngModel","ngModelChange"],[2,"text-align","center",3,"hidden"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label",3,"for"],[1,"text-left",3,"hidden"],[1,"fa","fa-check"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Custom Radius Attributes "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"table",6),n.TgZ(8,"thead"),n.TgZ(9,"tr"),n.TgZ(10,"th"),n._uU(11,"Attribute"),n.qZA(),n.TgZ(12,"th"),n._uU(13,"Value"),n.qZA(),n.TgZ(14,"th"),n._uU(15,"Is Cisco-Av-Pair"),n.qZA(),n.TgZ(16,"th"),n._uU(17,"Enabled"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"tbody"),n.YNc(21,ts,29,22,"tr",7),n.TgZ(22,"tr",8),n.TgZ(23,"td"),n.TgZ(24,"input",9),n.NdJ("ngModelChange",function(e){return t.new_record.attribute=e}),n.qZA(),n.qZA(),n.TgZ(25,"td"),n.TgZ(26,"input",10),n.NdJ("ngModelChange",function(e){return t.new_record.value=e}),n.qZA(),n.qZA(),n.TgZ(27,"td",11),n.TgZ(28,"div",12),n.TgZ(29,"input",13),n.NdJ("ngModelChange",function(e){return t.new_record.cisco_av_pair=e}),n.qZA(),n._UZ(30,"label",14),n.qZA(),n.qZA(),n.TgZ(31,"td",11),n.TgZ(32,"div",12),n.TgZ(33,"input",15),n.NdJ("ngModelChange",function(e){return t.new_record.enabled=e}),n.qZA(),n._UZ(34,"label",16),n.qZA(),n.qZA(),n.TgZ(35,"td",17),n.TgZ(36,"button",18),n.NdJ("click",function(){return t.addRecord()}),n._UZ(37,"i",19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(21),n.Q6J("ngForOf",t.attribute_list),n.xp6(1),n.Q6J("hidden",!0===t.edit_mode),n.xp6(2),n.Q6J("ngModel",t.new_record.attribute),n.xp6(2),n.Q6J("ngModel",t.new_record.value),n.xp6(3),n.Q6J("ngModel",t.new_record.cisco_av_pair),n.xp6(4),n.Q6J("ngModel",t.new_record.enabled))},directives:[J.sg,Z.Fj,Z.JJ,Z.On,Z.Wl,J.O5],styles:[""]}),e})();function is(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let ns=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("user_journal_table_date")},{dataKey:"cr",label:this.tr.translate("user_journal_table_cr")},{dataKey:"dr",label:this.tr.translate("user_journal_table_dr")},{dataKey:"amount",label:this.tr.translate("user_journal_table_amount")},{dataKey:"balance",label:this.tr.translate("user_journal_table_balance")},{dataKey:"operation",label:this.tr.translate("user_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("user_journal_table_description")}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/UserJournal/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-journal"]],decls:1,vars:1,consts:[["name","user_model_view",3,"modelViewConfig",4,"ngIf"],["name","user_model_view",3,"modelViewConfig"],["user_model_view",""]],template:function(e,t){1&e&&n.YNc(0,is,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function os(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function ss(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.key),n.xp6(1),n.Oqu(e.text)}}function rs(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.hij("",e,"\xa0")}}function ls(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.rx))}}function cs(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.tx))}}function ds(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total))}}function us(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",22),n.YNc(4,ls,3,3,"span",23),n.qZA(),n.TgZ(5,"td",22),n.YNc(6,cs,3,3,"span",23),n.qZA(),n.TgZ(7,"td",22),n.YNc(8,ds,3,3,"span",23),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.lnq("",a.filter.year,"-",a.filter.month,"-",e.day,""),n.xp6(2),n.Q6J("ngIf",e.rx>0),n.xp6(2),n.Q6J("ngIf",e.tx>0),n.xp6(2),n.Q6J("ngIf",e.total>0)}}function ps(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",16),n.TgZ(2,"table",20),n.TgZ(3,"thead"),n.TgZ(4,"tr"),n.TgZ(5,"th"),n._uU(6,"Day"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Download"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Upload"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Total"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"tbody"),n.YNc(14,us,9,6,"tr",21),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(14),n.Q6J("ngForOf",e.table_data)}}function gs(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.rx))}}function fs(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.tx))}}function hs(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"bytes"),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(n.lcZ(2,1,e.total))}}function ms(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",22),n.YNc(4,gs,3,3,"span",23),n.qZA(),n.TgZ(5,"td",22),n.YNc(6,fs,3,3,"span",23),n.qZA(),n.TgZ(7,"td",22),n.YNc(8,hs,3,3,"span",23),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.AsE("",a.filter.year,"-",e.month,""),n.xp6(2),n.Q6J("ngIf",e.rx>0),n.xp6(2),n.Q6J("ngIf",e.tx>0),n.xp6(2),n.Q6J("ngIf",e.total>0)}}function _s(e,t){if(1&e&&(n.TgZ(0,"div",2),n.TgZ(1,"div",16),n.TgZ(2,"table",20),n.TgZ(3,"thead"),n.TgZ(4,"tr"),n.TgZ(5,"th"),n._uU(6,"Month"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Download"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Upload"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Total"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"tbody"),n.YNc(14,ms,9,5,"tr",21),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(14),n.Q6J("ngForOf",e.table_data)}}let bs=(()=>{class e{constructor(e,t){this.api=e,this.route=t,this.months=[{key:1,text:"Jan"},{key:2,text:"Feb"},{key:3,text:"Mar"},{key:4,text:"Apr"},{key:5,text:"May"},{key:6,text:"Jun"},{key:7,text:"Jul"},{key:8,text:"Aug"},{key:9,text:"Spt"},{key:10,text:"Oct"},{key:11,text:"Nov"},{key:12,text:"Dec"}],this.years=[],this.filter={report_type:"daily",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),user_id:null,zone_id:-1},this.chart_labels_daily=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.chart_labels_monthly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],this.chart_labels=[],this.chart_data=[],this.chart_options={responsive:!0,elements:{line:{fill:!1}}},this.chart_ready=!1,this.table_data=[],this.zones=[],this.highcharts_options_monthly={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"31"},yAxis:{title:{text:"Activities"},currentMin:0}}}ngOnInit(){for(let e=(new Date).getFullYear();e>2017;e--)this.years.push(e.toString());this.route.params.subscribe(e=>{e.id&&(this.filter.user_id=e.id,this.load())}),this.loadResources()}loadResources(){this.api.get("index/freezone").subscribe(e=>{200===e.status&&(this.zones=e.data)})}load(){this.chart_data=[],this.table_data=[],this.chart_ready=!1,this.api.post("userNetworksTraffic",this.filter).subscribe(e=>{"daily"===this.filter.report_type?(this.drawDailyGraph(e.data),this.populateDailyTable(e.data)):(this.drawMonthlyGraph(e.data),this.populateMonthlyTable(e.data))})}drawDailyGraph(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}},title:{text:"Traffic Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Traffic"},currentMin:0}},a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1,color:"#1d1e98"},i={name:"Total",type:"spline",data:e.total,pointInterval:1,color:"#980000"};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1,color:"#2b6a3d"}),t.series.push(a),t.series.push(i),this.chart=D.chart("chart_container_fzt",t)}drawMonthlyGraph(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}},title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"12"},yAxis:{title:{text:"Traffic"},currentMin:1}};t.xAxis={type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:this.chart_labels_monthly};let a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),this.chart=D.chart("chart_container_fzt",t)}populateDailyTable(e){let t=0;for(const a of e.rx)this.table_data.push({day:t+1,rx:e.rx[t],tx:e.tx[t],total:e.total[t]}),t++}populateMonthlyTable(e){let t=0;for(const a of e.rx)this.table_data.push({month:t+1,rx:e.rx[t],tx:e.tx[t],total:e.total[t]}),t++}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-freezone-traffic"]],decls:28,vars:10,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-auto","ml-auto","table-toolbar"],[1,"form-group","pull-right"],[1,"input-group"],["name","type",1,"form-control",2,"width","200px",3,"ngModel","ngModelChange","change"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["name","type",1,"form-control",3,"ngModel","ngModelChange","change"],["value","daily"],["value","monthly"],["name","month",1,"form-control",3,"ngModel","hidden","ngModelChange","change"],["name","year",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-sync"],[1,"col"],["id","chart_container_fzt"],["class","row",4,"ngIf"],[3,"value"],[1,"table","table-bordered","table-hover","table-sm"],[4,"ngFor","ngForOf"],[1,"font-weight-light"],[4,"ngIf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n.TgZ(6,"select",6),n.NdJ("ngModelChange",function(e){return t.filter.zone_id=e})("change",function(){return t.load()}),n.TgZ(7,"option",7),n._uU(8,"\xa0All Zones\xa0"),n.qZA(),n.YNc(9,os,2,2,"option",8),n.qZA(),n.TgZ(10,"select",9),n.NdJ("ngModelChange",function(e){return t.filter.report_type=e})("change",function(){return t.load()}),n.TgZ(11,"option",10),n._uU(12,"\xa0Daily\xa0"),n.qZA(),n.TgZ(13,"option",11),n._uU(14,"\xa0Monthly\xa0"),n.qZA(),n.qZA(),n.TgZ(15,"select",12),n.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),n.YNc(16,ss,2,2,"option",8),n.qZA(),n.TgZ(17,"select",13),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),n.YNc(18,rs,2,2,"option",8),n.qZA(),n.TgZ(19,"a",14),n.NdJ("click",function(){return t.load()}),n._UZ(20,"i",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",2),n.TgZ(22,"div",16),n.TgZ(23,"div",17),n._uU(24," Chart is loading... "),n.qZA(),n.qZA(),n.qZA(),n._UZ(25,"br"),n.YNc(26,ps,15,1,"div",18),n.YNc(27,_s,15,1,"div",18),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Q6J("ngModel",t.filter.zone_id),n.xp6(3),n.Q6J("ngForOf",t.zones),n.xp6(1),n.Q6J("ngModel",t.filter.report_type),n.xp6(5),n.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.report_type),n.xp6(1),n.Q6J("ngForOf",t.months),n.xp6(1),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.years),n.xp6(8),n.Q6J("ngIf","daily"==t.filter.report_type),n.xp6(1),n.Q6J("ngIf","monthly"==t.filter.report_type))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,J.O5],pipes:[Ht],styles:[""]}),e})();function Zs(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",6),n._uU(2),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij(" ",e.tr.translate("users_tab_overview"),"")}}function vs(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",8),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_edit"),"")}}function ws(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,vs,3,1,"ng-template",3),n._UZ(2,"user-form",7),n.qZA()),2&e&&(n.xp6(2),n.Q6J("hasHeader",!1))}function ys(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",9),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_traffic"),"")}}function xs(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,ys,3,1,"ng-template",3),n._UZ(2,"app-user-traffic-data"),n.qZA())}function As(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",10),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_sessions"),"")}}function qs(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,As,3,1,"ng-template",3),n._UZ(2,"app-user-sessions"),n.qZA())}function Ts(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",11),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_invoices"),"")}}function Cs(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ts,3,1,"ng-template",3),n._UZ(2,"app-user-invoices"),n.qZA())}function ks(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",12),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_payments"),"")}}function Us(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,ks,3,1,"ng-template",3),n._UZ(2,"app-user-receipts"),n.qZA())}function Ms(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",13),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_history"),"")}}function Fs(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ms,3,1,"ng-template",3),n._UZ(2,"app-user-history"),n.qZA())}function Js(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",14),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_documents"),"")}}function Os(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Js,3,1,"ng-template",3),n._UZ(2,"app-user-documents"),n.qZA())}function Ns(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",15),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_radius"),"")}}function Is(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ns,3,1,"ng-template",3),n._UZ(2,"app-custom-radius-attributes"),n.qZA())}function Ys(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",11),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_journal"),"")}}function Qs(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ys,3,1,"ng-template",3),n._UZ(2,"app-user-journal"),n.qZA())}function Ss(e,t){if(1&e&&(n.TgZ(0,"span",5),n._UZ(1,"i",9),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",e.tr.translate("users_tab_freezone_traffic"),"")}}function Ps(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ss,3,1,"ng-template",3),n._UZ(2,"app-user-freezone-traffic"),n.qZA())}let Ds=(()=>{class e{constructor(e,t){this.auth=e,this.tr=t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(_),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:16,vars:11,consts:[[1,"row"],[1,"col-md-12","mb-4"],[3,"justified"],["tabHeading",""],[4,"ngIf"],[1,"superform-tab-header"],[1,"fa","fa-user"],[3,"hasHeader"],[1,"fa","fa-edit"],[1,"fa","fa-chart-line"],[1,"fa","fa-list"],[1,"fa","fa-book"],[1,"fa","fa-money-bill-alt"],[1,"fa","fa-calendar-alt"],[1,"fa","fa-id-card"],[1,"fa","fa-cogs"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"tabset",2),n.TgZ(3,"tab"),n.YNc(4,Zs,3,1,"ng-template",3),n._UZ(5,"app-user-overview"),n.qZA(),n.YNc(6,ws,3,1,"tab",4),n.YNc(7,xs,3,0,"tab",4),n.YNc(8,qs,3,0,"tab",4),n.YNc(9,Cs,3,0,"tab",4),n.YNc(10,Us,3,0,"tab",4),n.YNc(11,Fs,3,0,"tab",4),n.YNc(12,Os,3,0,"tab",4),n.YNc(13,Is,3,0,"tab",4),n.YNc(14,Qs,3,0,"tab",4),n.YNc(15,Ps,3,0,"tab",4),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("justified",!1),n.xp6(4),n.Q6J("ngIf",t.auth.has("prm_users_update")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_any")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_sessions_index")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_invoice")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_invoice")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_history")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_update")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_journal")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_users_freezone_traffic")))},directives:[U.AH,U.wW,U.y3,qo,J.O5,Mn,Do,Ro,Lo,Ko,zo,$o,as,ns,bs],styles:[".superform-tab-header[_ngcontent-%COMP%]{font-size:small}"]}),e})();const Hs=["activationForm"];function Rs(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",16,17),n.NdJ("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)})("submit",function(t){return n.CHM(e),n.oxw().prompConfirmActivation(t)})("cancel",function(){return n.CHM(e),n.oxw().cancel()}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}const Vs=function(){return{width:"500px"}};class Ls{constructor(e,t,a,i,n,o,s,r,l,c){this.api=e,this.formLoader=t,this.auth=a,this.route=i,this.config=n,this.toastr=o,this.tr=s,this.location=r,this.ch=l,this.router=c,this.form_config={layout:"horizontal",cancelText:this.tr.translate("global_button_dismiss"),submitText:this.tr.translate("global_button_activate"),fields:this.formLoader.getForm("user_activate_form"),helpBlock:"hidden"},this.options=[],this.user_id=null,this.activation_data={},this.confirmation_dialog_visible=!1,this.issue_invoice=0,this.uuid=null,this.transaction_id=null}ngOnInit(){this.options.method=[],this.auth.has("prm_users_activate_credit")&&this.options.method.push({value:"credit",label:this.tr.translate("user_activate_option_manager_balance")}),this.auth.has("prm_users_activate_card")&&this.options.method.push({value:"card",label:this.tr.translate("user_activate_option_user_card")}),this.auth.has("prm_users_activate_user_balance")&&this.options.method.push({value:"user_balance",label:this.tr.translate("user_activate_option_user_balance")}),this.auth.has("prm_users_reward_points")&&this.options.method.push({value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")}),this.transaction_id=this.ch.guid(),this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.getActivationData(this.user_id))})}getActivationData(e){this.api.get("user/activationData/"+e).subscribe(e=>{var t;this.activation_data=e.data,this.formView.setFormValue(this.activation_data),this.onFormChange(this.activation_data),this.auth.has("prm_users_reward_points")&&(this.formView.showField("separator2"),this.formView.showField("reward_points"),this.formView.showField("required_points"),this.formView.showField("reward_points_balance")),"0 B"===this.activation_data.profile_dl_traffic&&this.formView.hideField("profile_dl_traffic"),"0 B"===this.activation_data.profile_ul_traffic&&this.formView.hideField("profile_ul_traffic"),"0 B"===this.activation_data.profile_traffic&&this.formView.hideField("profile_traffic"),(null===this.activation_data.profile_description||(null===(t=this.activation_data.profile_description)||void 0===t?void 0:t.length)<3)&&this.formView.hideField("profile_description");let a=this.tr.translate(this.formView.getLabel("user_price"));a=a+" ("+this.config.siteConfig.site_currency+")",this.formView.setLabel("user_price",a)})}onFormChange(e){if(this.transaction_id=this.ch.guid(),this.formView.setFieldValue("required_amount",this.activation_data.required_amount),"card"===e.method?(this.formView.showField("card_number"),this.formView.hideField("activation_units"),this.formView.showField("card_number")):(this.formView.hideField("card_number"),this.formView.hideField("card_number")),"credit"===e.method){this.formView.showField("activation_units");const t=e.activation_units;if(t){const e=this.activation_data.n_required_amount*parseInt(t);this.formView.setFieldValue("required_amount",this.config.siteConfig.site_currency+" "+e)}}}activate(e){let t=this.formView.form.value.method,a="";"card"===t&&(a=this.formView.form.value.card_number),this.blockUI.start(this.tr.translate("msg_wait")),this.api.post("user/activate",{method:t,pin:a,user_id:this.user_id,units:e.units,money_collected:this.formView.form.value.money_collected,comments:this.formView.form.value.comment,user_price:this.formView.form.value.user_price,issue_invoice:this.issue_invoice,transaction_id:this.transaction_id,activation_units:this.formView.form.value.activation_units}).subscribe(e=>{if(this.blockUI.stop(),200===e.status){if(this.toastr.success(this.tr.translate("msg_user_activate_success")),"credit"===t&&this.auth.has("prm_billing")){const t=null==e?void 0:e.invoice_id;t>0&&this.api.downloadFile("userInvoice/download/"+t,"invoice_"+t)}this.location.back()}else this.toastr.warning(this.tr.translate(e.message))})}cancel(){this.location.back()}prompConfirmActivation(e){this.confirmation_data=e,"credit"===this.formView.form.value.method&&this.auth.has("prm_billing")?this.confirmation_dialog_visible=!0:this.activate(e)}confirmActivation(){this.confirmation_dialog_visible=!1,this.activate(this.confirmation_data)}}Ls.\u0275fac=function(e){return new(e||Ls)(n.Y36(h),n.Y36(yi),n.Y36(_),n.Y36(p.gz),n.Y36(l),n.Y36(g._W),n.Y36(M),n.Y36(J.Ye),n.Y36(m),n.Y36(p.F0))},Ls.\u0275cmp=n.Xpm({type:Ls,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&n.Gf(Hs,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:20,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],["name","activationForm",3,"formConfig","options","formChanged","submit","cancel",4,"ngIf"],[3,"header","visible","modal","draggable","visibleChange"],["confirmation_dialog",""],[2,"with","100%","padding","10px"],["value","1",3,"ngModel","label","binary","ngModelChange"],[2,"font-size","small","margin-top","10px"],[1,"fa","fa-info-circle"],[1,"modal-footer"],[1,"btn","btn-primary","float-right",3,"click"],[1,"btn","btn-secondary","float-right",3,"click"],["name","activationForm",3,"formConfig","options","formChanged","submit","cancel"],["activationForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Rs,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"p-dialog",7,8),n.NdJ("visibleChange",function(e){return t.confirmation_dialog_visible=e}),n.TgZ(10,"div",9),n.TgZ(11,"p-checkbox",10),n.NdJ("ngModelChange",function(e){return t.issue_invoice=e}),n.qZA(),n.TgZ(12,"div",11),n._UZ(13,"i",12),n._uU(14),n.qZA(),n.qZA(),n.TgZ(15,"div",13),n.TgZ(16,"button",14),n.NdJ("click",function(){return t.confirmActivation()}),n._uU(17),n.qZA(),n.TgZ(18,"button",15),n.NdJ("click",function(){return t.confirmation_dialog_visible=!1}),n._uU(19),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij(" ",t.tr.translate("user_activate_form_title")," "),n.xp6(4),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(1),n.Akn(n.DdM(14,Vs)),n.Q6J("header",t.tr.translate("user_activation_confirm_title"))("visible",t.confirmation_dialog_visible)("modal",!0)("draggable",!0),n.xp6(3),n.Q6J("ngModel",t.issue_invoice)("label"," "+t.tr.translate("user_activation_issue_invoice_confirm")+" ")("binary",!0),n.xp6(3),n.hij("\xa0",t.tr.translate("user_activation_issue_invoice_note")," "),n.xp6(3),n.Oqu(t.tr.translate("global_button_activate")),n.xp6(2),n.Oqu(t.tr.translate("global_button_cancel")))},directives:[J.O5,ki.V,_a.XZ,Z.JJ,Z.On,vi],styles:[".modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}"]}),(0,c.gn)([(0,u.bH)()],Ls.prototype,"blockUI",void 0);const Es=function(e){return{"custom-price":e}};function Ks(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",10),n._uU(4),n.qZA(),n.TgZ(5,"td"),n.TgZ(6,"input",13),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.price=t}),n.qZA(),n.qZA(),n.TgZ(7,"td"),n.TgZ(8,"input",14),n.NdJ("ngModelChange",function(t){return n.CHM(e).$implicit.user_price=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(2),n.hij(" ",e.profile_name," "),n.xp6(1),n.Q6J("hidden",a.manager_id===a.auth.client.id&&!a.auth.has("prm_managers_sysadmin")),n.xp6(1),n.hij(" ",e.cost," "),n.xp6(2),n.Q6J("ngClass",n.VKq(7,Es,-1!=e.price&&e.price!=e.cost))("readOnly",a.manager_id===a.auth.client.id)("ngModel",e.price),n.xp6(2),n.Q6J("ngModel",e.user_price)}}function Bs(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15),n.TgZ(1,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().save()}),n._uU(2),n.qZA(),n.TgZ(3,"button",17),n.NdJ("click",function(){return n.CHM(e),n.oxw().confirmReset()}),n._uU(4),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("global_button_submit")),n.xp6(2),n.Oqu(e.tr.translate("global_reset"))}}const zs=function(){return{width:"40vw"}};class js{constructor(e,t,a,i,n){this.api=e,this.toastr=t,this.tr=a,this.confirmationService=i,this.auth=n,this.treeNodes=[],this.priceList=[],this.manager_id=null}manager_selected(e){this.priceList=[],this.manager_id=parseInt(e.id),this.blockUI.start(),this.api.get("priceList/"+this.manager_id).subscribe(e=>{this.blockUI.stop();for(let t of e.data)this.priceList.push({profile_id:t.id,profile_name:t.name,price:t.price,cost:t.cost,user_price:t.user_price})})}save(){const e={manager_id:this.manager_id,priceList:this.priceList};this.blockUI.start(),this.api.post("priceList",e).subscribe(e=>{this.blockUI.stop(),this.toastr.success("Price Updated"),this.manager_selected({id:this.manager_id})})}confirmReset(){this.confirmationService.confirm({message:this.tr.translate("profile_pricing_confirm_reset_message"),header:this.tr.translate("global_confirmation"),icon:"pi pi-exclamation-triangle",accept:()=>{this.reset()}})}reset(){this.blockUI.start(),this.api.get("priceList/reset/"+this.manager_id).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.toastr.success("Price Reset"),this.manager_selected({id:this.manager_id}))})}}js.\u0275fac=function(e){return new(e||js)(n.Y36(h),n.Y36(g._W),n.Y36(M),n.Y36(xi.YP),n.Y36(_))},js.\u0275cmp=n.Xpm({type:js,selectors:[["ng-component"]],decls:29,vars:7,consts:[[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-user-secret"],[1,"card-body"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],[1,"col"],[1,"fa","fa-puzzle-piece"],[1,"table","table-hover"],[3,"hidden"],[4,"ngFor","ngForOf"],["class","form-actions right",4,"ngIf"],["type","number",1,"form-control",3,"ngClass","readOnly","ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-actions","right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"]],template:function(e,t){1&e&&(n._UZ(0,"p-confirmDialog"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n._UZ(5,"i",4),n._uU(6," Managers Tree "),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"app-managers-tree",6),n.NdJ("onManagerSelected",function(e){return t.manager_selected(e)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"div",2),n.TgZ(11,"div",3),n._UZ(12,"i",8),n._uU(13," Price List "),n.qZA(),n.TgZ(14,"div",5),n.TgZ(15,"table",9),n.TgZ(16,"thead"),n.TgZ(17,"th"),n._uU(18,"Profile"),n.qZA(),n.TgZ(19,"th",10),n._uU(20,"Cost"),n.qZA(),n.TgZ(21,"th"),n._uU(22,"Price"),n.qZA(),n.TgZ(23,"th"),n._uU(24,"End User Price"),n.qZA(),n.qZA(),n.TgZ(25,"tbody"),n.YNc(26,Ks,9,9,"tr",11),n.qZA(),n.qZA(),n._UZ(27,"hr"),n.YNc(28,Bs,5,2,"div",12),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Akn(n.DdM(6,zs)),n.xp6(8),n.Q6J("showSearch",!0),n.xp6(11),n.Q6J("hidden",t.manager_id===t.auth.client.id&&!t.auth.has("prm_managers_sysadmin")),n.xp6(7),n.Q6J("ngForOf",t.priceList),n.xp6(2),n.Q6J("ngIf",t.priceList&&t.priceList.length>0))},styles:[".inherited-price[_ngcontent-%COMP%]{font-weight:normal}.custom-price[_ngcontent-%COMP%]{font-weight:bold;color:#0e2231}"]}),(0,c.gn)([(0,u.bH)()],js.prototype,"blockUI",void 0);const Gs=["profileChangeForm"];function Ws(e,t){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"div",7),n._UZ(2,"i",8),n._uU(3),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("user_change_warning1")," ")}}function $s(e,t){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"div",7),n._UZ(2,"i",8),n._uU(3),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("user_change_warning2")," ")}}function Xs(e,t){if(1&e&&(n.TgZ(0,"div",4),n.TgZ(1,"div",7),n._UZ(2,"i",8),n._uU(3," User profile is already scheduled for change on "),n.TgZ(4,"b"),n._uU(5),n.qZA(),n._uU(6," to: "),n.TgZ(7,"b"),n._uU(8),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(5),n.Oqu(e.user_data.profileChange.due_date),n.xp6(3),n.Oqu(e.user_data.profileChange.profile_name)}}function er(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",9,10),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().changeProfile(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}class tr{constructor(e,t,a,i,n,o,s,r,l,c){this.api=e,this.formLoader=t,this.auth=a,this.route=i,this.swal=n,this.config=o,this.toastr=s,this.router=r,this.location=l,this.tr=c,this.form_config={layout:"horizontal",submitText:this.tr.translate("global_button_submit"),fields:this.formLoader.getForm("user_profile_change_form"),helpBlock:"hidden",showDiscardButton:!1},this.options=[],this.user_id=null,this.profiles_list=[]}loadResources(){this.api.get("list/profile/0").subscribe(e=>{this.profiles_list=[];for(let t of e.data)t.id!=this.user_data.profile_id&&this.profiles_list.push({value:t.id,label:t.name});this.options.new_profile_id=this.profiles_list})}changeProfile(e){const t=e.value;this.swal.confirm({title:"Change Profile",type:"warning",text:"Change User Profile ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.post("user/changeProfile",{user_id:this.user_id,profile_id:t.new_profile_id,change_type:t.change_type}).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.router.navigate(["user",this.user_id])):this.toastr.warning(this.tr.translate(e.message))})})}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.api.get("user/"+this.user_id).subscribe(e=>{this.user_data=e.data,this.formView.setFormValue(this.user_data),this.loadResources(),!1===this.user_data.status.expiration?(this.options.change_type=[{label:this.tr.translate("user_change_option_immediate"),value:"immediate"}],this.formView.setFieldValue("change_type","immediate")):(this.auth.has("prm_users_change_profile_active")||(this.toastr.warning(this.tr.translate("msg_user_already_active")),this.location.back()),this.options.change_type=[{label:this.tr.translate("user_change_option_immediate"),value:"immediate"},{label:this.tr.translate("user_change_option_schedule"),value:"schedule"}],this.formView.setFieldValue("change_type","schedule")),this.formView.regenerate()}))})}}tr.\u0275fac=function(e){return new(e||tr)(n.Y36(h),n.Y36(yi),n.Y36(_),n.Y36(p.gz),n.Y36(Ge),n.Y36(l),n.Y36(g._W),n.Y36(p.F0),n.Y36(J.Ye),n.Y36(M))},tr.\u0275cmp=n.Xpm({type:tr,selectors:[["app-profile-change"]],viewQuery:function(e,t){if(1&e&&n.Gf(Gs,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:10,vars:4,consts:[["class","row",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col"],["name","profileChangeForm",3,"formConfig","options","submit",4,"ngIf"],["role","alert",1,"col","alert","alert-warning"],[1,"fad","fa-exclamation-triangle"],["name","profileChangeForm",3,"formConfig","options","submit"],["profileChangeForm",""]],template:function(e,t){1&e&&(n.YNc(0,Ws,4,1,"div",0),n.YNc(1,$s,4,1,"div",0),n.YNc(2,Xs,9,2,"div",0),n.TgZ(3,"div",1),n.TgZ(4,"div",2),n._uU(5," Change User Profile "),n.qZA(),n.TgZ(6,"div",3),n.TgZ(7,"div",4),n.TgZ(8,"div",5),n.YNc(9,er,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",t.user_data&&t.user_data.status&&1==t.user_data.status.expiration&&"schedule"==t.formView.form.value.change_type),n.xp6(1),n.Q6J("ngIf",t.user_data&&t.user_data.status&&1==t.user_data.status.expiration&&"immediate"==t.formView.form.value.change_type),n.xp6(1),n.Q6J("ngIf",t.user_data&&t.user_data.profileChange),n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[""]}),(0,c.gn)([(0,u.bH)()],tr.prototype,"blockUI",void 0);const ar=["user_model_view"],ir=["rename_modal"];function nr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.NdJ("click",function(){return n.CHM(e),n.oxw().showDepositForm()}),n._UZ(1,"i",22),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_deposit")," ")}}function or(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.NdJ("click",function(){return n.CHM(e),n.oxw().showWithdrawalForm()}),n._UZ(1,"i",22),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_withdrawal")," ")}}function sr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.NdJ("click",function(){return n.CHM(e),n.oxw().showPayDebtForm()}),n._UZ(1,"i",22),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_pay_debt")," ")}}function rr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.NdJ("click",function(){return n.CHM(e),n.oxw().showRenameForm()}),n._UZ(1,"i",23),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_rename")," ")}}function lr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",21),n.NdJ("click",function(){return n.CHM(e),n.oxw().destroy()}),n._UZ(1,"i",24),n._UZ(2,"br"),n._uU(3),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.tr.translate("global_actions_delete")," ")}}function cr(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td",29),n._uU(4),n.ALo(5,"currency"),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw(2);n.xp6(2),n.Oqu(e.manager_username),n.xp6(2),n.Oqu(n.xi3(5,2,e.amount,a.config.siteConfig.site_currency))}}function dr(e,t){if(1&e&&(n.TgZ(0,"div",25),n.TgZ(1,"h5",26),n._uU(2),n.qZA(),n.TgZ(3,"table",27),n.YNc(4,cr,6,5,"tr",28),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("manager_overview_outstanding_debts")),n.xp6(2),n.Q6J("ngForOf",e.overview.debts_per_manager)}}function ur(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",30),n.TgZ(1,"h4",31),n._uU(2,"Rename Manager"),n.qZA(),n.TgZ(3,"button",32),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",33),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",34),n.TgZ(7,"form",35),n.TgZ(8,"div",36),n.TgZ(9,"label"),n._uU(10,"Manager"),n.qZA(),n._UZ(11,"input",37),n.TgZ(12,"small",38),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.TgZ(14,"div",36),n.TgZ(15,"label"),n._uU(16,"New Username"),n.qZA(),n.TgZ(17,"input",39,40),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().renameForm.new_username=t})("keydown.enter",function(){return n.CHM(e),n.oxw().rename()}),n.qZA(),n.TgZ(19,"small",38),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",41),n.TgZ(22,"button",42),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(23,"Close"),n.qZA(),n.TgZ(24,"button",43),n.NdJ("click",function(){return n.CHM(e),n.oxw().rename()}),n._uU(25,"Submit"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(11),n.s9C("value",e.renameForm.username),n.xp6(6),n.Q6J("ngModel",e.renameForm.new_username),n.xp6(7),n.Q6J("disabled",!e.renameForm.new_username||e.renameForm.new_username.length<1)}}class pr{constructor(e,t,a,i,n,o,s,r,l,c,d){this.api=e,this.route=t,this.modalService=a,this.toastr=i,this.router=n,this.swal=o,this.ch=s,this.auth=r,this.config=l,this.dialogService=c,this.tr=d,this.depositForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.withdrawalForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,balance:0},this.renameForm={user_id:null,username:"",new_username:""},this.modelViewConfig=null,this.loading=!1,this.manager_id=null,this.overview={},this.route.params.subscribe(e=>{e.id&&(this.manager_id=e.id,this.load())})}load(){this.api.get("manager/overview/"+this.manager_id).subscribe(e=>{this.overview=e.data,this.overview.status=1==e.data.status?"enabled":"disabled"})}ngOnInit(){}showDepositForm(){this.dialogService.open(wa,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:this.manager_id}})}showWithdrawalForm(){this.dialogService.open(xa,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:this.manager_id}})}showRenameForm(){this.renameForm.manager_id=this.manager_id,this.renameForm.username=this.overview.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}rename(){const e=this.renameForm.manager_id,t={username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.put("manager/"+e,t).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.toastr.success(e.message),this.load()):this.toastr.error("Unable to rename manager"),this.activeModal.hide()},e=>{this.toastr.error("Error Occurred !"),this.activeModal.hide()})}destroy(){this.swal.confirm({title:"Delete Manager",type:"warning",text:"Delete Selected Manager ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start("loading..."),this.api.delete("manager/"+this.manager_id).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.router.navigate(["managers/index"]),this.toastr.success(e.message,"")):this.toastr.warning(e.error)})})}showPayDebtForm(){this.dialogService.open(ha,{header:this.tr.translate("global_actions_pay_debt"),data:{manager_id:this.manager_id}}).onClose.subscribe(()=>{this.load()})}}function gr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}pr.\u0275fac=function(e){return new(e||pr)(n.Y36(h),n.Y36(p.gz),n.Y36(We.tT),n.Y36(g._W),n.Y36(p.F0),n.Y36(Ge),n.Y36(m),n.Y36(_),n.Y36(l),n.Y36(fa.xA),n.Y36(M))},pr.\u0275cmp=n.Xpm({type:pr,selectors:[["app-manager-overview"]],viewQuery:function(e,t){if(1&e&&(n.Gf(ar,5),n.Gf(ir,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.renameModal=e.first)}},features:[n._Bn([fa.xA])],decls:100,vars:44,consts:[[1,"row"],[1,"col-md","col-sm-12","order-2","order-md-1"],[1,"col","col-md-4","text-center"],[1,"user-photo-frame",2,"background-image","url(./assets/img/avatars/user-placeholder.png)"],[1,"image-cover"],[1,"btn","btn-primary","btn-sm",2,"position","absolute","top","50%","left","50%","transform","translate(-50%,-50%)"],[1,"col","col-md-8"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"row",2,"margin-top","10px","margin-left","5px"],["class","col overview-button",3,"click",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"col-md","col-sm-12","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item"],[1,"label"],[1,"value"],["rename_modal",""],[1,"col","overview-button",3,"click"],[1,"fa","fa-2x","fa-money-bill-alt"],[1,"fa","fa-2x","fa-edit"],[1,"fa","fa-2x","fa-trash"],[1,"mt-4"],[1,"font-weight-light"],[1,"table",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","","id","manager_username2",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",0),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"button",5),n._uU(7,"Change"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",6),n.TgZ(9,"ul",7),n.TgZ(10,"li"),n._UZ(11,"i",8),n._uU(12),n.qZA(),n.TgZ(13,"li"),n._UZ(14,"i",9),n._uU(15),n.qZA(),n.TgZ(16,"li"),n._UZ(17,"i",10),n._uU(18),n.qZA(),n.TgZ(19,"li"),n._UZ(20,"i",11),n._uU(21),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(22,"div",12),n.YNc(23,nr,4,1,"div",13),n.YNc(24,or,4,1,"div",13),n.YNc(25,sr,4,1,"div",13),n.YNc(26,rr,4,1,"div",13),n.YNc(27,lr,4,1,"div",13),n.qZA(),n.YNc(28,dr,5,2,"div",14),n.qZA(),n.TgZ(29,"div",15),n.TgZ(30,"div",16),n.TgZ(31,"li",17),n.TgZ(32,"span",18),n._uU(33),n.qZA(),n.TgZ(34,"span",19),n._uU(35),n.qZA(),n.qZA(),n.TgZ(36,"li",17),n.TgZ(37,"span",18),n._uU(38),n.qZA(),n.TgZ(39,"span",19),n._uU(40),n.ALo(41,"currency"),n.qZA(),n.qZA(),n.TgZ(42,"li",17),n.TgZ(43,"span",18),n._uU(44),n.qZA(),n.TgZ(45,"span",19),n._uU(46),n.ALo(47,"currency"),n.qZA(),n.qZA(),n.TgZ(48,"li",17),n.TgZ(49,"span",18),n._uU(50),n.qZA(),n.TgZ(51,"span",19),n._uU(52),n.qZA(),n.qZA(),n.TgZ(53,"li",17),n.TgZ(54,"span",18),n._uU(55),n.qZA(),n.TgZ(56,"span",19),n._uU(57),n.qZA(),n.qZA(),n.TgZ(58,"li",17),n.TgZ(59,"span",18),n._uU(60),n.qZA(),n.TgZ(61,"span",19),n._uU(62),n.qZA(),n.qZA(),n.TgZ(63,"li",17),n.TgZ(64,"span",18),n._uU(65),n.qZA(),n.TgZ(66,"span",19),n._uU(67),n.qZA(),n.qZA(),n.TgZ(68,"li",17),n.TgZ(69,"span",18),n._uU(70),n.qZA(),n.TgZ(71,"span",19),n._uU(72),n.qZA(),n.qZA(),n.TgZ(73,"li",17),n.TgZ(74,"span",18),n._uU(75),n.qZA(),n.TgZ(76,"span",19),n._uU(77),n.qZA(),n.qZA(),n.TgZ(78,"li",17),n.TgZ(79,"span",18),n._uU(80),n.qZA(),n.TgZ(81,"span",19),n._uU(82),n.qZA(),n.qZA(),n.TgZ(83,"li",17),n.TgZ(84,"span",18),n._uU(85),n.qZA(),n.TgZ(86,"span",19),n._uU(87),n.qZA(),n.qZA(),n.TgZ(88,"li",17),n.TgZ(89,"span",18),n._uU(90),n.qZA(),n.TgZ(91,"span",19),n._uU(92),n.qZA(),n.qZA(),n.TgZ(93,"li",17),n.TgZ(94,"span",18),n._uU(95),n.qZA(),n.TgZ(96,"span",19),n._uU(97),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(98,ur,26,3,"ng-template",null,20,n.W1O)),2&e&&(n.xp6(12),n.AsE(" ",t.overview.firstname," ",t.overview.lastname,""),n.xp6(3),n.hij(" ",t.overview.phone,""),n.xp6(3),n.AsE(" ",t.overview.address,", ",t.overview.city,""),n.xp6(3),n.hij(" ",t.overview.email,""),n.xp6(2),n.Q6J("ngIf",t.auth.has("prm_managers_deposit")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_withdrawal")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_deposit")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_rename")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_delete")),n.xp6(1),n.Q6J("ngIf",(null==t.overview||null==t.overview.debts_per_manager?null:t.overview.debts_per_manager.length)>0),n.xp6(5),n.Oqu(t.tr.translate("global_username")),n.xp6(2),n.Oqu(t.overview.username),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_balance")),n.xp6(2),n.Oqu(n.xi3(41,38,t.overview.balance,t.config.siteConfig.site_currency)),n.xp6(4),n.Oqu(t.tr.translate("manager_overview_outstanding_debts")),n.xp6(2),n.Oqu(n.xi3(47,41,t.overview.debts,t.config.siteConfig.site_currency)),n.xp6(4),n.Oqu(t.tr.translate("managers_table_reward_points")),n.xp6(2),n.Oqu(t.overview.reward_points),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_owner")),n.xp6(2),n.Oqu(t.overview.parent_username),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_acl_group")),n.xp6(2),n.Oqu(t.overview.acl_group_name),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_status")),n.xp6(2),n.Oqu(t.overview.status),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_total_users")),n.xp6(2),n.Oqu(t.overview.users),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_active_users")),n.xp6(2),n.Oqu(t.overview.active_users),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_expired_users")),n.xp6(2),n.Oqu(t.overview.expired_users),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_submanagers")),n.xp6(2),n.Oqu(t.overview.submanagers),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_created_on")),n.xp6(2),n.Oqu(t.overview.created_at),n.xp6(3),n.Oqu(t.tr.translate("manager_overview_created_by")),n.xp6(2),n.Oqu(t.overview.created_by))},directives:[J.O5,J.sg,Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On],pipes:[J.H9],styles:[".list-group-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:normal}.list-group-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;float:right;direction:ltr}.user-photo-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #eee;background-size:contain;background-repeat:no-repeat;background-position:center}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.overview-button[_ngcontent-%COMP%]{width:150px;height:100px;font-size:14px;color:#fff;text-align:center;background:#6e84a7;cursor:pointer;border:1px solid #b4bcbf;padding-top:25px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:150px;max-width:150px}.overview-button[_ngcontent-%COMP%]:hover{background:#1f64a7}.overview-button[_ngcontent-%COMP%]:active{background:#6e84a7}.image-cover[_ngcontent-%COMP%]{display:none;position:absolute;x:0;y:0;padding:0;maring:0px;width:100%;height:100%;background:rgba(255,255,255,.5);text-align:center}.user-photo-frame[_ngcontent-%COMP%]:hover   .image-cover[_ngcontent-%COMP%]{display:block}"]}),(0,c.gn)([(0,u.bH)()],pr.prototype,"blockUI",void 0);let fr=(()=>{class e{constructor(e,t){this.route=e,this.tr=t,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("manager_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("manager_invoice_table_date")},{dataKey:"type",label:this.tr.translate("manager_invoice_table_type")},{dataKey:"amount",label:this.tr.translate("manager_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("manager_invoice_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_invoice_table_created_by")},{dataKey:"payment_method",label:this.tr.translate("manager_invoice_table_method")},{dataKey:"paid",label:this.tr.translate("manager_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerInvoices/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-invoices"]],decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&n.YNc(0,gr,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function hr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let mr=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("manager_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("manager_receipt_table_date")},{dataKey:"type",label:this.tr.translate("manager_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("manager_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("manager_receipt_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_receipt_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerReceipts/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-receipts"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","onAction"],["receipts_model_view",""]],template:function(e,t){1&e&&n.YNc(0,hr,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function _r(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let br=(()=>{class e{constructor(e,t,a){this.api=e,this.route=t,this.tr=a,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("manager_journal_table_date")},{dataKey:"cr",label:this.tr.translate("manager_journal_table_cr")},{dataKey:"dr",label:this.tr.translate("manager_journal_table_dr")},{dataKey:"amount",label:this.tr.translate("manager_journal_table_amount")},{dataKey:"balance",label:this.tr.translate("manager_journal_table_balance")},{dataKey:"operation",label:this.tr.translate("manager_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("manager_journal_table_description")}],this.modelViewConfig=null,this.route.params.subscribe(e=>{e.id&&(this.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerJournal/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!1})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-journal"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig"],["journal_model_view",""]],template:function(e,t){1&e&&n.YNc(0,_r,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function Zr(e,t){if(1&e&&(n._UZ(0,"i",4),n._uU(1)),2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.tr.translate("managers_tab_overview"),"")}}function vr(e,t){if(1&e&&(n._UZ(0,"i",6),n._uU(1)),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.tr.translate("managers_tab_edit"),"")}}function wr(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,vr,2,1,"ng-template",2),n._UZ(2,"app-manager-form",5),n.qZA()),2&e&&(n.xp6(2),n.Q6J("hasHeader",!1))}function yr(e,t){if(1&e&&(n._UZ(0,"i",7),n._uU(1)),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.tr.translate("managers_tab_invoices"),"")}}function xr(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,yr,2,1,"ng-template",2),n._UZ(2,"app-manager-invoices"),n.qZA())}function Ar(e,t){if(1&e&&(n._UZ(0,"i",7),n._uU(1)),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.tr.translate("managers_tab_payments"),"")}}function qr(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Ar,2,1,"ng-template",2),n._UZ(2,"app-manager-receipts"),n.qZA())}function Tr(e,t){if(1&e&&(n._UZ(0,"i",7),n._uU(1)),2&e){const e=n.oxw(2);n.xp6(1),n.hij(" ",e.tr.translate("managers_tab_journal"),"")}}function Cr(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Tr,2,1,"ng-template",2),n._UZ(2,"app-manager-journal"),n.qZA())}let kr=(()=>{class e{constructor(e,t){this.tr=e,this.auth=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-super-form"]],decls:10,vars:4,consts:[[1,"row"],[1,"col-md-12","mb-4"],["tabHeading",""],[4,"ngIf"],[1,"fa","fa-user"],[3,"hasHeader"],[1,"fa","fa-edit"],[1,"fa","fa-book"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"tabset"),n.TgZ(3,"tab"),n.YNc(4,Zr,2,1,"ng-template",2),n._UZ(5,"app-manager-overview"),n.qZA(),n.YNc(6,wr,3,1,"tab",3),n.YNc(7,xr,3,0,"tab",3),n.YNc(8,qr,3,0,"tab",3),n.YNc(9,Cr,3,0,"tab",3),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Q6J("ngIf",t.auth.has("prm_managers_update")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_invoice")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_receipt")),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_journal")))},directives:[U.AH,U.wW,U.y3,pr,J.O5,Ii,fr,mr,br],styles:[""]}),e})();var Ur=a(70705);const Mr=["cards_model_view"];function Fr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",18,19),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}function Jr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",20),n.TgZ(1,"div",13),n.TgZ(2,"span",14),n.TgZ(3,"p-inputNumber",21),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().change_owner_range_form.from_id=t}),n.qZA(),n.TgZ(4,"label",22),n._uU(5,"From Id"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngModel",e.change_owner_range_form.from_id)("min",e.range_info.range_start)("max",e.range_info.range_end-1)}}function Or(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",12),n.TgZ(1,"div",13),n.TgZ(2,"span",14),n.TgZ(3,"p-inputNumber",23),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().change_owner_range_form.to_id=t})("ngModelChange",function(){return n.CHM(e),n.oxw().rangeChanged()}),n.qZA(),n.TgZ(4,"label",24),n._uU(5,"To Id"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngModel",e.change_owner_range_form.to_id)("min",e.change_owner_range_form.from_id+1)("max",e.range_info.range_end)("disabled",e.change_owner_range_form.from_id<1)}}function Nr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",25),n.NdJ("click",function(){return n.CHM(e),n.oxw().change_owner_mode_advanced=!0}),n._uU(1,"[advanced]"),n.qZA()}}function Ir(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",25),n.NdJ("click",function(){return n.CHM(e),n.oxw().change_owner_mode_advanced=!1}),n._uU(1,"[simple]"),n.qZA()}}const Yr=function(){return{width:"40vw"}};class Qr{constructor(e,t,a,i,n){this.router=e,this.toastr=t,this.api=a,this.swal=i,this.tr=n,this.change_owner_dialog_visible=!1,this.change_owner_range_dialog_visible=!1,this.selected_owner=null,this.change_owner_range_form={selected_owner:null,from_id:null,to_id:null},this.range_info={series:null,start:null,end:null,count:null},this.change_owner_mode_advanced=!1,this.columns=[{dataKey:"series_date",label:"Date Added",hidden:!0},{dataKey:"series",label:"Series",class:"href",classFn:function(e){return 1==e.suspended?"href series-suspended":"href"}},{dataKey:"type",label:"Type",dataResolver:function(e){return"1"==e?"Prepaid User":"Refill Card"}},{dataKey:"value",label:"Value"},{dataKey:"qty",label:"Quantity"},{dataKey:"used",label:"Used"},{dataKey:"username",label:"Owner",parentKey:"owner_details",sortBy:"owner"},{dataKey:"name",label:"Profile",parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"expiration",label:"Expiration"}],this.actions=[{name:"generate",label:"Generate",icon:"fa fa-plus",acl:"prm_cards_generate_refill"},{name:"verify",label:"Verify",icon:"fa fa-search"},{name:"queue",label:"Jobs Queue",icon:"fa fa-boxes",acl:"prm_cards_generate_refill"},{name:"",label:"",type:"separator"},{name:"list",label:"List",icon:"fa fa-list",requiresRow:!0,inline:!0,acl:"prm_cards_download"},{name:"download_csv",label:"Download (CSV)",icon:"fa fa-download",requiresRow:!0,inline:!0,acl:"prm_cards_download"},{name:"download_pdf",label:"Download (PDF)",icon:"fa fa-file",inline:!0,requiresRow:!0,acl:"prm_cards_download"},{name:"",label:"",type:"separator"},{name:"suspend",label:"Suspend",icon:"fa fa-pause",inline:!0,requiresRow:!0,acl:"prm_cards_suspend_release"},{name:"release",label:"Release",icon:"fa fa-play",inline:!0,requiresRow:!0,acl:"prm_cards_suspend_release"},{name:"",label:"",type:"separator"},{name:"change_owner",label:"Change Owner",icon:"fa fa-user",inline:!0,requiresRow:!0,acl:"prm_cards_change_owner"},{name:"change_owner_range",label:"Change Owner (Range)",icon:"fa fa-user",inline:!0,requiresRow:!0,acl:"prm_cards_change_owner_range"},{name:"delete",label:"Delete",icon:"fa fa-trash",inline:!0,requiresRow:!0,acl:"prm_cards_delete"},{name:"",label:"",type:"separator"},{name:"designer",label:"Card Designer",icon:"fa fa-pencil",inline:!1,requiresRow:!1,acl:"prm_cards_designer"}],this.filterFields=[{key:"parent_id",label:this.tr.translate("global_owner"),type:"select2",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")}]},{key:"type",label:this.tr.translate("global_type"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:0,label:"Refill Card"},{value:1,label:"Prepaid User"}]},{key:"profile_id",label:this.tr.translate("global_profile"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")}]}],this.filterOptions={parent_id:[],profile_id:[]},this.modelViewConfig=null,this.managers_list=[]}ngOnInit(){this.modelViewConfig={title:"Cards Systems",icon:"fa fa-credit-card",columns:this.columns,dataUrl:"index/series",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"series",allowSelect:!0,allowMultipleSelect:!0,modelName:"card",hasAdvancedFilter:!0,hasInlineActions:!0,sortBy:"series_date",direction:"desc",showRowsCount:!0},this.loadResources()}onAction(e){let t=null;switch(e.row&&(t=e.row.series),e.action){case"generate":this.router.navigate(["cards/generate"]);break;case"queue":this.router.navigate(["cards/job/index"]);break;case"list":this.router.navigate(["cards/list/",t]);break;case"suspend":this.suspend(t);break;case"release":this.release(t);break;case"download_csv":this.download_csv(t);break;case"download_pdf":this.router.navigate(["cards/print",t]);break;case"delete":this.destroy();break;case"designer":this.router.navigate(["cards/designer"]);break;case"verify":this.router.navigate(["cards/verify"]);break;case"change_owner":this.showChangeOwner();break;case"change_owner_range":this.showChangeOnwerRnage(t)}}onCellClicked(e){"series"==e.column&&this.router.navigate(["cards/list/",e.row.series])}suspend(e){this.blockUI.start("loading..."),this.api.get("series/suspend/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(e.message),this.modelView.reload())})}release(e){this.blockUI.start("loading..."),this.api.get("series/release/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(e.message),this.modelView.reload())})}download_csv(e){this.blockUI.start("loading..."),this.api.get("series/prepareDownload/"+e).subscribe(t=>{this.blockUI.stop(),200===t.status&&this.api.goto("series/download/"+t.data+"/"+e+".xlsx")})}destroy(){this.swal.confirm({title:"Delete Card Series",type:"warning",text:"Delete Selected Series ?",confirmButtonText:"Yes"}).subscribe(()=>{let e=null;if(this.modelView.currentRow&&(e=this.modelView.currentRow.series),this.blockUI.start("loading..."),this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(const a of t)e.push(a.series);this.api.post("series/bulkDelete",e).subscribe(e=>{this.blockUI.stop(),this.toastr.success("Card Series deleted"),this.modelView.reload()})}else this.api.get("series/delete/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.modelView.reload(),this.toastr.success("Card Series Deleted",""))})})}showChangeOwner(){this.selected_owner=null,this.blockUI.start(),this.api.get("index/manager").subscribe(e=>{this.blockUI.stop();let t=[];for(const a of e.data)t.push({value:a.id,label:a.username});this.managers_list=t,this.change_owner_dialog_visible=!0})}changeOwner(){this.api.post("series/changeOwner",{series:this.modelView.currentRow.series,owner:this.selected_owner}).subscribe(e=>{this.change_owner_dialog_visible=!1,200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.error(this.tr.translate("msg_unknown_error"))})}showChangeOnwerRnage(e){this.change_owner_range_form.selected_owner=null,this.change_owner_range_form.series=e,this.change_owner_range_form.count=null,this.blockUI.start(),this.api.get("index/manager").subscribe(t=>{this.blockUI.stop();let a=[];for(const e of t.data)a.push({value:e.id,label:e.username});this.managers_list=a,this.api.get("series/rangeInfo/"+e).subscribe(e=>{200===e.status&&(this.range_info=e.data,this.change_owner_range_dialog_visible=!0)})})}changeOwnerRange(){this.api.post("series/changeOwnerRange",this.change_owner_range_form).subscribe(e=>{this.change_owner_range_dialog_visible=!1,200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()):this.toastr.error(this.tr.translate("msg_unknown_error"))})}loadResources(){this.api.get("index/manager").subscribe(e=>{const t=[];t.push({value:-1,label:this.tr.translate("global_all")});for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.parent_id=t}),this.api.get("list/profile/0").subscribe(e=>{let t=[];t.push({value:-1,label:this.tr.translate("global_all")}),200===e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filterOptions.profile_id=t)})}rangeChanged(){this.change_owner_range_form.count=this.change_owner_range_form.to_id-this.change_owner_range_form.from_id,this.change_owner_range_form.count<0&&(this.change_owner_range_form.count=0)}rangeCountChanged(){this.change_owner_range_form.from_id=this.range_info.range_start,this.change_owner_range_form.to_id=this.range_info.range_start+this.change_owner_range_form.count-1,console.log(this.change_owner_range_form)}}Qr.\u0275fac=function(e){return new(e||Qr)(n.Y36(p.F0),n.Y36(g._W),n.Y36(h),n.Y36(Ge),n.Y36(M))},Qr.\u0275cmp=n.Xpm({type:Qr,selectors:[["app-cards-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(Mr,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:31,vars:36,consts:[["name","cards_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["header","Change Cards Owner",3,"visible","modal","visibleChange"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["appendTo","body",3,"options","autoDisplayFirst","placeholder","filter","ngModel","ngModelChange"],[1,"btn","btn-primary","float-right",3,"disabled","click"],[1,"btn","btn-secondary","float-right",3,"click"],["header","Change Cards Owner (Range)",3,"visible","modal","visibleChange"],[1,"mt-1","mb-1"],[1,"ui-g","ui-fluid","w-100","mt-2"],["class","ui-g ui-fluid w-100 mt-4",4,"ngIf"],["class","ui-g ui-fluid w-100 mt-4 w-100",4,"ngIf"],[1,"ui-g","ui-fluid","w-100","mt-4","w-100"],[1,"field"],[1,"p-float-label"],["id","count",3,"ngModel","max","disabled","ngModelChange"],["for","count"],["class","advanced-button btn float-left",3,"click",4,"ngIf"],["name","cards_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["cards_model_view",""],[1,"ui-g","ui-fluid","w-100","mt-4"],["id","range_start",3,"ngModel","min","max","ngModelChange"],["for","range_start"],["id","range_end",3,"ngModel","min","max","disabled","ngModelChange"],["for","range_end"],[1,"advanced-button","btn","float-left",3,"click"]],template:function(e,t){1&e&&(n.YNc(0,Fr,2,3,"model-table-view",0),n.TgZ(1,"p-dialog",1),n.NdJ("visibleChange",function(e){return t.change_owner_dialog_visible=e}),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"p-dropdown",4),n.NdJ("ngModelChange",function(e){return t.selected_owner=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(5,"p-footer"),n.TgZ(6,"button",5),n.NdJ("click",function(){return t.changeOwner()}),n._uU(7),n.qZA(),n.TgZ(8,"button",6),n.NdJ("click",function(){return t.change_owner_dialog_visible=!1}),n._uU(9),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"p-dialog",7),n.NdJ("visibleChange",function(e){return t.change_owner_range_dialog_visible=e}),n.TgZ(11,"h5",8),n._uU(12),n.qZA(),n.TgZ(13,"div",9),n.TgZ(14,"div",3),n.TgZ(15,"p-dropdown",4),n.NdJ("ngModelChange",function(e){return t.change_owner_range_form.selected_owner=e}),n.qZA(),n.qZA(),n.qZA(),n.YNc(16,Jr,6,3,"div",10),n.YNc(17,Or,6,4,"div",11),n.TgZ(18,"div",12),n.TgZ(19,"div",13),n.TgZ(20,"span",14),n.TgZ(21,"p-inputNumber",15),n.NdJ("ngModelChange",function(e){return t.change_owner_range_form.count=e})("ngModelChange",function(){return t.rangeCountChanged()}),n.qZA(),n.TgZ(22,"label",16),n._uU(23),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(24,"p-footer"),n.YNc(25,Nr,2,0,"a",17),n.YNc(26,Ir,2,0,"a",17),n.TgZ(27,"button",5),n.NdJ("click",function(){return t.changeOwnerRange()}),n._uU(28),n.qZA(),n.TgZ(29,"button",6),n.NdJ("click",function(){return t.change_owner_range_dialog_visible=!1}),n._uU(30),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Akn(n.DdM(34,Yr)),n.Q6J("visible",t.change_owner_dialog_visible)("modal",!1),n.xp6(3),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("placeholder","Select Manager")("filter",!0)("ngModel",t.selected_owner),n.xp6(2),n.Q6J("disabled",!t.selected_owner||t.selected_owner<1),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")),n.xp6(2),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(1),n.Akn(n.DdM(35,Yr)),n.Q6J("visible",t.change_owner_range_dialog_visible)("modal",!1),n.xp6(2),n.hij("Series: [",t.change_owner_range_form.series,"]"),n.xp6(3),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("placeholder","Select Manager")("filter",!0)("ngModel",t.change_owner_range_form.selected_owner),n.xp6(1),n.Q6J("ngIf",1==t.change_owner_mode_advanced),n.xp6(1),n.Q6J("ngIf",1==t.change_owner_mode_advanced),n.xp6(4),n.Q6J("ngModel",t.change_owner_range_form.count)("max",t.range_info.range_length)("disabled",!0===t.change_owner_mode_advanced),n.xp6(2),n.hij("Count (max : ",t.range_info.range_length,")"),n.xp6(2),n.Q6J("ngIf",!t.change_owner_mode_advanced),n.xp6(1),n.Q6J("ngIf",t.change_owner_mode_advanced),n.xp6(1),n.Q6J("disabled",!t.change_owner_range_form.selected_owner||t.change_owner_range_form.selected_owner<1||t.change_owner_range_form.count<1||t.change_owner_range_form.count>t.range_info.range_length),n.xp6(1),n.Oqu(t.tr.translate("global_button_submit")),n.xp6(2),n.Oqu(t.tr.translate("global_button_dismiss")))},directives:[J.O5,ki.V,ma.Lt,Z.JJ,Z.On,xi.$_,Ur.Rn,wt],styles:[".series-suspended{background:#ffa2a3!important}p-inputNumber{width:100%}.p-inputnumber{width:100%}.advanced-button{color:#00f!important;text-decoration:underline!important;cursor:pointer}\n"],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Qr.prototype,"blockUI",void 0);const Sr=["generatorForm"];function Pr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)})("submit",function(t){return n.CHM(e),n.oxw().generate(t)})("cancel",function(){return n.CHM(e),n.oxw().cancel()}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}class Dr{constructor(e,t,a,i,n,o,s){this.formLoader=e,this.api=t,this.toastr=a,this.router=i,this.auth=n,this.config=o,this.tr=s,this.formType=0,this.form_config_refill={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config_user={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config_service={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config=this.form_config_refill,this.options=[];let r=this.formLoader.getForm("cards_generator_refill_form"),l=this.formLoader.getForm("cards_generator_user_form"),c=this.formLoader.getForm("cards_generator_service_form");r[2].placeholder=this.config.siteConfig.site_currency,r[8].value=this.auth.client.id,l[10].value=this.auth.client.id,this.form_config_refill.fields=r,this.form_config_user.fields=l,this.form_config_service.fields=c,this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.owner=this.managers_list}),this.api.get("list/profile/4").subscribe(e=>{this.profiles_list=[];for(let t of e.data)this.profiles_list.push({value:t.id,label:t.name});this.options.profile_id=this.profiles_list,this.options.refill_profile_id=[{value:null,label:"Any"}].concat(this.profiles_list)})}ngOnInit(){}onFormChange(e){this.formView.setFieldValue("type",this.formType),1==e.type&&(this.form_config=this.form_config_user),0==e.type&&(this.form_config=this.form_config_refill),2==e.type&&(this.form_config=this.form_config_service),0==e.type&&e.auto_activate&&1==e.auto_activate&&this.formView.showField("profile_id"),0==e.type&&!e.auto_activate&&this.formView.hideField("profile_id"),1==e.type&&1==e.password_username&&this.formView.hideField("password_size"),1==e.type&&0==e.password_username&&this.formView.showField("password_size"),1==e.type&&1==e.use_fixed_password&&this.formView.showField("fixed_password"),1==e.type&&0==e.use_fixed_password&&this.formView.hideField("fixed_password"),1==e.type&&this.formView.showField("profile_id"),this.formType=e.type}generate(e){this.blockUI.start("Loading..."),this.api.post("card/generate",e.value).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.router.navigate(["cards/job/index"])):this.toastr.warning(this.tr.translate(e.message))})}}Dr.\u0275fac=function(e){return new(e||Dr)(n.Y36(yi),n.Y36(h),n.Y36(g._W),n.Y36(p.F0),n.Y36(_),n.Y36(l),n.Y36(M))},Dr.\u0275cmp=n.Xpm({type:Dr,selectors:[["app-cards-generator"]],viewQuery:function(e,t){if(1&e&&n.Gf(Sr,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"row"],[1,"col"],["name","generatorForm",3,"formConfig","options","formChanged","submit","cancel",4,"ngIf"],["name","generatorForm",3,"formConfig","options","formChanged","submit","cancel"],["generatorForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Cards Generator "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Pr,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[""]}),(0,c.gn)([(0,u.bH)()],Dr.prototype,"blockUI",void 0);const Hr=["cards_list_model_view"];function Rr(e,t){if(1&e&&n._UZ(0,"model-table-view",7,8),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let Vr=(()=>{class e{constructor(e,t,a,i){this.route=e,this.routers=t,this.api=a,this.config=i,this.columns=[{dataKey:"id",label:"ID"},{dataKey:"serialnumber",label:"Serial Number"},{dataKey:"pin",label:"PIN"},{dataKey:"username",label:"Username"},{dataKey:"password",label:"Password"},{dataKey:"used_at",label:"Used At"},{dataKey:"username",label:"Used By (User)",parentKey:"user_details"},{dataKey:"username",label:"Used By (Manager)",parentKey:"manager_details"}],this.modelViewConfig=null,this.seriesData={expiration:"",series:"",created_by:"",created_at:"",value:"",owner:""}}initTable(e){this.modelViewConfig={title:"Cards List",icon:"fa fa-credit-card",columns:this.columns,dataUrl:"index/card/"+e,page:1,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!1,allowMultipleSelect:!1,modelName:"card",hasAdvancedFilter:!1,hasInlineActions:!1,sortBy:"id",direction:"asc"}}ngOnInit(){this.route.params.subscribe(e=>{e.series&&(this.loadSeriesData(e.series),this.initTable(e.series))})}loadSeriesData(e){this.api.get("cards/series/"+e).subscribe(e=>{this.seriesData=e.data})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.gz),n.Y36(p.F0),n.Y36(h),n.Y36(l))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cards-list"]],viewQuery:function(e,t){if(1&e&&n.Gf(Hr,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:34,vars:8,consts:[[1,"card"],[1,"card-body","py-0","px-4","b-t-l"],[1,"row"],[1,"col","b-r-1","py-3"],[1,"text-muted"],[1,"font-weight-bold"],["name","card_list_model_view",3,"modelViewConfig",4,"ngIf"],["name","card_list_model_view",3,"modelViewConfig"],["card_list_model_view",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n._uU(5,"Series"),n.qZA(),n.TgZ(6,"div",5),n._uU(7),n.qZA(),n.qZA(),n.TgZ(8,"div",3),n.TgZ(9,"div",4),n._uU(10,"Expiration"),n.qZA(),n.TgZ(11,"div",5),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"div",3),n.TgZ(14,"div",4),n._uU(15,"Value"),n.qZA(),n.TgZ(16,"div",5),n._uU(17),n.qZA(),n.qZA(),n.TgZ(18,"div",3),n.TgZ(19,"div",4),n._uU(20,"Owner"),n.qZA(),n.TgZ(21,"div",5),n._uU(22),n.qZA(),n.qZA(),n.TgZ(23,"div",3),n.TgZ(24,"div",4),n._uU(25,"Created By"),n.qZA(),n.TgZ(26,"div",5),n._uU(27),n.qZA(),n.qZA(),n.TgZ(28,"div",3),n.TgZ(29,"div",4),n._uU(30,"Created At"),n.qZA(),n.TgZ(31,"div",5),n._uU(32),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(33,Rr,2,1,"model-table-view",6)),2&e&&(n.xp6(7),n.Oqu(t.seriesData.series),n.xp6(5),n.Oqu(t.seriesData.expiration),n.xp6(5),n.AsE("",t.config.siteConfig.site_currency," ",t.seriesData.value,""),n.xp6(5),n.Oqu(t.seriesData.owner),n.xp6(5),n.Oqu(t.seriesData.created_by),n.xp6(5),n.Oqu(t.seriesData.created_at),n.xp6(1),n.Q6J("ngIf",t.modelViewConfig))},directives:[J.O5,wt],styles:[""]}),e})();var Lr=a(70529);const Er=function(e,t,a){return{"font-size":e,"font-family":t,color:a}};let Kr=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-card-designer-item"]],inputs:{uuid:"uuid",itemData:"itemData",fontWeight:"fontWeight"},decls:2,vars:6,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._uU(1),n.qZA()),2&e&&(n.Q6J("ngStyle",n.kEZ(2,Er,t.itemData.fontSize+"px",t.itemData.fontFamily,t.itemData.fontColor)),n.xp6(1),n.hij(" ",t.itemData.sampleValue,"\n"))},directives:[J.PC],styles:[""]}),e})();function Br(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",28),n.NdJ("onDragStart",function(t){const a=n.CHM(e).$implicit;return n.oxw().dragStarted(t,a)}),n._UZ(1,"i",29),n._uU(2),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.hij(" ",e.label," ")}}const zr=function(e){return{"sas-card-dropped-item-selected":e}};function jr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"app-card-designer-item",30),n.NdJ("click",function(t){const a=n.CHM(e).$implicit;return n.oxw().selectObject(a,t)})("onDragStart",function(t){const a=n.CHM(e).$implicit;return n.oxw().dragStarted(t,a)})("onDragEnd",function(t){const a=n.CHM(e).$implicit;return n.oxw().dragEnded(t,a)}),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.Udp("left",e.X,"px")("top",e.Y,"px"),n.s9C("id",e.uuid),n.Q6J("itemData",e)("ngClass",n.VKq(7,zr,a.selectedObject.uuid==e.uuid))}}function Gr(e,t){if(1&e&&(n.TgZ(0,"option",31),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Wr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",32),n.NdJ("click",function(){return n.CHM(e),n.oxw().save()}),n._uU(1,"Save"),n.qZA()}}function $r(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",33),n.NdJ("click",function(){return n.CHM(e),n.oxw().destroy()}),n._uU(1,"Delete"),n.qZA()}}function Xr(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div"),n.TgZ(1,"div",14),n.TgZ(2,"h4"),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"div",14),n.TgZ(5,"label"),n._uU(6,"Sample Text"),n.qZA(),n.TgZ(7,"input",34,35),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(8),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"sampleValue",t.value)}),n.qZA(),n.qZA(),n.TgZ(9,"div",14),n.TgZ(10,"label"),n._uU(11,"Font Size"),n.qZA(),n.TgZ(12,"input",36,37),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(13),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"fontSize",t.value)}),n.qZA(),n.qZA(),n.TgZ(14,"div",14),n.TgZ(15,"label"),n._uU(16,"Font Family"),n.qZA(),n.TgZ(17,"select",38,39),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(18),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"fontFamily",t.value)}),n.TgZ(19,"option",40),n._uU(20,"Arial"),n.qZA(),n.TgZ(21,"option",41),n._uU(22,"Sans Serif"),n.qZA(),n.TgZ(23,"option",42),n._uU(24,"Monospace"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(25,"div",14),n.TgZ(26,"label"),n._uU(27,"Font Color"),n.qZA(),n.TgZ(28,"input",43,44),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(29),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"fontColor",t.value)}),n.qZA(),n.qZA(),n.TgZ(30,"div",14),n.TgZ(31,"label"),n._uU(32,"X"),n.qZA(),n.TgZ(33,"input",36,45),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(34),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"X",t.value)}),n.qZA(),n.qZA(),n.TgZ(35,"div",14),n.TgZ(36,"label"),n._uU(37,"Y"),n.qZA(),n.TgZ(38,"input",36,46),n.NdJ("change",function(){n.CHM(e);const t=n.MAs(39),a=n.oxw();return a.updateObject(a.selectedObject.uuid,"Y",t.value)}),n.qZA(),n.qZA(),n.TgZ(40,"div",0),n.TgZ(41,"div",47),n._uU(42,"Apply"),n.qZA(),n.TgZ(43,"div",48),n.NdJ("click",function(){n.CHM(e);const t=n.oxw();return t.deleteItem(t.selectedObject.uuid)}),n._uU(44,"Delete"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Oqu(e.selectedObject.label),n.xp6(4),n.Q6J("value",e.selectedObject.sampleValue),n.xp6(5),n.Q6J("value",e.selectedObject.fontSize),n.xp6(5),n.Q6J("value",e.selectedObject.fontFamily),n.xp6(11),n.Udp("height",35,"px"),n.Q6J("value",e.selectedObject.fontColor),n.xp6(5),n.Q6J("value",e.selectedObject.X),n.xp6(5),n.Q6J("value",e.selectedObject.Y)}}const el=function(e){return{"sas-card-object-selected":e}},tl=a(91704);let al=(()=>{class e{constructor(e,t,a,i){this.helper=e,this.swal=t,this.api=a,this.toastr=i,this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.designList=[],this.availableItems=[{name:"pin",label:"PIN Code",sampleValue:"X8918JKAJS721",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"expiration",label:"Expiration",sampleValue:"2020-12-31",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"serialnumber",label:"Serial Number",sampleValue:"20180121",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"username",label:"Username",sampleValue:"9187198",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"password",label:"Password",sampleValue:"8891723",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"value",label:"Card Value",sampleValue:"150",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"series",label:"Series",sampleValue:"2018-0-1",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"label",label:"Label",sampleValue:"static text",fontSize:14,fontFamily:"arial",fontColor:"#000000"}],this.addedItems=[{uuid:"0",name:"canvas",width:400,height:300,backgroundImage:""}],this.properties_canvas={width:this.getCanvasWidth(),height:this.getCanvasHeight(),backgroundImage:""},this.selectedObject={},this.index()}selectObject(e,t){t.stopPropagation(),this.selectedObject=e}getCanvasWidth(){for(let e of this.addedItems)if("0"==e.uuid)return e.width}getCanvasHeight(){for(let e of this.addedItems)if("0"==e.uuid)return e.height}updateObject(e,t,a){for(let i=0;i<this.addedItems.length;i++)if(this.addedItems[i].uuid==e){let e=this.addedItems[i];e[t]=a,this.addedItems[i]=e}}trigerFileUpload(){tl("#file_chooser").trigger("click")}backgroundChanged(e){let t=this;if(e[0].type.indexOf("image/")<0)return;let a=new FileReader;a.readAsDataURL(e[0]),a.onload=function(e){t.properties_canvas.backgroundImage=a.result.toString(),t.updateObject("0","backgroundImage",a.result)}}itemDropped(e){if(tl(e.srcElement)[0].className.indexOf("sas-card-container")<0)return;const t=this.draggedItem,a=e.offsetX,i=e.offsetY;let n=this.helper.guid();t.uuid&&t.uuid.length>2&&(n=t.uuid,this.deleteItem(t.uuid)),t.uuid=n,t.X=a,t.Y=i,this.addedItems.push(this.draggedItem)}deleteItem(e){let t=0,a=-1;for(let i of this.addedItems)i.uuid==e?a=t:t++;a>-1&&this.addedItems.splice(a,1),this.selectedObject.uuid==e&&(this.selectedObject={uuid:"0"})}dragStarted(e,t){console.log(e),console.log(t),this.draggedItem=t,t.uuid&&tl("#"+t.uuid).css("opacity","0.3")}dragEnded(e,t){t.uuid&&tl("#"+t.uuid).css("opacity","1.0")}save(){-1==this.cardDesign.id?this.swal.prompt("Enter Template Name").subscribe(e=>{this.cardDesign.name=e,this.cardDesign.items=this.addedItems,this.api.post("cardDesign",this.cardDesign).subscribe(e=>{if(200==e.status){let t=e.id;this.toastr.success(e.message),this.designList.push({id:t,name:this.cardDesign.name}),this.cardDesign.id=t}})}):this.api.put("cardDesign/"+this.cardDesign.id.toString(),this.cardDesign).subscribe(e=>{})}index(){this.api.get("cardDesign").subscribe(e=>{this.designList=e.data})}load(e){-1==e?this.clear():this.api.get("cardDesign/"+e.toString()).subscribe(e=>{e=e.data,this.clear(),this.cardDesign.id=e.id,this.cardDesign.name=e.name,this.cardDesign.is_public=e.public,this.cardDesign.items=e.design_data,this.addedItems=e.design_data,this.properties_canvas.backgroundImage=e.design_data[0].backgroundImage,this.properties_canvas.width=e.design_data[0].width,this.properties_canvas.height=e.design_data[0].height})}clear(){this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.addedItems=[{uuid:"0",name:"canvas",width:400,height:300,backgroundImage:""}],this.selectedObject={},tl(".sas-card-container").css("background","")}destroy(){this.swal.confirm({title:"Delete Card Design",type:"warning",text:"Delete Selected Design ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("cardDesign/"+this.cardDesign.id.toString()).subscribe(e=>{200===e.status&&(this.clear(),this.index())})})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(m),n.Y36(Ge),n.Y36(h),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cards-designer"]],decls:58,vars:20,consts:[[1,"row"],[1,"col","col-md-3","col-lg-2"],[1,"card"],[1,"card-header"],[1,"fa","fa-wrench"],[1,"card-body"],[1,"sas-card-item-list"],["class","sas-card-item","pDraggable","card",3,"onDragStart",4,"ngFor","ngForOf"],[1,"col"],[1,"fa","fa-pencil"],[1,"sas-card-container-background"],["pDroppable","card",1,"sas-card-container",3,"ngClass","onDrop","click"],["class","sas-card-dropped_item","pDraggable","card",3,"left","top","itemData","id","ngClass","click","onDragStart","onDragEnd",4,"ngFor","ngForOf"],[1,"col","col-md-3"],[1,"form-group"],["name","designId",1,"form-control",3,"ngModel","ngModelChange","change"],["designId",""],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["class","col btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","col btn btn-sm btn-danger",3,"click",4,"ngIf"],["id","canvas",3,"hidden"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-image"],["type","file","id","file_chooser",1,"form-control",2,"display","none",3,"change"],[3,"ngModel","ngModelChange"],[4,"ngIf"],["pDraggable","card",1,"sas-card-item",3,"onDragStart"],[1,"fa","fa-thumb-tack"],["pDraggable","card",1,"sas-card-dropped_item",3,"itemData","id","ngClass","click","onDragStart","onDragEnd"],[3,"value"],[1,"col","btn","btn-sm","btn-primary",3,"click"],[1,"col","btn","btn-sm","btn-danger",3,"click"],["type","text",1,"form-control",3,"value","change"],["sampleValue",""],["type","number",1,"form-control",3,"value","change"],["fontSize",""],[1,"form-control",3,"value","change"],["fontFamily",""],["value","arial"],["value","sans-serif"],["value","monospace"],["type","color",1,"form-control",3,"value","change"],["fontColor",""],["labelX",""],["labelY",""],[1,"col","btn","btn-primary"],[1,"col","btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i",4),n._uU(5," Tools "),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.YNc(8,Br,3,1,"div",7),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",8),n.TgZ(10,"div",2),n.TgZ(11,"div",3),n._UZ(12,"i",9),n._uU(13," Card Designer "),n.qZA(),n.TgZ(14,"div",10),n.TgZ(15,"div",0),n.TgZ(16,"div",8),n.TgZ(17,"div",11),n.NdJ("onDrop",function(e){return t.itemDropped(e)})("click",function(e){return t.selectObject({uuid:"0"},e)}),n.YNc(18,jr,1,9,"app-card-designer-item",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",13),n.TgZ(20,"div",2),n.TgZ(21,"div",3),n._UZ(22,"i",4),n._uU(23," Properties "),n.qZA(),n.TgZ(24,"div",5),n.TgZ(25,"div",14),n.TgZ(26,"label"),n._uU(27,"Template Name"),n.qZA(),n.TgZ(28,"select",15,16),n.NdJ("ngModelChange",function(e){return t.cardDesign.id=e})("change",function(){return t.load(t.cardDesign.id)}),n.TgZ(30,"option",17),n._uU(31,"New Design"),n.qZA(),n.YNc(32,Gr,2,2,"option",18),n.qZA(),n.qZA(),n.TgZ(33,"div",0),n.YNc(34,Wr,2,0,"div",19),n.YNc(35,$r,2,0,"div",20),n.qZA(),n._UZ(36,"hr"),n.TgZ(37,"div",21),n.TgZ(38,"div",14),n.TgZ(39,"label"),n._uU(40,"Width (px)"),n.qZA(),n.TgZ(41,"input",22),n.NdJ("ngModelChange",function(e){return t.properties_canvas.width=e})("change",function(){return t.updateObject("0","width",t.properties_canvas.width)}),n.qZA(),n.qZA(),n.TgZ(42,"div",14),n.TgZ(43,"label"),n._uU(44,"Height (px)"),n.qZA(),n.TgZ(45,"input",22),n.NdJ("ngModelChange",function(e){return t.properties_canvas.height=e})("change",function(){return t.updateObject("0","height",t.properties_canvas.height)}),n.qZA(),n.qZA(),n.TgZ(46,"div",14),n.TgZ(47,"label"),n._uU(48,"Background Image"),n.qZA(),n.TgZ(49,"button",23),n.NdJ("click",function(){return t.trigerFileUpload()}),n._UZ(50,"i",24),n._uU(51," Select File"),n.qZA(),n.TgZ(52,"input",25),n.NdJ("change",function(e){return t.backgroundChanged(e.target.files)}),n.qZA(),n.qZA(),n.TgZ(53,"div",14),n.TgZ(54,"label"),n._uU(55,"Public Design"),n.qZA(),n.TgZ(56,"p-inputSwitch",26),n.NdJ("ngModelChange",function(e){return t.cardDesign.is_public=e}),n.qZA(),n.qZA(),n.qZA(),n.YNc(57,Xr,45,9,"div",27),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Q6J("ngForOf",t.availableItems),n.xp6(9),n.Udp("width",t.getCanvasWidth(),"px")("height",t.getCanvasHeight(),"px")("background","url("+t.properties_canvas.backgroundImage+")"),n.Q6J("ngClass",n.VKq(18,el,"canvas"==t.selectedObject)),n.xp6(1),n.Q6J("ngForOf",t.addedItems),n.xp6(10),n.Q6J("ngModel",t.cardDesign.id),n.xp6(4),n.Q6J("ngForOf",t.designList),n.xp6(2),n.Q6J("ngIf",t.addedItems.length>1),n.xp6(1),n.Q6J("ngIf",-1!=t.cardDesign.id),n.xp6(2),n.Q6J("hidden","0"!=t.selectedObject.uuid),n.xp6(4),n.Q6J("ngModel",t.properties_canvas.width),n.xp6(4),n.Q6J("ngModel",t.properties_canvas.height),n.xp6(11),n.Q6J("ngModel",t.cardDesign.is_public),n.xp6(1),n.Q6J("ngIf",t.selectedObject.uuid&&t.selectedObject.uuid.length>5))},directives:[J.sg,Lr.bK,J.mk,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.O5,Z.wV,Z.Fj,Ia.Ql,Lr._l,Kr],styles:[".sas-card-container-background{padding:20px;box-sizing:border-box;background-color:#dfdbe5;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")}.sas-card-container{margin:auto;border:1px solid grey;background-color:#fff;background-repeat:no-repeat!important;position:relative;box-sizing:border-box;background-size:100% 100%!important}.sas-card-object-selected{border:1px dashed #ea4c89}.sas-card-item{border:1px solid #979097;border-radius:5px;padding:5px;margin-top:5px;margin-left:5px;font-size:12px;box-sizing:border-box}.sas-card-item:hover{border:2px solid #ea4c89}.sas-card-dropped_item{position:absolute}.sas-card-dropped-item-selected{border:1px solid #ea4c89!important}.sas-card-dropped_item:hover{border:1px dashed #e89ebc;box-sizing:border-box}\n"],encapsulation:2}),e})();var il=a(92159),nl=a(60056);function ol(e,t){if(1&e&&n._UZ(0,"img",20),2&e){const e=n.oxw();n.Q6J("src",e.previewPageImage,n.LSH)}}function sl(e,t){1&e&&(n.TgZ(0,"option",21),n._uU(1,"New Design"),n.qZA())}function rl(e,t){if(1&e&&(n.TgZ(0,"option",22),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function ll(e,t){if(1&e&&(n.TgZ(0,"option",22),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}function cl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"label"),n._uU(2,"Show Cutting Marks"),n.qZA(),n.TgZ(3,"p-inputSwitch",23),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().pageConfig.showCuttingMarks=t})("change",function(){return n.CHM(e),n.oxw().renderSamplePage()}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Q6J("ngModel",e.pageConfig.showCuttingMarks)}}function dl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"label"),n._uU(2),n.qZA(),n.TgZ(3,"input",24,25),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().pageConfig.sizeRatio=t})("change",function(){return n.CHM(e),n.oxw().renderSamplePage()}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.hij("Size Ratio (",e.pageConfig.sizeRatio,"%)"),n.xp6(1),n.Q6J("ngModel",e.pageConfig.sizeRatio)}}function ul(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",0),n.TgZ(1,"div",26),n.NdJ("click",function(){return n.CHM(e),n.oxw().generatePDF()}),n._uU(2,"Download"),n.qZA(),n.qZA()}}class pl{constructor(e,t,a,i){this.api=e,this.router=t,this.route=a,this.auth=i,this.series="",this.pageFormats=["a4","letter"],this.designList=[],this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.cardWidth=400,this.cardHeight=300,this.backgroundImage="",this.cardList=[],this.pageSize=[],this.pageConfig={size:"a4",orientation:"portrait",design_id:-2,sizeRatio:100,showCuttingMarks:!0},this.previewPage={width:100,height:100},this.pageSize.a4={width:595.28,height:841.89},this.pageSize.letter={width:612,height:1008}}updatePreviewPage(){const e=this.pageConfig.size;this.previewPage.width=1.25*this.pageSize[e].width,this.previewPage.height=1.25*this.pageSize[e].height}ngOnInit(){this.loadDesignList(),this.route.params.subscribe(e=>{e.series&&(this.loadSeries(e.series),this.series=e.series)}),this.updatePreviewPage()}loadDesignList(){this.api.get("cardDesign").subscribe(e=>{this.designList=e.data})}loadDesign(e){-1==e?this.router.navigate(["cards/designer"]):(this.blockUI.start("loading..."),this.api.get("cardDesign/"+e.toString()).subscribe(e=>{this.blockUI.stop(),this.cardDesign.id=(e=e.data).id,this.cardDesign.name=e.name,this.cardDesign.items=e.design_data,this.backgroundImage=e.design_data[0].backgroundImage,this.cardWidth=e.design_data[0].width,this.cardHeight=e.design_data[0].height,this.renderSamplePage()}))}loadSeries(e){this.cardList=[],this.api.get("series/all/"+e).subscribe(e=>{200==e.status&&(this.cardList=e.data)})}addCardToPdf(e,t,a,i){this.renderCard(this.cardList[t]).subscribe(n=>{const o=this.pageConfig.sizeRatio/100,s=.75*this.cardWidth*o,r=.75*this.cardHeight*o;e.addImage(n,"JPEG",a,i,s,r),this.pageConfig.showCuttingMarks&&(this.jsPdfDottedLine(e,a+s+7.5,i-7.5,a+s+7.5,i+r+15,5),this.jsPdfDottedLine(e,a-7.5,i+r+7.5,a+s+15,i+r+7.5,5)),t++,(a=a+s+15)+s>=595.28&&(a=15,(i=i+15+r)+r>=841.89&&t<this.cardList.length&&(e.addPage(),a=15,i=15)),t==this.cardList.length?(this.blockUI.stop(),e.save(this.series+".pdf")):this.addCardToPdf(e,t,a,i)})}generatePDF(){this.blockUI.start("Generating PDF...");let e=new il.kH("p","pt",this.pageConfig.size);e.setFillColor(180,180,180),this.addCardToPdf(e,0,15,15)}renderCard(e){return new nl.Observable(t=>{const a=document.createElement("canvas");a.width=this.cardWidth,a.height=this.cardHeight;const i=a.getContext("2d"),n=document.createElement("img");n.setAttribute("id","cardImage"),n.src=this.backgroundImage;var o=this;n.onload=function(s){i.drawImage(n,0,0,n.width,n.height,0,0,a.width,a.height),i.textBaseline="top";for(const t of o.cardDesign.items){if(0==t.uuid)continue;i.font=t.fontSize.toString()+"px "+t.fontFamily,i.fillStyle=t.fontColor;let a=t.name,n="";n="label"===t.name?t.sampleValue:e[a],i.fillText(n,parseInt(t.X),parseInt(t.Y)+1)}const r=a.toDataURL("image/jpeg");t.next(r)}})}renderSamplePage(){let e=this.pageConfig.size,t=document.createElement("img");t.setAttribute("id","previewImage");let a=document.createElement("canvas");a.setAttribute("id","previewCanvas"),a.width=1.3333333*this.pageSize[e].width,a.height=1.3333333*this.pageSize[e].height;let i=a.getContext("2d");this.renderCard(this.cardList[0]).subscribe(e=>{t.src=e;var n=this;t.onload=function(){t.width=t.width*(n.pageConfig.sizeRatio/100),t.height=t.height*(n.pageConfig.sizeRatio/100);let e=!1,o=20,s=20;for(i.fillStyle="#aaaaaa",i.setLineDash([5,20]);!e;)i.drawImage(t,o,s,t.width,t.height),n.pageConfig.showCuttingMarks&&(i.beginPath(),i.moveTo(o+10+t.width,s-10),i.lineTo(o+10+t.width,s+t.height+20),i.stroke(),i.beginPath(),i.moveTo(o-10,s+t.height+10),i.lineTo(o+t.width+20,s+t.height+10),i.stroke()),o+=20+t.width,o+t.width>=a.width&&(o=20,s+=20+t.height,s+t.height>=a.height&&(e=!0));n.previewPageImage=a.toDataURL()}})}jsPdfDottedLine(e,t,a,i,n,o){for(var s=Math.abs(i-t),r=Math.abs(n-a),l=Math.sqrt(Math.pow(s,2)+Math.pow(r,2)),c=l/o,d=Math.floor(c)%2==0?l/Math.ceil(c):l/Math.floor(c),u=d*(s/l),p=d*(r/l),g=t,f=a;g<=i&&f<=n;)e.line(g,f,g+u,f+p),g+=2*u,f+=2*p}}pl.\u0275fac=function(e){return new(e||pl)(n.Y36(h),n.Y36(p.F0),n.Y36(p.gz),n.Y36(_))},pl.\u0275cmp=n.Xpm({type:pl,selectors:[["app-cards-printer"]],decls:32,vars:9,consts:[[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-header"],[1,"fa","fa-eye"],[1,"card-body","sas-card-preview-page"],[2,"margin-left","auto","margin-right","auto","background","white"],["style","width:100%",3,"src",4,"ngIf"],[1,"col-md-3"],[1,"fa","fa-wrench"],[1,"card-body"],[1,"form-group"],["name","design_id",1,"form-control",3,"ngModel","ngModelChange","change"],["design_id",""],["value","-1",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["name","pageSize",1,"form-control",3,"ngModel","ngModelChange","change"],["pageSize",""],["class","form-group",4,"ngIf"],["class","row",4,"ngIf"],[2,"width","100%",3,"src"],["value","-1"],[3,"value"],[3,"ngModel","ngModelChange","change"],["type","range","min","1","max","100","name","sizeRatio",1,"form-control",3,"ngModel","ngModelChange","change"],["sizeRatio",""],[1,"col","btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i",4),n._uU(5," Preview "),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.YNc(8,ol,1,1,"img",7),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"div",8),n.TgZ(10,"div",2),n.TgZ(11,"div",3),n._UZ(12,"i",9),n._uU(13," Properties "),n.qZA(),n.TgZ(14,"div",10),n.TgZ(15,"div"),n.TgZ(16,"div",11),n.TgZ(17,"label"),n._uU(18,"Design Template"),n.qZA(),n.TgZ(19,"select",12,13),n.NdJ("ngModelChange",function(e){return t.pageConfig.design_id=e})("change",function(){return t.loadDesign(t.pageConfig.design_id)}),n.YNc(21,sl,2,0,"option",14),n.YNc(22,rl,2,2,"option",15),n.qZA(),n.qZA(),n.TgZ(23,"div",11),n.TgZ(24,"label"),n._uU(25,"Page Size"),n.qZA(),n.TgZ(26,"select",16,17),n.NdJ("ngModelChange",function(e){return t.pageConfig.size=e})("change",function(){return t.updatePreviewPage()}),n.YNc(28,ll,2,2,"option",15),n.qZA(),n.qZA(),n.YNc(29,cl,4,1,"div",18),n.YNc(30,dl,5,2,"div",18),n.YNc(31,ul,3,0,"div",19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Q6J("ngIf",t.previewPageImage&&t.previewPageImage.length>100),n.xp6(11),n.Q6J("ngModel",t.pageConfig.design_id),n.xp6(2),n.Q6J("ngIf",t.auth.has("prm_cards_designer")),n.xp6(1),n.Q6J("ngForOf",t.designList),n.xp6(4),n.Q6J("ngModel",t.pageConfig.size),n.xp6(2),n.Q6J("ngForOf",t.pageFormats),n.xp6(1),n.Q6J("ngIf",t.pageConfig.design_id>-1&&t.cardList.length>0),n.xp6(1),n.Q6J("ngIf",t.pageConfig.design_id>-1&&t.cardList.length>0),n.xp6(1),n.Q6J("ngIf",t.cardList.length>0))},directives:[J.O5,Z.EJ,Z.JJ,Z.On,J.sg,Z.YN,Z.Kr,Ia.Ql,Z.eT,Z.Fj],styles:[".sas-card-container{margin:auto;border:1px solid grey;background-color:#fff;background-position:center!important;background-repeat:no-repeat!important;position:relative;background-size:100% 100%!important}.sas-card-dropped_item{position:absolute}.sas-card-preview-page{padding:20px;box-sizing:border-box;background-color:#dfdbe5;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")}\n"],encapsulation:2}),(0,c.gn)([(0,u.bH)()],pl.prototype,"blockUI",void 0);const gl=["site_form"];function fl(e,t){if(1&e&&(n.TgZ(0,"option",28),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}const hl=function(){return[]};function ml(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",29,30),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("cancel",function(){return n.CHM(e),n.oxw().destroy()})("formAction",function(t){return n.CHM(e),n.oxw().onFormAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",n.DdM(2,hl))}}function _l(e,t){1&e&&(n.TgZ(0,"div",31),n._uU(1," No Records Found "),n.qZA())}function bl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"li",34),n._uU(1),n.TgZ(2,"span"),n.TgZ(3,"a",35),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).deletePPP(t.id)}),n._UZ(4,"i",36),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.hij(" ",e.service_name," ")}}function Zl(e,t){if(1&e&&(n.TgZ(0,"ul",32),n.YNc(1,bl,5,1,"li",33),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.allowed_ppp_list)}}const vl=function(){return{width:"400px"}};class wl{constructor(e,t,a,i,n,o,s,r){this.api=e,this.route=t,this.auth=a,this.swal=i,this.toastr=n,this.formLoader=o,this.confirmationService=s,this.tr=r,this.site_data={},this.site_list=[],this.selected_site_id=0,this.ppp_dialog_visible=!1,this.allowed_ppp_list=[],this.ppp_user_input="",this.form_config={layout:"vertical",submitText:"Save",cancelText:"Delete",fields:[],helpBlock:"hidden"},this.index(),this.form_config.fields=this.formLoader.getForm("settings_site_form")}ngOnInit(){this.load(this.selected_site_id),this.loadAllowedPPP(),this.auth.checkRoutePermission(this.route)}index(){this.blockUI.start("loading..."),this.api.get("site").subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.site_list=e.data)})}onFormAction(e){"ppp_service_editor"===e&&(this.ppp_dialog_visible=!0,this.ppp_user_input=""),"site_reset_background_image"===e&&this.api.get("site/resetBackgroundImage/"+this.selected_site_id).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}create(){this.swal.prompt("Site Name").subscribe(e=>{this.blockUI.start("loading..."),this.api.post("site",{name:e}).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.toastr.success(e.message),this.index()):this.toastr.error(e.message)})})}load(e){this.blockUI.start("loading..."),this.api.get("site/"+e.toString()).subscribe(t=>{this.blockUI.stop(),200===t.status&&(this.site_data=t.data,this.dynamicForm.setFormValue(this.site_data),this.selected_site_id=e,this.loadAllowedPPP())})}save(e){const t=e.value;void 0!==t.login_background&&delete t.login_background,this.blockUI.start("loading..."),this.api.put("site/"+this.selected_site_id,t).subscribe(e=>{this.blockUI.stop(),200===e.status&&this.toastr.success(e.message)})}destroy(){this.swal.confirm({title:"Delete Site",type:"warning",text:"Delete Selected Site ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start("loading..."),this.api.delete("site/"+this.selected_site_id).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.index(),this.selected_site_id=null,this.toastr.success("Site Deleted",""))})})}addPPP(){this.ppp_user_input.length<1||this.api.post("site/ppp",{site_id:this.selected_site_id,service_name:this.ppp_user_input}).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.loadAllowedPPP(),this.ppp_user_input="")})}deletePPP(e){this.confirmationService.confirm({message:"Delete selected service?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.api.delete("site/ppp/"+e).subscribe(e=>{this.toastr.success(this.tr.translate(e.message)),this.loadAllowedPPP()})}})}loadAllowedPPP(){this.api.get("site/ppp/"+this.selected_site_id).subscribe(e=>{200===e.status&&(this.allowed_ppp_list=e.data)})}}wl.\u0275fac=function(e){return new(e||wl)(n.Y36(h),n.Y36(p.gz),n.Y36(_),n.Y36(Ge),n.Y36(g._W),n.Y36(yi),n.Y36(xi.YP),n.Y36(M))},wl.\u0275cmp=n.Xpm({type:wl,selectors:[["app-site-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(gl,5),2&e){let e;n.iGM(e=n.CRH())&&(t.dynamicForm=e.first)}},decls:39,vars:17,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"btn",3,"disabled","click"],[1,"fa","fa-trash"],[1,"col"],[1,"card",3,"hidden"],[1,"card-header"],[1,"fa","fa-building"],[1,"card-body"],["name","site_form",3,"formConfig","options","submit","cancel","formAction",4,"ngIf"],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","aria-describedby","button-addon2","placeholder","PPP service name","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[3,"value"],["name","site_form",3,"formConfig","options","submit","cancel","formAction"],["site_form",""],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.selected_site_id=e})("change",function(){return t.load(t.selected_site_id)}),n.TgZ(3,"option",3),n._uU(4,"Select Site"),n.qZA(),n.YNc(5,fl,2,2,"option",4),n.qZA(),n.qZA(),n.TgZ(6,"div",1),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n.NdJ("click",function(){return t.create()}),n._UZ(10,"i",8),n.qZA(),n.TgZ(11,"button",9),n.NdJ("click",function(){return t.save(t.site_data)}),n._UZ(12,"i",10),n.qZA(),n.TgZ(13,"button",11),n.NdJ("click",function(){return t.destroy()}),n._UZ(14,"i",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(15,"hr"),n.TgZ(16,"div",0),n.TgZ(17,"div",13),n.TgZ(18,"div",14),n.TgZ(19,"div",15),n._UZ(20,"i",16),n._uU(21," Site Settings "),n.qZA(),n.TgZ(22,"div",17),n.TgZ(23,"div",0),n.TgZ(24,"div",13),n.YNc(25,ml,2,3,"dynamic-form",18),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"p-dialog",19),n.NdJ("visibleChange",function(e){return t.ppp_dialog_visible=e}),n.TgZ(27,"p-header"),n._uU(28),n.qZA(),n.TgZ(29,"div",20),n.TgZ(30,"div",21),n.TgZ(31,"input",22),n.NdJ("ngModelChange",function(e){return t.ppp_user_input=e}),n.qZA(),n.TgZ(32,"div",23),n.TgZ(33,"button",24),n.NdJ("click",function(){return t.addPPP()}),n._UZ(34,"i",8),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"div",25),n.YNc(36,_l,2,0,"div",26),n.YNc(37,Zl,2,1,"ul",27),n.qZA(),n.qZA(),n._UZ(38,"p-confirmDialog")),2&e&&(n.xp6(2),n.Q6J("ngModel",t.selected_site_id),n.xp6(3),n.Q6J("ngForOf",t.site_list),n.xp6(6),n.Q6J("hidden",t.selected_site_id<0),n.xp6(2),n.Q6J("disabled",0===t.selected_site_id),n.xp6(5),n.Q6J("hidden",t.selected_site_id<0),n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(1),n.Akn(n.DdM(16,vl)),n.Q6J("visible",t.ppp_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),n.xp6(2),n.hij(" ",t.tr.translate("manager_ppp_dialog_title")," "),n.xp6(3),n.Q6J("ngModel",t.ppp_user_input),n.xp6(5),n.Q6J("ngIf",0===t.allowed_ppp_list.length),n.xp6(1),n.Q6J("ngIf",t.allowed_ppp_list.length>0))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,J.O5,ki.V,xi.h4,Z.Fj,T.Q,vi],styles:[".actions-button[_ngcontent-%COMP%]{min-width:120px}.card-actions[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{cursor:pointer}@media (max-width:800px){.actions-button[_ngcontent-%COMP%]{display:none}}@media (max-width: 500px){.toolbar-row[_ngcontent-%COMP%]{display:none}}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],wl.prototype,"blockUI",void 0);const yl=["syslog_model_view"];function xl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}class Al{constructor(e,t){this.api=e,this.tr=t,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"event",label:this.tr.translate("report_syslog_event")},{dataKey:"username",label:this.tr.translate("global_manager"),parentKey:"manager_details",sortBy:"created_by"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"ip",label:this.tr.translate("global_ip")}],this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"event",label:this.tr.translate("report_syslog_event"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]}],this.filterOptions={manager_id:[],event:[]},this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:this.tr.translate("report_syslog_title"),icon:"fas fa-user-secret",columns:this.columns,dataUrl:"index/syslog",page:1,showSearchBox:!0,allowExport:!0,rowsPerPage:10,sortBy:"created_at",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"syslog",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];for(let a of e.data)t.push({value:a.id,label:a.username});t.unshift({value:-1,label:"All Managers"}),this.filterOptions.manager_id=t}),this.api.get("syslog/events").subscribe(e=>{let t=[];for(let a of e.data)t.push({value:a.event,label:a.event});t.unshift({value:-1,label:"All Events"}),this.filterOptions.event=t})}}Al.\u0275fac=function(e){return new(e||Al)(n.Y36(h),n.Y36(M))},Al.\u0275cmp=n.Xpm({type:Al,selectors:[["app-system-log"]],viewQuery:function(e,t){if(1&e&&n.Gf(yl,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","syslog_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onDataLoading","onDataLoaded",4,"ngIf"],["name","syslog_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onDataLoading","onDataLoaded"],["syslog_model_view",""]],template:function(e,t){1&e&&n.YNc(0,xl,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],Al.prototype,"blockUI",void 0);const ql=["widgetForm"];function Tl(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Cl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",20,21),n.NdJ("formChanged",function(t){return n.CHM(e),n.oxw().formChanged(t)})("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let kl=(()=>{class e{constructor(e,t,a,i,n){this.formLoader=e,this.swal=t,this.api=a,this.toastr=i,this.tr=n,this.selectedItem=null,this.widgetList=[],this.widgetData={},this.form_config={layout:"vertical",submitText:"Save",fields:this.formLoader.getForm("widget_form"),helpBlock:"hidden"},this.options=[],this.iconsList=[{value:"fa fa-500px",label:"500px"},{value:"fa fa-accessible-icon",label:"accessible-icon"},{value:"fa fa-accusoft",label:"accusoft"},{value:"fa fa-address-book",label:"address-book"},{value:"fa fa-address-card",label:"address-card"},{value:"fa fa-adjust",label:"adjust"},{value:"fa fa-adn",label:"adn"},{value:"fa fa-adversal",label:"adversal"},{value:"fa fa-affiliatetheme",label:"affiliatetheme"},{value:"fa fa-algolia",label:"algolia"},{value:"fa fa-align-center",label:"align-center"},{value:"fa fa-align-justify",label:"align-justify"},{value:"fa fa-align-left",label:"align-left"},{value:"fa fa-align-right",label:"align-right"},{value:"fa fa-allergies",label:"allergies"},{value:"fa fa-amazon",label:"amazon"},{value:"fa fa-amazon-pay",label:"amazon-pay"},{value:"fa fa-ambulance",label:"ambulance"},{value:"fa fa-american-sign-language-interpreting",label:"american-sign-language-interpreting"},{value:"fa fa-amilia",label:"amilia"},{value:"fa fa-anchor",label:"anchor"},{value:"fa fa-android",label:"android"},{value:"fa fa-angellist",label:"angellist"},{value:"fa fa-angle-double-down",label:"angle-double-down"},{value:"fa fa-angle-double-left",label:"angle-double-left"},{value:"fa fa-angle-double-right",label:"angle-double-right"},{value:"fa fa-angle-double-up",label:"angle-double-up"},{value:"fa fa-angle-down",label:"angle-down"},{value:"fa fa-angle-left",label:"angle-left"},{value:"fa fa-angle-right",label:"angle-right"},{value:"fa fa-angle-up",label:"angle-up"},{value:"fa fa-angrycreative",label:"angrycreative"},{value:"fa fa-angular",label:"angular"},{value:"fa fa-app-store",label:"app-store"},{value:"fa fa-app-store-ios",label:"app-store-ios"},{value:"fa fa-apper",label:"apper"},{value:"fa fa-apple",label:"apple"},{value:"fa fa-apple-pay",label:"apple-pay"},{value:"fa fa-archive",label:"archive"},{value:"fa fa-arrow-alt-circle-down",label:"arrow-alt-circle-down"},{value:"fa fa-arrow-alt-circle-left",label:"arrow-alt-circle-left"},{value:"fa fa-arrow-alt-circle-right",label:"arrow-alt-circle-right"},{value:"fa fa-arrow-alt-circle-up",label:"arrow-alt-circle-up"},{value:"fa fa-arrow-circle-down",label:"arrow-circle-down"},{value:"fa fa-arrow-circle-left",label:"arrow-circle-left"},{value:"fa fa-arrow-circle-right",label:"arrow-circle-right"},{value:"fa fa-arrow-circle-up",label:"arrow-circle-up"},{value:"fa fa-arrow-down",label:"arrow-down"},{value:"fa fa-arrow-left",label:"arrow-left"},{value:"fa fa-arrow-right",label:"arrow-right"},{value:"fa fa-arrow-up",label:"arrow-up"},{value:"fa fa-arrows-alt",label:"arrows-alt"},{value:"fa fa-arrows-alt-h",label:"arrows-alt-h"},{value:"fa fa-arrows-alt-v",label:"arrows-alt-v"},{value:"fa fa-assistive-listening-systems",label:"assistive-listening-systems"},{value:"fa fa-asterisk",label:"asterisk"},{value:"fa fa-asymmetrik",label:"asymmetrik"},{value:"fa fa-at",label:"at"},{value:"fa fa-audible",label:"audible"},{value:"fa fa-audio-description",label:"audio-description"},{value:"fa fa-autoprefixer",label:"autoprefixer"},{value:"fa fa-avianex",label:"avianex"},{value:"fa fa-aviato",label:"aviato"},{value:"fa fa-aws",label:"aws"},{value:"fa fa-backward",label:"backward"},{value:"fa fa-balance-scale",label:"balance-scale"},{value:"fa fa-ban",label:"ban"},{value:"fa fa-band-aid",label:"band-aid"},{value:"fa fa-bandcamp",label:"bandcamp"},{value:"fa fa-barcode",label:"barcode"},{value:"fa fa-bars",label:"bars"},{value:"fa fa-baseball-ball",label:"baseball-ball"},{value:"fa fa-basketball-ball",label:"basketball-ball"},{value:"fa fa-bath",label:"bath"},{value:"fa fa-battery-empty",label:"battery-empty"},{value:"fa fa-battery-full",label:"battery-full"},{value:"fa fa-battery-half",label:"battery-half"},{value:"fa fa-battery-quarter",label:"battery-quarter"},{value:"fa fa-battery-three-quarters",label:"battery-three-quarters"},{value:"fa fa-bed",label:"bed"},{value:"fa fa-beer",label:"beer"},{value:"fa fa-behance",label:"behance"},{value:"fa fa-behance-square",label:"behance-square"},{value:"fa fa-bell",label:"bell"},{value:"fa fa-bell-slash",label:"bell-slash"},{value:"fa fa-bicycle",label:"bicycle"},{value:"fa fa-bimobject",label:"bimobject"},{value:"fa fa-binoculars",label:"binoculars"},{value:"fa fa-birthday-cake",label:"birthday-cake"},{value:"fa fa-bitbucket",label:"bitbucket"},{value:"fa fa-bitcoin",label:"bitcoin"},{value:"fa fa-bity",label:"bity"},{value:"fa fa-black-tie",label:"black-tie"},{value:"fa fa-blackberry",label:"blackberry"},{value:"fa fa-blind",label:"blind"},{value:"fa fa-blogger",label:"blogger"},{value:"fa fa-blogger-b",label:"blogger-b"},{value:"fa fa-bluetooth",label:"bluetooth"},{value:"fa fa-bluetooth-b",label:"bluetooth-b"},{value:"fa fa-bold",label:"bold"},{value:"fa fa-bolt",label:"bolt"},{value:"fa fa-bomb",label:"bomb"},{value:"fa fa-book",label:"book"},{value:"fa fa-bookmark",label:"bookmark"},{value:"fa fa-bowling-ball",label:"bowling-ball"},{value:"fa fa-box",label:"box"},{value:"fa fa-box-open",label:"box-open"},{value:"fa fa-boxes",label:"boxes"},{value:"fa fa-braille",label:"braille"},{value:"fa fa-briefcase",label:"briefcase"},{value:"fa fa-briefcase-medical",label:"briefcase-medical"},{value:"fa fa-btc",label:"btc"},{value:"fa fa-bug",label:"bug"},{value:"fa fa-building",label:"building"},{value:"fa fa-bullhorn",label:"bullhorn"},{value:"fa fa-bullseye",label:"bullseye"},{value:"fa fa-burn",label:"burn"},{value:"fa fa-buromobelexperte",label:"buromobelexperte"},{value:"fa fa-bus",label:"bus"},{value:"fa fa-buysellads",label:"buysellads"},{value:"fa fa-calculator",label:"calculator"},{value:"fa fa-calendar",label:"calendar"},{value:"fa fa-calendar-alt",label:"calendar-alt"},{value:"fa fa-calendar-check",label:"calendar-check"},{value:"fa fa-calendar-minus",label:"calendar-minus"},{value:"fa fa-calendar-plus",label:"calendar-plus"},{value:"fa fa-calendar-times",label:"calendar-times"},{value:"fa fa-camera",label:"camera"},{value:"fa fa-camera-retro",label:"camera-retro"},{value:"fa fa-capsules",label:"capsules"},{value:"fa fa-car",label:"car"},{value:"fa fa-caret-down",label:"caret-down"},{value:"fa fa-caret-left",label:"caret-left"},{value:"fa fa-caret-right",label:"caret-right"},{value:"fa fa-caret-square-down",label:"caret-square-down"},{value:"fa fa-caret-square-left",label:"caret-square-left"},{value:"fa fa-caret-square-right",label:"caret-square-right"},{value:"fa fa-caret-square-up",label:"caret-square-up"},{value:"fa fa-caret-up",label:"caret-up"},{value:"fa fa-cart-arrow-down",label:"cart-arrow-down"},{value:"fa fa-cart-plus",label:"cart-plus"},{value:"fa fa-cc-amazon-pay",label:"cc-amazon-pay"},{value:"fa fa-cc-amex",label:"cc-amex"},{value:"fa fa-cc-apple-pay",label:"cc-apple-pay"},{value:"fa fa-cc-diners-club",label:"cc-diners-club"},{value:"fa fa-cc-discover",label:"cc-discover"},{value:"fa fa-cc-jcb",label:"cc-jcb"},{value:"fa fa-cc-mastercard",label:"cc-mastercard"},{value:"fa fa-cc-paypal",label:"cc-paypal"},{value:"fa fa-cc-stripe",label:"cc-stripe"},{value:"fa fa-cc-visa",label:"cc-visa"},{value:"fa fa-centercode",label:"centercode"},{value:"fa fa-certificate",label:"certificate"},{value:"fa fa-chart-area",label:"chart-area"},{value:"fa fa-chart-bar",label:"chart-bar"},{value:"fa fa-chart-line",label:"chart-line"},{value:"fa fa-chart-pie",label:"chart-pie"},{value:"fa fa-check",label:"check"},{value:"fa fa-check-circle",label:"check-circle"},{value:"fa fa-check-square",label:"check-square"},{value:"fa fa-chess",label:"chess"},{value:"fa fa-chess-bishop",label:"chess-bishop"},{value:"fa fa-chess-board",label:"chess-board"},{value:"fa fa-chess-king",label:"chess-king"},{value:"fa fa-chess-knight",label:"chess-knight"},{value:"fa fa-chess-pawn",label:"chess-pawn"},{value:"fa fa-chess-queen",label:"chess-queen"},{value:"fa fa-chess-rook",label:"chess-rook"},{value:"fa fa-chevron-circle-down",label:"chevron-circle-down"},{value:"fa fa-chevron-circle-left",label:"chevron-circle-left"},{value:"fa fa-chevron-circle-right",label:"chevron-circle-right"},{value:"fa fa-chevron-circle-up",label:"chevron-circle-up"},{value:"fa fa-chevron-down",label:"chevron-down"},{value:"fa fa-chevron-left",label:"chevron-left"},{value:"fa fa-chevron-right",label:"chevron-right"},{value:"fa fa-chevron-up",label:"chevron-up"},{value:"fa fa-child",label:"child"},{value:"fa fa-chrome",label:"chrome"},{value:"fa fa-circle",label:"circle"},{value:"fa fa-circle-notch",label:"circle-notch"},{value:"fa fa-clipboard",label:"clipboard"},{value:"fa fa-clipboard-check",label:"clipboard-check"},{value:"fa fa-clipboard-list",label:"clipboard-list"},{value:"fa fa-clock",label:"clock"},{value:"fa fa-clone",label:"clone"},{value:"fa fa-closed-captioning",label:"closed-captioning"},{value:"fa fa-cloud",label:"cloud"},{value:"fa fa-cloud-download-alt",label:"cloud-download-alt"},{value:"fa fa-cloud-upload-alt",label:"cloud-upload-alt"},{value:"fa fa-cloudscale",label:"cloudscale"},{value:"fa fa-cloudsmith",label:"cloudsmith"},{value:"fa fa-cloudversify",label:"cloudversify"},{value:"fa fa-code",label:"code"},{value:"fa fa-code-branch",label:"code-branch"},{value:"fa fa-codepen",label:"codepen"},{value:"fa fa-codiepie",label:"codiepie"},{value:"fa fa-coffee",label:"coffee"},{value:"fa fa-cog",label:"cog"},{value:"fa fa-cogs",label:"cogs"},{value:"fa fa-columns",label:"columns"},{value:"fa fa-comment",label:"comment"},{value:"fa fa-comment-alt",label:"comment-alt"},{value:"fa fa-comment-dots",label:"comment-dots"},{value:"fa fa-comment-slash",label:"comment-slash"},{value:"fa fa-comments",label:"comments"},{value:"fa fa-compass",label:"compass"},{value:"fa fa-compress",label:"compress"},{value:"fa fa-connectdevelop",label:"connectdevelop"},{value:"fa fa-contao",label:"contao"},{value:"fa fa-copy",label:"copy"},{value:"fa fa-copyright",label:"copyright"},{value:"fa fa-couch",label:"couch"},{value:"fa fa-cpanel",label:"cpanel"},{value:"fa fa-creative-commons",label:"creative-commons"},{value:"fa fa-credit-card",label:"credit-card"},{value:"fa fa-crop",label:"crop"},{value:"fa fa-crosshairs",label:"crosshairs"},{value:"fa fa-css3",label:"css3"},{value:"fa fa-css3-alt",label:"css3-alt"},{value:"fa fa-cube",label:"cube"},{value:"fa fa-cubes",label:"cubes"},{value:"fa fa-cut",label:"cut"},{value:"fa fa-cuttlefish",label:"cuttlefish"},{value:"fa fa-d-and-d",label:"d-and-d"},{value:"fa fa-dashcube",label:"dashcube"},{value:"fa fa-database",label:"database"},{value:"fa fa-deaf",label:"deaf"},{value:"fa fa-delicious",label:"delicious"},{value:"fa fa-deploydog",label:"deploydog"},{value:"fa fa-deskpro",label:"deskpro"},{value:"fa fa-desktop",label:"desktop"},{value:"fa fa-deviantart",label:"deviantart"},{value:"fa fa-diagnoses",label:"diagnoses"},{value:"fa fa-digg",label:"digg"},{value:"fa fa-digital-ocean",label:"digital-ocean"},{value:"fa fa-discord",label:"discord"},{value:"fa fa-discourse",label:"discourse"},{value:"fa fa-dna",label:"dna"},{value:"fa fa-dochub",label:"dochub"},{value:"fa fa-docker",label:"docker"},{value:"fa fa-dollar-sign",label:"dollar-sign"},{value:"fa fa-dolly",label:"dolly"},{value:"fa fa-dolly-flatbed",label:"dolly-flatbed"},{value:"fa fa-donate",label:"donate"},{value:"fa fa-dot-circle",label:"dot-circle"},{value:"fa fa-dove",label:"dove"},{value:"fa fa-download",label:"download"},{value:"fa fa-draft2digital",label:"draft2digital"},{value:"fa fa-dribbble",label:"dribbble"},{value:"fa fa-dribbble-square",label:"dribbble-square"},{value:"fa fa-dropbox",label:"dropbox"},{value:"fa fa-drupal",label:"drupal"},{value:"fa fa-dyalog",label:"dyalog"},{value:"fa fa-earlybirds",label:"earlybirds"},{value:"fa fa-edge",label:"edge"},{value:"fa fa-edit",label:"edit"},{value:"fa fa-eject",label:"eject"},{value:"fa fa-elementor",label:"elementor"},{value:"fa fa-ellipsis-h",label:"ellipsis-h"},{value:"fa fa-ellipsis-v",label:"ellipsis-v"},{value:"fa fa-ember",label:"ember"},{value:"fa fa-empire",label:"empire"},{value:"fa fa-envelope",label:"envelope"},{value:"fa fa-envelope-open",label:"envelope-open"},{value:"fa fa-envelope-square",label:"envelope-square"},{value:"fa fa-envira",label:"envira"},{value:"fa fa-eraser",label:"eraser"},{value:"fa fa-erlang",label:"erlang"},{value:"fa fa-ethereum",label:"ethereum"},{value:"fa fa-etsy",label:"etsy"},{value:"fa fa-euro-sign",label:"euro-sign"},{value:"fa fa-exchange-alt",label:"exchange-alt"},{value:"fa fa-exclamation",label:"exclamation"},{value:"fa fa-exclamation-circle",label:"exclamation-circle"},{value:"fa fa-exclamation-triangle",label:"exclamation-triangle"},{value:"fa fa-expand",label:"expand"},{value:"fa fa-expand-arrows-alt",label:"expand-arrows-alt"},{value:"fa fa-expeditedssl",label:"expeditedssl"},{value:"fa fa-external-link-alt",label:"external-link-alt"},{value:"fa fa-external-link-square-alt",label:"external-link-square-alt"},{value:"fa fa-eye",label:"eye"},{value:"fa fa-eye-dropper",label:"eye-dropper"},{value:"fa fa-eye-slash",label:"eye-slash"},{value:"fa fa-facebook",label:"facebook"},{value:"fa fa-facebook-f",label:"facebook-f"},{value:"fa fa-facebook-messenger",label:"facebook-messenger"},{value:"fa fa-facebook-square",label:"facebook-square"},{value:"fa fa-fast-backward",label:"fast-backward"},{value:"fa fa-fast-forward",label:"fast-forward"},{value:"fa fa-fax",label:"fax"},{value:"fa fa-female",label:"female"},{value:"fa fa-fighter-jet",label:"fighter-jet"},{value:"fa fa-file",label:"file"},{value:"fa fa-file-alt",label:"file-alt"},{value:"fa fa-file-archive",label:"file-archive"},{value:"fa fa-file-audio",label:"file-audio"},{value:"fa fa-file-code",label:"file-code"},{value:"fa fa-file-excel",label:"file-excel"},{value:"fa fa-file-image",label:"file-image"},{value:"fa fa-file-medical",label:"file-medical"},{value:"fa fa-file-medical-alt",label:"file-medical-alt"},{value:"fa fa-file-pdf",label:"file-pdf"},{value:"fa fa-file-powerpoint",label:"file-powerpoint"},{value:"fa fa-file-video",label:"file-video"},{value:"fa fa-file-word",label:"file-word"},{value:"fa fa-film",label:"film"},{value:"fa fa-filter",label:"filter"},{value:"fa fa-fire",label:"fire"},{value:"fa fa-fire-extinguisher",label:"fire-extinguisher"},{value:"fa fa-firefox",label:"firefox"},{value:"fa fa-first-aid",label:"first-aid"},{value:"fa fa-first-order",label:"first-order"},{value:"fa fa-firstdraft",label:"firstdraft"},{value:"fa fa-flag",label:"flag"},{value:"fa fa-flag-checkered",label:"flag-checkered"},{value:"fa fa-flask",label:"flask"},{value:"fa fa-flickr",label:"flickr"},{value:"fa fa-flipboard",label:"flipboard"},{value:"fa fa-fly",label:"fly"},{value:"fa fa-folder",label:"folder"},{value:"fa fa-folder-open",label:"folder-open"},{value:"fa fa-font",label:"font"},{value:"fa fa-font-awesome",label:"font-awesome"},{value:"fa fa-font-awesome-alt",label:"font-awesome-alt"},{value:"fa fa-font-awesome-flag",label:"font-awesome-flag"},{value:"fa fa-fonticons",label:"fonticons"},{value:"fa fa-fonticons-fi",label:"fonticons-fi"},{value:"fa fa-football-ball",label:"football-ball"},{value:"fa fa-fort-awesome",label:"fort-awesome"},{value:"fa fa-fort-awesome-alt",label:"fort-awesome-alt"},{value:"fa fa-forumbee",label:"forumbee"},{value:"fa fa-forward",label:"forward"},{value:"fa fa-foursquare",label:"foursquare"},{value:"fa fa-free-code-camp",label:"free-code-camp"},{value:"fa fa-freebsd",label:"freebsd"},{value:"fa fa-frown",label:"frown"},{value:"fa fa-futbol",label:"futbol"},{value:"fa fa-gamepad",label:"gamepad"},{value:"fa fa-gavel",label:"gavel"},{value:"fa fa-gem",label:"gem"},{value:"fa fa-genderless",label:"genderless"},{value:"fa fa-get-pocket",label:"get-pocket"},{value:"fa fa-gg",label:"gg"},{value:"fa fa-gg-circle",label:"gg-circle"},{value:"fa fa-gift",label:"gift"},{value:"fa fa-git",label:"git"},{value:"fa fa-git-square",label:"git-square"},{value:"fa fa-github",label:"github"},{value:"fa fa-github-alt",label:"github-alt"},{value:"fa fa-github-square",label:"github-square"},{value:"fa fa-gitkraken",label:"gitkraken"},{value:"fa fa-gitlab",label:"gitlab"},{value:"fa fa-gitter",label:"gitter"},{value:"fa fa-glass-martini",label:"glass-martini"},{value:"fa fa-glide",label:"glide"},{value:"fa fa-glide-g",label:"glide-g"},{value:"fa fa-globe",label:"globe"},{value:"fa fa-gofore",label:"gofore"},{value:"fa fa-golf-ball",label:"golf-ball"},{value:"fa fa-goodreads",label:"goodreads"},{value:"fa fa-goodreads-g",label:"goodreads-g"},{value:"fa fa-google",label:"google"},{value:"fa fa-google-drive",label:"google-drive"},{value:"fa fa-google-play",label:"google-play"},{value:"fa fa-google-plus",label:"google-plus"},{value:"fa fa-google-plus-g",label:"google-plus-g"},{value:"fa fa-google-plus-square",label:"google-plus-square"},{value:"fa fa-google-wallet",label:"google-wallet"},{value:"fa fa-graduation-cap",label:"graduation-cap"},{value:"fa fa-gratipay",label:"gratipay"},{value:"fa fa-grav",label:"grav"},{value:"fa fa-gripfire",label:"gripfire"},{value:"fa fa-grunt",label:"grunt"},{value:"fa fa-gulp",label:"gulp"},{value:"fa fa-h-square",label:"h-square"},{value:"fa fa-hacker-news",label:"hacker-news"},{value:"fa fa-hacker-news-square",label:"hacker-news-square"},{value:"fa fa-hand-holding",label:"hand-holding"},{value:"fa fa-hand-holding-heart",label:"hand-holding-heart"},{value:"fa fa-hand-holding-usd",label:"hand-holding-usd"},{value:"fa fa-hand-lizard",label:"hand-lizard"},{value:"fa fa-hand-paper",label:"hand-paper"},{value:"fa fa-hand-peace",label:"hand-peace"},{value:"fa fa-hand-point-down",label:"hand-point-down"},{value:"fa fa-hand-point-left",label:"hand-point-left"},{value:"fa fa-hand-point-right",label:"hand-point-right"},{value:"fa fa-hand-point-up",label:"hand-point-up"},{value:"fa fa-hand-pointer",label:"hand-pointer"},{value:"fa fa-hand-rock",label:"hand-rock"},{value:"fa fa-hand-scissors",label:"hand-scissors"},{value:"fa fa-hand-spock",label:"hand-spock"},{value:"fa fa-hands",label:"hands"},{value:"fa fa-hands-helping",label:"hands-helping"},{value:"fa fa-handshake",label:"handshake"},{value:"fa fa-hashtag",label:"hashtag"},{value:"fa fa-hdd",label:"hdd"},{value:"fa fa-heading",label:"heading"},{value:"fa fa-headphones",label:"headphones"},{value:"fa fa-heart",label:"heart"},{value:"fa fa-heartbeat",label:"heartbeat"},{value:"fa fa-hips",label:"hips"},{value:"fa fa-hire-a-helper",label:"hire-a-helper"},{value:"fa fa-history",label:"history"},{value:"fa fa-hockey-puck",label:"hockey-puck"},{value:"fa fa-home",label:"home"},{value:"fa fa-hooli",label:"hooli"},{value:"fa fa-hospital",label:"hospital"},{value:"fa fa-hospital-alt",label:"hospital-alt"},{value:"fa fa-hospital-symbol",label:"hospital-symbol"},{value:"fa fa-hotjar",label:"hotjar"},{value:"fa fa-hourglass",label:"hourglass"},{value:"fa fa-hourglass-end",label:"hourglass-end"},{value:"fa fa-hourglass-half",label:"hourglass-half"},{value:"fa fa-hourglass-start",label:"hourglass-start"},{value:"fa fa-houzz",label:"houzz"},{value:"fa fa-html5",label:"html5"},{value:"fa fa-hubspot",label:"hubspot"},{value:"fa fa-i-cursor",label:"i-cursor"},{value:"fa fa-id-badge",label:"id-badge"},{value:"fa fa-id-card",label:"id-card"},{value:"fa fa-id-card-alt",label:"id-card-alt"},{value:"fa fa-image",label:"image"},{value:"fa fa-images",label:"images"},{value:"fa fa-imdb",label:"imdb"},{value:"fa fa-inbox",label:"inbox"},{value:"fa fa-indent",label:"indent"},{value:"fa fa-industry",label:"industry"},{value:"fa fa-info",label:"info"},{value:"fa fa-info-circle",label:"info-circle"},{value:"fa fa-instagram",label:"instagram"},{value:"fa fa-internet-explorer",label:"internet-explorer"},{value:"fa fa-ioxhost",label:"ioxhost"},{value:"fa fa-italic",label:"italic"},{value:"fa fa-itunes",label:"itunes"},{value:"fa fa-itunes-note",label:"itunes-note"},{value:"fa fa-java",label:"java"},{value:"fa fa-jenkins",label:"jenkins"},{value:"fa fa-joget",label:"joget"},{value:"fa fa-joomla",label:"joomla"},{value:"fa fa-js",label:"js"},{value:"fa fa-js-square",label:"js-square"},{value:"fa fa-jsfiddle",label:"jsfiddle"},{value:"fa fa-key",label:"key"},{value:"fa fa-keyboard",label:"keyboard"},{value:"fa fa-keycdn",label:"keycdn"},{value:"fa fa-kickstarter",label:"kickstarter"},{value:"fa fa-kickstarter-k",label:"kickstarter-k"},{value:"fa fa-korvue",label:"korvue"},{value:"fa fa-language",label:"language"},{value:"fa fa-laptop",label:"laptop"},{value:"fa fa-laravel",label:"laravel"},{value:"fa fa-lastfm",label:"lastfm"},{value:"fa fa-lastfm-square",label:"lastfm-square"},{value:"fa fa-leaf",label:"leaf"},{value:"fa fa-leanpub",label:"leanpub"},{value:"fa fa-lemon",label:"lemon"},{value:"fa fa-less",label:"less"},{value:"fa fa-level-down-alt",label:"level-down-alt"},{value:"fa fa-level-up-alt",label:"level-up-alt"},{value:"fa fa-life-ring",label:"life-ring"},{value:"fa fa-lightbulb",label:"lightbulb"},{value:"fa fa-line",label:"line"},{value:"fa fa-link",label:"link"},{value:"fa fa-linkedin",label:"linkedin"},{value:"fa fa-linkedin-in",label:"linkedin-in"},{value:"fa fa-linode",label:"linode"},{value:"fa fa-linux",label:"linux"},{value:"fa fa-lira-sign",label:"lira-sign"},{value:"fa fa-list",label:"list"},{value:"fa fa-list-alt",label:"list-alt"},{value:"fa fa-list-ol",label:"list-ol"},{value:"fa fa-list-ul",label:"list-ul"},{value:"fa fa-location-arrow",label:"location-arrow"},{value:"fa fa-lock",label:"lock"},{value:"fa fa-lock-open",label:"lock-open"},{value:"fa fa-long-arrow-alt-down",label:"long-arrow-alt-down"},{value:"fa fa-long-arrow-alt-left",label:"long-arrow-alt-left"},{value:"fa fa-long-arrow-alt-right",label:"long-arrow-alt-right"},{value:"fa fa-long-arrow-alt-up",label:"long-arrow-alt-up"},{value:"fa fa-low-vision",label:"low-vision"},{value:"fa fa-lyft",label:"lyft"},{value:"fa fa-magento",label:"magento"},{value:"fa fa-magic",label:"magic"},{value:"fa fa-magnet",label:"magnet"},{value:"fa fa-male",label:"male"},{value:"fa fa-map",label:"map"},{value:"fa fa-map-marker",label:"map-marker"},{value:"fa fa-map-marker-alt",label:"map-marker-alt"},{value:"fa fa-map-pin",label:"map-pin"},{value:"fa fa-map-signs",label:"map-signs"},{value:"fa fa-mars",label:"mars"},{value:"fa fa-mars-double",label:"mars-double"},{value:"fa fa-mars-stroke",label:"mars-stroke"},{value:"fa fa-mars-stroke-h",label:"mars-stroke-h"},{value:"fa fa-mars-stroke-v",label:"mars-stroke-v"},{value:"fa fa-maxcdn",label:"maxcdn"},{value:"fa fa-medapps",label:"medapps"},{value:"fa fa-medium",label:"medium"},{value:"fa fa-medium-m",label:"medium-m"},{value:"fa fa-medkit",label:"medkit"},{value:"fa fa-medrt",label:"medrt"},{value:"fa fa-meetup",label:"meetup"},{value:"fa fa-meh",label:"meh"},{value:"fa fa-mercury",label:"mercury"},{value:"fa fa-microchip",label:"microchip"},{value:"fa fa-microphone",label:"microphone"},{value:"fa fa-microphone-slash",label:"microphone-slash"},{value:"fa fa-microsoft",label:"microsoft"},{value:"fa fa-minus",label:"minus"},{value:"fa fa-minus-circle",label:"minus-circle"},{value:"fa fa-minus-square",label:"minus-square"},{value:"fa fa-mix",label:"mix"},{value:"fa fa-mixcloud",label:"mixcloud"},{value:"fa fa-mizuni",label:"mizuni"},{value:"fa fa-mobile",label:"mobile"},{value:"fa fa-mobile-alt",label:"mobile-alt"},{value:"fa fa-modx",label:"modx"},{value:"fa fa-monero",label:"monero"},{value:"fa fa-money-bill-alt",label:"money-bill-alt"},{value:"fa fa-moon",label:"moon"},{value:"fa fa-motorcycle",label:"motorcycle"},{value:"fa fa-mouse-pointer",label:"mouse-pointer"},{value:"fa fa-music",label:"music"},{value:"fa fa-napster",label:"napster"},{value:"fa fa-neuter",label:"neuter"},{value:"fa fa-newspaper",label:"newspaper"},{value:"fa fa-nintendo-switch",label:"nintendo-switch"},{value:"fa fa-node",label:"node"},{value:"fa fa-node-js",label:"node-js"},{value:"fa fa-notes-medical",label:"notes-medical"},{value:"fa fa-npm",label:"npm"},{value:"fa fa-ns8",label:"ns8"},{value:"fa fa-nutritionix",label:"nutritionix"},{value:"fa fa-object-group",label:"object-group"},{value:"fa fa-object-ungroup",label:"object-ungroup"},{value:"fa fa-odnoklassniki",label:"odnoklassniki"},{value:"fa fa-odnoklassniki-square",label:"odnoklassniki-square"},{value:"fa fa-opencart",label:"opencart"},{value:"fa fa-openid",label:"openid"},{value:"fa fa-opera",label:"opera"},{value:"fa fa-optin-monster",label:"optin-monster"},{value:"fa fa-osi",label:"osi"},{value:"fa fa-outdent",label:"outdent"},{value:"fa fa-page4",label:"page4"},{value:"fa fa-pagelines",label:"pagelines"},{value:"fa fa-paint-brush",label:"paint-brush"},{value:"fa fa-palfed",label:"palfed"},{value:"fa fa-pallet",label:"pallet"},{value:"fa fa-paper-plane",label:"paper-plane"},{value:"fa fa-paperclip",label:"paperclip"},{value:"fa fa-parachute-box",label:"parachute-box"},{value:"fa fa-paragraph",label:"paragraph"},{value:"fa fa-paste",label:"paste"},{value:"fa fa-patreon",label:"patreon"},{value:"fa fa-pause",label:"pause"},{value:"fa fa-pause-circle",label:"pause-circle"},{value:"fa fa-paw",label:"paw"},{value:"fa fa-paypal",label:"paypal"},{value:"fa fa-pen-square",label:"pen-square"},{value:"fa fa-pencil-alt",label:"pencil-alt"},{value:"fa fa-people-carry",label:"people-carry"},{value:"fa fa-percent",label:"percent"},{value:"fa fa-periscope",label:"periscope"},{value:"fa fa-phabricator",label:"phabricator"},{value:"fa fa-phoenix-framework",label:"phoenix-framework"},{value:"fa fa-phone",label:"phone"},{value:"fa fa-phone-slash",label:"phone-slash"},{value:"fa fa-phone-square",label:"phone-square"},{value:"fa fa-phone-volume",label:"phone-volume"},{value:"fa fa-php",label:"php"},{value:"fa fa-pied-piper",label:"pied-piper"},{value:"fa fa-pied-piper-alt",label:"pied-piper-alt"},{value:"fa fa-pied-piper-hat",label:"pied-piper-hat"},{value:"fa fa-pied-piper-pp",label:"pied-piper-pp"},{value:"fa fa-piggy-bank",label:"piggy-bank"},{value:"fa fa-pills",label:"pills"},{value:"fa fa-pinterest",label:"pinterest"},{value:"fa fa-pinterest-p",label:"pinterest-p"},{value:"fa fa-pinterest-square",label:"pinterest-square"},{value:"fa fa-plane",label:"plane"},{value:"fa fa-play",label:"play"},{value:"fa fa-play-circle",label:"play-circle"},{value:"fa fa-playstation",label:"playstation"},{value:"fa fa-plug",label:"plug"},{value:"fa fa-plus",label:"plus"},{value:"fa fa-plus-circle",label:"plus-circle"},{value:"fa fa-plus-square",label:"plus-square"},{value:"fa fa-podcast",label:"podcast"},{value:"fa fa-poo",label:"poo"},{value:"fa fa-pound-sign",label:"pound-sign"},{value:"fa fa-power-off",label:"power-off"},{value:"fa fa-prescription-bottle",label:"prescription-bottle"},{value:"fa fa-prescription-bottle-alt",label:"prescription-bottle-alt"},{value:"fa fa-print",label:"print"},{value:"fa fa-procedures",label:"procedures"},{value:"fa fa-product-hunt",label:"product-hunt"},{value:"fa fa-pushed",label:"pushed"},{value:"fa fa-puzzle-piece",label:"puzzle-piece"},{value:"fa fa-python",label:"python"},{value:"fa fa-qq",label:"qq"},{value:"fa fa-qrcode",label:"qrcode"},{value:"fa fa-question",label:"question"},{value:"fa fa-question-circle",label:"question-circle"},{value:"fa fa-quidditch",label:"quidditch"},{value:"fa fa-quinscape",label:"quinscape"},{value:"fa fa-quora",label:"quora"},{value:"fa fa-quote-left",label:"quote-left"},{value:"fa fa-quote-right",label:"quote-right"},{value:"fa fa-random",label:"random"},{value:"fa fa-ravelry",label:"ravelry"},{value:"fa fa-react",label:"react"},{value:"fa fa-readme",label:"readme"},{value:"fa fa-rebel",label:"rebel"},{value:"fa fa-recycle",label:"recycle"},{value:"fa fa-red-river",label:"red-river"},{value:"fa fa-reddit",label:"reddit"},{value:"fa fa-reddit-alien",label:"reddit-alien"},{value:"fa fa-reddit-square",label:"reddit-square"},{value:"fa fa-redo",label:"redo"},{value:"fa fa-redo-alt",label:"redo-alt"},{value:"fa fa-registered",label:"registered"},{value:"fa fa-rendact",label:"rendact"},{value:"fa fa-renren",label:"renren"},{value:"fa fa-reply",label:"reply"},{value:"fa fa-reply-all",label:"reply-all"},{value:"fa fa-replyd",label:"replyd"},{value:"fa fa-resolving",label:"resolving"},{value:"fa fa-retweet",label:"retweet"},{value:"fa fa-ribbon",label:"ribbon"},{value:"fa fa-road",label:"road"},{value:"fa fa-rocket",label:"rocket"},{value:"fa fa-rocketchat",label:"rocketchat"},{value:"fa fa-rockrms",label:"rockrms"},{value:"fa fa-rss",label:"rss"},{value:"fa fa-rss-square",label:"rss-square"},{value:"fa fa-ruble-sign",label:"ruble-sign"},{value:"fa fa-rupee-sign",label:"rupee-sign"},{value:"fa fa-safari",label:"safari"},{value:"fa fa-sass",label:"sass"},{value:"fa fa-save",label:"save"},{value:"fa fa-schlix",label:"schlix"},{value:"fa fa-scribd",label:"scribd"},{value:"fa fa-search",label:"search"},{value:"fa fa-search-minus",label:"search-minus"},{value:"fa fa-search-plus",label:"search-plus"},{value:"fa fa-searchengin",label:"searchengin"},{value:"fa fa-seedling",label:"seedling"},{value:"fa fa-sellcast",label:"sellcast"},{value:"fa fa-sellsy",label:"sellsy"},{value:"fa fa-server",label:"server"},{value:"fa fa-servicestack",label:"servicestack"},{value:"fa fa-share",label:"share"},{value:"fa fa-share-alt",label:"share-alt"},{value:"fa fa-share-alt-square",label:"share-alt-square"},{value:"fa fa-share-square",label:"share-square"},{value:"fa fa-shekel-sign",label:"shekel-sign"},{value:"fa fa-shield-alt",label:"shield-alt"},{value:"fa fa-ship",label:"ship"},{value:"fa fa-shipping-fast",label:"shipping-fast"},{value:"fa fa-shirtsinbulk",label:"shirtsinbulk"},{value:"fa fa-shopping-bag",label:"shopping-bag"},{value:"fa fa-shopping-basket",label:"shopping-basket"},{value:"fa fa-shopping-cart",label:"shopping-cart"},{value:"fa fa-shower",label:"shower"},{value:"fa fa-sign",label:"sign"},{value:"fa fa-sign-in-alt",label:"sign-in-alt"},{value:"fa fa-sign-language",label:"sign-language"},{value:"fa fa-sign-out-alt",label:"sign-out-alt"},{value:"fa fa-signal",label:"signal"},{value:"fa fa-simplybuilt",label:"simplybuilt"},{value:"fa fa-sistrix",label:"sistrix"},{value:"fa fa-sitemap",label:"sitemap"},{value:"fa fa-skyatlas",label:"skyatlas"},{value:"fa fa-skype",label:"skype"},{value:"fa fa-slack",label:"slack"},{value:"fa fa-slack-hash",label:"slack-hash"},{value:"fa fa-sliders-h",label:"sliders-h"},{value:"fa fa-slideshare",label:"slideshare"},{value:"fa fa-smile",label:"smile"},{value:"fa fa-smoking",label:"smoking"},{value:"fa fa-snapchat",label:"snapchat"},{value:"fa fa-snapchat-ghost",label:"snapchat-ghost"},{value:"fa fa-snapchat-square",label:"snapchat-square"},{value:"fa fa-snowflake",label:"snowflake"},{value:"fa fa-sort",label:"sort"},{value:"fa fa-sort-alpha-down",label:"sort-alpha-down"},{value:"fa fa-sort-alpha-up",label:"sort-alpha-up"},{value:"fa fa-sort-amount-down",label:"sort-amount-down"},{value:"fa fa-sort-amount-up",label:"sort-amount-up"},{value:"fa fa-sort-down",label:"sort-down"},{value:"fa fa-sort-numeric-down",label:"sort-numeric-down"},{value:"fa fa-sort-numeric-up",label:"sort-numeric-up"},{value:"fa fa-sort-up",label:"sort-up"},{value:"fa fa-soundcloud",label:"soundcloud"},{value:"fa fa-space-shuttle",label:"space-shuttle"},{value:"fa fa-speakap",label:"speakap"},{value:"fa fa-spinner",label:"spinner"},{value:"fa fa-spotify",label:"spotify"},{value:"fa fa-square",label:"square"},{value:"fa fa-square-full",label:"square-full"},{value:"fa fa-stack-exchange",label:"stack-exchange"},{value:"fa fa-stack-overflow",label:"stack-overflow"},{value:"fa fa-star",label:"star"},{value:"fa fa-star-half",label:"star-half"},{value:"fa fa-staylinked",label:"staylinked"},{value:"fa fa-steam",label:"steam"},{value:"fa fa-steam-square",label:"steam-square"},{value:"fa fa-steam-symbol",label:"steam-symbol"},{value:"fa fa-step-backward",label:"step-backward"},{value:"fa fa-step-forward",label:"step-forward"},{value:"fa fa-stethoscope",label:"stethoscope"},{value:"fa fa-sticker-mule",label:"sticker-mule"},{value:"fa fa-sticky-note",label:"sticky-note"},{value:"fa fa-stop",label:"stop"},{value:"fa fa-stop-circle",label:"stop-circle"},{value:"fa fa-stopwatch",label:"stopwatch"},{value:"fa fa-strava",label:"strava"},{value:"fa fa-street-view",label:"street-view"},{value:"fa fa-strikethrough",label:"strikethrough"},{value:"fa fa-stripe",label:"stripe"},{value:"fa fa-stripe-s",label:"stripe-s"},{value:"fa fa-studiovinari",label:"studiovinari"},{value:"fa fa-stumbleupon",label:"stumbleupon"},{value:"fa fa-stumbleupon-circle",label:"stumbleupon-circle"},{value:"fa fa-subscript",label:"subscript"},{value:"fa fa-subway",label:"subway"},{value:"fa fa-suitcase",label:"suitcase"},{value:"fa fa-sun",label:"sun"},{value:"fa fa-superpowers",label:"superpowers"},{value:"fa fa-superscript",label:"superscript"},{value:"fa fa-supple",label:"supple"},{value:"fa fa-sync",label:"sync"},{value:"fa fa-sync-alt",label:"sync-alt"},{value:"fa fa-syringe",label:"syringe"},{value:"fa fa-table",label:"table"},{value:"fa fa-table-tennis",label:"table-tennis"},{value:"fa fa-tablet",label:"tablet"},{value:"fa fa-tablet-alt",label:"tablet-alt"},{value:"fa fa-tablets",label:"tablets"},{value:"fa fa-tachometer-alt",label:"tachometer-alt"},{value:"fa fa-tag",label:"tag"},{value:"fa fa-tags",label:"tags"},{value:"fa fa-tape",label:"tape"},{value:"fa fa-tasks",label:"tasks"},{value:"fa fa-taxi",label:"taxi"},{value:"fa fa-telegram",label:"telegram"},{value:"fa fa-telegram-plane",label:"telegram-plane"},{value:"fa fa-tencent-weibo",label:"tencent-weibo"},{value:"fa fa-terminal",label:"terminal"},{value:"fa fa-text-height",label:"text-height"},{value:"fa fa-text-width",label:"text-width"},{value:"fa fa-th",label:"th"},{value:"fa fa-th-large",label:"th-large"},{value:"fa fa-th-list",label:"th-list"},{value:"fa fa-themeisle",label:"themeisle"},{value:"fa fa-thermometer",label:"thermometer"},{value:"fa fa-thermometer-empty",label:"thermometer-empty"},{value:"fa fa-thermometer-full",label:"thermometer-full"},{value:"fa fa-thermometer-half",label:"thermometer-half"},{value:"fa fa-thermometer-quarter",label:"thermometer-quarter"},{value:"fa fa-thermometer-three-quarters",label:"thermometer-three-quarters"},{value:"fa fa-thumbs-down",label:"thumbs-down"},{value:"fa fa-thumbs-up",label:"thumbs-up"},{value:"fa fa-thumbtack",label:"thumbtack"},{value:"fa fa-ticket-alt",label:"ticket-alt"},{value:"fa fa-times",label:"times"},{value:"fa fa-times-circle",label:"times-circle"},{value:"fa fa-tint",label:"tint"},{value:"fa fa-toggle-off",label:"toggle-off"},{value:"fa fa-toggle-on",label:"toggle-on"},{value:"fa fa-trademark",label:"trademark"},{value:"fa fa-train",label:"train"},{value:"fa fa-transgender",label:"transgender"},{value:"fa fa-transgender-alt",label:"transgender-alt"},{value:"fa fa-trash",label:"trash"},{value:"fa fa-trash-alt",label:"trash-alt"},{value:"fa fa-tree",label:"tree"},{value:"fa fa-trello",label:"trello"},{value:"fa fa-tripadvisor",label:"tripadvisor"},{value:"fa fa-trophy",label:"trophy"},{value:"fa fa-truck",label:"truck"},{value:"fa fa-truck-loading",label:"truck-loading"},{value:"fa fa-truck-moving",label:"truck-moving"},{value:"fa fa-tty",label:"tty"},{value:"fa fa-tumblr",label:"tumblr"},{value:"fa fa-tumblr-square",label:"tumblr-square"},{value:"fa fa-tv",label:"tv"},{value:"fa fa-twitch",label:"twitch"},{value:"fa fa-twitter",label:"twitter"},{value:"fa fa-twitter-square",label:"twitter-square"},{value:"fa fa-typo3",label:"typo3"},{value:"fa fa-uber",label:"uber"},{value:"fa fa-uikit",label:"uikit"},{value:"fa fa-umbrella",label:"umbrella"},{value:"fa fa-underline",label:"underline"},{value:"fa fa-undo",label:"undo"},{value:"fa fa-undo-alt",label:"undo-alt"},{value:"fa fa-uniregistry",label:"uniregistry"},{value:"fa fa-universal-access",label:"universal-access"},{value:"fa fa-university",label:"university"},{value:"fa fa-unlink",label:"unlink"},{value:"fa fa-unlock",label:"unlock"},{value:"fa fa-unlock-alt",label:"unlock-alt"},{value:"fa fa-untappd",label:"untappd"},{value:"fa fa-upload",label:"upload"},{value:"fa fa-usb",label:"usb"},{value:"fa fa-user",label:"user"},{value:"fa fa-user-circle",label:"user-circle"},{value:"fa fa-user-md",label:"user-md"},{value:"fa fa-user-plus",label:"user-plus"},{value:"fa fa-user-secret",label:"user-secret"},{value:"fa fa-user-times",label:"user-times"},{value:"fa fa-users",label:"users"},{value:"fa fa-ussunnah",label:"ussunnah"},{value:"fa fa-utensil-spoon",label:"utensil-spoon"},{value:"fa fa-utensils",label:"utensils"},{value:"fa fa-vaadin",label:"vaadin"},{value:"fa fa-venus",label:"venus"},{value:"fa fa-venus-double",label:"venus-double"},{value:"fa fa-venus-mars",label:"venus-mars"},{value:"fa fa-viacoin",label:"viacoin"},{value:"fa fa-viadeo",label:"viadeo"},{value:"fa fa-viadeo-square",label:"viadeo-square"},{value:"fa fa-vial",label:"vial"},{value:"fa fa-vials",label:"vials"},{value:"fa fa-viber",label:"viber"},{value:"fa fa-video",label:"video"},{value:"fa fa-video-slash",label:"video-slash"},{value:"fa fa-vimeo",label:"vimeo"},{value:"fa fa-vimeo-square",label:"vimeo-square"},{value:"fa fa-vimeo-v",label:"vimeo-v"},{value:"fa fa-vine",label:"vine"},{value:"fa fa-vk",label:"vk"},{value:"fa fa-vnv",label:"vnv"},{value:"fa fa-volleyball-ball",label:"volleyball-ball"},{value:"fa fa-volume-down",label:"volume-down"},{value:"fa fa-volume-off",label:"volume-off"},{value:"fa fa-volume-up",label:"volume-up"},{value:"fa fa-vuejs",label:"vuejs"},{value:"fa fa-warehouse",label:"warehouse"},{value:"fa fa-weibo",label:"weibo"},{value:"fa fa-weight",label:"weight"},{value:"fa fa-weixin",label:"weixin"},{value:"fa fa-whatsapp",label:"whatsapp"},{value:"fa fa-whatsapp-square",label:"whatsapp-square"},{value:"fa fa-wheelchair",label:"wheelchair"},{value:"fa fa-whmcs",label:"whmcs"},{value:"fa fa-wifi",label:"wifi"},{value:"fa fa-wikipedia-w",label:"wikipedia-w"},{value:"fa fa-window-close",label:"window-close"},{value:"fa fa-window-maximize",label:"window-maximize"},{value:"fa fa-window-minimize",label:"window-minimize"},{value:"fa fa-window-restore",label:"window-restore"},{value:"fa fa-windows",label:"windows"},{value:"fa fa-wine-glass",label:"wine-glass"},{value:"fa fa-won-sign",label:"won-sign"},{value:"fa fa-wordpress",label:"wordpress"},{value:"fa fa-wordpress-simple",label:"wordpress-simple"},{value:"fa fa-wpbeginner",label:"wpbeginner"},{value:"fa fa-wpexplorer",label:"wpexplorer"},{value:"fa fa-wpforms",label:"wpforms"},{value:"fa fa-wrench",label:"wrench"},{value:"fa fa-x-ray",label:"x-ray"},{value:"fa fa-xbox",label:"xbox"},{value:"fa fa-xing",label:"xing"},{value:"fa fa-xing-square",label:"xing-square"},{value:"fa fa-y-combinator",label:"y-combinator"},{value:"fa fa-yahoo",label:"yahoo"},{value:"fa fa-yandex",label:"yandex"},{value:"fa fa-yandex-international",label:"yandex-international"},{value:"fa fa-yelp",label:"yelp"},{value:"fa fa-yen-sign",label:"yen-sign"},{value:"fa fa-yoast",label:"yoast"},{value:"fa fa-youtube",label:"youtube"},{value:"fa fa-youtube-square",label:"youtube-square"}],this.dataSources=[]}ngOnInit(){this.loadIndex(),this.loadSources()}create(){this.swal.prompt("Widget Name").subscribe(e=>{this.api.post("widgetFactory",{name:e}).subscribe(t=>{200===t.status&&(this.widgetList.push({id:t.data,name:e}),this.selectedItem=t.data)},e=>{})})}loadIndex(){this.api.get("widgetFactory").subscribe(e=>{this.widgetList=e.data})}loadSources(){this.api.get("widgetData/sources").subscribe(e=>{200==e.status&&(e.data.map(e=>{this.dataSources.push({value:e,label:e})}),this.options.internal_data_source=this.dataSources)})}loadWidget(e){this.api.get("widgetFactory/"+e).subscribe(e=>{200===e.status&&(this.widgetData=e.data,this.dynamicForm.setFormValue(this.widgetData),this.dynamicForm.options.icon=this.iconsList,this.formChanged(this.widgetData))})}formChanged(e){this.widgetData=e,"external"===e.data_source&&(this.dynamicForm.hideField("internal_data_source"),this.dynamicForm.showField("external_data_source")),"internal"===e.data_source&&(this.dynamicForm.showField("internal_data_source"),this.dynamicForm.hideField("external_data_source"))}save(){this.api.put("widgetFactory/"+this.selectedItem,this.widgetData).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}destroy(){const e=this.selectedItem;!e||e<0||this.swal.confirm({title:"Delete Widget",type:"warning",text:"Delete Selected Widget ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("widgetFactory/"+e).subscribe(e=>{200===e.status&&(this.toastr.success(e.message),this.selectedItem=null,this.loadIndex())})}).bind(this)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(yi),n.Y36(Ge),n.Y36(h),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-widget-factory"]],viewQuery:function(e,t){if(1&e&&n.Gf(ql,5),2&e){let e;n.iGM(e=n.CRH())&&(t.dynamicForm=e.first)}},decls:28,vars:5,consts:[[1,"row"],[1,"col-6"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"fa","fa-trash"],[1,"row",3,"hidden"],[1,"col"],["name","widgetForm",3,"formConfig","options","formChanged","submit",4,"ngIf"],[1,"fa","fa-eye"],[3,"widget"],[3,"value"],["name","widgetForm",3,"formConfig","options","formChanged","submit"],["widgetForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i",4),n._uU(5," Widget Factory "),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div",0),n.TgZ(8,"div",6),n.TgZ(9,"select",7),n.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.loadWidget(t.selectedItem)}),n.YNc(10,Tl,2,2,"option",8),n.qZA(),n.qZA(),n.TgZ(11,"div",6),n.TgZ(12,"div",9),n.TgZ(13,"div",10),n.TgZ(14,"button",11),n.NdJ("click",function(){return t.create()}),n._UZ(15,"i",12),n.qZA(),n.TgZ(16,"button",11),n.NdJ("click",function(){return t.destroy()}),n._UZ(17,"i",13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(18,"div",14),n.TgZ(19,"div",15),n.YNc(20,Cl,2,2,"dynamic-form",16),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",1),n.TgZ(22,"div",2),n.TgZ(23,"div",3),n._UZ(24,"i",17),n._uU(25," Preview "),n.qZA(),n.TgZ(26,"div",5),n._UZ(27,"app-dashboard-widget",18),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(9),n.Q6J("ngModel",t.selectedItem),n.xp6(1),n.Q6J("ngForOf",t.widgetList),n.xp6(8),n.Q6J("hidden",!t.selectedItem),n.xp6(2),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(7),n.Q6J("widget",t.widgetData))},directives:[Z.EJ,Z.JJ,Z.On,J.sg,J.O5,ce,Z.YN,Z.Kr,vi],styles:[""]}),e})(),Ul=(()=>{class e{constructor(e,t,a){this.api=e,this.tr=t,this.router=a,this.valueData="...",this.valueFontSize=14}ngOnInit(){}ngOnChanges(){""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(()=>this.load(),1e3*this.data.interval))}load(){let e="internal";"external"===this.data.data_source&&(e="external"),this.loadData(e)}loadData(e){let t="";"internal"===e&&(t="widgetData/internal/"+this.data.internal_data_source),"external"===e&&(t="widgetData/external/"+this.data.id),this.api.get(t).subscribe(e=>{this.valueData=e&&200===e.status?e.data:"N/A";const t=this.valueData.toString();t.length<8&&(this.valueFontSize=20),t.length<5&&(this.valueFontSize=25)},()=>{this.valueData="N/A"})}loadInternal(){this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(e=>{this.valueData=e&&200==e.status?e.data:"N/A";let t=this.valueData.toString();t.length<8&&(this.valueFontSize=20),t.length<5&&(this.valueFontSize=25)},()=>{this.valueData="N/A"})}ngOnDestroy(){clearInterval(this.timerHook)}onWidgetClicked(){this.data.url&&this.data.url.length>10&&(window.location.href=this.data.url)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M),n.Y36(p.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-simple-widget"]],inputs:{data:"data"},features:[n.TTD],decls:12,vars:11,consts:[[3,"click"],[1,"card-header"],["data-i18n","dashboard.pageviews",1,"text-white","text-uppercase","h5"],["data-i18n","dashboard.hourlystats",1,"text-white","h7"],[1,"card-body","d-flex","bg-opacity-100"],[2,"opacity","0.2","color","white","position","absolute","right","10px","top","30%"],[2,"font-size","60px"],[1,"my-auto","w-100","text-white"],[1,"counter"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return t.onWidgetClicked()}),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"div",4),n.TgZ(7,"div",5),n._UZ(8,"i",6),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"span",8),n._uU(11),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Gre("x-card ",t.data.color,""),n.xp6(3),n.Oqu(t.tr.translate(t.data.title)),n.xp6(2),n.hij("",t.tr.translate(t.data.description),"\xa0"),n.xp6(3),n.Tol(t.data.icon),n.xp6(2),n.Udp("font-size",t.valueFontSize,"px"),n.xp6(1),n.Oqu(t.valueData))},styles:[".x-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;box-sizing:border-box;word-wrap:break-word;background-color:#fff;background-clip:border-box;border-radius:.5rem;box-shadow:0 0 1px rgba(80,90,100,.4);min-height:100%!important}.bg-octonary[_ngcontent-%COMP%]{background-color:#4b64a6!important}.bg-quaternary[_ngcontent-%COMP%]{background-color:#ff6b89!important}.bg-quinary[_ngcontent-%COMP%]{background-color:#c774ff!important}.bg-denary[_ngcontent-%COMP%]{background-color:#59b3a6!important}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.bg-opacity-100[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.d-flex[_ngcontent-%COMP%]{display:flex!important}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.5rem}"]}),e})(),Ml=(()=>{class e{constructor(e){this.api=e,this.valueData={value:"...",percentage:0}}ngOnInit(){}ngOnChanges(){""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(()=>this.load(),1e3*this.data.interval))}load(){"internal"===this.data.data_source&&this.loadInternal()}loadInternal(){this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(e=>{this.valueData=200==e.status?e.data:{value:"N/A",percentage:0}},()=>{this.valueData={value:"N/A",percentage:0}})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-percentage-widget"]],inputs:{data:"data"},features:[n.TTD],decls:10,vars:10,consts:[[1,"card-body"],[1,"h1","text-muted","text-right","mb-4"],[1,"h4","mb-0"],[1,"text-muted","text-uppercase","font-weight-bold"],[1,"progress","progress-white","progress-xs","mt-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._UZ(3,"i"),n.qZA(),n.TgZ(4,"div",2),n._uU(5),n.qZA(),n.TgZ(6,"small",3),n._uU(7),n.qZA(),n.TgZ(8,"div",4),n._UZ(9,"div",5),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Gre("card text-white ",t.data.color,""),n.xp6(3),n.Tol(t.data.icon),n.xp6(2),n.Oqu(t.valueData.value||"Incompatible Data"),n.xp6(2),n.Oqu(t.data.title),n.xp6(2),n.Udp("width",t.valueData.percentage||0,"%"))},styles:[""]}),e})();var Fl=a(35415);let Jl=(()=>{class e{constructor(e){this.api=e,this.valueData={value:"...",percentage:0};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a="gauge_",i=0;i<5;i++)a+=t.charAt(Math.floor(Math.random()*t.length));this.element_id=a}ngOnInit(){}ngOnChanges(){""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(()=>this.load(),1e3*this.data.interval))}initGauge(){let e=document.getElementById(this.element_id);this.gauge=new Fl.Gauge(e).setOptions({angle:.15,lineWidth:.44,pointer:{length:.9,strokeWidth:.035},colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0"}),this.gauge.maxValue=100,this.gauge.setMinValue(0),this.gauge.set(0)}load(){"internal"===this.data.data_source&&this.loadInternal()}loadInternal(){this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(e=>{200==e.status?(this.valueData=e.data,this.gauge.set(this.valueData.percentage)):this.valueData={value:"N/A",percentage:0}},()=>{this.valueData={value:"N/A",percentage:0}})}ngOnDestroy(){clearInterval(this.timerHook)}ngAfterViewInit(){this.initGauge()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-gauge-widget"]],inputs:{data:"data"},features:[n.TTD],decls:7,vars:5,consts:[[1,"card-header"],["data-i18n","dashboard.pageviews",1,"text-white","text-uppercase","h5"],[1,"card-body","d-flex","bg-opacity-100"],[1,"gaugejs-wrap",2,"width","100%","text-align","center"],["height","60","width","90",1,"gaugejs",3,"id"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n._uU(3),n.qZA(),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"div",3),n._UZ(6,"canvas",4),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Gre("x-card ",t.data.color,""),n.xp6(3),n.hij(" ",t.data.title," "),n.xp6(3),n.Q6J("id",t.element_id))},styles:[".x-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border-radius:.5rem;box-shadow:0 0 1px rgba(80,90,100,.4);margin-bottom:3rem}.bg-octonary[_ngcontent-%COMP%]{background-color:#4b64a6!important}.bg-quaternary[_ngcontent-%COMP%]{background-color:#ff6b89!important}.bg-quinary[_ngcontent-%COMP%]{background-color:#c774ff!important}.bg-denary[_ngcontent-%COMP%]{background-color:#59b3a6!important}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.bg-opacity-100[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.d-flex[_ngcontent-%COMP%]{display:flex!important}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.6rem!important}"]}),e})(),Ol=(()=>{class e{constructor(e){this.api=e,this.valueData={value:"...",percentage:0}}ngOnInit(){}ngOnChanges(){""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(()=>this.load(),1e3*this.data.interval))}load(){"internal"===this.data.data_source&&this.loadInternal()}loadInternal(){this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(e=>{this.valueData=200==e.status?e.data:{value:"N/A",percentage:0}},()=>{this.valueData={value:"N/A",percentage:0}})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-data-list-widget"]],inputs:{data:"data"},features:[n.TTD],decls:21,vars:4,consts:[[1,"card-header","font-weight-bold"],[1,"card-body","py-3","pb-0"],[1,"list-unstyled","mb-0"],[1,"py-2"],[1,"font-weight-bold","float-right"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n._uU(2),n.qZA(),n.TgZ(3,"div",1),n.TgZ(4,"ul",2),n.TgZ(5,"li",3),n._uU(6,"Overall "),n.TgZ(7,"span",4),n._uU(8,"987.123"),n.qZA(),n.qZA(),n.TgZ(9,"li",3),n._uU(10,"This week "),n.TgZ(11,"span",4),n._uU(12,"9.873"),n.qZA(),n.qZA(),n.TgZ(13,"li",3),n._uU(14,"Yestarday "),n.TgZ(15,"span",4),n._uU(16,"851"),n.qZA(),n.qZA(),n.TgZ(17,"li",3),n._uU(18,"Today "),n.TgZ(19,"span",4),n._uU(20,"184"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Gre("card text-white ",t.data.color,""),n.xp6(2),n.Oqu(t.data.title))},styles:[""]}),e})();function Nl(e,t){if(1&e&&(n.TgZ(0,"option",13),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Il(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"app-dashboard-widget",28),n.NdJ("click",function(){const t=n.CHM(e).$implicit,a=n.oxw().$implicit;return n.oxw(2).removeWidget(a.id,t.local_id)}),n.qZA()}if(2&e){const e=t.$implicit;n.Gre("col-",e.width," widget-delete-option"),n.Q6J("widget",e)}}function Yl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",25),n.NdJ("onDrop",function(t){const a=n.CHM(e).$implicit;return n.oxw(2).widgetDropped(t,a.id)}),n.TgZ(1,"div",26),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).removeRow(t.id)}),n._UZ(2,"i",11),n._uU(3," Delete Row "),n.qZA(),n.YNc(4,Il,1,4,"app-dashboard-widget",27),n.qZA()}if(2&e){const e=t.$implicit;n.Q6J("id",e.id),n.xp6(1),n.Q6J("hidden",e.widgets.length>0),n.xp6(3),n.Q6J("ngForOf",e.widgets)}}function Ql(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",29),n.NdJ("onDragStart",function(t){const a=n.CHM(e).$implicit;return n.oxw(2).dragStarted(t,a)}),n._UZ(1,"i"),n.TgZ(2,"div",30),n._uU(3),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw(2);n.Gre("simple-widget-preview ",e.color,""),n.s9C("id",e.title),n.xp6(1),n.Gre("preview-icon ",e.icon,""),n.xp6(2),n.Oqu(a.tr.translate(e.title))}}function Sl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14),n.TgZ(1,"div",15),n._UZ(2,"i",16),n._uU(3," Dashboard Designer "),n.qZA(),n.TgZ(4,"div",17),n.TgZ(5,"div",0),n.TgZ(6,"div",18),n.YNc(7,Yl,5,3,"div",19),n.TgZ(8,"div",20),n.NdJ("click",function(){return n.CHM(e),n.oxw().addRow()}),n.TgZ(9,"div",21),n._UZ(10,"i",22),n._uU(11," Add Row "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",23),n.YNc(13,Ql,4,8,"div",24),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(7),n.Q6J("ngForOf",e.rows),n.xp6(6),n.Q6J("ngForOf",e.widget_list)}}class Pl{constructor(e,t,a,i,n){this.api=e,this.helper=t,this.toastr=a,this.swal=i,this.tr=n,this.widget_list=[],this.rows=[],this.dashboardList=[],this.selectedItem=-1,this.draggedWidget=null}ngOnInit(){this.loadIndex(),this.loadWidgetList(),this.addRow()}loadWidgetList(){this.api.get("widgetFactory").subscribe(e=>{200===e.status&&(this.widget_list=e.data)})}getWidgetById(e){for(let t of this.widget_list)if(t.id==e){let e={};return e=Object.assign(e,t),e.local_id=this.helper.guid(),e}}addRow(){let e={id:this.helper.guid(),order:this.rows.length+1,widgets:[]};this.rows.push(e)}_rowWidgetsLength(e){let t=0;for(let a=0;a<this.rows.length;a++)if(this.rows[a].id==e)for(let e of this.rows[a].widgets)t+=parseInt(e.width);return t}widgetDropped(e,t){if(console.log(e),this._rowWidgetsLength(t)+parseInt(this.draggedWidget.width)>12)this.toastr.warning(this.tr.translate("msg_row_is_full"));else for(let a=0;a<this.rows.length;a++)if(this.rows[a].id==t){let e={};e=Object.assign(e,this.draggedWidget),e.local_id=this.helper.guid(),this.rows[a].widgets.push(e)}}removeWidget(e,t){for(let a=0;a<this.rows.length;a++)if(this.rows[a].id==e)for(let e=0;e<this.rows[a].widgets.length;e++)this.rows[a].widgets[e].local_id==t&&this.rows[a].widgets.splice(e,1)}removeRow(e){for(let t=0;t<this.rows.length;t++)this.rows[t].id==e&&this.rows.splice(t,1)}create(){this.swal.prompt("Dashboard Name").subscribe(e=>{this.api.post("dashboardManager",{name:e}).subscribe(t=>{200==t.status&&(this.dashboardList.push({id:t.data,name:e}),this.selectedItem=t.data,this.rows=[])},e=>{})})}loadDashboard(e){this.blockUI.start(),this.api.get("dashboardManager/"+e).subscribe(e=>{if(this.blockUI.stop(),200==e.status){this.rows=[];let t=e.data;for(let e of t){let t={id:e.row_id,order:e.row_order,widgets:[]};for(let a of e.widgets)t.widgets.push(this.getWidgetById(a));this.rows.push(t)}}})}loadIndex(){this.api.get("dashboardManager").subscribe(e=>{this.dashboardList=e.data})}save(){this.api.put("dashboardManager/"+this.selectedItem,this.rows).subscribe(e=>{200==e.status&&this.toastr.success(this.tr.translate(e.message))})}destroy(){const e=this.selectedItem;!e||e<0||this.swal.confirm({title:"Delete Dashboard",type:"warning",text:"Delete Selected Dashboard ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("dashboardManager/"+e).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.selectedItem=-1,this.loadIndex())})})}dragStarted(e,t){this.draggedWidget=t}}Pl.\u0275fac=function(e){return new(e||Pl)(n.Y36(h),n.Y36(m),n.Y36(g._W),n.Y36(Ge),n.Y36(M))},Pl.\u0275cmp=n.Xpm({type:Pl,selectors:[["app-dashboard-manager"]],decls:17,vars:5,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"fa","fa-trash"],["class","card",4,"ngIf"],[3,"value"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-eye"],[1,"card-body"],[1,"col",2,"zoom","60%"],["class","row widget-row","pDroppable","row",3,"id","onDrop",4,"ngFor","ngForOf"],[1,"row",3,"click"],[1,"col-12","virtual-row"],[1,"fa","fa-plus-circle"],[1,"col-3","widget-list"],["pDraggable","row",3,"class","id","onDragStart",4,"ngFor","ngForOf"],["pDroppable","row",1,"row","widget-row",3,"id","onDrop"],[1,"col-12","delete-row",3,"hidden","click"],[3,"widget","class","click",4,"ngFor","ngForOf"],[3,"widget","click"],["pDraggable","row",3,"id","onDragStart"],[2,"margin-left","10px","margin-top","10px","float","left"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.loadDashboard(t.selectedItem)}),n.TgZ(3,"option",3),n._uU(4,"Select Dashboard"),n.qZA(),n.YNc(5,Nl,2,2,"option",4),n.qZA(),n.qZA(),n.TgZ(6,"div",1),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n.NdJ("click",function(){return t.create()}),n._UZ(10,"i",8),n.qZA(),n.TgZ(11,"button",9),n.NdJ("click",function(){return t.save()}),n._UZ(12,"i",10),n.qZA(),n.TgZ(13,"button",7),n.NdJ("click",function(){return t.destroy()}),n._UZ(14,"i",11),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(15,"hr"),n.YNc(16,Sl,14,2,"div",12)),2&e&&(n.xp6(2),n.Q6J("ngModel",t.selectedItem),n.xp6(1),n.Q6J("value",-1),n.xp6(2),n.Q6J("ngForOf",t.dashboardList),n.xp6(6),n.Q6J("hidden",t.selectedItem<0),n.xp6(5),n.Q6J("ngIf",t.selectedItem>=0))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,J.O5,Lr.bK,ce,Lr._l],styles:[".widget-list[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto;border-left:1px solid grey;color:#fff}.simple-widget-preview[_ngcontent-%COMP%]{border:1px solid grey;height:50px;width:100%;margin-bottom:5px!important;padding:5px;box-sizing:border-box;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.simple-widget-preview[_ngcontent-%COMP%]:hover{filter:brightness(120%)}.preview-icon[_ngcontent-%COMP%]{padding-top:10px;margin-left:10px;font-size:18px;float:left}.virtual-row[_ngcontent-%COMP%]{border:1px dashed #cebfc4;height:100px;text-align:center;vertical-align:middle;line-height:100px;font-size:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#3e515b;cursor:pointer}.delete-row[_ngcontent-%COMP%]{border:1px dashed #00aced;height:100px;text-align:center;vertical-align:middle;background:#f8f8f8;line-height:100px;font-size:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#3e515b;cursor:pointer;opacity:.5}.widget-row[_ngcontent-%COMP%]{min-height:100px;background:#f8f8f8;border:1px dashed #b9dcd5;text-align:center;color:#3e515b;padding-top:20px;box-sizing:border-box}.widget-delete-option[_ngcontent-%COMP%]:hover{opacity:.8;filter:brightness(110%)}"]}),(0,c.gn)([(0,u.bH)()],Pl.prototype,"blockUI",void 0);const Dl=["myForm"];function Hl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let Rl=(()=>{class e{constructor(e,t,a,i){this.formsLoader=e,this.api=t,this.toastr=a,this.trs=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.countries_list=[],this.currency_list=[],this.language_list=[],this.loadResources(),this.formFields=this.formsLoader.getForm("settings_general"),this.form_config.fields=this.formFields,this.load()}loadResources(){this.api.get("resources/countries").subscribe(e=>{e.data.map(e=>{this.countries_list.push({value:e.code,label:e.name})}),this.options.gnrl_country=this.countries_list}),this.api.get("resources/currencies").subscribe(e=>{e.data.map(e=>{this.currency_list.push({value:e.code,label:e.name})}),this.options.gnrl_currency=this.currency_list}),this.api.get("resources/languages").subscribe(e=>{200==e.status&&(e.data.map(e=>{this.language_list.push({value:e.id,label:e.name})}),this.options.gnrl_language=this.language_list)}),this.api.get("resources/timezones").subscribe(e=>{if(200==e.status){let t=[];e.data.map(e=>{t.push({value:e.value,label:e.name})}),this.options.gnrl_timezone=t}})}save(e){this.api.post("settings",e.value).subscribe(e=>{200==e.status&&this.toastr.success(this.trs.translate(e.message))})}load(){this.api.get("settings/gnrl_").subscribe(e=>{200==e.status&&this.myForm.setFormValue(e.data)})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(yi),n.Y36(h),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-general-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(Dl,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," General Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Hl,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();function Vl(e,t){1&e&&n._UZ(0,"i",23)}function Ll(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"i",24),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().toggleNetwork(t.id)}),n.qZA()}}function El(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"i",25),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().toggleNetwork(t.id)}),n.qZA()}}function Kl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"input",26),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).edit_zone.name=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.edit_zone.name)}}function Bl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"input",27),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).edit_zone.network=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.edit_zone.network)}}function zl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"input",28),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).edit_zone.netmask=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.edit_zone.netmask)}}function jl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td",29),n.TgZ(1,"input",30),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).edit_zone.ratio=t}),n.qZA(),n._uU(2),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(1),n.Q6J("ngModel",e.edit_zone.ratio),n.xp6(1),n.hij(" ",e.edit_zone.ratio,"% ")}}function Gl(e,t){1&e&&n._UZ(0,"td")}function Wl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td"),n.TgZ(1,"button",31),n.NdJ("click",function(){n.CHM(e);const t=n.oxw(2);return t.update(t.edit_zone)}),n._UZ(2,"i",32),n._uU(3," Update"),n.qZA(),n.qZA()}}function $l(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",16),n._uU(2),n.qZA(),n.TgZ(3,"td",16),n._uU(4),n.qZA(),n.TgZ(5,"td",16),n._uU(6),n.qZA(),n.TgZ(7,"td",16),n._uU(8),n.qZA(),n.TgZ(9,"td",16),n.YNc(10,Vl,1,0,"i",17),n.qZA(),n.TgZ(11,"td",16),n.TgZ(12,"i",18),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().edit(t)}),n.qZA(),n._uU(13,"\xa0\xa0 "),n.YNc(14,Ll,1,0,"i",19),n.YNc(15,El,1,0,"i",20),n._uU(16," \xa0\xa0 "),n.TgZ(17,"i",21),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().destroy(t.id)}),n.qZA(),n.qZA(),n.YNc(18,Kl,2,1,"td",15),n.YNc(19,Bl,2,1,"td",15),n.YNc(20,zl,2,1,"td",15),n.YNc(21,jl,3,2,"td",22),n.YNc(22,Gl,1,0,"td",15),n.YNc(23,Wl,4,0,"td",15),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(1),n.Oqu(e.name),n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(1),n.Oqu(e.network),n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(1),n.Oqu(e.netmask),n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(1),n.hij("",e.ratio,"%"),n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",1==e.enabled),n.xp6(1),n.Q6J("hidden",a.edit_zone.id==e.id),n.xp6(3),n.Q6J("ngIf",1==e.enabled),n.xp6(1),n.Q6J("ngIf",0==e.enabled),n.xp6(3),n.Q6J("ngIf",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",a.edit_zone.id==e.id),n.xp6(1),n.Q6J("ngIf",a.edit_zone.id==e.id)}}function Xl(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n.TgZ(2,"input",26),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_zone.name=t}),n.qZA(),n.qZA(),n.TgZ(3,"td"),n.TgZ(4,"input",27),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_zone.network=t}),n.qZA(),n.qZA(),n.TgZ(5,"td"),n.TgZ(6,"input",28),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_zone.netmask=t}),n.qZA(),n.qZA(),n.TgZ(7,"td",29),n.TgZ(8,"input",30),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_zone.ratio=t}),n.qZA(),n._uU(9),n.qZA(),n._UZ(10,"td"),n.TgZ(11,"td"),n.TgZ(12,"button",33),n.NdJ("click",function(){return n.CHM(e),n.oxw().save()}),n._UZ(13,"i",32),n._uU(14," Save"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngModel",e.new_zone.name),n.xp6(2),n.Q6J("ngModel",e.new_zone.network),n.xp6(2),n.Q6J("ngModel",e.new_zone.netmask),n.xp6(2),n.Q6J("ngModel",e.new_zone.ratio),n.xp6(1),n.hij(" ",e.new_zone.ratio,"% ")}}class ec{constructor(e,t,a,i){this.api=e,this.toastr=t,this.swal=a,this.trs=i,this.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0},this.zones=[],this.edit_zone={id:null},this.freezone_enabled=!1,this.load(),this.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0}}ngOnInit(){}load(){this.api.get("settings/freezone_").subscribe(e=>{200===e.status&&(this.freezone_enabled="1"==e.data.freezone_enabled)}),this.api.get("freezone").subscribe(e=>{200==e.status&&(this.zones=e.data)})}toggleStatus(){let e={freezone_enabled:"1"};this.freezone_enabled||(e.freezone_enabled="0"),this.api.post("settings",e).subscribe(e=>{})}save(){this.blockUI.start(),this.api.post("freezone",this.new_zone).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(this.trs.translate(e.message)),this.load(),this.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0})})}toggleNetwork(e){let t=null,a={enabled:0};for(let i of this.zones)i.id==e&&(t=i);a.enabled=0==t.enabled?1:0,this.blockUI.start(),this.api.put("freezone/"+t.id.toString(),a).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(this.trs.translate(e.message)),this.load())})}destroy(e){this.swal.confirm({title:"Delete Network",type:"warning",text:"Delete Selected Network ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start(),this.api.delete("freezone/"+e.toString()).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(this.trs.translate(e.message)),this.load())})})}edit(e){this.edit_zone=e}update(e){this.api.put("freezone/"+e.id.toString(),e).subscribe(e=>{this.edit_zone={id:null},200==e.status&&this.toastr.success(this.trs.translate(e.message)),this.load()})}}function tc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",29),n._UZ(1,"input",30),n.TgZ(2,"span",25),n._uU(3,"\xa0=\xa0"),n.qZA(),n._UZ(4,"input",30),n.TgZ(5,"button",27),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).removePostParameter(t.key)}),n._UZ(6,"i",31),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(1),n.Q6J("value",e.key),n.xp6(3),n.Q6J("value",e.value)}}function ac(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"label",6),n.TgZ(2,"span"),n._uU(3,"POST Parameters"),n.qZA(),n.qZA(),n.TgZ(4,"div",7),n.TgZ(5,"div"),n.YNc(6,tc,7,2,"div",22),n.TgZ(7,"div",23),n.TgZ(8,"input",24),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_post_params.key=t}),n.qZA(),n.TgZ(9,"span",25),n._uU(10,"\xa0=\xa0"),n.qZA(),n.TgZ(11,"input",26),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_post_params.value=t}),n.qZA(),n.TgZ(12,"button",27),n.NdJ("click",function(){return n.CHM(e),n.oxw().addPostParameter()}),n._UZ(13,"i",28),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(6),n.Q6J("ngForOf",e.post_params),n.xp6(2),n.Q6J("ngModel",e.new_post_params.key),n.xp6(3),n.Q6J("ngModel",e.new_post_params.value)}}ec.\u0275fac=function(e){return new(e||ec)(n.Y36(h),n.Y36(g._W),n.Y36(Ge),n.Y36(M))},ec.\u0275cmp=n.Xpm({type:ec,selectors:[["app-freezone-settings"]],decls:35,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-asterisk"],[1,"card-body"],[1,"row"],[1,"col"],[1,"alert","alert-info"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["name","freezone_enabled",3,"id","ngModel","ngModelChange"],[1,"table","table-bordered","table-hover","table-sm"],["width","auto"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"hidden"],["class","fa fa-check",4,"ngIf"],[1,"fa","fa-edit",3,"click"],["class","fa fa-ban","tooltip","Disable",3,"click",4,"ngIf"],["class","fa fa-play-circle","tooltip","Enable",3,"click",4,"ngIf"],["tooltip","Delete",1,"fa","fa-trash",3,"click"],["style","text-align: center",4,"ngIf"],[1,"fa","fa-check"],["tooltip","Disable",1,"fa","fa-ban",3,"click"],["tooltip","Enable",1,"fa","fa-play-circle",3,"click"],["type","text","placeholder","Zone Name","name","zone_name",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","text","placeholder","a.b.c.d","name","zone_network",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","text","placeholder","255.255.255.0","name","zone_netmask",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[2,"text-align","center"],["type","range","placeholder","100%","name","zone_ratio",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Free Zone Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n._uU(8," This feature allows you to exclude some IP ranges from traffic accounting, such as local google traffic or local IPTV service. Enabling it requires enabling Mikrotik IP Accounting service and making it reachable via HTTP. "),n.qZA(),n.TgZ(9,"form",7),n.TgZ(10,"div",8),n.TgZ(11,"label",9),n.TgZ(12,"span"),n._uU(13,"Enable Freezone Traffic"),n.qZA(),n.qZA(),n.TgZ(14,"div",10),n.TgZ(15,"p-inputSwitch",11),n.NdJ("ngModelChange",function(e){return t.freezone_enabled=e})("ngModelChange",function(){return t.toggleStatus()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(16,"br"),n.TgZ(17,"table",12),n.TgZ(18,"thead"),n.TgZ(19,"tr"),n.TgZ(20,"th"),n._uU(21,"Name"),n.qZA(),n.TgZ(22,"th"),n._uU(23,"IP"),n.qZA(),n.TgZ(24,"th"),n._uU(25,"Netmask"),n.qZA(),n.TgZ(26,"th",13),n._uU(27,"Free Ratio(%)"),n.qZA(),n.TgZ(28,"th"),n._uU(29,"Enabled"),n.qZA(),n.TgZ(30,"th"),n._uU(31,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(32,"tbody"),n.YNc(33,$l,24,19,"tr",14),n.YNc(34,Xl,15,5,"tr",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(15),n.Q6J("id","freezone_enabled")("ngModel",t.freezone_enabled),n.xp6(18),n.Q6J("ngForOf",t.zones),n.xp6(1),n.Q6J("ngIf",null==t.edit_zone.id))},directives:[Z._Y,Z.JL,Z.F,Ia.Ql,Z.JJ,Z.On,J.sg,J.O5,Z.Fj,Z.eT],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],ec.prototype,"blockUI",void 0);let ic=(()=>{class e{constructor(e,t,a,i){this.api=e,this.toastr=t,this.trs=a,this.swal=i,this.config={sms_enabled:0,sms_api_url:"",sms_method:0,sms_post_params:null,sms_message_activation:"",sms_message_expiration:""},this.post_params=[],this.new_post_params={key:"",value:""},this.load()}addPostParameter(){this.post_params.push({key:this.new_post_params.key,value:this.new_post_params.value}),this.new_post_params={key:"",value:""}}removePostParameter(e){let t=0,a=null;for(let i of this.post_params)i.key==e&&(a=t),t++;this.post_params.splice(a,1)}ngOnInit(){}save(){let e=this.config;e.sms_post_params=JSON.stringify(this.post_params),this.api.post("settings",e).subscribe(e=>{200==e.status&&this.toastr.success(this.trs.translate(e.message))})}load(){this.api.get("settings/sms_").subscribe(e=>{let t=e.data;this.post_params=JSON.parse(e.data.sms_post_params),this.config=t})}test(){this.swal.prompt("Mobile Number").subscribe(e=>{this.api.post("sms/test",{dst:e}).subscribe(e=>{this.toastr.success(this.trs.translate(e.message))})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(g._W),n.Y36(M),n.Y36(Ge))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sms-settings"]],decls:55,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-mobile"],[1,"card-body"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["name","sms_enabled",3,"id","ngModel","trueValue","falseValue","ngModelChange"],["type","text","id","sms_api","name","sms_api_url",1,"form-control",3,"ngModel","ngModelChange"],[1,"help-block"],["name","method",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["class","form-group row",4,"ngIf"],["name","activation_sms",1,"form-control",3,"ngModel","ngModelChange"],["name","expiration_sms",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-actions","float-left"],["type","button",1,"btn","btn-secondary","form-action-button",3,"click"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],["class","col row",4,"ngFor","ngForOf"],[1,"row","col"],["placeholder","parameter name","name","param",1,"form-control","col",3,"ngModel","ngModelChange"],[1,"col-form-label"],["placeholder","value","name","value",1,"form-control","col",3,"ngModel","ngModelChange"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-plus"],[1,"col","row"],["type","text","disabled","",1,"form-control","col",3,"value"],[1,"fa","fa-minus"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," SMS Configuration "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"form",4),n.TgZ(6,"div",5),n.TgZ(7,"label",6),n.TgZ(8,"span"),n._uU(9,"Enable SMS Service"),n.qZA(),n.qZA(),n.TgZ(10,"div",7),n.TgZ(11,"p-inputSwitch",8),n.NdJ("ngModelChange",function(e){return t.config.sms_enabled=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",5),n.TgZ(13,"label",6),n.TgZ(14,"span"),n._uU(15,"SMS API Url"),n.qZA(),n.qZA(),n.TgZ(16,"div",7),n.TgZ(17,"input",9),n.NdJ("ngModelChange",function(e){return t.config.sms_api_url=e}),n.qZA(),n.TgZ(18,"span",10),n._uU(19),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"div",5),n.TgZ(21,"label",6),n.TgZ(22,"span"),n._uU(23,"API Method"),n.qZA(),n.qZA(),n.TgZ(24,"div",7),n.TgZ(25,"select",11),n.NdJ("ngModelChange",function(e){return t.config.sms_method=e}),n.TgZ(26,"option",12),n._uU(27,"GET"),n.qZA(),n.TgZ(28,"option",13),n._uU(29,"POST"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(30,ac,14,3,"div",14),n.TgZ(31,"div",5),n.TgZ(32,"label",6),n.TgZ(33,"span"),n._uU(34,"Activation SMS"),n.qZA(),n.qZA(),n.TgZ(35,"div",7),n.TgZ(36,"textarea",15),n.NdJ("ngModelChange",function(e){return t.config.sms_message_activation=e}),n.qZA(),n.TgZ(37,"span",10),n._uU(38),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",5),n.TgZ(40,"label",6),n.TgZ(41,"span"),n._uU(42,"Expiration Warning SMS"),n.qZA(),n.qZA(),n.TgZ(43,"div",7),n.TgZ(44,"textarea",16),n.NdJ("ngModelChange",function(e){return t.config.sms_message_expiration=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(45,"div"),n._UZ(46,"hr"),n.TgZ(47,"div",17),n.TgZ(48,"button",18),n.NdJ("click",function(){return t.test()}),n._uU(49,"Test"),n.qZA(),n.qZA(),n.TgZ(50,"div",19),n.TgZ(51,"button",20),n.NdJ("click",function(){return t.save()}),n._uU(52,"Save"),n.qZA(),n.TgZ(53,"button",21),n.NdJ("click",function(){return t.load()}),n._uU(54,"Reset"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(11),n.Q6J("id","sms_enabled")("ngModel",t.config.sms_enabled)("trueValue",1)("falseValue",0),n.xp6(6),n.Q6J("ngModel",t.config.sms_api_url),n.xp6(2),n.AsE("Valid Keys : ","{dst}"," = recipient phone number , ","{text}"," = text message"),n.xp6(6),n.Q6J("ngModel",t.config.sms_method),n.xp6(5),n.Q6J("ngIf",1==t.config.sms_method),n.xp6(6),n.Q6J("ngModel",t.config.sms_message_activation),n.xp6(2),n.xDo("Valid Keys : ","{srv}"," = Service Profile , ","{exp}"," = expiration , "," {username} "," = username, "," {firstname} ",", "," {lastname} ",""),n.xp6(6),n.Q6J("ngModel",t.config.sms_message_expiration))},directives:[Z._Y,Z.JL,Z.F,Ia.Ql,Z.JJ,Z.On,Z.Fj,Z.EJ,Z.YN,Z.Kr,J.O5,J.sg],styles:[".form-action-button[_ngcontent-%COMP%]{min-width:100px}.help-block[_ngcontent-%COMP%]{color:#657079}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();var nc=a(93104);function oc(e,t){if(1&e&&(n.TgZ(0,"option",13),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}const sc=function(){return{height:"450px"}};function rc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",14),n.TgZ(1,"div",15),n._UZ(2,"i",16),n._uU(3," Template Editor "),n.qZA(),n.TgZ(4,"div",17),n.TgZ(5,"input",18),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().template.subject=t}),n.qZA(),n.TgZ(6,"p-editor",19),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().template.body=t}),n.qZA(),n._UZ(7,"br"),n.TgZ(8,"div",20),n.TgZ(9,"h5"),n._uU(10,"Email Keywords"),n.qZA(),n.TgZ(11,"b"),n._uU(12),n.qZA(),n._uU(13," = Username, "),n.TgZ(14,"b"),n._uU(15),n.qZA(),n._uU(16,"=User Password, "),n.TgZ(17,"b"),n._uU(18),n.qZA(),n._uU(19," = User Expiration, "),n.TgZ(20,"b"),n._uU(21),n.qZA(),n._uU(22," = Profile Name, "),n.TgZ(23,"b"),n._uU(24),n.qZA(),n._uU(25," = First Name, "),n.TgZ(26,"b"),n._uU(27),n.qZA(),n._uU(28," = Last Name, "),n.TgZ(29,"b"),n._uU(30),n.qZA(),n._uU(31," = Manager's Username, "),n.TgZ(32,"b"),n._uU(33),n.qZA(),n._uU(34," = Manager's First Name, "),n.TgZ(35,"b"),n._uU(36),n.qZA(),n._uU(37," = Manager's Last Name, "),n.TgZ(38,"b"),n._uU(39),n.qZA(),n._uU(40," = Manager's Phone, "),n.TgZ(41,"b"),n._uU(42),n.qZA(),n._uU(43," = Manager's Company Name, "),n.TgZ(44,"b"),n._uU(45),n.qZA(),n._uU(46," = Manager's Address, "),n.TgZ(47,"b"),n._uU(48),n.qZA(),n._uU(49," = Manager's Email, "),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngModel",e.template.subject),n.xp6(1),n.Akn(n.DdM(30,sc)),n.Q6J("ngModel",e.template.body),n.xp6(6),n.AsE("","{","username","}",""),n.xp6(3),n.AsE("","{","password","}",""),n.xp6(3),n.AsE("","{","expiration","}",""),n.xp6(3),n.AsE("","{","profile","}",""),n.xp6(3),n.AsE("","{","firstname","}",""),n.xp6(3),n.AsE("","{","lastname","}",""),n.xp6(3),n.AsE("","{","manager_username","}",""),n.xp6(3),n.AsE("","{","manager_firstname","}",""),n.xp6(3),n.AsE("","{","manager_lastname","}",""),n.xp6(3),n.AsE("","{","manager_phone","}",""),n.xp6(3),n.AsE("","{","manager_company","}",""),n.xp6(3),n.AsE("","{","manager_address","}",""),n.xp6(3),n.AsE("","{","manager_email","}","")}}class lc{constructor(e,t,a,i){this.swal=e,this.api=t,this.toastr=a,this.trs=i,this.selectedItem=-1,this.template_list=[],this.template={body:"",subject:"",name:""}}ngOnInit(){this.loadIndex()}create(){this.swal.prompt("Template Name").subscribe(e=>{this.api.post("emailTemplate",{name:e}).subscribe(t=>{200==t.status&&(this.template_list.push({id:t.data,name:e,subject:"",body:""}),this.selectedItem=t.data,this.template={body:"",subject:"",name:e})},e=>{})})}save(){this.api.put("emailTemplate/"+this.selectedItem,this.template).subscribe(e=>{200==e.status&&this.toastr.success(this.trs.translate(e.message))})}load(e){this.blockUI.start("loading..."),this.api.get("emailTemplate/"+e).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.template=e.data)})}loadIndex(){this.api.get("emailTemplate").subscribe(e=>{this.template_list=e.data})}destroy(){const e=this.selectedItem;!e||e<0||this.swal.confirm({title:"Delete Template",type:"warning",text:"Delete Selected Template ?",confirmButtonText:"Yes"}).subscribe(()=>{this.api.delete("emailTemplate/"+e).subscribe(e=>{200==e.status&&(this.toastr.success(e.message),this.selectedItem=-1,this.loadIndex())})})}}lc.\u0275fac=function(e){return new(e||lc)(n.Y36(Ge),n.Y36(h),n.Y36(g._W),n.Y36(M))},lc.\u0275cmp=n.Xpm({type:lc,selectors:[["app-email-templates"]],decls:17,vars:4,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"fa","fa-trash"],["class","card",4,"ngIf"],[3,"value"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-envelop"],[1,"card-body"],["type","text","placeholder","email subject","name","subject",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"alert","alert-secondary"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.load(t.selectedItem)}),n.TgZ(3,"option",3),n._uU(4,"Select Template"),n.qZA(),n.YNc(5,oc,2,2,"option",4),n.qZA(),n.qZA(),n.TgZ(6,"div",1),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"button",7),n.NdJ("click",function(){return t.create()}),n._UZ(10,"i",8),n.qZA(),n.TgZ(11,"button",9),n.NdJ("click",function(){return t.save()}),n._UZ(12,"i",10),n.qZA(),n.TgZ(13,"button",7),n.NdJ("click",function(){return t.destroy()}),n._UZ(14,"i",11),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(15,"hr"),n.YNc(16,rc,50,31,"div",12)),2&e&&(n.xp6(2),n.Q6J("ngModel",t.selectedItem),n.xp6(3),n.Q6J("ngForOf",t.template_list),n.xp6(6),n.Q6J("hidden",t.selectedItem<0),n.xp6(5),n.Q6J("ngIf",t.selectedItem>=0))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,J.O5,Z.Fj,nc.ML],styles:[".card[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],lc.prototype,"blockUI",void 0);const cc=["myForm"];function dc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)})("formAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let uc=(()=>{class e{constructor(e,t,a,i,n){this.api=e,this.formsLoader=t,this.swal=a,this.toastr=i,this.trs=n,this.actions=[{text:"Test",action:"test",btnClass:"btn-secondary"}],this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden",customActions:this.actions},this.options={},this.formFields=this.formsLoader.getForm("settings_email"),this.form_config.fields=this.formFields}ngOnInit(){this.load()}onFormChange(e){this.toggleFormFields(e)}load(){this.api.get("settings/email_").subscribe(e=>{200==e.status&&(this.myForm.setFormValue(e.data),this.toggleFormFields(e.data))})}toggleFormFields(e){!0===e.email_server_requires_auth||1==e.email_server_requires_auth?(this.myForm.showField("email_username"),this.myForm.showField("email_password"),this.myForm.showField("email_security")):(this.myForm.hideField("email_username"),this.myForm.hideField("email_password"),this.myForm.hideField("email_security"))}save(e){this.api.post("settings",e.value).subscribe(e=>{200==e.status&&this.toastr.success(e.message)})}onAction(e){switch(e){case"test":this.swal.prompt("Email Address").subscribe(e=>{this.api.post("email/test",{email:e}).subscribe(e=>{this.toastr.success(this.trs.translate(e.message))})})}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(Ge),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-email-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(cc,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-envelope"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Email Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,dc,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();function pc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}let gc=(()=>{class e{constructor(e){this.api=e,this.columns=[{dataKey:"type",label:"Type",dataResolver:function(e){return 0===e?"Refill":1===e?"Card User":void 0}},{dataKey:"username",label:"Owner",parentKey:"owner_details",sortBy:"owner_id"},{dataKey:"username",label:"Creator",parentKey:"creator_details",sortBy:"created_by"},{dataKey:"created_at",label:"Date Added"},{dataKey:"qty",label:"Quantity"},{dataKey:"value",label:"Card Value",pipe:"currency"},{dataKey:"name",label:"Profile",parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"series",label:"Series"},{dataKey:"status",label:"Status",dataResolver:function(e){switch(e){case 0:return"Pending";case 1:return"Running";case 2:return"Finished";case 3:return"Stopped"}},classFn:function(e){switch(e.status){case 0:return"status-pending";case 1:return"status-running";case 2:case 3:return"status-finished"}}}],this.actions=[{name:"cancel",label:"Cancel",icon:"fa fa-times",inline:!0,requiresRow:!0,acl:"prm_cards_job_cancel"},{name:"continue",label:"Continue",icon:"fa fa-play",inline:!0,requiresRow:!0,acl:"prm_cards_job_cancel"}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:"Card Jobs Queue",icon:"fa fa-credit-card",columns:this.columns,actions:this.actions,dataUrl:"index/cardJob",page:1,showSearchBox:!1,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"cardJob",hasAdvancedFilter:!1,hasInlineActions:!0,sortBy:"id",direction:"desc"}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-card-jobs"]],decls:1,vars:1,consts:[["name","cards_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","cards_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["cards_model_view",""]],template:function(e,t){1&e&&n.YNc(0,pc,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[".status-pending{color:#d39745}.status-running{color:#b00}.status-finished{color:#5ab738;font-weight:bold}.status-stopped{color:#b00}\n"],encapsulation:2}),e})();const fc=["online_model_view"],hc=["ping_dialog"],mc=["live_traffic"],_c=["liveTrafficDialog"];function bc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",14,15),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw(2).onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw(2).onCellClicked(t)})("onCellMiddleClicked",function(t){return n.CHM(e),n.oxw(2).onCellMiddleClicked(t)}),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}function Zc(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,bc,2,3,"model-table-view",13),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.modelViewConfig)}}function vc(e,t){1&e&&n._UZ(0,"i",26)}function wc(e,t){if(1&e&&(n.TgZ(0,"table",1),n.TgZ(1,"tr"),n.TgZ(2,"td"),n.TgZ(3,"b"),n._uU(4,"Sent"),n.qZA(),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"tr"),n.TgZ(8,"td"),n.TgZ(9,"b"),n._uU(10,"Received"),n.qZA(),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.qZA(),n.TgZ(13,"tr"),n.TgZ(14,"td"),n.TgZ(15,"b"),n._uU(16,"Time"),n.qZA(),n.qZA(),n.TgZ(17,"td"),n._uU(18),n.qZA(),n.qZA(),n.TgZ(19,"tr"),n.TgZ(20,"td"),n.TgZ(21,"b"),n._uU(22,"Average"),n.qZA(),n.qZA(),n.TgZ(23,"td"),n._uU(24),n.qZA(),n.qZA(),n.TgZ(25,"tr"),n.TgZ(26,"td"),n.TgZ(27,"b"),n._uU(28,"Max RTT"),n.qZA(),n.qZA(),n.TgZ(29,"td"),n._uU(30),n.qZA(),n.qZA(),n.TgZ(31,"tr"),n.TgZ(32,"td"),n.TgZ(33,"b"),n._uU(34,"Min RTT"),n.qZA(),n.qZA(),n.TgZ(35,"td"),n._uU(36),n.qZA(),n.qZA(),n.TgZ(37,"tr"),n.TgZ(38,"td"),n.TgZ(39,"b"),n._uU(40,"Packet Loss"),n.qZA(),n.qZA(),n.TgZ(41,"td"),n._uU(42),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw(2);n.xp6(6),n.hij("",e.ping_data.sent," packet(s)"),n.xp6(6),n.hij("",e.ping_data.sent," packet(s)"),n.xp6(6),n.Oqu(e.ping_data.time),n.xp6(6),n.Oqu(e.ping_data.avg),n.xp6(6),n.Oqu(e.ping_data.max),n.xp6(6),n.Oqu(e.ping_data.min),n.xp6(6),n.Oqu(e.ping_data.loss)}}function yc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",16),n.TgZ(1,"h4",17),n._uU(2),n.qZA(),n.TgZ(3,"button",18),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n.TgZ(4,"span",19),n._uU(5,"\xd7"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(6,"div",20),n.TgZ(7,"div",21),n.YNc(8,vc,1,0,"i",22),n._uU(9),n._UZ(10,"hr"),n.YNc(11,wc,43,7,"table",23),n.qZA(),n.qZA(),n.TgZ(12,"div",24),n.TgZ(13,"button",25),n.NdJ("click",function(){return n.CHM(e),n.oxw().activeModal.hide()}),n._uU(14),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("user_ping_dialog_title")),n.xp6(6),n.Q6J("ngIf",!0===(null==e.ping_data?null:e.ping_data.running)),n.xp6(1),n.hij(" Pinging ",e.ping_data.username," "),n.xp6(2),n.Q6J("ngIf",!1===e.ping_data.running),n.xp6(3),n.Oqu(e.tr.translate("global_button_dismiss"))}}const xc=function(){return{width:"750px"}};class Ac{constructor(e,t,a,i,n,o,s){this.api=e,this.toastr=t,this.swal=a,this.router=i,this.tr=n,this.auth=o,this.modalService=s,this.columns=[{dataKey:"id",label:this.tr.translate("users_table_status"),sortBy:"radacctid",dataResolver:function(e){return"\u2588\u2588"},classFn:function(e){if(1===e.fup)return"user_fup";if(e.status){let t=e.status;return 0===e.enable?"user_disabled":1===e.online_status?"user_online":!1===t.status?"user_expired":"user_active"}}},{dataKey:"username",label:this.tr.translate("users_table_username"),classFn:function(e){return 0===e.enabled?"username user_disabled":"username href"}},{dataKey:"firstname",label:this.tr.translate("users_table_firstname"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.firstname"},{dataKey:"lastname",label:this.tr.translate("users_table_lastname"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.lastname"},{dataKey:"expiration",label:this.tr.translate("users_table_expiration"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.expiration"},{dataKey:"acctoutputoctets",label:this.tr.translate("users_table_dl"),pipe:"bytes"},{dataKey:"acctinputoctets",label:this.tr.translate("users_table_ul"),pipe:"bytes"},{dataKey:"user_profile_name",label:this.tr.translate("users_table_profile"),sortBy:"sas_users.profile_id"},{dataKey:"shortname",label:this.tr.translate("NAS"),parentKey:"nas_details",sortBy:"nasipaddress",hidden:!0},{dataKey:"parent_username",label:this.tr.translate("users_table_parent"),sortBy:"sas_users.parent_id",hidden:!0},{dataKey:"framedipaddress",label:this.tr.translate("IP"),classFn:function(e){return"href"}},{dataKey:"callingstationid",label:this.tr.translate("MAC")},{dataKey:"daily_usage_percentage",type:"progress",label:this.tr.translate("users_table_daily_usage"),sortBy:"none",hidden:!0},{dataKey:"acctsessiontime",label:this.tr.translate("users_table_uptime"),pipe:"duration"},{dataKey:"oui",label:this.tr.translate("users_table_hardware"),sortBy:"callingstationid"},{dataKey:"calledstationid",label:this.tr.translate("users_table_service_name"),sortBy:"calledstationid",hidden:!0}],this.actions=[{name:"show_live_traffic",label:this.tr.translate("users_action_live_traffic"),icon:"fa fa-chart",acl:"prm_users_live_traffic",inline:!0},{name:"view",label:this.tr.translate("users_action_view"),icon:"fa fa-eye",acl:"prm_users_update",inline:!0,requiresRow:!0},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"",label:"",type:"separator"},{name:"disconnect",label:this.tr.translate("users_action_disconnect"),icon:"fa fa-user-slash",acl:"prm_users_disconnect",inline:!0,requiresRow:!0},{name:"lock_mac",label:this.tr.translate("users_action_lock_mac"),icon:"fa fa-lock",acl:"prm_users_mac_lock",inline:!0,requiresRow:!0},{name:"ping",label:this.tr.translate("users_action_ping"),icon:"fa fa-arrows-alt-h",acl:"prm_users_ping",inline:!0,requiresRow:!0}],this.filterFields=[{key:"status",label:this.tr.translate("users_filter_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_active")},{value:2,label:this.tr.translate("users_status_expired")},{value:3,label:this.tr.translate("users_status_disabled")}]},{key:"connection",label:this.tr.translate("users_filter_connection"),type:"select",layout:"vertical",acl:"prm_managers_sysadmin",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:"FUP"},{value:2,label:"Non-FUP"}]},{key:"parent_id",label:this.tr.translate("users_filter_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"sub_users",label:this.tr.translate("users_filter_sub_users"),type:"switch",layout:"vertical",value:1,cols:12},{key:"profile_id",label:this.tr.translate("users_filter_profile"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]},{key:"active_profile_id",label:this.tr.translate("users_filter_profile_active"),type:"select2",layout:"vertical",value:-1,cols:12,acl:"prm_managers_sysadmin",options:[]},{key:"nasname",label:this.tr.translate("users_filter_nas"),type:"select2",acl:"prm_managers_sysadmin",layout:"vertical",value:-1,cols:12,options:[]}],this.filterOptions={parent_id:[],active_profile_id:[]},this.ping_data={username:null,running:!1,avg:null,time:null,loss:null,sent:null,received:null},this.modelViewConfig=null,this.traffic_dialog_visible=!1,this.traffic_dialog_user=""}ngOnInit(){this.modelViewConfig={title:this.tr.translate("users_table_online_title"),icon:"fa fa-users",columns:this.columns,dataUrl:"index/online",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"radacctid",allowSelect:!0,allowMultipleSelect:!0,modelName:"onlineUsers",hasAdvancedFilter:!0,hasInlineActions:!0,id:"online_index_table",showRowsCount:!0,allowExport:!0},this.loadResources()}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.radacctid),e.action){case"show_live_traffic":this.showLiveTraffic(e);break;case"disconnect":this.disconnect(t),this.modelView.reload();break;case"lock_mac":this.lockMacAddress(t);break;case"view":this.router.navigate(["user",this.modelView.currentRow.user_details.id]);break;case"ping":this.showPingDialog(this.modelView.currentRow);break;case"edit_new_tab":this.router.navigate([]).then(e=>{window.open("#/user/"+this.modelView.currentRow.user_details.id,"_blank")})}}onCellClicked(e){"username"==e.column&&null!==e.row.user_details&&this.router.navigate(["user",e.row.user_details.id]),"framedipaddress"==e.column&&window.open("http://"+e.row.framedipaddress)}onCellMiddleClicked(e){"username"===e.column&&window.open("#/user/"+e.row.user_details.id,"_blank")}disconnect(e){this.swal.confirm({title:"",type:"warning",text:this.tr.translate("prompt_disconnect_user"),confirmButtonText:"Yes"}).subscribe(()=>{if(this.modelView.selectedRows().length>1){let e=[],t=this.modelView.selectedRows();for(let a of t)e.push(a.username);this.api.post("user/disconnect",e).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})}else this.api.get("user/disconnect/acctid/"+e.toString()).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})})}lockMacAddress(e){this.swal.confirm({title:"",type:"warning",text:this.tr.translate("prompt_lock_mac"),confirmButtonText:"Yes"}).subscribe(()=>{this.api.get("user/maclock/"+e.toString()).subscribe(e=>{200===e.status&&(this.toastr.success(e.message),this.modelView.reload())})})}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];t.push({value:-1,label:this.tr.translate("global_all")});for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.parent_id=t}),this.api.get("list/profile/-1").subscribe(e=>{let t=[];t.push({value:-1,label:this.tr.translate("global_all")}),200===e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filterOptions.active_profile_id=t)}),this.api.get("list/profile/0").subscribe(e=>{let t=[];t.push({value:-1,label:this.tr.translate("global_all")}),200===e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filterOptions.profile_id=t)}),this.auth.has("prm_managers_sysadmin")&&this.api.get("nas").subscribe(e=>{if(200===e.status){const t=[];t.push({value:-1,label:this.tr.translate("global_all")}),e.data.map(e=>{t.push({value:e.nasname,label:e.shortname+" ("+e.nasname+")"})}),this.filterOptions.nasname=t}})}showPingDialog(e){this.activeModal=this.modalService.show(this.pingDialogModal);const t={radacctid:e.radacctid,username:e.username};this.ping_data.running=!0,this.ping_data.username=e.username,this.api.post("user/ping",t).subscribe(e=>{if(this.ping_data.running=!1,200!==e.status)return this.activeModal.hide(),void this.toastr.warning("Mikrotik API error, unable to ping");200===e.status&&(this.ping_data.avg=e.data.avg,this.ping_data.loss=e.data["packet-loss"],this.ping_data.received=e.data.received,this.ping_data.sent=e.data.sent,this.ping_data.max=e.data["max-rtt"],this.ping_data.min=e.data["min-rtt"])})}showLiveTraffic(e){this.liveTraffic.setUserId(e.row.user_details.id),this.traffic_dialog_visible=!0,this.traffic_dialog_user=e.row.username}}Ac.\u0275fac=function(e){return new(e||Ac)(n.Y36(h),n.Y36(g._W),n.Y36(Ge),n.Y36(p.F0),n.Y36(M),n.Y36(_),n.Y36(k.tTG))},Ac.\u0275cmp=n.Xpm({type:Ac,selectors:[["app-online-users"]],viewQuery:function(e,t){if(1&e&&(n.Gf(fc,5),n.Gf(hc,5),n.Gf(mc,5),n.Gf(_c,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.pingDialogModal=e.first),n.iGM(e=n.CRH())&&(t.liveTraffic=e.first),n.iGM(e=n.CRH())&&(t.pDialog=e.first)}},decls:25,vars:13,consts:[[1,"legend-box"],[2,"width","100%"],[1,"fa","fa-stop","user_active"],[1,"fa","fa-stop","user_expired"],[1,"fa","fa-stop","user_disabled"],[1,"fa","fa-stop","user_fup"],[1,"fa","fa-stop","user_zombie"],[4,"blockUI"],["ping_dialog",""],[3,"header","visible","modal","draggable","visibleChange","onShow","onHide"],["liveTrafficDialog",""],["id","live_traffic",3,"finished"],["live_traffic",""],["name","online_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onCellMiddleClicked",4,"ngIf"],["name","online_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onCellMiddleClicked"],["online_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"ping-console"],["class","fa fa-spinner fa-spin",4,"ngIf"],["style","width:100%",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"table",1),n.TgZ(2,"tr"),n.TgZ(3,"td"),n._UZ(4,"i",2),n._uU(5),n.qZA(),n.TgZ(6,"td"),n._UZ(7,"i",3),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._UZ(10,"i",4),n._uU(11),n.qZA(),n.TgZ(12,"td"),n._UZ(13,"i",5),n._uU(14),n.qZA(),n.TgZ(15,"td"),n._UZ(16,"i",6),n._uU(17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(18,Zc,2,1,"div",7),n.YNc(19,yc,15,5,"ng-template",null,8,n.W1O),n.TgZ(21,"p-dialog",9,10),n.NdJ("visibleChange",function(e){return t.traffic_dialog_visible=e})("onShow",function(){return t.liveTraffic.start()})("onHide",function(){return t.liveTraffic.stopPolling()}),n.TgZ(23,"app-user-live-traffic",11,12),n.NdJ("finished",function(){return t.traffic_dialog_visible=!1}),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.hij(" ",t.tr.translate("users_status_active"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_expired"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_disabled"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_fup"),""),n.xp6(3),n.hij(" ",t.tr.translate("users_status_zombie"),""),n.xp6(1),n.Q6J("blockUI","model-view"),n.xp6(3),n.Akn(n.DdM(12,xc)),n.MGl("header","User Traffic - ",t.traffic_dialog_user,""),n.Q6J("visible",t.traffic_dialog_visible)("modal",!0)("draggable",!0))},directives:[u.Z2,ki.V,Sn,J.O5,wt],styles:['.user_disabled{color:#bb3436!important;cursor:pointer}.user_active{color:#9fe22b!important}.user_online{color:#1b9dec}.user_fup{color:#7c40a5}.user_expired{color:#ff9416}.user_zombie{color:#000}.legend-box{font-size:12px;background:white;margin-bottom:5px;padding:5px 15px;box-sizing:border-box}.username{font-weight:bold}.ping-console{background:#495057;min-height:90px;padding:5px;color:#87cc89;font-family:"Courier New","Monospace";font-size:16px}\n'],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Ac.prototype,"blockUI",void 0);const qc=["myForm"],Tc=function(){return["/settings/googleDrive"]};function Cc(e,t){1&e&&(n.TgZ(0,"div",14),n.TgZ(1,"div",4),n.TgZ(2,"div",5),n.TgZ(3,"div",6),n._UZ(4,"i",15),n._uU(5," You have enabled Google Drive Backup. Make sure you have authorized this server with Google "),n._UZ(6,"i",16),n.TgZ(7,"a",17),n._uU(8," Google Drive Settings"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("routerLink",n.DdM(1,Tc)))}function kc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",18,19),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)})("formAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}function Uc(e,t){if(1&e&&(n.TgZ(0,"option",20),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.Oqu(e.label)}}const Mc=function(){return{width:"40vw"}};class Fc{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.show_disk_init_dialog=!1,this.unused_disks=[],this.selected_disk_to_format="-1",this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={backup_disk:[],backup_partition:[]},this.googleDriveEnabled=!1,this.old_form={},this.formFields=this.formsLoader.getForm("settings_backup"),this.form_config.fields=this.formFields}ngOnInit(){this.load(),this.loadDisks()}onFormChange(e){this.toggleFormFields(e),this.old_form=e,1===e.backup_upload_gdrive&&(this.googleDriveEnabled=!0)}load(){this.api.get("settings/backup_").subscribe(e=>{200==e.status&&(this.myForm.setFormValue(e.data),this.toggleFormFields(e.data),e.data.backup_upload_gdrive&&1===e.data.backup_upload_gdrive&&(this.googleDriveEnabled=!0))})}loadDisks(){this.api.get("disks").subscribe(e=>{if(200===e.status)for(const t of e.data)this.options.backup_disk.push({value:t.name,label:t.model+",      ["+t.size+"]"})}),this.api.get("disks/unused").subscribe(e=>{if(200===e.status)for(const t of e.data)this.unused_disks.push({value:t.name,label:t.model+",      ["+t.size+"]"})})}loadPartitions(e){this.options.backup_partition=[],this.api.get("partitions/"+e).subscribe(e=>{if(200===e.status)for(let t of e.data)this.options.backup_partition.push({value:t.uuid,label:t.name+",      ["+t.size+"]"})})}toggleFormFields(e){!0===e.backup_email_enabled&&this.myForm.showField("backup_email_address"),!1===e.backup_email_enabled&&this.myForm.hideField("backup_email_address"),!0===e.backup_daily_enabled&&this.myForm.showField("backup_daily_time"),!1===e.backup_daily_enabled&&this.myForm.hideField("backup_daily_time"),this.loadPartitions(e.backup_disk)}save(e){this.api.post("settings",e.value).subscribe(e=>{200==e.status&&this.toastr.success(this.tr.translate(this.tr.translate(e.message)))})}onAction(e){"init_disk"===e&&(this.show_disk_init_dialog=!0)}initDisk(){this.blockUI.start(),this.api.get("disk/init/"+this.selected_disk_to_format).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.toastr.success("Disk Initialized Successfully"),this.show_disk_init_dialog=!1,this.options.backup_disk=[],this.options.unused_disks=[],this.loadDisks()):this.toastr.error(null==e?void 0:e.message)})}}function Jc(e,t){1&e&&(n.TgZ(0,"span",16),n._uU(1,"Active"),n.qZA())}function Oc(e,t){1&e&&(n.TgZ(0,"span",17),n._uU(1,"Disabled"),n.qZA())}Fc.\u0275fac=function(e){return new(e||Fc)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},Fc.\u0275cmp=n.Xpm({type:Fc,selectors:[["app-backup-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(qc,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:19,vars:10,consts:[["class","card bg-info","style","margin-top:25px;",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"fa","fa-hdd"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["header","Initialize Disk",3,"visible","modal","visibleChange"],[1,"form-group"],[1,"form-control","form-control-md",3,"ngModel","ngModelChange"],["disabled","","selected","","value","-1"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card","bg-info",2,"margin-top","25px"],[1,"fa","fa-info-circle"],[1,"fa","fa-hand-point-right"],[3,"routerLink"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""],[3,"value"]],template:function(e,t){1&e&&(n.YNc(0,Cc,9,2,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._UZ(3,"i",3),n._uU(4," Backup Settings "),n.qZA(),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.YNc(8,kc,2,2,"dynamic-form",7),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(9,"p-dialog",8),n.NdJ("visibleChange",function(e){return t.show_disk_init_dialog=e}),n._UZ(10,"br"),n.TgZ(11,"div",9),n.TgZ(12,"select",10),n.NdJ("ngModelChange",function(e){return t.selected_disk_to_format=e}),n.TgZ(13,"option",11),n._uU(14,"PrSelect Disk"),n.qZA(),n.YNc(15,Uc,2,2,"option",12),n.qZA(),n.qZA(),n.TgZ(16,"p-footer"),n.TgZ(17,"button",13),n.NdJ("click",function(){return t.initDisk()}),n._uU(18,"Format"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",!0===t.googleDriveEnabled),n.xp6(8),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(1),n.Akn(n.DdM(9,Mc)),n.Q6J("visible",t.show_disk_init_dialog)("modal",!0),n.xp6(3),n.Q6J("ngModel",t.selected_disk_to_format),n.xp6(3),n.Q6J("ngForOf",t.unused_disks),n.xp6(2),n.Q6J("disabled",-1==t.selected_disk_to_format))},directives:[J.O5,ki.V,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,xi.$_,p.yS,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],Fc.prototype,"blockUI",void 0);const Nc=function(e){return{"addon-active":e}};class Ic{constructor(e,t){this.api=e,this.auth=t,this.license={hwid:"N/A",id:"N/A",status:"N/A",expiration:"N/A",client_id:"N/A",mu:"N/A",ms:"N/A"}}load(){this.blockUI.start(),this.api.get("license").subscribe(e=>{this.blockUI.stop(),this.license.hwid=e.data.hwid,this.license.id=e.data.id,this.license.st=e.data.st,this.license.ms=e.data.ms,this.license.expiration=e.data.exp,this.license.mu=e.data.mu}),this.api.get("license/features").subscribe(e=>{})}reload(){this.blockUI.start(),this.api.get("license/reload").subscribe(e=>{this.blockUI.stop(),this.load()})}ngOnInit(){this.load()}}Ic.\u0275fac=function(e){return new(e||Ic)(n.Y36(h),n.Y36(_))},Ic.\u0275cmp=n.Xpm({type:Ic,selectors:[["app-license-settings"]],decls:57,vars:23,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-certificate"],[1,"card-body"],[1,"list-group","license-list"],[1,"list-group-item"],[1,"list-value"],["class","list-value text-success",4,"ngIf"],["class","list-value text-danger",4,"ngIf"],[1,"list-group-item","d-none"],[1,"license-addons"],[3,"ngClass"],[1,"card-footer"],[1,"card-actions"],[1,"btn","btn-primary","license-button",3,"click"],[1,"fa","fa-sync"],[1,"list-value","text-success"],[1,"list-value","text-danger"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," System License "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"ul",4),n.TgZ(6,"li",5),n._uU(7," License ID "),n.TgZ(8,"span",6),n._uU(9),n.qZA(),n.qZA(),n.TgZ(10,"li",5),n._uU(11," Hardware ID "),n.TgZ(12,"span",6),n._uU(13),n.qZA(),n.qZA(),n.TgZ(14,"li",5),n._uU(15," Status "),n.YNc(16,Jc,2,0,"span",7),n.YNc(17,Oc,2,0,"span",8),n.qZA(),n.TgZ(18,"li",5),n._uU(19," Expiration "),n.TgZ(20,"span",6),n._uU(21),n.qZA(),n.qZA(),n.TgZ(22,"li",5),n._uU(23," Client ID "),n.TgZ(24,"span",6),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"li",5),n._uU(27," Max Users "),n.TgZ(28,"span",6),n._uU(29),n.qZA(),n.qZA(),n.TgZ(30,"li",5),n._uU(31," Max Sites "),n.TgZ(32,"span",6),n._uU(33),n.qZA(),n.qZA(),n.TgZ(34,"li",9),n._uU(35," Add-ons "),n._UZ(36,"br"),n.TgZ(37,"span",10),n.TgZ(38,"span",11),n._uU(39,"SASTrack"),n.qZA(),n._uU(40," \xa0\xa0|\xa0\xa0 "),n.TgZ(41,"span",11),n._uU(42,"FreeZone"),n.qZA(),n._uU(43," \xa0\xa0|\xa0\xa0 "),n.TgZ(44,"span",11),n._uU(45,"Tickets"),n.qZA(),n._uU(46," \xa0\xa0|\xa0\xa0 "),n.TgZ(47,"span",11),n._uU(48,"VPN"),n.qZA(),n._uU(49," \xa0\xa0|\xa0\xa0 "),n.TgZ(50,"span",11),n._uU(51,"Multi Sites"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(52,"div",12),n.TgZ(53,"div",13),n.TgZ(54,"button",14),n.NdJ("click",function(){return t.reload()}),n._UZ(55,"i",15),n._uU(56," Reload License"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(9),n.Oqu(t.license.id),n.xp6(4),n.Oqu(t.license.hwid),n.xp6(3),n.Q6J("ngIf","1"==t.license.st),n.xp6(1),n.Q6J("ngIf","0"==t.license.st),n.xp6(4),n.Oqu(t.license.expiration),n.xp6(4),n.Oqu(t.license.client_id),n.xp6(4),n.Oqu(t.license.mu),n.xp6(4),n.Oqu(t.license.ms),n.xp6(5),n.Q6J("ngClass",n.VKq(13,Nc,t.auth.features.indexOf("sastrack")>=0)),n.xp6(3),n.Q6J("ngClass",n.VKq(15,Nc,t.auth.features.indexOf("freezone")>=0)),n.xp6(3),n.Q6J("ngClass",n.VKq(17,Nc,t.auth.features.indexOf("Tickets")>=0)),n.xp6(3),n.Q6J("ngClass",n.VKq(19,Nc,t.auth.features.indexOf("vpn")>=0)),n.xp6(3),n.Q6J("ngClass",n.VKq(21,Nc,t.auth.features.indexOf("sites")>=0)))},directives:[J.O5,J.mk],styles:[".card[_ngcontent-%COMP%]{text-align:left}.license-list[_ngcontent-%COMP%]{width:100%;max-width:600px;margin-left:auto;margin-right:auto}.list-value[_ngcontent-%COMP%]{font-weight:lighter;float:right}.license-addons[_ngcontent-%COMP%]{font-weight:lighter;font-size:small;color:#87847c}.license-button[_ngcontent-%COMP%]{width:180px;font-size:small;margin-left:5px;margin-right:5px}.addon-active[_ngcontent-%COMP%]{font-weight:bolder;color:#5ab738}.addon-inactive[_ngcontent-%COMP%]{font-weight:lighter;color:#5e6e5e}"]}),(0,c.gn)([(0,u.bH)()],Ic.prototype,"blockUI",void 0);let Yc=(()=>{class e{constructor(e){this.api=e,this.valueData="..."}ngOnInit(){}ngOnChanges(){""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(()=>this.load(),1e3*this.data.interval))}load(){"internal"===this.data.data_source&&this.loadInternal()}loadInternal(){this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(e=>{this.valueData=200==e.status?e.data:"N/A"},()=>{this.valueData="N/A"})}ngOnDestroy(){clearInterval(this.timerHook)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-dashboard-simple-widget2"]],inputs:{data:"data"},features:[n.TTD],decls:6,vars:5,consts:[[1,"card-block","text-white"],[1,"m-t-15"],[1,"m-b-15"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n.TgZ(2,"h5",1),n._uU(3),n.qZA(),n.TgZ(4,"h3",2),n._uU(5),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Gre("card o-hidden ",t.data.color," web-num-card"),n.xp6(3),n.Oqu(t.data.title),n.xp6(2),n.Oqu(t.valueData))},styles:[".bg-c-blue[_ngcontent-%COMP%]{background:#4fc3f7}.o-hidden[_ngcontent-%COMP%]{overflow:hidden}.card[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 12px 5px -10px rgba(0,0,0,.1),0 0 4px rgba(0,0,0,.1);border:0;margin-bottom:30px;transition:all .2s ease-in-out}"]}),e})();const Qc=["myForm"];function Sc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)})("formAction",function(t){return n.CHM(e),n.oxw().onFormAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let Pc=(()=>{class e{constructor(e,t,a,i,n){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.router=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.emailTemplates=[],this.formFields=this.formsLoader.getForm("settings_notifications"),this.form_config.fields=this.formFields}ngOnInit(){this.loadResources(),this.load()}loadResources(){this.api.get("emailTemplate").subscribe(e=>{e.data.map(e=>{this.emailTemplates.push({value:e.id,label:e.name})}),this.emailTemplates.unshift({value:-1,label:"None"}),this.options.notifications_email_template_activation=this.emailTemplates,this.options.notifications_email_template_registration=this.emailTemplates,this.options.notifications_email_template_termination=this.emailTemplates,this.options.notifications_email_template_expiration=this.emailTemplates,this.options.notifications_email_template_quota_threshold=this.emailTemplates,this.options.notifications_fup_email_template_id=this.emailTemplates})}load(){this.api.get("settings/notifications_").subscribe(e=>{200===e.status&&(this.myForm.setFormValue(e.data),this.toggleFormFields(e.data))})}onFormChange(e){this.toggleFormFields(e)}toggleFormFields(e){1==e.notifications_manager_dashboard_enabled&&(this.myForm.showField("notifications_manager_dashboard_type"),this.myForm.showField("notifications_manager_dashboard_text")),(!e.notifications_manager_dashboard_enabled||!1===e.notifications_manager_dashboard_enabled)&&(this.myForm.hideField("notifications_manager_dashboard_type"),this.myForm.hideField("notifications_manager_dashboard_text")),1==e.notifications_email_enabled&&(this.myForm.showField("notifications_email_template_activation"),this.myForm.showField("notifications_email_template_registration"),this.myForm.showField("notifications_email_template_expiration"),this.myForm.showField("notifications_email_template_termination"),this.myForm.showField("notifications_email_template_quota_threshold")),(!e.notifications_email_enabled||!1===e.notifications_email_enabled)&&(this.myForm.hideField("notifications_email_template_activation"),this.myForm.hideField("notifications_email_template_registration"),this.myForm.hideField("notifications_email_template_expiration"),this.myForm.hideField("notifications_email_template_termination"),this.myForm.hideField("notifications_email_template_quota_threshold")),1==e.notifications_sms_expiration&&this.myForm.showField("notifications_sms_expiration_period"),1!=e.notifications_sms_expiration&&this.myForm.hideField("notifications_sms_expiration_period"),1==e.notifications_email_expiration&&this.myForm.showField("notifications_email_expiration_period"),1!=e.notifications_email_expiration&&this.myForm.hideField("notifications_email_expiration_period"),1==e.notifications_show_welcome_screen&&this.myForm.showField("btn_group"),0==e.notifications_show_welcome_screen&&this.myForm.hideField("btn_group"),1==e.notifications_acp_login_enabled&&this.myForm.showField("notifications_acp_login_page_message"),0==e.notifications_fup_sms&&this.myForm.hideField("notifications_fup_sms_text"),1==e.notifications_fup_sms&&this.myForm.showField("notifications_fup_sms_text"),0==e.notifications_fup_email&&this.myForm.hideField("notifications_fup_email_template_id"),1==e.notifications_fup_email&&this.myForm.showField("notifications_fup_email_template_id"),0==e.notifications_fup_portal&&this.myForm.hideField("notifications_fup_portal_text"),1==e.notifications_fup_portal&&this.myForm.showField("notifications_fup_portal_text")}save(e){this.api.post("settings",e.value).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}onFormAction(e){"welcome_screen"==e&&this.router.navigate(["/settings/welcomeScreen"])}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M),n.Y36(p.F0))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-notification-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(Qc,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-bell"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Notification Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Sc,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();function Dc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n.TgZ(8,"button",22),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().removeAddress(t)}),n._UZ(9,"i",24),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.interface),n.xp6(2),n.Oqu(e.ip),n.xp6(2),n.Oqu(e.netmask)}}function Hc(e,t){if(1&e&&(n.TgZ(0,"option",32),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}function Rc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n.TgZ(8,"button",22),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().removeRoute(t)}),n._UZ(9,"i",24),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.dst),n.xp6(2),n.Oqu(e.netmask),n.xp6(2),n.Oqu(e.gateway)}}let Vc=(()=>{class e{constructor(e,t,a){this.api=e,this.toastr=t,this.trs=a,this.config={hostname:"",nameservers:"",gateway:""},this.rawConfig={},this.interfaceList=[],this.newAddressRecord={visible:!1,ip:"",netmask:"",interface:"-1"},this.newRouteRecord={visible:!1,dst:"",netmask:"",gateway:""},this.addressList=[],this.routeList=[]}loadResources(){this.api.get("linux/network/interfaces").subscribe(e=>{e.data.map(e=>{this.interfaceList.push(e.name)})}),this.api.get("linux/network").subscribe(e=>{200==e.status&&(this.rawConfig=e.data,this.config.hostname=this.rawConfig.hostname,this.config.gateway=this.rawConfig.gateway,this.config.nameservers=this.rawConfig.nameservers.join(),this.addressList=this.rawConfig.addresses,this.rawConfig.routes.map(e=>{let t={};e.dst.split("/").length>1?(t.dst=e.dst.split("/")[0],t.netmask=e.dst.split("/")[1]):(t.dst=e.dst,t.netmask="255.255.255.255"),t.gateway=e.gateway,this.routeList.push(t)}))})}ngOnInit(){this.loadResources()}toggleNewAddressRecord(e){this.newAddressRecord={visible:e,ip:"",netmask:"",interface:"-1"}}toggleNewRouteRecord(e){this.newRouteRecord={visible:e,dst:"",netmask:"",gateway:""}}addNewAddress(){this.addressList.push({interface:this.newAddressRecord.interface,ip:this.newAddressRecord.ip,netmask:this.newAddressRecord.netmask}),this.toggleNewAddressRecord(!1)}removeAddress(e){for(let t=0;t<this.addressList.length;t++)this.addressList[t].interface==e.interface&&this.addressList[t].ip==e.ip&&this.addressList[t].netmask==e.netmask&&this.addressList.splice(t,1)}addNewRoute(){this.routeList.push({dst:this.newRouteRecord.dst,netmask:this.newRouteRecord.netmask,gateway:this.newRouteRecord.gateway}),this.toggleNewRouteRecord(!1)}removeRoute(e){for(let t=0;t<this.routeList.length;t++)this.routeList[t].dst==e.dst&&this.routeList[t].netmask==e.netmask&&this.routeList[t].gateway==e.gateway&&this.routeList.splice(t,1)}save(){let e=[];this.routeList.map(t=>{e.push({dst:t.dst+"/"+t.netmask,gateway:t.gateway})});let t={hostname:this.config.hostname,gateway:this.config.gateway,nameservers:this.config.nameservers.split(","),addresses:this.addressList,routes:e};this.api.post("linux/network",t).subscribe(e=>{200==e.status&&this.toastr.success(this.trs.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-network-manager"]],decls:103,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-plug"],[1,"card-body"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["type","text","name","hostname","placeholder","sas4",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","gateway","placeholder","x.x.x.x",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","nameservers","placeholder","1.1.1.1",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"fa","fa-plus"],[1,"table","table-bordered","table-hover","table-sm",2,"margin-top","10px"],[4,"ngFor","ngForOf"],[3,"hidden"],["name","interface",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","x.x.x.x","name","ip",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","netmask",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"text-center"],["type","button",1,"btn","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"fa","fa-times"],["placeholder","x.x.x.x","name","dst",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","netmask2",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","gateway2",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"card-actions","right"],[1,"btn","btn-primary",2,"float","right",3,"click"],[1,"fa","fa-save"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Network Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"form",4),n.TgZ(6,"h4"),n._uU(7,"Global Settings"),n.qZA(),n._UZ(8,"hr"),n.TgZ(9,"div",5),n.TgZ(10,"label",6),n.TgZ(11,"span"),n._uU(12,"Hostname"),n.qZA(),n.qZA(),n.TgZ(13,"div",7),n.TgZ(14,"input",8),n.NdJ("ngModelChange",function(e){return t.config.hostname=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",5),n.TgZ(16,"label",6),n.TgZ(17,"span"),n._uU(18,"Default Gateway"),n.qZA(),n.qZA(),n.TgZ(19,"div",7),n.TgZ(20,"input",9),n.NdJ("ngModelChange",function(e){return t.config.gateway=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",5),n.TgZ(22,"label",6),n.TgZ(23,"span"),n._uU(24,"DNS(s)"),n.qZA(),n.qZA(),n.TgZ(25,"div",7),n.TgZ(26,"input",10),n.NdJ("ngModelChange",function(e){return t.config.nameservers=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"h4"),n._uU(28,"\xa0"),n.qZA(),n.TgZ(29,"h4"),n._uU(30,"Network Interfaces"),n.qZA(),n._UZ(31,"hr"),n.TgZ(32,"button",11),n.NdJ("click",function(){return t.toggleNewAddressRecord(!0)}),n._UZ(33,"i",12),n._uU(34," Add Address"),n.qZA(),n.TgZ(35,"table",13),n.TgZ(36,"thead"),n.TgZ(37,"tr"),n.TgZ(38,"th"),n._uU(39,"Interface"),n.qZA(),n.TgZ(40,"th"),n._uU(41,"IP"),n.qZA(),n.TgZ(42,"th"),n._uU(43,"Netmask"),n.qZA(),n.TgZ(44,"th"),n._uU(45,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(46,"tbody"),n.YNc(47,Dc,10,3,"tr",14),n.TgZ(48,"tr",15),n.TgZ(49,"td"),n.TgZ(50,"select",16),n.NdJ("ngModelChange",function(e){return t.newAddressRecord.interface=e}),n.TgZ(51,"option",17),n._uU(52,"Select Interface"),n.qZA(),n.YNc(53,Hc,2,2,"option",18),n.qZA(),n.qZA(),n.TgZ(54,"td"),n.TgZ(55,"input",19),n.NdJ("ngModelChange",function(e){return t.newAddressRecord.ip=e}),n.qZA(),n.qZA(),n.TgZ(56,"td"),n.TgZ(57,"input",20),n.NdJ("ngModelChange",function(e){return t.newAddressRecord.netmask=e}),n.qZA(),n.qZA(),n.TgZ(58,"td",21),n.TgZ(59,"button",22),n.NdJ("click",function(){return t.addNewAddress()}),n._UZ(60,"i",23),n.qZA(),n._uU(61," \xa0 "),n.TgZ(62,"button",22),n.NdJ("click",function(){return t.toggleNewAddressRecord(!1)}),n._UZ(63,"i",24),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(64,"h4"),n._uU(65,"\xa0"),n.qZA(),n.TgZ(66,"h4"),n._uU(67,"Static Routes"),n.qZA(),n._UZ(68,"hr"),n.TgZ(69,"button",11),n.NdJ("click",function(){return t.toggleNewRouteRecord(!0)}),n._UZ(70,"i",12),n._uU(71," Add Route"),n.qZA(),n.TgZ(72,"table",13),n.TgZ(73,"thead"),n.TgZ(74,"tr"),n.TgZ(75,"th"),n._uU(76,"Destination"),n.qZA(),n.TgZ(77,"th"),n._uU(78,"Netmask"),n.qZA(),n.TgZ(79,"th"),n._uU(80,"Gateway"),n.qZA(),n.TgZ(81,"th"),n._uU(82,"Action"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(83,"tbody"),n.YNc(84,Rc,10,3,"tr",14),n.TgZ(85,"tr",15),n.TgZ(86,"td"),n.TgZ(87,"input",25),n.NdJ("ngModelChange",function(e){return t.newRouteRecord.dst=e}),n.qZA(),n.qZA(),n.TgZ(88,"td"),n.TgZ(89,"input",26),n.NdJ("ngModelChange",function(e){return t.newRouteRecord.netmask=e}),n.qZA(),n.qZA(),n.TgZ(90,"td"),n.TgZ(91,"input",27),n.NdJ("ngModelChange",function(e){return t.newRouteRecord.gateway=e}),n.qZA(),n.qZA(),n.TgZ(92,"td",21),n.TgZ(93,"button",22),n.NdJ("click",function(){return t.addNewRoute()}),n._UZ(94,"i",23),n.qZA(),n._uU(95," \xa0 "),n.TgZ(96,"button",22),n.NdJ("click",function(){return t.toggleNewRouteRecord(!1)}),n._UZ(97,"i",24),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(98,"div",28),n.TgZ(99,"div",29),n.TgZ(100,"button",30),n.NdJ("click",function(){return t.save()}),n._UZ(101,"i",31),n._uU(102," Save "),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(14),n.Q6J("ngModel",t.config.hostname),n.xp6(6),n.Q6J("ngModel",t.config.gateway),n.xp6(6),n.Q6J("ngModel",t.config.nameservers),n.xp6(6),n.Q6J("disabled",t.newAddressRecord.visible),n.xp6(15),n.Q6J("ngForOf",t.addressList),n.xp6(1),n.Q6J("hidden",!t.newAddressRecord.visible),n.xp6(2),n.Q6J("ngModel",t.newAddressRecord.interface),n.xp6(3),n.Q6J("ngForOf",t.interfaceList),n.xp6(2),n.Q6J("ngModel",t.newAddressRecord.ip),n.xp6(2),n.Q6J("ngModel",t.newAddressRecord.netmask),n.xp6(12),n.Q6J("disabled",t.newRouteRecord.visible),n.xp6(15),n.Q6J("ngForOf",t.routeList),n.xp6(1),n.Q6J("hidden",!t.newRouteRecord.visible),n.xp6(2),n.Q6J("ngModel",t.newRouteRecord.dst),n.xp6(2),n.Q6J("ngModel",t.newRouteRecord.netmask),n.xp6(2),n.Q6J("ngModel",t.newRouteRecord.gateway))},directives:[Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On,J.sg,Z.EJ,Z.YN,Z.Kr],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})(),Lc=(()=>{class e{constructor(e,t,a){this.api=e,this.ref=t,this.dialogConfig=a,this.progress=0,this.timerHook=null}ngOnInit(){this.timerHook=setInterval(()=>this.updateProgress(),2e3)}ngOnDestroy(){clearInterval(this.timerHook)}updateProgress(){this.api.get("restore/status").subscribe(e=>{200===e.status?(this.progress=e.data,this.progress>=100&&this.ref.close(!0)):this.ref.close(!1)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(fa.E7),n.Y36(fa.S))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-database-restore-monitor"]],decls:5,vars:1,consts:[[2,"padding","10px","padding-bottom","20px","width","100%"],[3,"value"],[1,"text-danger","text-center"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"div",0),n._UZ(2,"p-progressBar",1),n.qZA(),n.TgZ(3,"h5",2),n._uU(4,"Do not close this window or reload the page"),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("value",t.progress))},directives:[St.k],styles:[""]}),e})();const Ec=["nas_model_view"],Kc=["fileUpload"];function Bc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",3,4),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onDataLoading",function(){return n.CHM(e),n.oxw().loading=!0})("onDataLoaded",function(){return n.CHM(e),n.oxw().loading=!1})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}class zc{constructor(e,t,a,i,n,o){this.api=e,this.toastr=t,this.swal=a,this.config=i,this.dialogService=n,this.router=o,this.modelViewConfig=null,this.columns=[{dataKey:"filename",label:"FileName",class:"href"},{dataKey:"file_time",label:"Date"},{dataKey:"size",label:"Size",pipe:"bytes"},{dataKey:"version",label:"Version"}],this.actions=[{name:"create",label:"Create Backup",icon:"fa fa-plus",requiresRow:!1,acl:"prm_backup_create"},{name:"download",label:"Download",icon:"fa fa-download",requiresRow:!0,inline:!0,acl:"prm_backup_download"},{name:"upload",label:"Upload",icon:"fa fa-upload",requiresRow:!1,inline:!0,acl:"prm_backup_upload"},{name:"restore",label:"Restore",icon:"fa fa-sync",requiresRow:!0,inline:!0,acl:"prm_backup_restore"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,inline:!0,acl:"prm_backup_delete"},{name:"",label:"",type:"separator"},{name:"settings",label:"Settings",icon:"fa fa-cogs",requiresRow:!1,acl:"prm_managers_sysadmin"}]}ngOnInit(){this.modelViewConfig={title:"Backup / Restore",icon:"fa fa-hdd",sortBy:"file_time",direction:"desc",columns:this.columns,dataUrl:"index/backup",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"backup",hasAdvancedFilter:!1,hasInlineActions:!0},this.uploader=new C.bA({url:this.config.getApiUrl()+"backup/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.response.subscribe(e=>{this.toastr.success("file_uploaded_successfully"),this.modelView.reload()})}showDatabaseRestoreProgress(){this.dialogService.open(Lc,{header:"Restoring Database",width:"500px",closable:!1}).onClose.subscribe(e=>{!0===e&&this.api.get("restore/postRestoreOperations").subscribe(e=>{this.router.navigate(["dashboard"])})})}onAction(e){switch(e.action){case"create":this.createBackup();break;case"delete":this.destroyBackup(e.row.id);break;case"restore":this.restoreBackup(e.row.id);break;case"download":this.download(e.row.id);break;case"upload":this.upload();break;case"settings":this.router.navigate(["settings/backup"])}}createBackup(){this.blockUI.start(""),this.api.get("backup/create").subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(e.message),this.modelView.reload())})}destroyBackup(e){this.swal.confirm({title:"Delete Backup File ?",type:"warning",text:"Delete Selected Backup File ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start(),this.api.delete("backup/"+e.toString()).subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.toastr.success(e.message),this.modelView.reload())})})}restoreBackup(e){this.swal.confirm({title:"Database Restore",type:"warning",text:"Restore selected backup file ?",confirmButtonText:"Yes"}).subscribe(()=>{this.blockUI.start(),this.api.get("restore/"+e.toString()).subscribe(e=>{this.blockUI.stop(),200===e.status&&this.showDatabaseRestoreProgress()})})}download(e){this.api.get("backup/prepareDownload/"+e).subscribe(e=>{200===e.status&&this.api.goto("backup/download/"+e.data.real_filename+"/"+e.data.user_filename)})}upload(){this.fileUploadField.nativeElement.click()}onCellClicked(e){"filename"===e.column&&this.download(e.row.id)}}zc.\u0275fac=function(e){return new(e||zc)(n.Y36(h),n.Y36(g._W),n.Y36(Ge),n.Y36(l),n.Y36(fa.xA),n.Y36(p.F0))},zc.\u0275cmp=n.Xpm({type:zc,selectors:[["app-backup-manager"]],viewQuery:function(e,t){if(1&e&&(n.Gf(Ec,5),n.Gf(Kc,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first),n.iGM(e=n.CRH())&&(t.fileUploadField=e.first)}},features:[n._Bn([fa.xA])],decls:3,vars:2,consts:[["name","nas_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onCellClicked",4,"ngIf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],["name","nas_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onCellClicked"],["nas_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,Bc,2,1,"model-table-view",0),n.TgZ(1,"input",1,2),n.NdJ("change",function(){return t.uploader.uploadAll()}),n.qZA()),2&e&&(n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Q6J("uploader",t.uploader))},directives:[J.O5,C.C6,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],zc.prototype,"blockUI",void 0);const jc=function(e){return{editable:e}};function Gc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",2),n.NdJ("click",function(){return n.CHM(e),n.oxw().toggle()}),n._uU(1),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngClass",n.VKq(2,jc,!0===e.enabled)),n.xp6(1),n.Oqu(e.value||" N/A ")}}function Wc(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span"),n.TgZ(1,"div",3),n.NdJ("blur",function(){return n.CHM(e),n.oxw().onBlur()}),n.TgZ(2,"div",4),n.TgZ(3,"input",5),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().value=t})("keyup.enter",function(){return n.CHM(e),n.oxw()._submit()})("keyup.cancel",function(){return n.CHM(e),n.oxw()._dismiss()}),n.qZA(),n.TgZ(4,"button",6),n.NdJ("click",function(){return n.CHM(e),n.oxw()._submit()}),n._UZ(5,"i",7),n.qZA(),n.TgZ(6,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw()._dismiss()}),n._UZ(7,"i",9),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.s9C("placeholder",e.placeholder),n.Q6J("ngModel",e.value)}}const $c=()=>{},Xc={provide:Z.JU,useExisting:(0,n.Gpc)(()=>ed),multi:!0};let ed=(()=>{class e{constructor(){this.submit=new n.vpe,this.enabled=!0,this.placeholder="",this.innerValue="",this.onChangeCallback=$c,this.onTouchedCallback=$c,this.oldValue=null,this.mode=0}get value(){return this.innerValue}set value(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e))}onBlur(){this.toggle()}writeValue(e){e!==this.innerValue&&(this.innerValue=e,this.oldValue||(this.oldValue=e))}registerOnChange(e){this.onChangeCallback=e}registerOnTouched(e){this.onTouchedCallback=e}toggle(){!this.enabled||(this.mode=1===this.mode?0:1)}_submit(){this.toggle(),this.value&&(this.submit.emit(this.value),this.oldValue=this.value)}_dismiss(){this.toggle(),this.value=this.oldValue}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-inline-editor"]],inputs:{enabled:"enabled",placeholder:"placeholder"},outputs:{submit:"submit"},features:[n._Bn([Xc])],decls:2,vars:2,consts:[[3,"ngClass","click",4,"ngIf"],[4,"ngIf"],[3,"ngClass","click"],[1,"ui-g-12",3,"blur"],[1,"p-inputgroup"],["type","text","pInputText","",1,"p-inputtext",3,"ngModel","placeholder","ngModelChange","keyup.enter","keyup.cancel"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-times"]],template:function(e,t){1&e&&(n.YNc(0,Gc,2,4,"span",0),n.YNc(1,Wc,8,2,"span",1)),2&e&&(n.Q6J("ngIf",0===t.mode),n.xp6(1),n.Q6J("ngIf",1===t.mode))},directives:[J.O5,J.mk,Z.Fj,qa.o,Z.JJ,Z.On],styles:[".editable[_ngcontent-%COMP%]{border-bottom:1px dashed #313131}.ui-inputgroup[_ngcontent-%COMP%]{height:2rem}"]}),e})();const td=["fileUpload"];function ad(e,t){if(1&e&&(n.TgZ(0,"div",25),n._UZ(1,"i",26),n._uU(2),n.TgZ(3,"a",27),n._UZ(4,"i",28),n._uU(5),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij(" ",e.tr.translate("2fa_disabled_warning")," "),n.xp6(3),n.hij(" ",e.tr.translate("2fa_setup_button"),"")}}function id(e,t){if(1&e&&(n.TgZ(0,"div",29),n._UZ(1,"i",26),n._uU(2),n.TgZ(3,"a",27),n._UZ(4,"i",28),n._uU(5),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij(" ",e.tr.translate("2fa_enabled_info")," "),n.xp6(3),n.hij(" ",e.tr.translate("2fa_setup_button"),"")}}class nd{constructor(e,t,a,i,n){this.auth=e,this.toastr=t,this.api=a,this.config=i,this.tr=n,this.newPassword={password:"",confirmPassword:""}}ngOnInit(){this.fullname=this.auth.client.firstname+" "+this.auth.client.lastname,this.uploader=new C.bA({url:this.config.getApiUrl()+"manager/avatar/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName),maxFileSize:612e3}),this.uploader.response.subscribe(()=>{this.api.get("auth").subscribe(e=>{200==e.status&&(this.auth.client=e.client)})},e=>{console.log(e),alert("error")})}uploadAvatar(){this.fileUploadField.nativeElement.click()}changePassword(){this.blockUI.start(),this.api.post("manager/password",{password:this.newPassword.password}).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.newPassword.password="",this.newPassword.confirmPassword="")})}update(e,t){this.api.post("manager/profile",{attribute:e,value:t}).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.api.get("auth").subscribe(e=>{this.auth.setProfile(e.client)})):this.toastr.error("unknown error occurred")})}}function od(e,t){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"br"),n._uU(2," HTTP: "),n.TgZ(3,"a",11),n._uU(4),n.qZA(),n._UZ(5,"br"),n._uU(6," HTTPS: "),n.TgZ(7,"a",11),n._uU(8),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.MGl("href","http://tunnel2.snono.systems:1",e.license_id,"",n.LSH),n.xp6(1),n.hij("http://tunnel2.snono.systems:1",e.license_id,""),n.xp6(3),n.MGl("href","https://tunnel2.snono.systems:2",e.license_id,"",n.LSH),n.xp6(1),n.hij("https://tunnel2.snono.systems:2",e.license_id,"")}}function sd(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"ONLINE"),n.qZA())}function rd(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"OFFLINE"),n.qZA())}function ld(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",12),n._uU(2," Connect"),n.qZA())}function cd(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",13),n._uU(2," Disconnect"),n.qZA())}function dd(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"RUNNING"),n.qZA())}function ud(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"STOPPED"),n.qZA())}nd.\u0275fac=function(e){return new(e||nd)(n.Y36(_),n.Y36(g._W),n.Y36(h),n.Y36(l),n.Y36(M))},nd.\u0275cmp=n.Xpm({type:nd,selectors:[["app-manager-profile"]],viewQuery:function(e,t){if(1&e&&n.Gf(td,5),2&e){let e;n.iGM(e=n.CRH())&&(t.fileUploadField=e.first)}},decls:46,vars:19,consts:[["class","alert alert-warning",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"row"],[1,"col"],[1,"card","profile-card"],[1,"card-header","bg-secondary"],[1,"card-body"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[3,"ngModel","ngModelChange","submit"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"fa","fa-globe"],["placeholder","country",3,"ngModel","ngModelChange","submit"],["placeholder","city",3,"ngModel","ngModelChange","submit"],["type","password",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",2,"float","right",3,"disabled","click"],["id","avatarCard",1,"card-body"],["id","avatarContainer"],["onerror","this.src='assets/img/avatars/default_user.jpg';","alt","profile image",2,"max-height","290px",3,"src"],["id","imageSizeNote"],["id","changeButton",3,"click"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],[1,"alert","alert-warning"],[1,"fa","fa-user-shield"],["href","./#/manager/twofactorsetup",1,"float-right"],[1,"fa","fa-shield-alt"],[1,"alert","alert-info"]],template:function(e,t){1&e&&(n.YNc(0,ad,6,2,"div",0),n.YNc(1,id,6,2,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"div",5),n._uU(6),n.qZA(),n.TgZ(7,"div",6),n.TgZ(8,"ul",7),n.TgZ(9,"li"),n._UZ(10,"i",8),n.TgZ(11,"app-inline-editor",9),n.NdJ("ngModelChange",function(e){return t.fullname=e})("submit",function(e){return t.update("fullname",e)}),n.qZA(),n.qZA(),n.TgZ(12,"li"),n._UZ(13,"i",10),n.TgZ(14,"app-inline-editor",9),n.NdJ("ngModelChange",function(e){return t.auth.client.phone=e})("submit",function(e){return t.update("phone",e)}),n.qZA(),n.qZA(),n.TgZ(15,"li"),n._UZ(16,"i",11),n.TgZ(17,"app-inline-editor",9),n.NdJ("ngModelChange",function(e){return t.auth.client.address=e})("submit",function(e){return t.update("address",e)}),n.qZA(),n.qZA(),n.TgZ(18,"li"),n._UZ(19,"i",12),n.TgZ(20,"app-inline-editor",9),n.NdJ("ngModelChange",function(e){return t.auth.client.email=e})("submit",function(e){return t.update("email",e)}),n.qZA(),n.qZA(),n.TgZ(21,"li"),n._UZ(22,"i",13),n.TgZ(23,"app-inline-editor",14),n.NdJ("ngModelChange",function(e){return t.auth.client.country=e})("submit",function(e){return t.update("country",e)}),n.qZA(),n.qZA(),n.TgZ(24,"li"),n._UZ(25,"i",13),n.TgZ(26,"app-inline-editor",15),n.NdJ("ngModelChange",function(e){return t.auth.client.city=e})("submit",function(e){return t.update("city",e)}),n.qZA(),n.qZA(),n.TgZ(27,"li"),n.TgZ(28,"input",16),n.NdJ("ngModelChange",function(e){return t.newPassword.password=e}),n.qZA(),n.qZA(),n.TgZ(29,"li"),n.TgZ(30,"input",16),n.NdJ("ngModelChange",function(e){return t.newPassword.confirmPassword=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(31,"button",17),n.NdJ("click",function(){return t.changePassword()}),n._uU(32),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(33,"div",3),n.TgZ(34,"div",4),n.TgZ(35,"div",5),n._uU(36),n.qZA(),n.TgZ(37,"div",18),n.TgZ(38,"div",19),n._UZ(39,"img",20),n.qZA(),n.TgZ(40,"span",21),n._uU(41,"*500KB Max"),n.qZA(),n.TgZ(42,"span",22),n.NdJ("click",function(){return t.uploadAvatar()}),n._uU(43),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(44,"input",23,24),n.NdJ("change",function(){return t.uploader.uploadAll()}),n.qZA()),2&e&&(n.Q6J("ngIf",0===t.auth.client.requires_2fa&&t.auth.has("prm_managers_2fa")),n.xp6(1),n.Q6J("ngIf",1===t.auth.client.requires_2fa&&t.auth.has("prm_managers_2fa")),n.xp6(5),n.hij(" ",t.tr.translate("manager_profile_label_account")," "),n.xp6(5),n.Q6J("ngModel",t.fullname),n.xp6(3),n.Q6J("ngModel",t.auth.client.phone),n.xp6(3),n.Q6J("ngModel",t.auth.client.address),n.xp6(3),n.Q6J("ngModel",t.auth.client.email),n.xp6(3),n.Q6J("ngModel",t.auth.client.country),n.xp6(3),n.Q6J("ngModel",t.auth.client.city),n.xp6(2),n.s9C("placeholder",t.tr.translate("manager_profile_placeholder_new_password")),n.Q6J("ngModel",t.newPassword.password),n.xp6(2),n.s9C("placeholder",t.tr.translate("manager_profile_placeholder_confirm_password")),n.Q6J("ngModel",t.newPassword.confirmPassword),n.xp6(1),n.Q6J("disabled",t.newPassword.password.length<3||t.newPassword.password!=t.newPassword.confirmPassword),n.xp6(1),n.Oqu(t.tr.translate("manager_profile_btn_password")),n.xp6(4),n.hij(" ",t.tr.translate("manager_profile_label_image")," "),n.xp6(3),n.s9C("src","data:image/jpg;base64,"+t.auth.client.avatar_data,n.LSH),n.xp6(4),n.hij(" [",t.tr.translate("manager_profile_image_change"),"] "),n.xp6(1),n.Q6J("uploader",t.uploader))},directives:[J.O5,ed,Z.JJ,Z.On,Z.Fj,C.C6],styles:["#avatarCard[_ngcontent-%COMP%]   #changeButton[_ngcontent-%COMP%]{color:#93a1a1;cursor:pointer;float:right}#avatarCard[_ngcontent-%COMP%]   #changeButton[_ngcontent-%COMP%]:active{color:red}#avatarCard[_ngcontent-%COMP%]   #avatarContainer[_ngcontent-%COMP%]{border:1px solid #eee8d5;min-height:300px;width:100%;text-align:center;padding:5px}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.profile-card[_ngcontent-%COMP%]{height:100%}#imageSizeNote[_ngcontent-%COMP%]{color:#a16f7a;cursor:pointer;font-weight:lighter;font-size:smaller}"]}),(0,c.gn)([(0,u.bH)()],nd.prototype,"blockUI",void 0);const pd=function(e,t){return{"status-running":e,"status-stopped":t}};function gd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",5),n._uU(2),n._UZ(3,"br"),n.TgZ(4,"span"),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"td",14),n.YNc(7,dd,2,0,"span",6),n.YNc(8,ud,2,0,"span",6),n.qZA(),n.TgZ(9,"td",8),n.TgZ(10,"span",9),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().startService(t.name)}),n._UZ(11,"i",12),n._uU(12," START"),n.qZA(),n.TgZ(13,"span",9),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().stopService(t.name)}),n._UZ(14,"i",13),n._uU(15," STOP"),n.qZA(),n.TgZ(16,"span",9),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().restartService(t.name)}),n._UZ(17,"i",15),n._uU(18," RESTART"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(2),n.Oqu(e.title),n.xp6(3),n.Oqu(e.description),n.xp6(1),n.Q6J("ngClass",n.WLB(5,pd,!0===a.serviceStatus[e.name],!1===a.serviceStatus[e.name])),n.xp6(1),n.Q6J("ngIf",!0===a.serviceStatus[e.name]),n.xp6(1),n.Q6J("ngIf",!1===a.serviceStatus[e.name])}}class fd{constructor(e){this.api=e,this.systemServices=[{name:"freeradius",title:"FreeRadius",description:"RADIUS server",status:-1},{name:"sas_poller",title:"SAS Poller",description:"cleans idle user sessions",status:-1},{name:"sas_systemmanager",title:"System Manager",description:"manages system components",status:-1},{name:"sas_trafficaccounting",title:"Traffic Monitor",description:"monitors users traffic",status:-1},{name:"sas_policymanager",title:"Policy Manager",description:"changes users speed/state based on consumed traffic and/or time of the day",status:-1},{name:"sas_cardsgenerator",title:"Cards Generator",description:"generates all kinds of cards",status:-1},{name:"sas_updatemanager",title:"Update Manager",description:"checks for new updates and install them",status:-1},{name:"sas_mailpoller",title:"Mail Poller",description:"processes mail queue",status:-1},{name:"sas_crontab",title:"Crontab Service",description:"jobs scheduler",status:-1},{name:"sas_dispoller",title:"Users Disconnect Daemon",description:"disconnects users when requested to do so",status:-1},{name:"sas_sms",title:"SMS Service",description:"sends SMS notifications",status:-1}],this.serviceStatus=[],this.tunnel_online=!1,this.license_id=""}ngOnInit(){this.updateStatus(),this.tunnelStatus(),this.timerHook=setInterval(()=>{this.updateStatus(),this.tunnelStatus()},5e3)}start(e){}stop(e){}updateStatus(){this.api.get("systemService/status").subscribe(e=>{let t=e.data;Object.keys(t).map(e=>{this.serviceStatus[e]=t[e]})})}ngOnDestroy(){clearInterval(this.timerHook)}startService(e){this.blockUI.start("Starting Service..."),this.api.post("systemService/start",{name:e}).subscribe(e=>{this.blockUI.stop()})}stopService(e){this.blockUI.start("Stopping Service..."),this.api.post("systemService/stop",{name:e}).subscribe(e=>{this.blockUI.stop()})}restartService(e){this.blockUI.start("Stopping Service..."),this.api.post("systemService/restart",{name:e}).subscribe(e=>{this.blockUI.stop()})}toggleTunnel(){this.blockUI.start(),this.api.get("tunnel/toggle").subscribe(e=>{this.blockUI.stop(),this.tunnelStatus()})}tunnelStatus(){this.api.get("tunnel/status").subscribe(e=>{this.tunnel_online=1==e.tunnel,this.license_id=e.port},e=>{console.log(e)})}}fd.\u0275fac=function(e){return new(e||fd)(n.Y36(h))},fd.\u0275cmp=n.Xpm({type:fd,selectors:[["app-system-services"]],decls:21,vars:10,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"services-table","table"],["size","40%",1,"service-name"],[4,"ngIf"],[1,"service-status",3,"ngClass"],["size","30%",1,"buttons"],[1,"service-action",3,"click"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"fa","fa-play"],[1,"fa","fa-stop"],["size","30%",1,"service-status",3,"ngClass"],[1,"fa","fa-sync-alt"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," System Services "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"table",4),n.TgZ(6,"tr"),n.TgZ(7,"td",5),n._uU(8,"Remote Access Tunnel"),n._UZ(9,"br"),n.TgZ(10,"span"),n._uU(11,"Allows remote access to the server from outside when server is behind firewall"),n.qZA(),n.YNc(12,od,9,4,"span",6),n.qZA(),n.TgZ(13,"td",7),n.YNc(14,sd,2,0,"span",6),n.YNc(15,rd,2,0,"span",6),n.qZA(),n.TgZ(16,"td",8),n.TgZ(17,"span",9),n.NdJ("click",function(){return t.toggleTunnel()}),n.YNc(18,ld,3,0,"span",6),n.YNc(19,cd,3,0,"span",6),n.qZA(),n.qZA(),n.qZA(),n.YNc(20,gd,19,8,"tr",10),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(12),n.Q6J("ngIf",!0===t.tunnel_online),n.xp6(1),n.Q6J("ngClass",n.WLB(7,pd,!0===t.tunnel_online,!1===t.tunnel_online)),n.xp6(1),n.Q6J("ngIf",1==t.tunnel_online),n.xp6(1),n.Q6J("ngIf",0==t.tunnel_online),n.xp6(3),n.Q6J("ngIf",0==t.tunnel_online),n.xp6(1),n.Q6J("ngIf",1==t.tunnel_online),n.xp6(1),n.Q6J("ngForOf",t.systemServices))},directives:[J.O5,J.mk,J.sg],styles:[".services-table[_ngcontent-%COMP%]{width:100%}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #d2d2d2;padding-bottom:20px;box-sizing:border-box;height:50px}.services-table[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]{text-align:center}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .status-running[_ngcontent-%COMP%]{color:green;font-weight:bolder}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .status-stopped[_ngcontent-%COMP%]{color:red;font-weight:bolder}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{color:#0e2231}.services-table[_ngcontent-%COMP%]   .service-action[_ngcontent-%COMP%]{cursor:pointer;margin-right:30px}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{text-align:right}.services-table[_ngcontent-%COMP%]   .service-action[_ngcontent-%COMP%]:hover{color:#313fff}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{opacity:.2}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .buttons[_ngcontent-%COMP%]{opacity:1}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:smaller;font-weight:lighter}"]}),(0,c.gn)([(0,u.bH)()],fd.prototype,"blockUI",void 0);var hd=a(96516);class md{constructor(e,t,a,i){this.auth=e,this.api=t,this.router=a,this.config=i,this.managerList=[],this.selectedManager=-1,this.suggestions=[]}ngOnInit(){}loginAs(){this.selectedManager<0||(this.blockUI.start(),this.api.post("manager/loginAs",{manager_id:this.selectedManager}).subscribe(e=>{this.blockUI.stop(),localStorage.removeItem(this.config.tokenName),localStorage.setItem(this.config.tokenName,e.token),this.router.navigate(["dashboard"]).then(e=>{location.reload()})}))}search(e){const t=e.query;t.length<2||this.api.post("index/manager",{search:t}).subscribe(e=>{this.suggestions=[],e.data.map(e=>{this.suggestions.push({id:e.id,name:e.username})})})}onSelected(e){this.selectedManager=e.id}}function _d(e,t){if(1&e&&(n.TgZ(0,"div",9),n.TgZ(1,"div",10),n._UZ(2,"div",11),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Udp("width",e.status.progress+"%")}}function bd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",12),n._uU(1),n.TgZ(2,"button",13),n.NdJ("click",function(){return n.CHM(e),n.oxw().installNext()}),n._UZ(3,"i",14),n._uU(4," Install Update"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.hij(" New Update Available (",e.remoteVersion,") ")}}function Zd(e,t){if(1&e&&(n.TgZ(0,"div",15),n._uU(1," loading changelog... "),n.qZA()),2&e){const e=n.oxw();n.Q6J("innerHtml",e.changelogDetails,n.oJD)}}function vd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",16),n._uU(1," Your system is up to date "),n.TgZ(2,"button",17),n.NdJ("click",function(){return n.CHM(e),n.oxw().check()}),n._UZ(3,"i",2),n._uU(4," Check Now"),n.qZA(),n.qZA()}}function wd(e,t){if(1&e&&(n.TgZ(0,"div",18),n._uU(1," loading history... "),n.qZA()),2&e){const e=n.oxw();n.Q6J("innerHtml",e.changelogHistory,n.oJD)}}md.\u0275fac=function(e){return new(e||md)(n.Y36(_),n.Y36(h),n.Y36(p.F0),n.Y36(l))},md.\u0275cmp=n.Xpm({type:md,selectors:[["app-login-as"]],decls:18,vars:3,consts:[[1,"card","profile-card"],[1,"card-header"],[1,"fa","fa-user-secret"],[1,"card-body"],[1,"row"],[1,"form-group","col-md-6","col-sm-12"],[1,"ui-g","ui-fluid"],[1,"ui-g-12"],["id","acomp","name","user",3,"suggestions","field","placeholder","onSelect","completeMethod"],[1,"form-text","text-muted"],[1,"card-footer"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fa","fa-box-open"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Login As... "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"label"),n._uU(8,"Manager to login as"),n.qZA(),n.TgZ(9,"div",6),n.TgZ(10,"div",7),n.TgZ(11,"p-autoComplete",8),n.NdJ("onSelect",function(e){return t.onSelected(e)})("completeMethod",function(e){return t.search(e)}),n.qZA(),n.TgZ(12,"small",9),n._uU(13,"Password-less login as any manager."),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",10),n.TgZ(15,"button",11),n.NdJ("click",function(){return t.loginAs()}),n._UZ(16,"i",12),n._uU(17," Login"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(11),n.Q6J("suggestions",t.suggestions)("field","name")("placeholder","select a manager"))},directives:[hd.Qc],styles:[""]}),(0,c.gn)([(0,u.bH)()],md.prototype,"blockUI",void 0);class yd{constructor(e){this.api=e,this.remoteVersion="4.0.1",this.status={}}getRemoteVersion(){this.blockUI.start(),this.api.get("systemUpdate/remoteVersion").subscribe(e=>{this.blockUI.stop(),200==e.status&&(this.remoteVersion=e.data),""!=this.remoteVersion&&this.getChangelog(this.remoteVersion)})}ngOnDestroy(){clearInterval(this.timerHook)}getChangelog(e){this.blockUI.start(),this.api.get("systemUpdate/changelog/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.changelogDetails=e.data)})}getChangelogHistory(){this.api.get("systemUpdate/history").subscribe(e=>{200===e.status&&(this.changelogHistory=e.data)})}installNext(){this.blockUI.start(),this.api.get("systemUpdate/install").subscribe(e=>{})}check(){this.api.get("systemUpdate/check").subscribe(e=>{this.getRemoteVersion()})}getUpdateStatus(){this.api.get("systemUpdate/status").subscribe(e=>{this.status=e.data,"update installed."===this.status.message&&(this.getRemoteVersion(),window.location.reload())})}ngOnInit(){this.getChangelogHistory(),this.getRemoteVersion(),this.getUpdateStatus(),this.timerHook=setInterval(()=>this.getUpdateStatus(),2e3)}}yd.\u0275fac=function(e){return new(e||yd)(n.Y36(h))},yd.\u0275cmp=n.Xpm({type:yd,selectors:[["app-system-update"]],decls:14,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-sync-alt"],[1,"card-body"],["class","update-progress",4,"ngIf"],["class","alert-new-update alert-info","role","alert",4,"ngIf"],["class","changelog-container",3,"innerHtml",4,"ngIf"],["class","alert-new-update alert-secondary","role","alert",4,"ngIf"],["class","changelog-history-container",3,"innerHtml",4,"ngIf"],[1,"update-progress"],[1,"progress"],[1,"progress-bar"],["role","alert",1,"alert-new-update","alert-info"],[1,"btn","btn-sm","btn-primary","btn-update",3,"click"],[1,"fa","fa-download"],[1,"changelog-container",3,"innerHtml"],["role","alert",1,"alert-new-update","alert-secondary"],[1,"btn","btn-primary","btn-update","btn-sm",3,"click"],[1,"changelog-history-container",3,"innerHtml"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," System Update "),n.qZA(),n.TgZ(4,"div",3),n.YNc(5,_d,3,2,"div",4),n.YNc(6,bd,5,1,"div",5),n.YNc(7,Zd,2,1,"div",6),n.YNc(8,vd,5,0,"div",7),n.qZA(),n.qZA(),n.TgZ(9,"div",0),n.TgZ(10,"div",1),n._uU(11," Updates History "),n.qZA(),n.TgZ(12,"div",3),n.YNc(13,wd,2,1,"div",8),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Q6J("ngIf","downloading"==t.status.status||"installing"==t.status.status),n.xp6(1),n.Q6J("ngIf",""!=t.remoteVersion&&""==t.status.status),n.xp6(1),n.Q6J("ngIf",""!=t.remoteVersion),n.xp6(1),n.Q6J("ngIf",""==t.remoteVersion&&""==t.status.status),n.xp6(5),n.Q6J("ngIf",""==t.remoteVersion&&""==t.status.status))},directives:[J.O5],styles:[".changelog-container[_ngcontent-%COMP%]{width:100%;border:1px solid #c5c5c5;padding:10px}.btn-update[_ngcontent-%COMP%]{min-width:100px;float:right;margin-right:10px}.alert-new-update[_ngcontent-%COMP%]{padding:10px;width:100%;margin-top:5px;margin-bottom:10px}.changelog-history-container[_ngcontent-%COMP%]{width:100%;border:1px solid #c5c5c5;padding:10px;max-height:400px;overflow:auto}"]}),(0,c.gn)([(0,u.bH)()],yd.prototype,"blockUI",void 0);const xd=["myForm"];function Ad(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChange(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let qd=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.trs=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.formFields=this.formsLoader.getForm("settings_advanced"),this.form_config.fields=this.formFields}load(){this.api.get("settings/adv_").subscribe(e=>{200===e.status&&(e.data.adv_idle_timeout=parseInt(e.data.adv_idle_timeout),this.myForm.setFormValue(e.data),this.onFormChange(e.data))})}ngOnInit(){this.load()}save(e){this.api.post("settings",e.value).subscribe(e=>{200==e.status&&this.toastr.success(this.trs.translate(e.message))})}onFormChange(e){1===e.adv_accept_invalid_users&&this.myForm.showField("adv_map_invalid_username"),1!=e.adv_accept_invalid_users&&this.myForm.hideField("adv_map_invalid_username"),1==e.adv_webhook_notifications&&this.myForm.showField("adv_webhook_notifications_url"),1!=e.adv_webhook_notifications&&this.myForm.hideField("adv_webhook_notifications_url"),1==e.adv_route_guard&&this.myForm.showField("adv_route_guard_url"),1!=e.adv_route_guard&&this.myForm.hideField("adv_route_guard_url")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-advacned-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(xd,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-hdd"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Advanced Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Ad,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})(),Td=(()=>{class e{constructor(e){this.api=e,this.remoteVersion=""}ngOnInit(){this.check(),this.timerHook=setInterval(()=>this.check(),6e4)}check(){this.api.get("systemUpdate/check").subscribe(e=>{this.getRemoteVersion()})}getRemoteVersion(){this.api.get("systemUpdate/remoteVersion").subscribe(e=>{200==e.status&&(this.remoteVersion=e.data)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-update-notification"]],decls:7,vars:2,consts:[[1,"update-notification-container",3,"hidden"],[1,"fa","fa-cloud-download-alt"],["href","#/tools/systemUpdate"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"i",1),n._uU(2),n.TgZ(3,"a",2),n.TgZ(4,"b"),n._uU(5,"Update"),n.qZA(),n.qZA(),n._uU(6," Your System Now.\n"),n.qZA()),2&e&&(n.Q6J("hidden",""==t.remoteVersion),n.xp6(2),n.hij(" New Software Update Available (",t.remoteVersion,"), "))},styles:[".update-notification-container[_ngcontent-%COMP%]{height:35px;background:#2796ff;color:#fff;font-size:14px;text-align:center;box-sizing:border-box;padding-top:5px;border-bottom:1px solid #69a1b4}.update-notification-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}"]}),e})();function Cd(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}let kd=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.auth=a,this.tr=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"cr",label:this.tr.translate("report_journal_cr")},{dataKey:"dr",label:this.tr.translate("report_journal_dr")},{dataKey:"amount",label:this.tr.translate("report_journal_amount")},{dataKey:"balance",label:this.tr.translate("report_journal_balance")},{dataKey:"operation",label:this.tr.translate("user_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null,this.modelViewConfig={dataUrl:"index/ManagerJournal",primaryKey:"id",title:this.tr.translate("report_journal_manager_title"),icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:this.auth.has("prm_journal_export"),exportPagination:!0}}ngOnInit(){this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.manager_id=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(_),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-journal-report"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["journal_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Cd,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();var Ud=a(55396);const Md=function(){return{width:"40vw"}};class Fd{constructor(e,t,a,i,n,o){this.swal=e,this.api=t,this.toastr=a,this.router=i,this.tr=n,this.confirmationService=o}ngOnInit(){}confirmShutdown(){this.swal.confirm({title:"Shutdown Server",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(e=>{this.api.get("system/shutdown").subscribe(e=>{this.toastr.success("System going to shutdown")})})}confirmReboot(){this.swal.confirm({title:"Reboot Server",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(e=>{this.api.get("system/reboot").subscribe(e=>{this.toastr.success("System going to reboot")})})}logoutAllManagers(){this.swal.confirm({title:"Force Logout All Managers ?",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(e=>{this.api.get("system/logoutAll").subscribe(e=>{this.toastr.success("All managers logged out"),window.location.reload()})})}gotoMigration(){this.router.navigate(["tools/migration"])}clearRadacct(){this.swal.confirm({title:"Clear Current Sessions",text:"This will clear current sessions data. Use it only when system becomes very slow or not showing online users ",type:"warning"}).subscribe(()=>{this.api.get("system/clear_sessions").subscribe(e=>{200===e.status?this.toastr.success("sessions table cleared"):this.toastr.warning("unable to clear sessions table")})})}deleteExpiredUsers(){this.confirmationService.confirm({message:"Delete Expired Users ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.get("system/deleteExpiredUsers").subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message))})}})}deleteExpiredCardUsers(){this.confirmationService.confirm({message:"Delete Expired Card Users ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.get("system/deleteExpiredCardUsers").subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message))})}})}closeOnlineSessions(){this.confirmationService.confirm({message:"Close Online Sessions ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.get("system/close_sessions").subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message))})}})}clearEmailQueue(){this.confirmationService.confirm({message:"Clear Email Queue ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.get("system/clearEmailQueue").subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message))})}})}clearSMSQueue(){this.confirmationService.confirm({message:"Clear SMS Queue ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.get("system/clearSMSQueue").subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message))})}})}}Fd.\u0275fac=function(e){return new(e||Fd)(n.Y36(Ge),n.Y36(h),n.Y36(g._W),n.Y36(p.F0),n.Y36(M),n.Y36(xi.YP))},Fd.\u0275cmp=n.Xpm({type:Fd,selectors:[["app-system-maintenance"]],decls:92,vars:3,consts:[[2,"direction","ltr","text-align","left"],[1,"text-center"],["src","assets/img/toolbox.png","height","150",1,"p-3",2,"opacity","0.5"],[1,"font-weight-light"],[1,"fa-pull-right","fa","fa-power-off"],[1,"p-3"],["role","toolbar",1,"btn-toolbar","p-1"],["type","button",1,"btn","rounded","btn-secondary","mr-2","btn-100px",3,"click"],["type","button",1,"btn","rounded","btn-secondary","btn-100px",3,"click"],[1,"fa-pull-right","fa","fa-sign-out"],["type","button",1,"btn","rounded","btn-primary","mr-2","btn-100px",3,"click"],[1,"fa-pull-right","fa","fa-database"],[1,"fa-pull-right","fa","fa-empty-set"],[1,"ml-3","mb-3"],[1,"fa-pull-right","fa","fa-window-close"],[1,"fa-pull-right","fa","fa-trash"],[1,"fa-pull-right","fa","fa-envelope-square"],[1,"fa-pull-right","fa","fa-envelope"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"img",2),n.TgZ(3,"h4",3),n._uU(4,"System Maintenance"),n.qZA(),n.qZA(),n.TgZ(5,"p-accordion"),n.TgZ(6,"p-accordionTab"),n.TgZ(7,"p-header"),n._uU(8," Power Control "),n._UZ(9,"i",4),n.qZA(),n.TgZ(10,"p",5),n._uU(11,"Power off or reboot server"),n.qZA(),n.TgZ(12,"div",6),n.TgZ(13,"button",7),n.NdJ("click",function(){return t.confirmShutdown()}),n._uU(14,"Shutdown"),n.qZA(),n.TgZ(15,"button",8),n.NdJ("click",function(){return t.confirmReboot()}),n._uU(16,"Reboot"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(17,"p-accordionTab"),n.TgZ(18,"p-header"),n._uU(19," Logout All Managers "),n._UZ(20,"i",9),n.qZA(),n.TgZ(21,"p",5),n._uU(22,"Force logout of all logged in managers (including admin)."),n.qZA(),n.TgZ(23,"div",6),n.TgZ(24,"button",10),n.NdJ("click",function(){return t.logoutAllManagers()}),n._uU(25,"Logoff Managers"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"p-accordionTab"),n.TgZ(27,"p-header"),n._uU(28," Import SAS3 Database "),n._UZ(29,"i",11),n.qZA(),n.TgZ(30,"p",5),n._uU(31,"Import SAS3 backup file. This operation will erase your current server database and erases everything."),n.qZA(),n.TgZ(32,"div",6),n.TgZ(33,"button",10),n.NdJ("click",function(){return t.gotoMigration()}),n._uU(34,"Import"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"p-accordionTab"),n.TgZ(36,"p-header"),n._uU(37," Clear Sessions Table "),n._UZ(38,"i",12),n.qZA(),n.TgZ(39,"p",5),n._uU(40,"Clears users sessions table (radacct)."),n.qZA(),n.TgZ(41,"p",13),n._uU(42," This is useful to do from time to time to reduce your database size or to force removal of stale sessions. This operation is totally safe and will NOT reset traffic counters for users. SAS4 uses different table to keep track of users traffic usage. "),n.qZA(),n.TgZ(43,"div",6),n.TgZ(44,"button",10),n.NdJ("click",function(){return t.clearRadacct()}),n._uU(45,"Clear"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(46,"p-accordionTab"),n.TgZ(47,"p-header"),n._uU(48," Close Online Sessions "),n._UZ(49,"i",14),n.qZA(),n.TgZ(50,"p",5),n._uU(51," Force all online sessions to get closed immediately. This won't affect real online users as their sessions will get opened on next interim-update. "),n.qZA(),n.TgZ(52,"div",6),n.TgZ(53,"button",10),n.NdJ("click",function(){return t.closeOnlineSessions()}),n._uU(54,"Close Sessions"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(55,"p-accordionTab"),n.TgZ(56,"p-header"),n._uU(57," Delete Expired Users "),n._UZ(58,"i",15),n.qZA(),n.TgZ(59,"p",5),n._uU(60," This operation is useful to maintain users count bellow your license limit. "),n.qZA(),n.TgZ(61,"div",6),n.TgZ(62,"button",10),n.NdJ("click",function(){return t.deleteExpiredUsers()}),n._uU(63,"Delete"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(64,"p-accordionTab"),n.TgZ(65,"p-header"),n._uU(66," Delete Expired Card Users "),n._UZ(67,"i",15),n.qZA(),n.TgZ(68,"p",5),n._uU(69," This will delete only expired card users. "),n.qZA(),n.TgZ(70,"div",6),n.TgZ(71,"button",10),n.NdJ("click",function(){return t.deleteExpiredCardUsers()}),n._uU(72,"Delete"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(73,"p-accordionTab"),n.TgZ(74,"p-header"),n._uU(75," Clear Email Queue "),n._UZ(76,"i",16),n.qZA(),n.TgZ(77,"p",5),n._uU(78," This will clear any pending emails in the queue, blocking new emails from getting sent. "),n.qZA(),n.TgZ(79,"div",6),n.TgZ(80,"button",10),n.NdJ("click",function(){return t.clearEmailQueue()}),n._uU(81,"Clear"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(82,"p-accordionTab"),n.TgZ(83,"p-header"),n._uU(84," Clear SMS Queue "),n._UZ(85,"i",17),n.qZA(),n.TgZ(86,"p",5),n._uU(87," Clear all SMS messages waiting in queue. "),n.qZA(),n.TgZ(88,"div",6),n.TgZ(89,"button",10),n.NdJ("click",function(){return t.clearSMSQueue()}),n._uU(90,"Clear"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(91,"p-confirmDialog")),2&e&&(n.xp6(91),n.Akn(n.DdM(2,Md)))},directives:[Ud.UQ,Ud.US,xi.h4,T.Q],styles:[".maintenance-item{width:100%;min-height:100px;background:#ECE9E6;background:linear-gradient(to right,#FFFFFF,#ECE9E6);border:1px solid #cecece;padding:15px;box-sizing:border-box;color:#444;margin-bottom:20px}.maintenance-icon{font-size:3rem}.maintenance-title{font-size:2rem;font-weight:bold;margin-left:20px}.maintenance-actions{float:right}.maintenance-button{width:100%;min-width:150px;text-align:left}.ui-accordion .ui-accordion-header a{padding:1.5em 1em!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a{background-color:#2a3238}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a:hover{background-color:#1d2327}body .ui-accordion .ui-accordion-header a:focus{box-shadow:0 0 0 .1em #6b6b6b}\n"],encapsulation:2}),(0,c.gn)([(0,u.bH)()],Fd.prototype,"blockUI",void 0);const Jd=["invoices_model_view"];function Od(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}let Nd=(()=>{class e{constructor(e,t,a,i,n){this.auth=e,this.api=t,this.tr=a,this.swal=i,this.toastr=n,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("manager_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("manager_invoice_table_date")},{dataKey:"type",label:this.tr.translate("manager_invoice_table_type"),dataResolver:(function(e,t){return"activate"==e?this.tr.translate("invoice_type_activate"):"deposit"==e?this.tr.translate("invoice_type_deposit"):"withdrawal"==e?this.tr.translate("invoice_type_withdrawal"):"commission"==e?this.tr.translate("invoice_type_commission"):"transfer/deposit"==e?this.tr.translate("invoice_type_transfer_deposit"):"transfer/withdrawal"==e?this.tr.translate("invoice_type_transfer_withdrawal"):e}).bind(this)},{dataKey:"username",parentKey:"owner_details",label:this.tr.translate("global_manager"),sortBy:"manager_id"},{dataKey:"amount",label:this.tr.translate("manager_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("manager_invoice_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_invoice_table_created_by"),sortBy:"created_by"},{dataKey:"payment_method",label:this.tr.translate("manager_invoice_table_method")},{dataKey:"comments",label:this.tr.translate("global_comment")},{dataKey:"paid",label:this.tr.translate("manager_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.filterFields=[{key:"status",label:this.tr.translate("manager_invoice_filter_status"),type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:"Paid"},{value:0,label:"Unpaid"}]},{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:this.tr.translate("global_filter_from_date"),type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:this.tr.translate("global_filter_to_date"),type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.actions=[{name:"pay",label:this.tr.translate("manager_invoice_action_pay"),icon:"fa fa-money",acl:"prm_any",inline:!0,requiresRow:!0}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/ManagerInvoices",primaryKey:"id",sortBy:"created_at",title:this.tr.translate("manager_invoice_table_title"),direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!0,icon:"fa fa-file-invoice-dollar",actions:this.actions,hasInlineActions:!0,allowSelect:!0,allowExport:!0},this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[{value:null,label:"All Managers"}];for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.manager_id=t})}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"pay":1!=this.modelView.currentRow.paid?this.payInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_paid"))}}payInvoice(e){this.swal.confirm({title:this.tr.translate("prompt_invoices_pay"),text:"",confirmButtonText:"Yes"}).subscribe(()=>{this.swal.prompt(this.tr.translate("prompt_invoice_comment")).subscribe(t=>{this.api.post("invoice/pay",{invoice_id:e,comments:t}).subscribe(e=>{200===e.status?this.modelView.reload():this.toastr.warning(this.tr.translate(e.message))})})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(_),n.Y36(h),n.Y36(M),n.Y36(Ge),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-managers-invoices"]],viewQuery:function(e,t){if(1&e&&n.Gf(Jd,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Od,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();const Id=["fileUploader"];function Yd(e,t){1&e&&(n.TgZ(0,"div",7),n.TgZ(1,"div",11),n.TgZ(2,"alert",12),n._UZ(3,"i",13),n._uU(4," This process will erase your current database. Make sure to download a backup file from your current database before proceeding. "),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("type","warning"))}function Qd(e,t){1&e&&(n.TgZ(0,"div",7),n.TgZ(1,"div",11),n.TgZ(2,"alert",12),n._UZ(3,"i",14),n._uU(4," Upload gzipped database files from SAS3 backup. "),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("type","info"))}function Sd(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",17),n.qZA())}function Pd(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",18),n.qZA())}function Dd(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",13),n.qZA())}const Hd=function(e,t,a){return{"p-running":e,"p-success":t,"p-error":a}};function Rd(e,t){if(1&e&&(n.TgZ(0,"p",15),n.YNc(1,Sd,2,0,"span",16),n.YNc(2,Pd,2,0,"span",16),n.YNc(3,Dd,2,0,"span",16),n._uU(4),n.qZA()),2&e){const e=t.$implicit;n.Q6J("ngClass",n.kEZ(5,Hd,"running"===e.status,"done"===e.status,"error"===e.status)),n.xp6(1),n.Q6J("ngIf","running"==e.status),n.xp6(1),n.Q6J("ngIf","done"==e.status),n.xp6(1),n.Q6J("ngIf","error"==e.status),n.xp6(1),n.hij(" ",e.text," ")}}function Vd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).start()}),n._UZ(1,"i",23),n._uU(2," Start"),n.qZA()}}function Ld(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",7),n.TgZ(1,"div",11),n.TgZ(2,"button",19),n.NdJ("click",function(){return n.CHM(e),n.oxw().selectFile()}),n._UZ(3,"i",20),n._uU(4," Upload"),n.qZA(),n.YNc(5,Vd,3,0,"button",21),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("hidden",e.uploading),n.xp6(3),n.Q6J("ngIf",e.uploaded)}}class Ed{constructor(e,t){this.config=e,this.api=t,this.uploading=!1,this.uploaded=!1,this.consoleOperations=[],this.processRunning=!1}ngOnInit(){this.uploader=new C.bA({url:this.config.getApiUrl()+"migration/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.uploader.response.subscribe(e=>{(e=JSON.parse(e))&&200===e.status&&(this.uploaded=!0,this.filename=e.filename,this.consoleOperations[0].status="done")})}selectFile(){this.fileInput.nativeElement.click()}upload(){this.consoleOperations.push({text:"Uploading File",status:"running"}),this.uploading=!0,this.uploader.uploadAll()}start(){this.processRunning=!0,this.blockUI.start(),this.importDB().subscribe(()=>{this.verify().subscribe(()=>{this.importNAStable().subscribe(()=>{this.importManagers().subscribe(()=>{this.importProfiles().subscribe(()=>{this.importProfilePricings().subscribe(()=>{this.importUsers().subscribe(()=>{this.importPrepaidCards().subscribe(()=>{this.importCardUsers().subscribe(()=>{this.blockUI.stop(),this.consoleOperations.push({text:"Migration Completed",status:"done"})})})})})})})})})})}importDB(){return this.consoleOperations.push({text:"Importing File",status:"running"}),new d.y(e=>{this.api.get("migration/import/"+this.filename).subscribe(t=>{200==t.status?(this.consoleOperations[1].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[1].status="error",e.error())})})}verify(){return this.consoleOperations.push({text:"Verifying Database",status:"running"}),new d.y(e=>{this.api.get("migration/verify").subscribe(t=>{200==t.status?(this.consoleOperations[2].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[2].status="error",e.error())})})}importNAStable(){return this.consoleOperations.push({text:"Importing NAS(s)",status:"running"}),new d.y(e=>{this.api.get("migration/import_nas").subscribe(t=>{200==t.status?(this.consoleOperations[3].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[3].status="error",e.error())})})}importManagers(){return this.consoleOperations.push({text:"Importing Managers",status:"running"}),new d.y(e=>{this.api.get("migration/import_managers").subscribe(t=>{200==t.status?(this.consoleOperations[4].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[4].status="error",e.error())})})}importProfiles(){return this.consoleOperations.push({text:"Importing Profiles",status:"running"}),new d.y(e=>{this.api.get("migration/import_profiles").subscribe(t=>{200==t.status?(this.consoleOperations[5].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[5].status="error",e.error())})})}importProfilePricings(){return this.consoleOperations.push({text:"Importing Pricing List",status:"running"}),new d.y(e=>{this.api.get("migration/import_pricing").subscribe(t=>{200==t.status?(this.consoleOperations[6].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[6].status="error",e.error())})})}importUsers(){return this.consoleOperations.push({text:"Importing Users - will take a while (~500 user / min)",status:"running"}),new d.y(e=>{this.api.get("migration/import_users").subscribe(t=>{200==t.status?(this.consoleOperations[7].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[7].status="error",e.error())})})}importPrepaidCards(){return this.consoleOperations.push({text:"Importing Prepaid Cards",status:"running"}),new d.y(e=>{this.api.get("migration/import_cards").subscribe(t=>{200==t.status?(this.consoleOperations[8].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[8].status="error",e.error())})})}importCardUsers(){return this.consoleOperations.push({text:"Importing Card Users",status:"running"}),new d.y(e=>{this.api.get("migration/import_cardUsers").subscribe(t=>{200==t.status?(this.consoleOperations[9].status="done",e.next(t),e.complete()):(this.blockUI.stop(),this.consoleOperations[9].status="error",e.error())})})}}Ed.\u0275fac=function(e){return new(e||Ed)(n.Y36(l),n.Y36(h))},Ed.\u0275cmp=n.Xpm({type:Ed,selectors:[["app-migration"]],viewQuery:function(e,t){if(1&e&&n.Gf(Id,5),2&e){let e;n.iGM(e=n.CRH())&&(t.fileInput=e.first)}},decls:16,vars:5,consts:[["type","file","ng2FileSelect","",2,"display","none",3,"uploader","change"],["fileUploader",""],[1,"card"],[1,"card-header"],[1,"fa","fa-database"],[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],[1,"migration-console"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12"],[3,"type"],[1,"fa","fa-exclamation-triangle"],[1,"fa","fa-compress"],[3,"ngClass"],[4,"ngIf"],[1,"fa","fa-circle-notch","fa-spin"],[1,"fa","fa-check-circle"],[1,"btn","btn-success","float-right",3,"hidden","click"],[1,"fa","fa-upload"],["class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"btn","btn-primary","float-right",3,"click"],[1,"fa","fa-angle-right"]],template:function(e,t){1&e&&(n.TgZ(0,"input",0,1),n.NdJ("change",function(){return t.upload()}),n.qZA(),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i",4),n._uU(5," Migration Wizard "),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div"),n.YNc(8,Yd,5,1,"div",6),n.YNc(9,Qd,5,1,"div",6),n.TgZ(10,"div",7),n.TgZ(11,"div",8),n.TgZ(12,"div",9),n.YNc(13,Rd,5,9,"p",10),n.qZA(),n.qZA(),n.qZA(),n._UZ(14,"br"),n.YNc(15,Ld,6,2,"div",6),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("uploader",t.uploader),n.xp6(8),n.Q6J("ngIf",t.uploaded),n.xp6(1),n.Q6J("ngIf",!t.uploaded),n.xp6(4),n.Q6J("ngForOf",t.consoleOperations),n.xp6(2),n.Q6J("ngIf",!t.processRunning))},directives:[C.C6,J.O5,J.sg,k.wxo,J.mk],styles:['.migration-console[_ngcontent-%COMP%]{min-height:200px;width:100%;background:#0E2231;font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:1.1rem;padding:15px;box-sizing:border-box}.p-running[_ngcontent-%COMP%]{color:#fff}.p-success[_ngcontent-%COMP%]{color:#72e896}.p-error[_ngcontent-%COMP%]{color:#ff3837}']}),(0,c.gn)([(0,u.bH)()],Ed.prototype,"blockUI",void 0);const Kd=["user_auth_log_model_view"];function Bd(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}class zd{constructor(e,t){this.api=e,this.tr=t,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",label:this.tr.translate("global_username")},{dataKey:"reply",label:"Server Reply"},{dataKey:"nas_ip_address",label:"NAS"},{dataKey:"mac",label:"MAC"}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:this.tr.translate("report_user_auth_log_title"),icon:"fas fa-server",columns:this.columns,dataUrl:"index/userauthlog",page:1,showSearchBox:!0,rowsPerPage:10,sortBy:"created_at",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"userauthlog",hasAdvancedFilter:!1,showAdvancedFilter:!1}}}zd.\u0275fac=function(e){return new(e||zd)(n.Y36(h),n.Y36(M))},zd.\u0275cmp=n.Xpm({type:zd,selectors:[["app-user-auth-log"]],viewQuery:function(e,t){if(1&e&&n.Gf(Kd,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","user_auth_log_model_view",3,"modelViewConfig",4,"ngIf"],["name","user_auth_log_model_view",3,"modelViewConfig"],["user_auth_log",""]],template:function(e,t){1&e&&n.YNc(0,Bd,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],zd.prototype,"blockUI",void 0);const jd=function(){return{height:"320px"}};function Gd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"input",22),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.subject=t}),n.qZA(),n._UZ(2,"br"),n.TgZ(3,"textarea",23),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.text=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.announcement.subject),n.xp6(2),n.Akn(n.DdM(4,jd)),n.Q6J("ngModel",e.announcement.text)}}function Wd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"textarea",24),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.text=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Akn(n.DdM(3,jd)),n.Q6J("ngModel",e.announcement.text)}}function $d(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"input",25),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.subject=t}),n.qZA(),n._UZ(2,"br"),n.TgZ(3,"p-editor",26),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.text=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.announcement.subject),n.xp6(2),n.Akn(n.DdM(4,jd)),n.Q6J("ngModel",e.announcement.text)}}function Xd(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",11),n.TgZ(1,"textarea",24),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().announcement.text=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Akn(n.DdM(3,jd)),n.Q6J("ngModel",e.announcement.text)}}function eu(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("",e.count," users selected")}}function tu(e,t){1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",27),n.qZA())}let au=(()=>{class e{constructor(e,t,a,i){this.api=e,this.swal=t,this.toastr=a,this.trs=i,this.announcement={text:"",mode:1,user_filter:null,manager_id:-1,subject:""},this.managers_list=[],this.loading=!1,this.count=0}ngOnInit(){this.loadResources(),this.getUsersCount()}send(){this.swal.confirm({title:"Announcement",type:"warning",text:"Send Announcement To Selected Users ?"}).subscribe(()=>{this.api.post("announcement",this.announcement).subscribe(e=>{200===e.status?this.toastr.success(this.trs.translate(e.message)):this.toastr.error(this.trs.translate(e.message))})})}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];t.unshift({value:-1,label:"all managers"});for(let a of e.data)t.push({value:a.id,label:a.username});this.managers_list=t})}getUsersCount(){this.loading=!0,this.api.post("announcement/count",this.announcement).subscribe(e=>{this.loading=!1,this.count=e.data})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(Ge),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-announcements"]],decls:40,vars:13,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-bullhorn"],[1,"card-body"],[1,"row"],[1,"col-md-9"],["class","col",4,"ngIf"],[1,"col-12"],[1,"float-left"],[4,"ngIf"],[1,"btn","btn-primary","float-right",3,"click"],[1,"col"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"row","ui-g","ui-fluid","w-100"],[1,"col","ui-g-12"],["placeholder","Select Manager",3,"options","autoDisplayFirst","ngModel","filter","ngModelChange","onChange"],["name","user_filter","value","active","label","Active Users",3,"ngModel","ngModelChange","onChange"],["name","user_filter","value","expired","label","Expired Users",3,"ngModel","ngModelChange","onChange"],["placeholder","Subject...",1,"form-control",3,"ngModel","ngModelChange"],["pInputTextArea","","placeholder","Enter Your Text Here",1,"form-control",3,"ngModel","ngModelChange"],["pInputTextarea","","placeholder","Enter Your Text Here",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Email Subject...",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Announcements "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",4),n.YNc(8,Gd,4,5,"div",6),n.YNc(9,Wd,2,4,"div",6),n.YNc(10,$d,4,5,"div",6),n.YNc(11,Xd,2,4,"div",6),n.qZA(),n._UZ(12,"br"),n.TgZ(13,"div",4),n.TgZ(14,"div",7),n.TgZ(15,"div",8),n.YNc(16,eu,2,1,"span",9),n.YNc(17,tu,2,0,"span",9),n.qZA(),n.TgZ(18,"button",10),n.NdJ("click",function(){return t.send()}),n._UZ(19,"i",2),n._uU(20," Send"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",11),n.TgZ(22,"select",12),n.NdJ("ngModelChange",function(e){return t.announcement.mode=e}),n.TgZ(23,"option",13),n._uU(24,"SMS"),n.qZA(),n.TgZ(25,"option",14),n._uU(26,"Email"),n.qZA(),n.TgZ(27,"option",15),n._uU(28,"Telegram"),n.qZA(),n.TgZ(29,"option",16),n._uU(30,"User Portal & App"),n.qZA(),n.qZA(),n._UZ(31,"hr"),n.TgZ(32,"div",17),n.TgZ(33,"div",18),n.TgZ(34,"p-dropdown",19),n.NdJ("ngModelChange",function(e){return t.announcement.manager_id=e})("onChange",function(){return t.getUsersCount()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"div",4),n.TgZ(36,"div",7),n.TgZ(37,"p-checkbox",20),n.NdJ("ngModelChange",function(e){return t.announcement.user_filter=e})("onChange",function(){return t.getUsersCount()}),n.qZA(),n.qZA(),n.TgZ(38,"div",7),n.TgZ(39,"p-checkbox",21),n.NdJ("ngModelChange",function(e){return t.announcement.user_filter=e})("onChange",function(){return t.getUsersCount()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Q6J("ngIf",3==t.announcement.mode),n.xp6(1),n.Q6J("ngIf",2==t.announcement.mode),n.xp6(1),n.Q6J("ngIf",1==t.announcement.mode),n.xp6(1),n.Q6J("ngIf",0==t.announcement.mode),n.xp6(5),n.Q6J("ngIf",!t.loading),n.xp6(1),n.Q6J("ngIf",t.loading),n.xp6(5),n.Q6J("ngModel",t.announcement.mode),n.xp6(12),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("ngModel",t.announcement.manager_id)("filter",!0),n.xp6(3),n.Q6J("ngModel",t.announcement.user_filter),n.xp6(2),n.Q6J("ngModel",t.announcement.user_filter))},directives:[J.O5,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,ma.Lt,_a.XZ,Z.Fj,nc.ML],styles:[""]}),e})(),iu=(()=>{class e{transform(e,t){let a=[];for(let i in e)a.push({key:i,value:e[i]});return a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=n.Yjl({name:"keyobject",type:e,pure:!0}),e.\u0275prov=n.Yz7({token:e,factory:e.\u0275fac}),e})();var nu=a(36592),ou=a(676),su=a(86025),ru=a(44748),lu=a(87564),cu=a(99287),du=a(27745),uu=a(6639);let pu=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({providers:[h,M,Ce,Pt,J.H9,Dt,yi,m,Ht,Rt,xi.YP,iu,Vt.Ap],imports:[[i.b2,p.Bz,Z.u5,Z.UX,o.PW,k.mr5.forRoot(),U.P4.forRoot(),k.u3b.forRoot(),wi.Su,k.nMh.forRoot(),k.zkK.forRoot(),u.uh.forRoot({delayStart:0,delayStop:500}),F.IJ,Nt.vI.forRoot({useBootstrap4:!0}),C.Ob,to.su.forRoot({apiKey:"AIzaSyDmdOaYJECiFdVr3G3TqN2Jq4JJDj43FxE"}),ou.d,Qa.SJ,qa.j,Na.gz,ma.kW,su._,yt.q4,Ia.Iu,ru.LU,lu.JH,T.D,Ya._8,St.q,nc.Z_,_a.nD,hd.WN,ki.S,fa.DL,cu.z,Aa.l,Lr._t,nu.nm.forRoot(),Ud.fx,du.d,Za.Ud,Vt.EC,uu.U]]}),e})();n.B6R(wt,[J.O5,J.sg,k.TOY,k.Mq7,cu.u,k.HzE,J.mk,Z.Fj,Z.JJ,Z.On,u.Z2,ga,Si],[]),n.B6R(vi,[J.O5,Z._Y,Z.JL,Z.sg,J.sg,fi],[]),n.B6R(js,[T.Q,Ca,J.sg,Z.wV,Z.Fj,J.mk,Z.JJ,Z.On,J.O5],[]),n.B6R(ce,[J.O5,J.RF,J.n9,Ul,Ml,Ol,Jl,Yc],[]);const gu=["myForm"];function fu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",9,10),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let hu=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("settings_portal"),this.form_config.fields=this.formFields,this.load()}load(){this.api.get("settings/portal_").subscribe(e=>{200===e.status&&this.myForm.setFormValue(e.data)})}save(e){this.api.post("settings/portal",e.value).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-portal-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(gu,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:11,vars:1,consts:[["role","alert",1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"i",1),n._uU(2,"\xa0 Server reboot is required for some of these changes to take effect. "),n.qZA(),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n._UZ(5,"i",4),n._uU(6," Web Portal Settings "),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",6),n.TgZ(9,"div",7),n.YNc(10,fu,2,2,"dynamic-form",8),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(10),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{text-align:left}"]}),e})();function mu(e,t){if(1&e&&(n.TgZ(0,"option",41),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e.value),n.xp6(1),n.Oqu(e.label)}}function _u(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",33),n.TgZ(1,"td",34),n.TgZ(2,"select",35),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_service.profile_id=t})("change",function(){n.CHM(e);const t=n.oxw();return t.getProfile(t.new_service.profile_id)}),n.TgZ(3,"option",36),n._uU(4,"Select Profile"),n.qZA(),n.YNc(5,mu,2,2,"option",37),n.qZA(),n.qZA(),n.TgZ(6,"td"),n.TgZ(7,"input",38),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_service.qty=t})("change",function(){n.CHM(e);const t=n.oxw();return t.new_service.total=t.new_service.qty*t.new_service.unit_price}),n.qZA(),n.qZA(),n.TgZ(8,"td"),n.TgZ(9,"span"),n._uU(10),n.ALo(11,"currency"),n.qZA(),n.qZA(),n.TgZ(12,"td"),n.TgZ(13,"span"),n._uU(14),n.ALo(15,"currency"),n.qZA(),n.qZA(),n.TgZ(16,"td"),n.TgZ(17,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().addService()}),n._UZ(18,"i",39),n.qZA(),n._uU(19,"\xa0 "),n.TgZ(20,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().hideNewServiceRow()}),n._UZ(21,"i",40),n.qZA(),n._uU(22,"\xa0 "),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngModel",e.new_service.profile_id),n.xp6(3),n.Q6J("ngForOf",e.profile_list),n.xp6(2),n.Q6J("ngModel",e.new_service.qty),n.xp6(3),n.Oqu(n.xi3(11,5,e.new_service.unit_price," "+e.config.siteConfig.site_currency)),n.xp6(4),n.Oqu(n.xi3(15,8,e.new_service.total," "+e.config.siteConfig.site_currency))}}function bu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr",42),n.TgZ(1,"td",34),n.TgZ(2,"input",43),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_custom_service.name=t}),n.qZA(),n.qZA(),n.TgZ(3,"td"),n.TgZ(4,"input",38),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_custom_service.qty=t})("change",function(){n.CHM(e);const t=n.oxw();return t.new_custom_service.total=t.new_custom_service.qty*t.new_custom_service.unit_price}),n.qZA(),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.TgZ(7,"input",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().new_custom_service.unit_price=t})("change",function(){n.CHM(e);const t=n.oxw();return t.new_custom_service.total=t.new_custom_service.qty*t.new_custom_service.unit_price}),n.qZA(),n.qZA(),n.TgZ(8,"td"),n.TgZ(9,"span"),n._uU(10),n.ALo(11,"currency"),n.qZA(),n.qZA(),n.TgZ(12,"td"),n.TgZ(13,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().addCustomService()}),n._UZ(14,"i",39),n.qZA(),n._uU(15,"\xa0 "),n.TgZ(16,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().hideNewServiceRow()}),n._UZ(17,"i",40),n.qZA(),n._uU(18,"\xa0 "),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngModel",e.new_custom_service.name),n.xp6(2),n.Q6J("ngModel",e.new_custom_service.qty),n.xp6(2),n.hij(" ",e.config.siteConfig.site_currency,""),n.xp6(1),n.Q6J("ngModel",e.new_custom_service.unit_price),n.xp6(3),n.Oqu(n.xi3(11,5,e.new_custom_service.total," "+e.config.siteConfig.site_currency))}}function Zu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n.TgZ(10,"button",16),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().removeInvoiceItem(t.id)}),n._UZ(11,"i",40),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.name),n.xp6(2),n.Oqu(e.qty),n.xp6(2),n.Oqu(e.unit_price),n.xp6(2),n.Oqu(e.total)}}class vu{constructor(e,t,a,i,n,o,s){this.api=e,this.config=t,this.ch=a,this.route=i,this.auth=n,this.router=o,this.toastr=s,this.selected_user=null,this.suggestions=[],this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!1},this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!1},this.profile_list=[],this.invoice_items=[],this.receipent={},this.invoice={items:[],due_date:"",client_id:null,discount:0,total:0},this.sender=this.auth.client,this.route.params.subscribe(e=>{e.user_id&&(this.selected_user={id:e.user_id},this.getReceipentDetails())})}search(e){let t=e.query;t.length<2||this.api.post("index/user",{search:t}).subscribe(e=>{this.suggestions=[],e.data.map(e=>{this.suggestions.push({id:e.id,name:"<"+e.username+"> "+e.firstname+" "+e.lastname})})})}loadResources(){this.api.get("list/profile/0").subscribe(e=>{this.profile_list=[],e.data.map(e=>{this.profile_list.push({value:e.id,label:e.name})})})}getProfile(e){this.api.get("profile/price/user/"+e).subscribe(e=>{200==e.status&&(this.new_service.unit_price=e.data,this.new_service.total=this.new_service.unit_price*this.new_service.qty)})}getReceipentDetails(){this.api.get("user/"+this.selected_user.id).subscribe(e=>{200==e.status&&(this.receipent=e.data)})}showNewServiceRow(){this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!0}}hideNewServiceRow(){this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!1}}showNewCustomServiceRow(){this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!0}}hideNewCustomServiceRow(){this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!1}}addService(){let e="";this.profile_list.map(t=>{t.value==this.new_service.profile_id&&(e=t.label)}),this.invoice_items.push({profile_id:this.new_service.profile_id,qty:this.new_service.qty,unit_price:this.new_service.unit_price,total:this.new_service.total,name:e,id:this.ch.guid()}),this.hideNewServiceRow(),this.updateTotal()}addCustomService(){this.invoice_items.push({profile_id:this.new_custom_service.profile_id,qty:this.new_custom_service.qty,unit_price:this.new_custom_service.unit_price,total:this.new_custom_service.total,name:this.new_custom_service.name,id:this.ch.guid()}),this.hideNewCustomServiceRow(),this.updateTotal()}removeInvoiceItem(e){let t=0;this.invoice_items.map(a=>{a.id==e&&this.invoice_items.splice(t,1),t++}),this.updateTotal()}ngOnInit(){this.loadResources()}save(e=!1){this.invoice.items=this.invoice_items,this.invoice.client_id=this.selected_user.id,this.blockUI.start(),this.api.post("user/invoice",this.invoice).subscribe(t=>{if(this.blockUI.stop(),200===t.status&&(this.toastr.success(t.message),this.router.navigate(["billing/invoices/index"]),!0===e)){const e=t.data.id;this.api.downloadFile("userInvoice/download/"+e,"invoice_"+e)}})}updateTotal(){this.invoice.total=0,this.invoice_items.map(e=>{this.invoice.total+=parseFloat(e.total)}),this.invoice.total=this.invoice.total-this.invoice.discount*(this.invoice.total/100)}}vu.\u0275fac=function(e){return new(e||vu)(n.Y36(h),n.Y36(l),n.Y36(m),n.Y36(p.gz),n.Y36(_),n.Y36(p.F0),n.Y36(g._W))},vu.\u0275cmp=n.Xpm({type:vu,selectors:[["app-user-invoice-form"]],decls:114,vars:37,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-file-invoice-dollar"],[1,"card-body"],[1,"row",3,"hidden"],[1,"col-sm-12","col-md-6"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","user",1,"ui-small",3,"ngModel","suggestions","field","placeholder","ngModelChange","completeMethod","onSelect"],[3,"hidden"],[1,"row"],[1,"col-md-6"],[1,"organization-container"],[1,"col-md-6","label"],[1,"col-md-6","address"],[1,"row","col-md-12"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-plus"],["id","items-container",1,"col-md-12"],[1,"items-table"],["id","new_service_row","class","new-item-row",4,"ngIf"],["id","new_custom_service_row","class","new-item-row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"form-group","row","required"],[1,"col-md-3","col-form-label"],[1,"col-9"],["type","date","name","due_date",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"form-group","row"],["type","number","name","discount",1,"form-control","input-small",3,"ngModel","ngModelChange","change"],[1,"form-control-static"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button","btn-sm",3,"disabled","click"],["id","new_service_row",1,"new-item-row"],["width","30%"],["name","profile_id",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","qty","type","number","name","qty",3,"ngModel","ngModelChange","change"],[1,"fa","fa-check"],[1,"fa","fa-trash"],[3,"value"],["id","new_custom_service_row",1,"new-item-row"],["placeholder","item name","type","text","name","name","autocomplete","false",3,"ngModel","ngModelChange"],["placeholder","unit_price","type","number","name","unit_price",3,"ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," User Invoice Form "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n.TgZ(9,"p-autoComplete",8),n.NdJ("ngModelChange",function(e){return t.selected_user=e})("completeMethod",function(e){return t.search(e)})("onSelect",function(){return t.getReceipentDetails()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",9),n._UZ(11,"br"),n.TgZ(12,"div",10),n.TgZ(13,"div",11),n._uU(14," Organization"),n._UZ(15,"br"),n.TgZ(16,"div",12),n.TgZ(17,"div",10),n.TgZ(18,"div",13),n._uU(19," Sender "),n.qZA(),n.TgZ(20,"div",14),n._uU(21),n._UZ(22,"br"),n._uU(23),n._UZ(24,"br"),n._uU(25),n._UZ(26,"br"),n._uU(27),n._UZ(28,"br"),n._uU(29),n._UZ(30,"br"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(31,"div",11),n._uU(32," Client"),n._UZ(33,"br"),n.TgZ(34,"div",12),n.TgZ(35,"div",10),n.TgZ(36,"div",13),n._uU(37," Recipient "),n.qZA(),n.TgZ(38,"div",14),n._uU(39),n._UZ(40,"br"),n._uU(41),n._UZ(42,"br"),n._uU(43),n._UZ(44,"br"),n._uU(45),n._UZ(46,"br"),n._uU(47),n._UZ(48,"br"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(49,"hr"),n.TgZ(50,"div",15),n.TgZ(51,"button",16),n.NdJ("click",function(){return t.showNewServiceRow()}),n._UZ(52,"i",17),n._uU(53," Add Service"),n.qZA(),n._uU(54,"\xa0 "),n.TgZ(55,"button",16),n.NdJ("click",function(){return t.showNewCustomServiceRow()}),n._UZ(56,"i",17),n._uU(57," Add Custom Item"),n.qZA(),n.qZA(),n._UZ(58,"br"),n.TgZ(59,"div",10),n.TgZ(60,"div",18),n.TgZ(61,"table",19),n.TgZ(62,"thead"),n.TgZ(63,"th"),n._uU(64," Item "),n.qZA(),n.TgZ(65,"th"),n._uU(66,"Qty"),n.qZA(),n.TgZ(67,"th"),n._uU(68),n.qZA(),n.TgZ(69,"th"),n._uU(70),n.qZA(),n._UZ(71,"th"),n.qZA(),n.TgZ(72,"tbody"),n.YNc(73,_u,23,11,"tr",20),n.YNc(74,bu,19,8,"tr",21),n.YNc(75,Zu,12,4,"tr",22),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(76,"br"),n._UZ(77,"hr"),n.TgZ(78,"div",10),n.TgZ(79,"div",23),n.TgZ(80,"div",24),n.TgZ(81,"label",25),n._uU(82," Due Date "),n.qZA(),n.TgZ(83,"div",26),n.TgZ(84,"input",27),n.NdJ("ngModelChange",function(e){return t.invoice.due_date=e}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(85,"div",23),n.TgZ(86,"div",28),n.TgZ(87,"label",25),n._uU(88," Discount (%) "),n.qZA(),n.TgZ(89,"div",26),n.TgZ(90,"input",29),n.NdJ("ngModelChange",function(e){return t.invoice.discount=e})("change",function(){return t.updateTotal()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(91,"div",23),n.TgZ(92,"div",28),n.TgZ(93,"label",25),n._uU(94," Discount Value "),n.qZA(),n.TgZ(95,"div",26),n.TgZ(96,"label",30),n._uU(97),n.ALo(98,"currency"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(99,"div",23),n.TgZ(100,"div",28),n.TgZ(101,"label",25),n._uU(102," Total "),n.qZA(),n.TgZ(103,"div",26),n.TgZ(104,"label",30),n._uU(105),n.ALo(106,"currency"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(107,"br"),n._UZ(108,"hr"),n.TgZ(109,"div",31),n.TgZ(110,"button",32),n.NdJ("click",function(){return t.save()}),n._uU(111,"Save"),n.qZA(),n.TgZ(112,"button",32),n.NdJ("click",function(){return t.save(!0)}),n._uU(113,"Save & Print"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Q6J("hidden",t.selected_user&&t.selected_user.id),n.xp6(4),n.Q6J("ngModel",t.selected_user)("suggestions",t.suggestions)("field","name")("placeholder","select client"),n.xp6(1),n.Q6J("hidden",!t.selected_user||!t.selected_user.id),n.xp6(11),n.AsE(" ",t.sender.firstname," ",t.sender.lastname,"."),n.xp6(2),n.hij(" ",t.sender.company,""),n.xp6(2),n.hij(" ",t.sender.phone,""),n.xp6(2),n.hij(" ",t.sender.address,""),n.xp6(2),n.AsE(" ",t.sender.country," - ",t.sender.city,""),n.xp6(10),n.AsE(" ",t.receipent.firstname," ",t.receipent.lastname,"."),n.xp6(2),n.hij(" ",t.receipent.company,""),n.xp6(2),n.hij(" ",t.receipent.phone,""),n.xp6(2),n.hij(" ",t.receipent.address,""),n.xp6(2),n.AsE(" ",t.receipent.country," - ",t.receipent.city,""),n.xp6(21),n.hij("Unit Price (",t.config.siteConfig.site_currency,")"),n.xp6(2),n.hij("Total (",t.config.siteConfig.site_currency,")"),n.xp6(3),n.Q6J("ngIf",t.new_service.visible),n.xp6(1),n.Q6J("ngIf",t.new_custom_service.visible),n.xp6(1),n.Q6J("ngForOf",t.invoice_items),n.xp6(9),n.Q6J("ngModel",t.invoice.due_date),n.xp6(6),n.Q6J("ngModel",t.invoice.discount),n.xp6(7),n.Oqu(n.xi3(98,31,t.invoice.total*t.invoice.discount/100," "+t.config.siteConfig.site_currency)),n.xp6(8),n.Oqu(n.xi3(106,34,t.invoice.total," "+t.config.siteConfig.site_currency)),n.xp6(5),n.Q6J("disabled",!t.invoice_items||t.invoice_items.length<1),n.xp6(2),n.Q6J("disabled",!t.invoice_items||t.invoice_items.length<1))},directives:[hd.Qc,Z.JJ,Z.On,J.O5,J.sg,Z.Fj,Z.wV,Z.EJ,Z.YN,Z.Kr],pipes:[J.H9],styles:[".organization-container[_ngcontent-%COMP%]{margin-top:.5rem}.organization-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:lighter;font-size:smaller}.organization-container[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{font-size:smaller}.items-table[_ngcontent-%COMP%]{width:100%}.items-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #fffeff}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f4f7f8;font-size:small;padding:7px}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:none;background:transparent;width:100%}.new-item-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .new-item-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .new-item-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:bold!important}"]}),(0,c.gn)([(0,u.bH)()],vu.prototype,"blockUI",void 0);const wu=["invoices_model_view"];function yu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)}}class xu{constructor(e,t,a,i,n){this.api=e,this.tr=t,this.toastr=a,this.swal=i,this.router=n,this.tableColumns=[{dataKey:"invoice_number",label:"Invoice No"},{dataKey:"created_at",label:"Date",hidden:!0},{dataKey:"due_date",label:"Due Date"},{dataKey:"username",parentKey:"user_details",label:"Username",sortBy:"user_id"},{dataKey:"type",label:"Type"},{dataKey:"amount",label:"Amount"},{dataKey:"description",label:"Description"},{dataKey:"username",parentKey:"manager_details",label:"Created By",sortBy:"created_by"},{dataKey:"payment_method",label:"Payment Method"},{dataKey:"paid",label:"Paid",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.filterFields=[{key:"status",label:"Invoice Status",type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:"All"},{value:1,label:"Paid"},{value:0,label:"Unpaid"}]},{key:"username",label:"Username",type:"text",value:null,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.actions=[{name:"pay",label:this.tr.translate("manager_invoice_action_pay"),icon:"fa fa-cash-note",acl:"prm_any",inline:!0,requiresRow:!0},{name:"unpay",label:this.tr.translate("manager_invoice_action_unpay"),icon:"fa fa-cash-note",acl:"prm_any",inline:!0,requiresRow:!0},{name:"download",label:this.tr.translate("global_download"),icon:"fa fa-file-pdf",acl:"prm_any",inline:!0,requiresRow:!0},{name:"",label:"",type:"separator",acl:"prm_managers_sysadmin"},{name:"designer",label:this.tr.translate("user_invoice_title_action"),acl:"prm_managers_sysadmin",inline:!1,requiresRow:!1}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={hasHeader:!0,title:"Users Invoices",icon:"fa fa-file-invoice-dollar",dataUrl:"index/UserInvoices",primaryKey:"id",sortBy:"created_at",allowSelect:!0,direction:"desc",columns:this.tableColumns,actions:this.actions,useUrlFilter:!0,hasAdvancedFilter:!0,hasInlineActions:!0,showSearchBox:!0,allowExport:!0}}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),console.log(e),e.action){case"pay":1!=this.modelView.currentRow.paid?this.payInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_paid"));break;case"unpay":console.log(this.modelView.currentRow),1===this.modelView.currentRow.paid?this.unpayInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_unpaid"));break;case"download":this.blockUI.start(),this.api.downloadFile("userInvoice/download/"+t,"invoice_"+t),this.blockUI.stop();break;case"designer":this.router.navigate(["settings/userInvoiceDesigner"])}}payInvoice(e){this.swal.confirm({title:this.tr.translate("prompt_invoices_pay"),text:"",confirmButtonText:"Yes"}).subscribe(()=>{this.api.get("user/invoice/pay/"+e).subscribe(e=>{200===e.status?this.modelView.reload():this.toastr.warning(this.tr.translate(e.message))})})}unpayInvoice(e){this.swal.confirm({title:this.tr.translate("prompt_invoices_unpay"),text:"",confirmButtonText:"Yes"}).subscribe(()=>{this.api.get("user/invoice/unpay/"+e).subscribe(e=>{200===e.status?this.modelView.reload():this.toastr.warning(this.tr.translate(e.message))})})}}function Au(e,t){if(1&e&&(n.TgZ(0,"tr",3),n.TgZ(1,"td",1),n._uU(2,"Disk"),n.qZA(),n.TgZ(3,"td",2),n._uU(4),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(4),n.AsE("",e.name," - ",e.size,"")}}xu.\u0275fac=function(e){return new(e||xu)(n.Y36(h),n.Y36(M),n.Y36(g._W),n.Y36(Ge),n.Y36(p.F0))},xu.\u0275cmp=n.Xpm({type:xu,selectors:[["app-user-invoice-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(wu,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&n.YNc(0,yu,2,2,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],xu.prototype,"blockUI",void 0);let qu=(()=>{class e{constructor(e){this.api=e,this.hwinfo={}}ngOnInit(){this.api.get("resources/hardware").subscribe(e=>{200===e.status&&(this.hwinfo=e.data)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-hardware-information"]],decls:26,vars:6,consts:[[1,"info-table"],["width","50%",1,"td-label"],["with","50%",1,"td-value"],[1,"with-separator"],["class","with-separator",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"table",0),n.TgZ(2,"tr"),n.TgZ(3,"td",1),n._uU(4,"Server Type"),n.qZA(),n.TgZ(5,"td",2),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"tr"),n._UZ(8,"td",1),n.TgZ(9,"td",2),n._uU(10),n.qZA(),n.qZA(),n.TgZ(11,"tr"),n._UZ(12,"td",1),n.TgZ(13,"td",2),n._uU(14),n.qZA(),n.qZA(),n.TgZ(15,"tr",3),n.TgZ(16,"td",1),n._uU(17,"CPU"),n.qZA(),n.TgZ(18,"td",2),n._uU(19),n.qZA(),n.qZA(),n.TgZ(20,"tr",3),n.TgZ(21,"td",1),n._uU(22,"RAM"),n.qZA(),n.TgZ(23,"td",2),n._uU(24),n.qZA(),n.qZA(),n.YNc(25,Au,5,2,"tr",4),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Oqu(t.hwinfo.description),n.xp6(4),n.Oqu(t.hwinfo.product),n.xp6(4),n.Oqu(t.hwinfo.vendor),n.xp6(5),n.Oqu(t.hwinfo.cpu),n.xp6(5),n.Oqu(t.hwinfo.memory_size),n.xp6(1),n.Q6J("ngForOf",t.hwinfo.disks))},directives:[J.sg],styles:[".info-table[_ngcontent-%COMP%]{width:100%;font-size:1rem}.info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.td-label[_ngcontent-%COMP%]{text-align:right;padding-right:20px!important;color:#92959c}.td-value[_ngcontent-%COMP%]{text-align:left;color:#505256;padding-left:20px!important}.with-separator[_ngcontent-%COMP%]{border-top:1px solid #dfdfdf}.with-separator[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:25px!important}"]}),e})();function Tu(e,t){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",17),n._uU(2),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij("\xa0\xa0",e.tr.translate("label_about")," ")}}function Cu(e,t){if(1&e&&(n.TgZ(0,"span"),n._UZ(1,"i",18),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij("\xa0\xa0",e.tr.translate("label_about_hardware")," ")}}function ku(e,t){1&e&&(n.TgZ(0,"tab"),n.YNc(1,Cu,3,1,"ng-template",3),n.TgZ(2,"div",0),n.TgZ(3,"div",4),n._UZ(4,"app-hardware-information"),n.qZA(),n.qZA(),n.qZA())}let Uu=(()=>{class e{constructor(e,t,a){this.config=e,this.tr=t,this.auth=a,this.logo_url="",this.logo_url=this.config.getApiUrl()+"resources/logo",console.log(this.config.siteConfig)}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(l),n.Y36(M),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-about"]],decls:30,vars:9,consts:[[1,"row"],[1,"col-md-12","mb-4"],[3,"justified"],["tabHeading",""],[1,"col"],[1,"col","text-center"],[1,"logo_image",3,"src","error"],[1,"row","background-container"],[1,"col-md-6","col-sm-12","text-left","company-details"],[1,"fa","fa-address-card"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"fa","fa-globe"],[3,"href"],[1,"col-md-6","text-right"],["src","assets/img/about_netman.png",1,"about-netman"],[4,"ngIf"],[1,"fa","fa-info-circle"],[1,"fa","fa-microchip"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"tabset",2),n.TgZ(3,"tab"),n.YNc(4,Tu,3,1,"ng-template",3),n.TgZ(5,"div",0),n.TgZ(6,"div",4),n.TgZ(7,"div",0),n.TgZ(8,"div",5),n.TgZ(9,"img",6),n.NdJ("error",function(){return t.logo_url="assets/img/sas.png"}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",7),n.TgZ(11,"div",8),n.TgZ(12,"h3"),n._uU(13),n.qZA(),n.TgZ(14,"p"),n._UZ(15,"i",9),n._uU(16),n.qZA(),n.TgZ(17,"p"),n._UZ(18,"i",10),n._uU(19),n.qZA(),n.TgZ(20,"p"),n._UZ(21,"i",11),n._uU(22),n.qZA(),n.TgZ(23,"p"),n._UZ(24,"i",12),n.TgZ(25,"a",13),n._uU(26),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"div",14),n._UZ(28,"img",15),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(29,ku,5,0,"tab",16),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("justified",!1),n.xp6(7),n.s9C("src",t.logo_url,n.LSH),n.xp6(4),n.Oqu(t.config.siteConfig.site.company_name),n.xp6(3),n.hij(" ",t.config.siteConfig.site.company_address," "),n.xp6(3),n.hij(" ",t.config.siteConfig.site.company_phone," "),n.xp6(3),n.hij(" ",t.config.siteConfig.site.company_email," "),n.xp6(3),n.s9C("href",t.config.siteConfig.site.company_website,n.LSH),n.xp6(1),n.hij(" ",t.config.siteConfig.site.company_website,""),n.xp6(3),n.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")))},directives:[U.AH,U.wW,U.y3,J.O5,qu],styles:[".company-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:lighter}.background-container[_ngcontent-%COMP%]{background-image:url(/assets/img/about-background.png);background-size:contain;min-height:250px;margin-top:90px}.about-netman[_ngcontent-%COMP%]{width:100%}.html-container[_ngcontent-%COMP%]{padding:5px;border:1px solid #eee8d5;width:100%;min-height:300px}.logo_image[_ngcontent-%COMP%]{max-width:400px;height:auto}"]}),e})();const Mu=["activations_model_view"];function Fu(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}class Ju{constructor(e,t,a){this.api=e,this.tr=t,this.auth=a,this.managers_list=[],this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",label:this.tr.translate("global_username"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"firstname",label:this.tr.translate("global_firstname"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"lastname",label:this.tr.translate("global_lastname"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"username",label:this.tr.translate("global_manager"),parentKey:"manager_details",sortBy:"manager_id"},{dataKey:"name",label:this.tr.translate("global_profile"),parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"addon_name",label:"Addon",parentKey:"addon_details",sortBy:"addon_id",hidden:!0},{dataKey:"price",label:this.tr.translate("global_price"),pipe:"currency"},{dataKey:"old_expiration",label:this.tr.translate("report_activations_old_expiration")},{dataKey:"new_expiration",label:this.tr.translate("report_activations_new_expiration")},{dataKey:"activation_method",label:this.tr.translate("user_activate_method"),hidden:!1},{dataKey:"refund_comment",label:this.tr.translate("global_comment")},{dataKey:"pin",label:"PIN",hidden:!0}],this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"sub_managers",label:this.tr.translate("manager_overview_submanagers"),type:"switch",value:1,cols:12,layout:"vertical"},{key:"profile_id",label:this.tr.translate("global_profile"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"},{key:"activation_method",label:this.tr.translate("user_activate_method"),type:"select2",layout:"vertical",cols:12,value:"any",options:[{value:"any",label:this.tr.translate("global_all")},{value:"credit",label:this.tr.translate("user_activate_option_manager_balance")},{value:"user_credit",label:this.tr.translate("user_activate_option_user_balance")},{value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")},{value:"voucher",label:this.tr.translate("user_activate_option_user_card")},{value:"card_user",label:"Prepaid User"}]},{key:"date_start",label:this.tr.translate("global_filter_from_date"),type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:this.tr.translate("global_filter_to_date"),type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[],user_id:[],profile_id:[]},this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:this.tr.translate("report_activations_title"),icon:"",columns:this.columns,dataUrl:"index/activations",page:1,showSearchBox:!0,showRowsCount:!0,allowExport:!0,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"activations",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}loadResources(){if(this.api.get("index/manager").subscribe(e=>{const t=[];for(let a of e.data)t.push({value:a.id,label:a.username});t.unshift({value:-1,label:this.tr.translate("global_filter_all_managers")}),this.filterOptions.manager_id=t}),this.api.get("list/profile/4").subscribe(e=>{const t=[];t.push({value:-1,label:"All"}),200==e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filterOptions.profile_id=t)}),this.auth.has("prm_groups_assign")){const e=[];this.api.get("group").subscribe(t=>{if(200===t.status){for(const a of t.data)e.push({value:a.id,label:a.name});e.unshift({value:-1,label:this.tr.translate("global_all")}),this.filterOptions.group_id=e}})}}}Ju.\u0275fac=function(e){return new(e||Ju)(n.Y36(h),n.Y36(M),n.Y36(_))},Ju.\u0275cmp=n.Xpm({type:Ju,selectors:[["app-activations-report"]],viewQuery:function(e,t){if(1&e&&n.Gf(Mu,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","activations_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","activations_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["activations_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Fu,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[".nav-item[_ngcontent-%COMP%]{padding-left:1rem}"]}),(0,c.gn)([(0,u.bH)()],Ju.prototype,"blockUI",void 0);const Ou=["myForm"];function Nu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let Iu=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("settings_sastrack"),this.form_config.fields=this.formFields,this.load()}load(){this.api.get("settings/sastrack_").subscribe(e=>{200==e.status&&this.myForm.setFormValue(e.data)})}save(e){this.api.post("settings/sastrack",e.value).subscribe(e=>{200==e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sastrack-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(Ou,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," SASTrack Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Nu,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();function Yu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){return n.CHM(e),n.oxw().start()}),n._UZ(1,"i",23),n._uU(2," Import"),n.qZA()}}function Qu(e,t){if(1&e&&(n.TgZ(0,"option",26),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e),n.xp6(1),n.Oqu(e)}}function Su(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"th"),n.TgZ(1,"select",24),n.NdJ("ngModelChange",function(t){const a=n.CHM(e).index;return n.oxw().tableHeader[a]=t}),n.YNc(2,Qu,2,2,"option",25),n.qZA(),n.qZA()}if(2&e){const e=t.index,a=n.oxw();n.xp6(1),n.Q6J("ngModel",a.tableHeader[e]),n.xp6(1),n.Q6J("ngForOf",a.fields)}}function Pu(e,t){if(1&e&&(n.TgZ(0,"td"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Oqu(e.value)}}function Du(e,t){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,Pu,2,1,"td",17),n.ALo(2,"keyobject"),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,e))}}function Hu(e,t){if(1&e&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Tol(e.class),n.xp6(1),n.hij(" ",e.text," ")}}class Ru{constructor(e,t,a,i){this.api=e,this.config=t,this.toastr=a,this.swal=i,this.importStarted=!1,this.tableHeader=[],this.model="user",this.ignore_header=!0,this.remoteFilename=null,this.user_fields=["ignore","username","password","profile","parent","expiration","firstname","lastname","phone","email","company","city","address","contract_id","national_id","static_ip","traffic_balance"],this.manager_fields=["ignore","username","password","firstname","lastname","parent","balance","email","company","address","phone","acl_group"],this.refill_card_fields=["ignore","pin","serialnumber","expiration","value"],this.card_users_fields=["username","password","profile","owner","expiration","value"],this.user_mandatory_fields=["username","password","profile"],this.manager_mandatory_fields=["username","password","acl_group"],this.refill_card_mandatory_fields=["pin","serialnumber","expiration","value"],this.card_users_mandatory_fields=["username","password","profile","expiration"],this.fields=null,this.consoleOutput=[]}ngOnInit(){this.uploader=new C.bA({url:this.config.getApiUrl()+"import/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.response.subscribe(e=>{this.rows=[],e=JSON.parse(e),this.remoteFilename=e.filename,this.rows=e.data,this.columns=Object.keys(this.rows[0]),this.resetColumnFields()}),this.uploader.onAfterAddingFile=e=>{e.withCredentials=!1},this.fields=this.user_fields}hasDuplicateColumns(){let e=[],t=!1;return this.tableHeader.map(a=>{"ignore"!=a&&(console.log(a),-1==e.indexOf(a)?e.push(a):t=!0)}),console.log(e),t}resetColumnFields(){let e=this.columns.length;for(let t=0;t<e;t++)this.tableHeader[t]="ignore"}onModelChanged(){switch(this.resetColumnFields(),this.model){case"user":this.fields=this.user_fields;break;case"manager":this.fields=this.manager_fields;break;case"refill_card":this.fields=this.refill_card_fields;break;case"card_users":this.fields=this.card_users_fields}}missingFields(){let e=[];if("user"==this.model){let t=0,a=t;this.user_mandatory_fields.map(i=>{a=t;for(let e of this.tableHeader)e==i&&t++;a==t&&e.push(i)})}return e}start(){if(this.hasDuplicateColumns())return void this.toastr.warning("duplicate columns selected");let e=this.missingFields();if(e.length>0){let t="These fields are missing: "+e.join(", ");return void this.toastr.warning(t)}this.importStarted=!0;let t={filename:this.remoteFilename,model:this.model,ignore_header:this.ignore_header,columns:this.tableHeader};this.consoleOutput.push({class:"p-info",text:"Verifying Data Integrity..."}),this.api.post("import/check",t).subscribe(e=>{200==e.status?this.importData():e.message.map(e=>{this.consoleOutput.push({class:"p-error",text:e})})})}importData(){let e={filename:this.remoteFilename,model:this.model,ignore_header:this.ignore_header,columns:this.tableHeader};this.consoleOutput.push({class:"p-info",text:"Importing Data..."}),this.api.post("import/import",e).subscribe(e=>{200==e.status?this.consoleOutput.push({class:"p-success",text:e.message}):e.message.map(e=>{this.consoleOutput.push({class:"p-error",text:e})})})}}function Vu(e,t){if(1&e&&(n.TgZ(0,"option",35),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}Ru.\u0275fac=function(e){return new(e||Ru)(n.Y36(h),n.Y36(l),n.Y36(g._W),n.Y36(Ge))},Ru.\u0275cmp=n.Xpm({type:Ru,selectors:[["app-data-import"]],decls:37,vars:10,consts:[[1,"navbar","navbar-light","bg-light","justify-content-between",3,"hidden"],[1,"form-inline"],[1,"form-control-static"],["id","dataImportModel","name","model",1,"form-control",3,"ngModel","ngModelChange","change"],["value","user"],["value","manager"],["value","refill_card"],["value","card_users"],["type","checkbox","name","ignore_header",3,"ngModel","ngModelChange"],[1,"btn-container"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-upload"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"card",3,"hidden"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-outline","table-hover","table-sm","import-table"],[4,"ngFor","ngForOf"],[1,"console"],[3,"class",4,"ngFor","ngForOf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["uploadFileInput",""],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-import"],[1,"",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"nav",0),n.TgZ(1,"form",1),n.TgZ(2,"label",2),n._uU(3,"Import "),n.qZA(),n.TgZ(4,"select",3),n.NdJ("ngModelChange",function(e){return t.model=e})("change",function(){return t.onModelChanged()}),n.TgZ(5,"option",4),n._uU(6,"Users"),n.qZA(),n.TgZ(7,"option",5),n._uU(8,"Managers"),n.qZA(),n.TgZ(9,"option",6),n._uU(10,"Refill Cards"),n.qZA(),n.TgZ(11,"option",7),n._uU(12,"Card Users"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"div"),n.TgZ(14,"input",8),n.NdJ("ngModelChange",function(e){return t.ignore_header=e}),n.qZA(),n._uU(15," Ignore Header (first row) "),n.qZA(),n.TgZ(16,"div",9),n.TgZ(17,"button",10),n.NdJ("click",function(){return n.CHM(e),n.MAs(36).click()}),n._UZ(18,"i",11),n._uU(19," Upload File"),n.qZA(),n.YNc(20,Yu,3,0,"button",12),n.qZA(),n.qZA(),n._UZ(21,"br"),n.TgZ(22,"div",13),n.TgZ(23,"div",14),n.TgZ(24,"div",15),n.TgZ(25,"table",16),n.TgZ(26,"thead"),n.TgZ(27,"tr"),n.YNc(28,Su,3,2,"th",17),n.qZA(),n.qZA(),n.TgZ(29,"tbody"),n.YNc(30,Du,3,3,"tr",17),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(31,"div",13),n.TgZ(32,"div",14),n.TgZ(33,"div",18),n.YNc(34,Hu,2,4,"p",19),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"input",20,21),n.NdJ("change",function(){return t.uploader.uploadAll()}),n.qZA()}2&e&&(n.Q6J("hidden",t.importStarted),n.xp6(4),n.Q6J("ngModel",t.model),n.xp6(10),n.Q6J("ngModel",t.ignore_header),n.xp6(6),n.Q6J("ngIf",t.rows&&t.rows.length>0&&""!=t.model),n.xp6(2),n.Q6J("hidden",t.importStarted),n.xp6(6),n.Q6J("ngForOf",t.columns),n.xp6(2),n.Q6J("ngForOf",t.rows),n.xp6(1),n.Q6J("hidden",!t.importStarted),n.xp6(3),n.Q6J("ngForOf",t.consoleOutput),n.xp6(1),n.Q6J("uploader",t.uploader))},directives:[F.M2,Z._Y,Z.JL,Z.F,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,Z.Wl,J.O5,J.sg,C.C6],pipes:[iu],styles:['.navbar[_ngcontent-%COMP%]{font-weight:lighter}#dataImportModel[_ngcontent-%COMP%]{margin-left:20px;width:150px}.import-table[_ngcontent-%COMP%]{font-size:.7rem}.console[_ngcontent-%COMP%]{min-height:200px;width:100%;background:#0E2231;font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:1.1rem;padding:15px;box-sizing:border-box}.p-info[_ngcontent-%COMP%]{color:#eee}.p-error[_ngcontent-%COMP%]{color:#ff7b6a}.p-success[_ngcontent-%COMP%]{color:#84ff74}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;width:120px}']}),(0,c.gn)([(0,u.bH)()],Ru.prototype,"blockUI",void 0);let Lu=(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.year_list=[],this.date=new Date,this.filter={type:"daily",month:this.date.getMonth()+1,year:this.date.getFullYear(),manager_id:-1,sub_managers:"true",activation_method:"any"},this.managers_list=[]}ngOnInit(){for(let e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.load(),this.loadResources()}getRandomColor(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}load(){this.api.post("report/activations",this.filter).subscribe(e=>{"daily"==this.filter.type&&this.drawDailyChart(e),"monthly"==this.filter.type&&this.drawMonthlyChart(e)})}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[],this.managers_list.unshift({value:-1,label:this.tr.translate("global_filter_all_managers")});for(let t of e.data)this.managers_list.push({value:t.id,label:t.username})})}drawDailyChart(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Activations"}},series:[],title:{text:this.tr.translate("report_activations_chart_title")},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Activations"},currentMin:0}},a=[],i=e.profiles;i.push({id:null,name:null});let n=e.data,o=i.length,s=[];for(let r=0;r<o;r++){let e=[];for(let t=1;t<32;t++){s=[t,0];for(let e=0;e<n.length;e++)n[e].profile_id==i[r].id&&n[e].day==t&&(s=[t,parseInt(n[e].total)]);e.push(s)}a[r]={name:i[r].name?i[r].name:"Total",type:"spline",data:e,pointInterval:1,color:this.getRandomColor()},"Total"==a[r].name&&(a[r].lineWidth=4),t.series.push(a[r])}this.chart=D.chart("chart_container",t)}drawMonthlyChart(e){let t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Activations"}},series:[],title:{text:"Activations Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Activations"},currentMin:0}},a=[],i=e.profiles;i.push({id:null,name:null});let n=e.data,o=i.length,s=[];for(let r=0;r<o;r++){let e=[];for(let t=1;t<13;t++){s=[t,0];for(let e=0;e<n.length;e++)n[e].profile_id==i[r].id&&n[e].month==t&&(s=[t,parseInt(n[e].total)]);e.push(s)}a[r]={name:i[r].name?i[r].name:"Total",type:"spline",data:e,pointInterval:1,color:this.getRandomColor()},"Total"==a[r].name&&(a[r].lineWidth=4),t.series.push(a[r])}this.chart=D.chart("chart_container",t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-activations-statistics"]],decls:64,vars:22,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["ngbRadioGroup","","name","type",1,"btn-group","btn-group-toggle"],["ngbButtonLabel","",1,"btn-primary","btn-navbar"],["ngbButton","","type","radio",2,"display","none",3,"value","ngModel","ngModelChange","change"],["name","month",1,"form-control","filter-select",3,"ngModel","hidden","ngModelChange","change"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","true"],["value","false"],["value","any"],["value","credit"],["value","user_credit"],["value","reward_points"],["value","voucher"],["value","card_user"],[1,"card"],[1,"card-body"],["id","chart_container"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"label",3),n.TgZ(4,"input",4),n.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),n.qZA(),n._uU(5),n.qZA(),n.TgZ(6,"label",3),n.TgZ(7,"input",4),n.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),n.qZA(),n._uU(8),n.qZA(),n.qZA(),n._uU(9," \xa0 "),n.TgZ(10,"select",5),n.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),n.TgZ(11,"option",6),n._uU(12,"Jan"),n.qZA(),n.TgZ(13,"option",7),n._uU(14,"Feb"),n.qZA(),n.TgZ(15,"option",8),n._uU(16,"Mar"),n.qZA(),n.TgZ(17,"option",9),n._uU(18,"Apr"),n.qZA(),n.TgZ(19,"option",10),n._uU(20,"May"),n.qZA(),n.TgZ(21,"option",11),n._uU(22,"Jun"),n.qZA(),n.TgZ(23,"option",12),n._uU(24,"Jul"),n.qZA(),n.TgZ(25,"option",13),n._uU(26,"Aug"),n.qZA(),n.TgZ(27,"option",14),n._uU(28,"Spt"),n.qZA(),n.TgZ(29,"option",15),n._uU(30,"Oct"),n.qZA(),n.TgZ(31,"option",16),n._uU(32,"Nov"),n.qZA(),n.TgZ(33,"option",17),n._uU(34,"Dec"),n.qZA(),n.qZA(),n._uU(35," \xa0 "),n.TgZ(36,"select",18),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),n.YNc(37,Vu,2,2,"option",19),n.qZA(),n.TgZ(38,"div",20),n.TgZ(39,"div",21),n.TgZ(40,"p-dropdown",22),n.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(41,"select",23),n.NdJ("ngModelChange",function(e){return t.filter.sub_managers=e})("change",function(){return t.load()}),n.TgZ(42,"option",24),n._uU(43,"Count sub-managers"),n.qZA(),n.TgZ(44,"option",25),n._uU(45,"Don't count sub-managers"),n.qZA(),n.qZA(),n.TgZ(46,"select",23),n.NdJ("ngModelChange",function(e){return t.filter.activation_method=e})("change",function(){return t.load()}),n.TgZ(47,"option",26),n._uU(48),n.qZA(),n.TgZ(49,"option",27),n._uU(50),n.qZA(),n.TgZ(51,"option",28),n._uU(52),n.qZA(),n.TgZ(53,"option",29),n._uU(54),n.qZA(),n.TgZ(55,"option",30),n._uU(56),n.qZA(),n.TgZ(57,"option",31),n._uU(58,"Prepaid User"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(59,"br"),n.TgZ(60,"div",32),n.TgZ(61,"div",33),n.TgZ(62,"div",34),n._uU(63," Chart is loading... "),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("value","daily")("ngModel",t.filter.type),n.xp6(1),n.hij("",t.tr.translate("global_filter_daily")," "),n.xp6(2),n.Q6J("value","monthly")("ngModel",t.filter.type),n.xp6(1),n.hij("",t.tr.translate("global_filter_monthly")," "),n.xp6(2),n.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.type),n.xp6(26),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.year_list),n.xp6(3),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),n.xp6(1),n.Q6J("ngModel",t.filter.sub_managers),n.xp6(5),n.Q6J("ngModel",t.filter.activation_method),n.xp6(2),n.Oqu(t.tr.translate("global_all")),n.xp6(2),n.Oqu(t.tr.translate("user_activate_option_manager_balance")),n.xp6(2),n.Oqu(t.tr.translate("user_activate_option_user_balance")),n.xp6(2),n.Oqu(t.tr.translate("user_activate_option_reward_points")),n.xp6(2),n.Oqu(t.tr.translate("user_activate_option_user_card")))},directives:[F.M2,F.py,F.mL,Z._,Z.Fj,F.aB,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr,J.sg,ma.Lt],styles:[".btn-navbar[_ngcontent-%COMP%]{width:100px}.filter-select[_ngcontent-%COMP%]{width:100px}"]}),e})();class Eu{constructor(e,t,a){this.api=e,this.toastr=t,this.tr=a,this.search={type:"serial",keyword:""},this.card_data={}}ngOnInit(){}getCardInfo(){this.blockUI.start(),this.card_data={},this.api.post("cards/search",this.search).subscribe(e=>{this.blockUI.stop(),-1==e.status?this.toastr.warning(this.tr.translate(e.message)):this.card_data=e.data})}}function Ku(e,t){if(1&e&&(n.TgZ(0,"option",15),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}function Bu(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(){return n.CHM(e),n.oxw().detailed_profits_report_visible=!0}),n._UZ(1,"i",17),n._uU(2," Download Detailed Report"),n.qZA()}}Eu.\u0275fac=function(e){return new(e||Eu)(n.Y36(h),n.Y36(g._W),n.Y36(M))},Eu.\u0275cmp=n.Xpm({type:Eu,selectors:[["app-card-verification"]],decls:69,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-search"],[1,"card-body"],[1,"row"],[1,"col","col-md-8","col-sm-12","col-lg-6"],[1,"input-group","input-group-sm"],[1,"form-control",3,"ngModel","ngModelChange"],["value","serial"],["value","pin"],["value","username"],["type","text","placeholder","search for...",1,"form-control",3,"ngModel","ngModelChange","keydown.enger"],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"col-md-6","form-group"],["for","card_pin"],["type","text","id","card_pin","disabled","","name","card_pin",1,"form-control",3,"ngModel"],["type","text","id","card_username","disabled","","name","card_username",1,"form-control",3,"ngModel"],["type","text","id","card_profile","disabled","","name","card_profile",1,"form-control",3,"ngModel"],["for","card_serial"],["type","text","id","card_serial","disabled","","name","card_serial",1,"form-control",3,"ngModel"],["for","card_value"],["type","text","id","card_value","disabled","","name","card_value",1,"form-control",3,"ngModel"],["for","card_owner"],["type","text","id","card_owner","disabled","","name","card_owner",1,"form-control",3,"ngModel"],["type","text","id","card_type","disabled","","name","card_type",1,"form-control",3,"ngModel"],["for","card_series"],["type","text","id","card_series","disabled","","name","card_series",1,"form-control",3,"ngModel"],["for","card_expiration"],["type","text","id","card_expiration","disabled","","name","card_expiration",1,"form-control",3,"ngModel"],["for","card_status"],["type","text","id","card_status","disabled","","name","card_status",1,"form-control",3,"ngModel"],["for","card_used_at"],["type","text","id","card_used_at","disabled","","name","card_used_at",1,"form-control",3,"ngModel"],["for","card_user"],["type","text","id","card_user","disabled","","name","card_used_by",1,"form-control",3,"ngModel"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Card Verification "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"select",7),n.NdJ("ngModelChange",function(e){return t.search.type=e}),n.TgZ(9,"option",8),n._uU(10,"Serial Number"),n.qZA(),n.TgZ(11,"option",9),n._uU(12,"PIN"),n.qZA(),n.TgZ(13,"option",10),n._uU(14,"Username"),n.qZA(),n.qZA(),n.TgZ(15,"input",11),n.NdJ("ngModelChange",function(e){return t.search.keyword=e})("keydown.enger",function(){return t.getCardInfo()}),n.qZA(),n.TgZ(16,"div",12),n.TgZ(17,"div",13),n.NdJ("click",function(){return t.getCardInfo()}),n._UZ(18,"i",2),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(19,"hr"),n.TgZ(20,"div",4),n.TgZ(21,"div",14),n.TgZ(22,"label",15),n._uU(23,"PIN"),n.qZA(),n._UZ(24,"input",16),n.qZA(),n.TgZ(25,"div",14),n.TgZ(26,"label",15),n._uU(27,"Username"),n.qZA(),n._UZ(28,"input",17),n.qZA(),n.TgZ(29,"div",14),n.TgZ(30,"label",15),n._uU(31,"Profile"),n.qZA(),n._UZ(32,"input",18),n.qZA(),n.TgZ(33,"div",14),n.TgZ(34,"label",19),n._uU(35,"Serial Number"),n.qZA(),n._UZ(36,"input",20),n.qZA(),n.TgZ(37,"div",14),n.TgZ(38,"label",21),n._uU(39,"Value"),n.qZA(),n._UZ(40,"input",22),n.qZA(),n.TgZ(41,"div",14),n.TgZ(42,"label",23),n._uU(43,"Owner"),n.qZA(),n._UZ(44,"input",24),n.qZA(),n.TgZ(45,"div",14),n.TgZ(46,"label",23),n._uU(47,"Type"),n.qZA(),n._UZ(48,"input",25),n.qZA(),n.TgZ(49,"div",14),n.TgZ(50,"label",26),n._uU(51,"Series"),n.qZA(),n._UZ(52,"input",27),n.qZA(),n.TgZ(53,"div",14),n.TgZ(54,"label",28),n._uU(55,"Expiration"),n.qZA(),n._UZ(56,"input",29),n.qZA(),n.TgZ(57,"div",14),n.TgZ(58,"label",30),n._uU(59,"Status"),n.qZA(),n._UZ(60,"input",31),n.qZA(),n.TgZ(61,"div",14),n.TgZ(62,"label",32),n._uU(63,"Used At"),n.qZA(),n._UZ(64,"input",33),n.qZA(),n.TgZ(65,"div",14),n.TgZ(66,"label",34),n._uU(67,"Used By"),n.qZA(),n._UZ(68,"input",35),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Q6J("ngModel",t.search.type),n.xp6(7),n.Q6J("ngModel",t.search.keyword),n.xp6(9),n.Q6J("ngModel",t.card_data.pin),n.xp6(4),n.Q6J("ngModel",t.card_data.username),n.xp6(4),n.Q6J("ngModel",t.card_data.profile),n.xp6(4),n.Q6J("ngModel",t.card_data.serial),n.xp6(4),n.Q6J("ngModel",t.card_data.value),n.xp6(4),n.Q6J("ngModel",t.card_data.owner),n.xp6(4),n.Q6J("ngModel",t.card_data.type),n.xp6(4),n.Q6J("ngModel",t.card_data.series),n.xp6(4),n.Q6J("ngModel",t.card_data.expiration),n.xp6(4),n.Q6J("ngModel",t.card_data.status),n.xp6(4),n.Q6J("ngModel",t.card_data.used_at),n.xp6(4),n.Q6J("ngModel",t.card_data.used_by))},directives:[Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,Z.Fj],styles:[""]}),(0,c.gn)([(0,u.bH)()],Eu.prototype,"blockUI",void 0);const zu=function(){return{width:"450px"}};class ju{constructor(e,t,a,i){this.auth=e,this.api=t,this.tr=a,this.config=i,this.year_list=[],this.date=new Date,this.filter={manager_id:this.auth.client.id,year:this.date.getFullYear()},this.managers_list=[]}ngOnInit(){this.detailed_profits_report_visible=!1;for(let e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[],this.managers_list.unshift({value:-1,label:this.tr.translate("global_filter_all_managers")});for(const t of e.data)this.managers_list.push({value:t.id,label:t.username})}),this.load()}load(){this.api.post("report/profits",this.filter).subscribe(e=>{200==e.status&&this.drawChart(e.data.commissions,e.data.activations)})}drawChart(e,t){const a=Object.assign(this.config).siteConfig.site_currency;let i={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Income"}},series:[],title:{text:this.tr.translate("report_profits_title")},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Activations"},currentMin:0,labels:{formatter:(function(e){return this.config.siteConfig.site_currency+" "+e.value}).bind(this)}},tooltip:{formatter:function(){return a+" "+this.y}}},n={name:"Profits from Commissions",type:"spline",data:this.getCommissionsSeries(e),pointInterval:1,color:"#baa0f7"},o={name:"Profits from Activations",type:"spline",data:this.getActivationsSeries(t),pointInterval:1,color:"#abf76a"},s={name:"Total Profits",type:"spline",data:this.getTotalSeries(t,e),pointInterval:1,color:"#f7281e"};i.series.push(n),i.series.push(o),i.series.push(s),this.chart=D.chart("chart_container",i)}getCommissionsSeries(e){let t=[],a=[];for(let i=1;i<13;i++){a=[i,0];for(let t=0;t<e.length;t++)e[t].month==i&&e[t].total&&(a=[i,parseInt(e[t].total)]);t.push(a)}return t}getActivationsSeries(e){let t=[],a=[];for(let i=1;i<13;i++){a=[i,0];for(let t=0;t<e.length;t++)e[t].month==i&&e[t].total&&(a=[i,parseInt(e[t].total)]);t.push(a)}return t}getTotalSeries(e,t){let a=this.getCommissionsSeries(e),i=this.getActivationsSeries(t),n=[];for(let o=0;o<12;o++)n.push([o+1,a[o][1]+i[o][1]]);return n}downloadReport(){this.blockUI.start(),this.api.post("report/detailedProfitsReport",{date:this.detailedReportFilter}).subscribe(e=>{200===e.status&&(this.blockUI.stop(),this.api.downloadFile("storage/tmp/"+e.data,"sas4_profits_report.xlsx"))})}}ju.\u0275fac=function(e){return new(e||ju)(n.Y36(_),n.Y36(h),n.Y36(M),n.Y36(l))},ju.\u0275cmp=n.Xpm({type:ju,selectors:[["app-profits-report"]],decls:23,vars:18,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-control btn btn-default bg-white",3,"click",4,"ngIf"],[1,"card"],[1,"card-body"],["id","chart_container"],["header","Detailed Profits Report",3,"visible","modal","draggable","visibleChange"],["detailedReportDialog",""],["view","month","dateFormat","mm/yy","appendTo","body","yearRange","2020:2035",3,"ngModel","showIcon","yearNavigator","ngModelChange"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"form-control","btn","btn-default","bg-white",3,"click"],[1,"fa","fa-file-excel"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"p-dropdown",4),n.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(5,"select",5),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),n.YNc(6,Ku,2,2,"option",6),n.qZA(),n.YNc(7,Bu,3,0,"button",7),n.qZA(),n.qZA(),n._UZ(8,"br"),n.TgZ(9,"div",8),n.TgZ(10,"div",9),n.TgZ(11,"div",10),n._uU(12," Chart is loading... "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(13,"p-dialog",11,12),n.NdJ("visibleChange",function(e){return t.detailed_profits_report_visible=e}),n.TgZ(15,"h6"),n._uU(16,"Select Date (Month/Year)"),n.qZA(),n.TgZ(17,"p-calendar",13),n.NdJ("ngModelChange",function(e){return t.detailedReportFilter=e}),n.qZA(),n.TgZ(18,"p"),n._uU(19," This will generate a detailed profits report made by each manager and profile. "),n.qZA(),n.TgZ(20,"p-footer"),n.TgZ(21,"button",14),n.NdJ("click",function(){return t.downloadReport()}),n._uU(22,"Download"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),n.xp6(1),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.year_list),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_index_all")),n.xp6(6),n.Akn(n.DdM(17,zu)),n.Q6J("visible",t.detailed_profits_report_visible)("modal",!0)("draggable",!0),n.xp6(4),n.Q6J("ngModel",t.detailedReportFilter)("showIcon",!0)("yearNavigator",!0),n.xp6(4),n.Q6J("disabled",!t.detailedReportFilter))},directives:[F.M2,ma.Lt,Z.JJ,Z.On,Z.EJ,J.sg,J.O5,ki.V,Ya.f,xi.$_,Z.YN,Z.Kr],styles:[".form-inline[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-left:10px}"]}),(0,c.gn)([(0,u.bH)()],ju.prototype,"blockUI",void 0);const Gu=["dataForm"];function Wu(e,t){if(1&e&&n._UZ(0,"dynamic-form",19,20),2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}function $u(e,t){if(1&e&&(n.TgZ(0,"option",21),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Xu(e,t){if(1&e&&(n.TgZ(0,"div",7),n._UZ(1,"label",8),n.TgZ(2,"div",14),n._uU(3),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(3),n.hij(" ",e.selected_profile.description," ")}}class ep{constructor(e,t,a,i,n,o,s,r,l){this.tr=e,this.api=t,this.formLoader=a,this.route=i,this.config=n,this.toastr=o,this.ch=s,this.router=r,this.auth=l,this.form_config={layout:"horizontal",fields:this.formLoader.getForm("user_extension_form"),helpBlock:"hidden",showDiscardButton:!1,showSubmitButton:!1},this.options=[],this.user_id=null,this.user_data={},this.profile_list=[],this.selected_profile_id=-1,this.selected_profile={},this.transaction_id=null,this.expiration_unit=[this.tr.translate("expiration_unit_day"),this.tr.translate("expiration_unit_month"),this.tr.translate("expiration_unit_hour")]}ngOnInit(){this.options.method=[],this.auth.has("prm_users_reward_points")&&this.options.method.push({value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")}),this.auth.has("prm_users_activate_credit")&&this.options.method.push({value:"credit",label:this.tr.translate("user_activate_option_manager_balance")}),this.auth.has("prm_users_activate_user_balance")&&this.options.method.push({value:"user_balance",label:this.tr.translate("user_activate_option_user_balance")}),this.transaction_id=this.ch.guid(),this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.api.get("user/extensionData/"+this.user_id).subscribe(e=>{this.user_data=e.data,null==this.user_data.remaining_rxtx&&(this.user_data.remaining_rxtx="N/A"),this.options.method.length>1&&(this.user_data.method="reward_points"),this.formView.setFormValue(this.user_data),this.auth.has("prm_users_reward_points")&&this.formView.showField("reward_points_balance"),this.loadExtensionsList(this.user_data.profile_id)}))})}loadExtensionsList(e){this.api.get("allowedExtensions/"+e).subscribe(e=>{200===e.status&&(this.profile_list=e.data)})}onProfileSelected(){this.api.get("profile/"+this.selected_profile_id).subscribe(e=>{200===e.status&&(this.selected_profile=e.data,this.selected_profile.cost=parseFloat(this.selected_profile.price)+parseFloat(this.selected_profile.price)*parseFloat(this.selected_profile.vat))})}extend(){this.api.post("user/extend",{user_id:this.user_id,profile_id:this.selected_profile_id,method:this.formView.form.value.method,transaction_id:this.transaction_id}).subscribe(e=>{200===(null==e?void 0:e.status)?(this.toastr.success(this.tr.translate(e.message)),this.router.navigate(["user",this.user_id])):(this.transaction_id=this.ch.guid(),this.toastr.error(this.tr.translate(null==e?void 0:e.message)))})}}ep.\u0275fac=function(e){return new(e||ep)(n.Y36(M),n.Y36(h),n.Y36(yi),n.Y36(p.gz),n.Y36(l),n.Y36(g._W),n.Y36(m),n.Y36(p.F0),n.Y36(_))},ep.\u0275cmp=n.Xpm({type:ep,selectors:[["app-service-extension"]],viewQuery:function(e,t){if(1&e&&n.Gf(Gu,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:50,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","dataForm",3,"formConfig","options",4,"ngIf"],[1,"form-group","row"],[1,"col-form-label","text-right"],[1,"col"],["name","selected_profile_id",1,"form-control",3,"ngModel","change","ngModelChange"],["disabled","","value","-1"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row",4,"ngIf"],[1,"col","form-control-plaintext"],[1,"form-group","row",3,"hidden"],[1,"col","form-control-plaintext",3,"hidden"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"disabled","click"],["name","dataForm",3,"formConfig","options"],["dataForm",""],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Wu,2,2,"dynamic-form",6),n.qZA(),n.TgZ(8,"div",5),n.TgZ(9,"div",7),n._UZ(10,"label",8),n.TgZ(11,"div",9),n.TgZ(12,"select",10),n.NdJ("change",function(){return t.onProfileSelected()})("ngModelChange",function(e){return t.selected_profile_id=e}),n.TgZ(13,"option",11),n._uU(14),n.qZA(),n.YNc(15,$u,2,2,"option",12),n.qZA(),n.qZA(),n.qZA(),n.YNc(16,Xu,4,1,"div",13),n.TgZ(17,"div",7),n._UZ(18,"label",8),n.TgZ(19,"div",14),n._uU(20),n.ALo(21,"currency"),n.qZA(),n.qZA(),n.TgZ(22,"div",15),n._UZ(23,"label",8),n.TgZ(24,"div",14),n._uU(25),n.qZA(),n.qZA(),n.TgZ(26,"div",7),n._UZ(27,"label",8),n.TgZ(28,"div",16),n._uU(29),n.qZA(),n.qZA(),n.TgZ(30,"div",7),n._UZ(31,"label",8),n.TgZ(32,"div",16),n._uU(33),n.qZA(),n.qZA(),n.TgZ(34,"div",7),n._UZ(35,"label",8),n.TgZ(36,"div",16),n._uU(37),n.qZA(),n.qZA(),n.TgZ(38,"div",7),n._UZ(39,"label",8),n.TgZ(40,"div",16),n._uU(41),n.qZA(),n.qZA(),n.TgZ(42,"div",7),n._UZ(43,"label",8),n.TgZ(44,"div",16),n._uU(45),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(46,"hr"),n.TgZ(47,"div",17),n.TgZ(48,"button",18),n.NdJ("click",function(){return t.extend()}),n._uU(49),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij(" ",t.tr.translate("user_extend_form_title")," "),n.xp6(4),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(5),n.Q6J("ngModel",t.selected_profile_id),n.xp6(2),n.Oqu(t.tr.translate("user_extend_form_select_extension")),n.xp6(1),n.Q6J("ngForOf",t.profile_list),n.xp6(1),n.Q6J("ngIf",(null==t.selected_profile||null==t.selected_profile.description?null:t.selected_profile.description.length)>4),n.xp6(4),n.hij(" ",n.xi3(21,23,t.selected_profile.cost,t.config.siteConfig.site_currency+" ")," "),n.xp6(2),n.Q6J("hidden",!t.selected_profile.reward_points_required||t.selected_profile.reward_points_required<=0),n.xp6(3),n.hij(" Requires ",t.selected_profile.reward_points_required," points "),n.xp6(3),n.Q6J("hidden",!t.selected_profile.expiration_amount||t.selected_profile.expiration_amount<1),n.xp6(1),n.AsE(" + ",t.selected_profile.expiration_amount," ",t.expiration_unit[t.selected_profile.expiration_unit]," "),n.xp6(3),n.Q6J("hidden",!t.selected_profile.traffic_amount||t.selected_profile.traffic_amount<1),n.xp6(1),n.hij(" + ",t.selected_profile.traffic_amount," MB "),n.xp6(3),n.Q6J("hidden",!t.selected_profile.download_amount||t.selected_profile.download_amount<1),n.xp6(1),n.hij(" + ",t.selected_profile.download_amount," MB Download Traffic "),n.xp6(3),n.Q6J("hidden",!t.selected_profile.upload_amount||t.selected_profile.upload_amount<1),n.xp6(1),n.hij(" + ",t.selected_profile.upload_amount," MB Upload Traffic "),n.xp6(3),n.Q6J("hidden",!t.selected_profile.uptime_amount||t.selected_profile.uptime_amount<1),n.xp6(1),n.AsE(" + ",t.selected_profile.uptime_amount," ",0==t.selected_profile.uptime_unit?"minute(s)":"hour(s)"," "),n.xp6(3),n.Q6J("disabled",t.selected_profile_id<=0),n.xp6(1),n.Oqu(t.tr.translate("users_action_extend")))},directives:[J.O5,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,vi],pipes:[J.H9],styles:[""]}),(0,c.gn)([(0,u.bH)()],ep.prototype,"blockUI",void 0);const tp=["myForm"];function ap(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)})("formChanged",function(t){return n.CHM(e),n.oxw().onFormChanged(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let ip=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.profiles=[],this.managers_list=[],this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("settings_ucp"),this.form_config.fields=this.formFields,this.api.get("list/profile/0").subscribe(e=>{e.data.map(e=>{this.profiles.push({value:e.id,label:e.name})}),this.options.ucp_self_registration_profile=this.profiles}),this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.ucp_self_registration_parent=this.managers_list}),this.load()}onFormChanged(e){1==e.ucp_self_registration&&this.myForm.showField("ucp_self_registration_profile"),0==e.ucp_self_registration&&this.myForm.hideField("ucp_self_registration_profile")}load(){this.api.get("settings/ucp_").subscribe(e=>{200==e.status&&(this.myForm.setFormValue(e.data),1==e.data.ucp_self_registration&&this.myForm.showField("ucp_self_registration_profile"),0==e.data.ucp_self_registration&&this.myForm.hideField("ucp_self_registration_profile"))})}save(e){this.api.post("settings/ucp",e.value).subscribe(e=>{200==e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-portal-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(tp,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," User Portal Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,ap,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e})();const np=["myForm"];function op(e,t){1&e&&(n.TgZ(0,"div",14),n.TgZ(1,"h2"),n._uU(2,"[ Select Payment Gateway ]"),n.qZA(),n.qZA())}const sp=function(e){return{active:e}},rp=function(e,t){return{"gw-enabled":e,"gw-disabled":t}};function lp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"a",15),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().onPaymentGatewaySelected(t.id)}),n.TgZ(1,"div",16),n.TgZ(2,"h5",17),n._uU(3),n.qZA(),n.TgZ(4,"small"),n._uU(5),n.qZA(),n.qZA(),n.TgZ(6,"small",18),n._uU(7),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.Q6J("ngClass",n.VKq(5,sp,e.id==a.gateway_data.id)),n.xp6(3),n.Oqu(e.name),n.xp6(2),n.Oqu(e.country),n.xp6(1),n.Q6J("ngClass",n.WLB(7,rp,1==e.enabled,0==e.enabled)),n.xp6(1),n.Oqu(1==e.enabled?"enabled":"disabled")}}class cp{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.payment_gateways=[],this.gateway_data={},this.managers_list=[],this.options={account_manager:[]}}ngOnInit(){this.loadPaymentGateways(),this.loadResources()}onPaymentGatewaySelected(e){this.blockUI.start(),this.api.get("paymentgateway/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.gateway_data=e.data,this.gateway_data.form=JSON.parse(e.data.settings),this.formFields=this.formsLoader.getForm(this.gateway_data.form_name),this.form_config.fields=this.formFields,this.myForm.setFormValue(this.gateway_data.form))})}loadPaymentGateways(){this.api.get("paymentgateways/list").subscribe(e=>{200===e.status&&(this.payment_gateways=e.data)})}onSave(e){this.api.post("paymentgateway/"+this.gateway_data.id,e.value).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.loadPaymentGateways())})}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username});this.options.account_manager=this.managers_list})}}function dp(e,t){if(1&e&&(n.TgZ(0,"label",18),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij(" ",e.tr.translate("self_deposit_no_payment_method")," ")}}function up(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}function pp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"label",6),n._uU(2),n.qZA(),n.TgZ(3,"div",7),n.TgZ(4,"div",8),n.TgZ(5,"input",20),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().deposit_form.amount=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.AsE("",e.tr.translate("self_deposit_amount")," (",e.config.siteConfig.site_currency,")"),n.xp6(3),n.Q6J("ngModel",e.deposit_form.amount)}}function gp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"label",6),n._uU(2),n.qZA(),n.TgZ(3,"div",7),n.TgZ(4,"div",8),n.TgZ(5,"input",21),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().deposit_form.pin=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("self_deposit_kushok_voucher")),n.xp6(3),n.Q6J("ngModel",e.deposit_form.pin)("autofocus",!0)}}function fp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"label",6),n._uU(2),n.qZA(),n.TgZ(3,"div",7),n.TgZ(4,"div",8),n.TgZ(5,"input",22),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().deposit_form.name=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("global_name")),n.xp6(3),n.Q6J("ngModel",e.deposit_form.name)}}function hp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"label",6),n._uU(2),n.qZA(),n.TgZ(3,"div",7),n.TgZ(4,"div",8),n.TgZ(5,"input",22),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().deposit_form.phone=t}),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Oqu(e.tr.translate("global_phone")),n.xp6(3),n.Q6J("ngModel",e.deposit_form.phone)}}cp.\u0275fac=function(e){return new(e||cp)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},cp.\u0275cmp=n.Xpm({type:cp,selectors:[["app-payment-gateways-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(np,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:19,vars:6,consts:[[1,"row"],[1,"col-md-9","col-sm-12","order-md-1","order-sm-2"],[1,"card",2,"min-height","500px"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"col"],["class","form-placeholder",4,"ngIf"],[3,"hidden"],["name","myForm",3,"formConfig","options","submit"],["myForm",""],[1,"col-md-3","col-sm-12","order-md-2","order-sm-1"],[1,"list-group"],["href","javascript:void(0)","class","list-group-item list-group-item-action flex-column align-items-start","style","cursor: pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"form-placeholder"],["href","javascript:void(0)",1,"list-group-item","list-group-item-action","flex-column","align-items-start",2,"cursor","pointer",3,"ngClass","click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[3,"ngClass"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n._UZ(4,"i",4),n._uU(5," Payment Gateways Settings "),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div",0),n.TgZ(8,"div",6),n.YNc(9,op,3,0,"div",7),n.TgZ(10,"div",8),n.TgZ(11,"h3"),n._uU(12),n.qZA(),n._UZ(13,"hr"),n.TgZ(14,"dynamic-form",9,10),n.NdJ("submit",function(e){return t.onSave(e)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",11),n.TgZ(17,"div",12),n.YNc(18,lp,8,10,"a",13),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(9),n.Q6J("ngIf",!t.gateway_data.id),n.xp6(1),n.Q6J("hidden",!(null!=t.form_config&&t.form_config.fields)||(null==t.form_config.fields?null:t.form_config.fields.length)<1),n.xp6(2),n.Oqu(t.gateway_data.name),n.xp6(2),n.Q6J("formConfig",t.form_config)("options",t.options),n.xp6(4),n.Q6J("ngForOf",t.payment_gateways))},directives:[J.O5,vi,J.sg,J.mk],styles:[".form-placeholder[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto;color:#c3c3c3;text-align:center;margin-top:25%}.gw-enabled[_ngcontent-%COMP%]{color:green}.gw-disabled[_ngcontent-%COMP%]{color:#cc5050}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],cp.prototype,"blockUI",void 0);class mp{constructor(e,t,a,i,n){this.api=e,this.tr=t,this.config=a,this.toastr=i,this.router=n,this.deposit_form={amount:null,method:-1,method_name:"",pin:""},this.payment_gateways=[]}ngOnInit(){this.loadResources()}loadResources(){this.blockUI.start(),this.api.get("paymentgateway/list/acp").subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.payment_gateways=e.data,1===e.data.length&&(this.deposit_form.method=e.data[0].id,this.onPaymentMethodChanged()))})}requestDeposit(){this.payment_gateways.map(e=>{e.id==this.deposit_form.method&&(this.deposit_form.method_name=e.internal_name)}),this.blockUI.start(),this.api.post("paymentgateway/requestSelfDeposit",this.deposit_form).subscribe(e=>{this.blockUI.stop(),"kushok"===this.deposit_form.method_name&&-2===e.status&&this.toastr.warning("Invalid Kushok Voucher"),"voucher"===this.deposit_form.method_name&&200!==e.status&&this.toastr.warning("Invalid SAS Voucher"),200===e.status&&("zaincash"===this.deposit_form.method_name&&(this.blockUI.start(),window.location.href=e.data),"tasdid"===this.deposit_form.method_name&&this.router.navigate(["message"],{queryParams:{title:"\u062a\u0645 \u0627\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629",message:"\u064a\u0631\u062c\u0649 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0641\u064a \u0627\u0642\u0631\u0628 \u0645\u0646\u0641\u0630 \u062d\u0633\u0628 \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0633\u0644\u0629 \u0641\u064a \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0646\u0635\u064a\u0629"}}),"kushok"===this.deposit_form.method_name&&(this.toastr.success("Voucher Redeemed Successfully"),this.router.navigate(["kushok/process",e.data])),"voucher"===this.deposit_form.method_name&&(this.toastr.success("Voucher Redeemed Successfully"),this.router.navigate(["dashboard"])),"switch"===this.deposit_form.method_name&&this.payWithSwitch(e))})}loadSwitchScript(e){const t=document.createElement("script");t.src=e.data.script_url,t.async=!1;const a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a),t.addEventListener("load",()=>{this.payWithSwitch(e)})}payWithSwitch(e){this.blockUI.start("Please wait..."),"undefined"!=typeof Checkout?(Checkout.configure({session:{id:e.data.session_id}}),Checkout.showPaymentPage()):this.loadSwitchScript(e)}onPaymentMethodChanged(){this.payment_gateways.map(e=>{parseInt(e.id)===parseInt(this.deposit_form.method)&&(this.deposit_form.method_name=e.internal_name)})}}function _p(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",3),n._UZ(2,"i",4),n._UZ(3,"br"),n._uU(4," Waiting for ZainCash "),n.qZA(),n.qZA())}function bp(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",3),n._UZ(2,"i",5),n._UZ(3,"br"),n._uU(4," Your request is being processed. "),n.qZA(),n.qZA())}function Zp(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",6),n._UZ(2,"i",5),n._UZ(3,"br"),n._uU(4," Your payment was successful. "),n.qZA(),n.qZA())}function vp(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",7),n._UZ(2,"i",8),n._UZ(3,"br"),n._uU(4," Payment Failed ! "),n.qZA(),n.qZA())}mp.\u0275fac=function(e){return new(e||mp)(n.Y36(h),n.Y36(M),n.Y36(l),n.Y36(g._W),n.Y36(p.F0))},mp.\u0275cmp=n.Xpm({type:mp,selectors:[["app-self-deposit"]],decls:26,vars:13,consts:[[1,"card","profile-card"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"row"],[1,"form-group","col-md-6","col-sm-12"],[1,"form-control-plaintext"],[1,"ui-g","ui-fluid"],[1,"ui-g-12"],["class","form-control-static",4,"ngIf"],["name","amount",1,"form-control",3,"ngModel","hidden","ngModelChange"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group col-md-6 col-sm-12",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-primary","fa-pull-right",3,"disabled","click"],[1,"fa","fa-arrow-down"],[1,"btn","btn-secondary","fa-pull-right","ml-1","mr-1",3,"click"],[1,"form-control-static"],[3,"value"],["type","number","autofocus","","name","amount","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter your voucher pin here",1,"form-control",3,"ngModel","autofocus","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Self Deposit "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"label",6),n._uU(8),n.qZA(),n.TgZ(9,"div",7),n.TgZ(10,"div",8),n.YNc(11,dp,2,1,"label",9),n.TgZ(12,"select",10),n.NdJ("ngModelChange",function(e){return t.deposit_form.method=e})("ngModelChange",function(){return t.onPaymentMethodChanged()}),n.TgZ(13,"option",11),n._uU(14),n.qZA(),n.YNc(15,up,2,2,"option",12),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(16,pp,6,3,"div",13),n.YNc(17,gp,6,3,"div",13),n.YNc(18,fp,6,2,"div",13),n.YNc(19,hp,6,2,"div",13),n.qZA(),n.qZA(),n.TgZ(20,"div",14),n.TgZ(21,"button",15),n.NdJ("click",function(){return t.requestDeposit()}),n._UZ(22,"i",16),n._uU(23),n.qZA(),n.TgZ(24,"button",17),n.NdJ("click",function(){return t.deposit_form.method=-1,t.deposit_form.method_name=null}),n._uU(25),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(8),n.Oqu(t.tr.translate("self_deposit_method")),n.xp6(3),n.Q6J("ngIf",0==t.payment_gateways.length),n.xp6(1),n.Q6J("ngModel",t.deposit_form.method)("hidden",t.payment_gateways.length<1),n.xp6(2),n.Oqu(t.tr.translate("self_deposit_select_method")),n.xp6(1),n.Q6J("ngForOf",t.payment_gateways),n.xp6(1),n.Q6J("ngIf",t.deposit_form.method>0&&"kushok"!==t.deposit_form.method_name&&"voucher"!==t.deposit_form.method_name),n.xp6(1),n.Q6J("ngIf","kushok"===t.deposit_form.method_name||"voucher"===t.deposit_form.method_name),n.xp6(1),n.Q6J("ngIf","tasdid"===t.deposit_form.method_name),n.xp6(1),n.Q6J("ngIf","tasdid"===t.deposit_form.method_name),n.xp6(2),n.Q6J("disabled",t.deposit_form.method<0),n.xp6(2),n.hij(" ",t.tr.translate("self_deposit_deposit_button"),""),n.xp6(2),n.hij("\xa0",t.tr.translate("global_button_cancel"),"\xa0"))},directives:[J.O5,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,Z.wV,Z.Fj],styles:[""]}),(0,c.gn)([(0,u.bH)()],mp.prototype,"blockUI",void 0);let wp=(()=>{class e{constructor(e,t){this.api=e,this.route=t,this.paymentStatus="pending"}ngOnInit(){let e=this.route.snapshot.queryParamMap.get("token");"1"==this.route.snapshot.queryParamMap.get("waiting_webhook")?this.paymentStatus="waiting_webhook":this.processToken(e)}ngOnChanges(){}processToken(e){this.api.post("paymentgateway/process/zaincash",{gateway:"zaincash",token:e}).subscribe(e=>{this.paymentStatus=200===e.status?"success":"failure"})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-zain-cash"]],features:[n.TTD],decls:6,vars:4,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"fa","fa-3x","fa-check-circle"],[1,"payment-success"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,_p,5,0,"div",2),n.YNc(3,bp,5,0,"div",2),n.YNc(4,Zp,5,0,"div",2),n.YNc(5,vp,5,0,"div",2),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngIf","pending"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","waiting_webhook"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","success"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","failure"==t.paymentStatus))},directives:[J.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e})();function yp(e,t){1&e&&n._UZ(0,"i",14)}function xp(e,t){1&e&&n._UZ(0,"i",15)}function Ap(e,t){1&e&&n._UZ(0,"i",16)}function qp(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n.YNc(2,yp,1,0,"i",11),n.YNc(3,xp,1,0,"i",12),n.YNc(4,Ap,1,0,"i",13),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.qZA()),2&e){const e=t.$implicit,a=n.oxw();n.xp6(2),n.Q6J("ngIf",a.process_status.current==e.user_id),n.xp6(1),n.Q6J("ngIf",a.process_status.users_activated.indexOf(e.user_id)>=0),n.xp6(1),n.Q6J("ngIf",a.process_status.users_failed.indexOf(e.user_id)>=0),n.xp6(2),n.Oqu(e.username),n.xp6(2),n.Oqu(e.user_expiration),n.xp6(2),n.Oqu(e.profile_name),n.xp6(2),n.Oqu(e.required_amount)}}function Tp(e,t){if(1&e&&(n.TgZ(0,"b"),n._uU(1),n.ALo(2,"currency"),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Oqu(n.xi3(2,1,e.available_balance,e.config.siteConfig.site_currency+" "))}}function Cp(e,t){1&e&&n._UZ(0,"i",17)}function kp(e,t){if(1&e&&(n.TgZ(0,"h5",20),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.AsE("",e.process_status.users_activated.length," ",e.tr.translate("user_activate_success_activation"),"")}}function Up(e,t){if(1&e&&(n.TgZ(0,"h5",21),n._uU(1),n.qZA()),2&e){const e=n.oxw(2);n.xp6(1),n.AsE("",e.process_status.users_failed.length," ",e.tr.translate("user_activate_fail_activation"),"")}}function Mp(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,kp,2,2,"h5",18),n.YNc(2,Up,2,2,"h5",19),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",e.process_status.users_activated.length>0),n.xp6(1),n.Q6J("ngIf",e.process_status.users_failed.length>0)}}class Fp{constructor(e,t,a,i,n){this.api=e,this.route=t,this.tr=a,this.config=i,this.auth=n,this.users_processed=0,this.activation_data=[],this.total_price=0,this.available_balance=-1,this.process_status={users_activated:[],users_failed:[],current:null},this.hideActivationButton=!1,this.finished=!1,this.msgs=[]}ngOnInit(){this.route.params.subscribe(e=>{if(e.data){const t=atob(e.data);this.user_ids=JSON.parse(t),this.api.post("user/bulkActivationData",{user_ids:this.user_ids}).subscribe(e=>{200===e.status&&(this.activation_data=e.data,this.total_price=0,this.activation_data.map(e=>{this.total_price=this.total_price+e.n_required_amount}))})}}),this.api.get("auth").subscribe(e=>{200===e.status&&(this.available_balance=e.client.balance)})}onActivateAll(){if(0===this.users_processed&&this.blockUI.start(),this.hideActivationButton=!0,this.users_processed<this.activation_data.length){const e=this.activation_data[this.users_processed].user_id.toString();this.api.post("user/activate",{method:"credit",user_id:e,units:1,issue_invoice:!0}).subscribe(t=>{200===t.status?(this.process_status.current=null,this.process_status.users_activated.push(e)):(this.process_status.current=null,this.process_status.users_failed.push(e)),this.users_processed++,this.users_processed>=this.activation_data.length?(this.blockUI.stop(),this.finished=!0):this.onActivateAll()})}}}function Jp(e,t){1&e&&(n.TgZ(0,"div",12),n._UZ(1,"i",13),n._uU(2," \xa0\xa0\xa0You have not authorized your server to use Google Drive. "),n.qZA())}function Op(e,t){1&e&&(n.TgZ(0,"div",14),n._UZ(1,"i",15),n._uU(2," \xa0\xa0\xa0Your server is already authorized to use Google Drive. "),n.qZA())}function Np(e,t){if(1&e&&(n.TgZ(0,"p",16),n._UZ(1,"br"),n._uU(2," You are using the drive bellow: "),n._UZ(3,"br"),n.TgZ(4,"a",17),n._uU(5),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(4),n.s9C("href",e.authDriveUrl,n.LSH),n.xp6(1),n.Oqu(e.authDriveUrl)}}function Ip(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",18),n.TgZ(1,"input",19),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().auth_code=t}),n.qZA(),n._UZ(2,"br"),n.TgZ(3,"button",20),n.NdJ("click",function(){return n.CHM(e),n.oxw().submitCode()}),n._uU(4,"Confirm"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Q6J("name","auth_code")("ngModel",e.auth_code),n.xp6(2),n.Q6J("disabled",!e.auth_code||e.auth_code.length<20)}}Fp.\u0275fac=function(e){return new(e||Fp)(n.Y36(h),n.Y36(p.gz),n.Y36(M),n.Y36(l),n.Y36(_))},Fp.\u0275cmp=n.Xpm({type:Fp,selectors:[["app-bulk-activation"]],decls:50,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","fa fa-sync fa-spin",4,"ngIf"],[1,"btn","btn-primary","w-100",3,"hidden","click"],["class","fa fa-circle-notch fa-spin",4,"ngIf"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-exclamation-circle text-danger",4,"ngIf"],[1,"fa","fa-circle-notch","fa-spin"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-exclamation-circle","text-danger"],[1,"fa","fa-sync","fa-spin"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"table",6),n.TgZ(8,"thead"),n.TgZ(9,"tr"),n._UZ(10,"th"),n.TgZ(11,"th"),n._uU(12),n.qZA(),n.TgZ(13,"th"),n._uU(14),n.qZA(),n.TgZ(15,"th"),n._uU(16),n.qZA(),n.TgZ(17,"th"),n._uU(18),n.qZA(),n.qZA(),n.qZA(),n.YNc(19,qp,13,7,"tr",7),n.TgZ(20,"tr"),n._UZ(21,"td"),n.TgZ(22,"td"),n.TgZ(23,"b"),n._uU(24),n.qZA(),n.qZA(),n._UZ(25,"td"),n._UZ(26,"td"),n.TgZ(27,"td"),n.TgZ(28,"b"),n._uU(29),n.ALo(30,"currency"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(31,"tr"),n._UZ(32,"td"),n.TgZ(33,"td"),n.TgZ(34,"b"),n._uU(35),n.qZA(),n.qZA(),n._UZ(36,"td"),n._UZ(37,"td"),n.TgZ(38,"td"),n.YNc(39,Tp,3,4,"b",8),n.YNc(40,Cp,1,0,"i",9),n.qZA(),n.qZA(),n.TgZ(41,"tr"),n._UZ(42,"td"),n._UZ(43,"td"),n._UZ(44,"td"),n._UZ(45,"td"),n.TgZ(46,"td"),n.TgZ(47,"button",10),n.NdJ("click",function(){return t.onActivateAll()}),n._uU(48,"Activate All"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(49,Mp,3,2,"div",8),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.hij(" ",t.tr.translate("user_activate_form_title")," "),n.xp6(9),n.hij(" ",t.tr.translate("global_username")," "),n.xp6(2),n.hij(" ",t.tr.translate("global_expiration")," "),n.xp6(2),n.hij(" ",t.tr.translate("global_profile")," "),n.xp6(2),n.hij(" ",t.tr.translate("user_activate_required_amount")," "),n.xp6(1),n.Q6J("ngForOf",t.activation_data),n.xp6(5),n.Oqu(t.tr.translate("user_activate_total_required_amount")),n.xp6(5),n.Oqu(n.xi3(30,13,t.total_price,t.config.siteConfig.site_currency+" ")),n.xp6(6),n.Oqu(t.tr.translate("global_available_balance")),n.xp6(4),n.Q6J("ngIf",-1!=t.available_balance),n.xp6(1),n.Q6J("ngIf",-1==t.available_balance),n.xp6(7),n.Q6J("hidden",t.hideActivationButton),n.xp6(2),n.Q6J("ngIf",t.finished))},directives:[J.sg,J.O5],pipes:[J.H9],styles:[""]}),(0,c.gn)([(0,u.bH)()],Fp.prototype,"blockUI",void 0);class Yp{constructor(e){this.api=e,this.auth_link="",this.auth_code=null,this.auth_status=!1,this.hide_auth_button=!1,this.authDriveUrl=""}ngOnInit(){this.checkStatus()}checkStatus(){this.blockUI.start(),this.api.get("googleDrive/status").subscribe(e=>{this.blockUI.stop(),200===e.status?(this.auth_status=!0,this.authDriveUrl=e.data,this.hide_auth_button=!0):this.auth_status=!1})}requestAuthorization(){this.auth_link="",this.blockUI.start(),this.api.get("googleDrive/requestAuthorizationLink").subscribe(e=>{this.hide_auth_button=!0,this.blockUI.stop(),200===e.status&&(this.auth_link=e.data,window.open(this.auth_link,"_blank"))})}requestDeauthorization(){this.blockUI.start(),this.api.get("googleDrive/deauthorize").subscribe(e=>{this.blockUI.stop(),this.checkStatus()})}submitCode(){this.blockUI.start(),this.api.post("googleDrive/authorize",{code:this.auth_code}).subscribe(e=>{this.blockUI.stop(),this.checkStatus()})}}Yp.\u0275fac=function(e){return new(e||Yp)(n.Y36(h))},Yp.\u0275cmp=n.Xpm({type:Yp,selectors:[["app-google-drive-settings"]],decls:16,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"fab","fa-google-drive"],[1,"card-body"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[2,"text-align","center","margin-bottom","20px"],["src","assets/img/gdrive.png","width","128"],[1,"btn","btn-primary",2,"width","200px","margin-top","10px",3,"hidden","click"],[1,"btn","btn-danger",2,"width","200px","margin-top","10px",3,"hidden","click"],["class","text-muted",4,"ngIf"],["style","margin-top: 20px; text-align: center",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation"],[1,"alert","alert-success"],[1,"fa","fa-check-circle"],[1,"text-muted"],["target","_blank",3,"href"],[2,"margin-top","20px","text-align","center"],["type","text","placeholder","Enter your Google Drive secret key",1,"form-control","input-large",2,"font-size","1.3rem",3,"name","ngModel","ngModelChange"],[1,"btn","btn-primary",2,"width","200px",3,"disabled","click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Google Drive Setup "),n.qZA(),n.TgZ(4,"div",3),n.YNc(5,Jp,3,0,"div",4),n.YNc(6,Op,3,0,"div",5),n.TgZ(7,"div",6),n._UZ(8,"img",7),n._UZ(9,"br"),n.TgZ(10,"button",8),n.NdJ("click",function(){return t.requestAuthorization()}),n._uU(11,"Authorize Now"),n.qZA(),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.requestDeauthorization()}),n._uU(13,"Deauthorize"),n.qZA(),n.YNc(14,Np,6,2,"p",10),n.qZA(),n.YNc(15,Ip,5,3,"div",11),n.qZA(),n.qZA()),2&e&&(n.xp6(5),n.Q6J("ngIf",!1===t.auth_status),n.xp6(1),n.Q6J("ngIf",!0===t.auth_status),n.xp6(4),n.Q6J("hidden",t.hide_auth_button||!0===t.auth_status),n.xp6(2),n.Q6J("hidden",!1===t.auth_status),n.xp6(2),n.Q6J("ngIf",!0===t.auth_status),n.xp6(1),n.Q6J("ngIf",t.auth_link.length>10&&!1===t.auth_status))},directives:[J.O5,Z.Fj,Z.JJ,Z.On],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,c.gn)([(0,u.bH)()],Yp.prototype,"blockUI",void 0);const Qp=["ippool_model_view"];function Sp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}class Pp{constructor(e,t,a,i,n){this.router=e,this.toastr=t,this.api=a,this.swal=i,this.auth=n,this.columns=[{dataKey:"name",label:"Pool Name",class:"href"},{dataKey:"start_ip",label:"From IP"},{dataKey:"end_ip",label:"To IP"},{dataKey:"lease_time",label:"Lease Time (hours)"}],this.actions=[{name:"new",label:"New",icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:"IP Pools",icon:"fal fa-cabinet-filing",columns:this.columns,dataUrl:"index/ippool",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"ippool",hasAdvancedFilter:!1,showRowsCount:!0}}onAction(e){switch(e.action){case"new":this.router.navigate(["ippool/"]);break;case"delete":this.destroy()}}onCellClicked(e){"name"===e.column&&this.router.navigate(["ippool",e.row.id])}destroy(){this.swal.confirm({title:"Delete IP Pool",type:"warning",text:"Delete Selected IP Pool ?",confirmButtonText:"Yes"}).subscribe(()=>{let e=null;this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.blockUI.start("loading..."),this.api.delete("ippool/"+e).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.modelView.reload(),this.toastr.success("IP Pool Deleted","")):this.toastr.warning("Unable to delete ip pool")})})}}Pp.\u0275fac=function(e){return new(e||Pp)(n.Y36(p.F0),n.Y36(g._W),n.Y36(h),n.Y36(Ge),n.Y36(_))},Pp.\u0275cmp=n.Xpm({type:Pp,selectors:[["app-ippool-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(Qp,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","ippool_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["name","ippool_model_view",3,"modelViewConfig","onAction","onCellClicked"],["ippool_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Sp,2,1,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],Pp.prototype,"blockUI",void 0);const Dp=function(){return[]};let Hp=(()=>{class e{constructor(e,t,a,i){this.location=e,this.formsLoader=t,this.auth=a,this.api=i}ngOnInit(){this.formFields=this.formsLoader.getForm("ippool_form")}onSubmit(e){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(J.Ye),n.Y36(yi),n.Y36(_),n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-ippool-form"]],decls:1,vars:6,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0),n.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),n.qZA()),2&e&&n.Q6J("fields",t.formFields)("options",n.DdM(5,Dp))("title","IP Pool Form")("icon","fal fa-cabinet-filing")("resourceRoute","ippool")},directives:[Ci],styles:[""]}),e})();function Rp(e,t){1&e&&(n.TgZ(0,"div",33),n._UZ(1,"i",34),n._uU(2," Changes successfully applied\n"),n.qZA())}function Vp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",8),n._uU(2),n.qZA(),n.TgZ(3,"td",9),n._uU(4),n.qZA(),n.TgZ(5,"td",8),n._uU(6),n.qZA(),n.TgZ(7,"td",19),n.TgZ(8,"button",35),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw().removeFilterRow(t.id)}),n._UZ(9,"i",36),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.key),n.xp6(2),n.Oqu(e.op),n.xp6(2),n.Oqu(e.value_label||e.value)}}function Lp(e,t){if(1&e&&(n.TgZ(0,"option",14),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.name),n.xp6(1),n.hij(" ",e.label," ")}}function Ep(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",37),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.filter_input.value)}}function Kp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",38),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.filter_input.value)}}function Bp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"select",39),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t}),n.TgZ(1,"option",40),n._uU(2,"True"),n.qZA(),n.TgZ(3,"option",41),n._uU(4,"False"),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.filter_input.value)}}function zp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t})("onChange",function(){n.CHM(e);const t=n.oxw();return t.setProfileLabel(t.filter_input.value)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.profiles_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.filter_input.value)}}function jp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t})("onChange",function(){n.CHM(e);const t=n.oxw();return t.setManagerLabel(t.filter_input.value)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.filter_input.value)}}function Gp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t})("onChange",function(){n.CHM(e);const t=n.oxw();return t.setSiteLabel(t.filter_input.value)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.sites_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.filter_input.value)}}function Wp(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",44),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter_input.value=t})("onChange",function(){n.CHM(e);const t=n.oxw();return t.setGroupLabel(t.filter_input.value)}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.groups_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.filter_input.value)}}function $p(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",45),n._UZ(1,"i",46),n._uU(2,"\xa0\xa0 Found "),n.TgZ(3,"b"),n._uU(4),n.qZA(),n._uU(5," records matching your filter "),n.TgZ(6,"button",47),n.NdJ("click",function(){return n.CHM(e),n.oxw().previewUsers()}),n._UZ(7,"i",48),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(4),n.Oqu(e.n_records_found)}}function Xp(e,t){if(1&e&&(n.TgZ(0,"option",14),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.name),n.xp6(1),n.hij(" ",e.label," ")}}function eg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",49),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.action.option)}}function tg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",50),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.action.option)}}function ag(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"input",51),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.action.option)}}function ig(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",52),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.profiles_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.action.option)}}function ng(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",52),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.action.option)}}function og(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",52),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.sites_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.action.option)}}function sg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",42),n.TgZ(1,"div",43),n.TgZ(2,"p-dropdown",52),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().action.option=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("options",e.groups_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",e.action.option)}}class rg{constructor(e,t,a,i){this.ch=e,this.api=t,this.toastr=a,this.tr=i,this.fields=[{name:"username",label:"Username",type:"text"},{name:"expiration",label:"Expiration",type:"date"},{name:"enabled",label:"Enabled",type:"bool"},{name:"firstname",label:"First Name",type:"text"},{name:"lastname",label:"Last Name",type:"text"},{name:"profile_id",label:"Profile",type:"profiles"},{name:"parent_id",label:"Parent",type:"managers"},{name:"parent_and_subs",label:"Parent & Subs",type:"managers"},{name:"email",label:"Email",type:"text"},{name:"company",label:"Copmany",type:"text"},{name:"phone",label:"Phone",type:"text"},{name:"city",label:"City",type:"text"},{name:"address",label:"Address",type:"text"},{name:"contract_id",label:"Contract Number",type:"text"},{name:"national_id",label:"National ID",type:"text"},{name:"simultaneous_sessions",label:"Simultaneous Sessions",type:"text"},{name:"user_type",label:"User Type",type:"dropdown"},{name:"static_ip",label:"Static IP",type:"text"},{name:"auto_renew",label:"Auto Renew",type:"bool"},{name:"site_id",label:"Site",type:"sites"},{name:"group_id",label:"Group",type:"groups"}],this.filter_input={key:null,op:"=",value:null,value_label:null},this.filter=[],this.input_type="text",this.profiles_list=[],this.sites_list=[],this.managers_list=[],this.groups_list=[],this.records_found=[],this.n_records_found=0,this.action={name:null,option:null},this.actions=[{name:"set_expiration",label:"Set Expiration",option:"text"},{name:"set_traffic_balance",label:"Set Traffic Balance (MB)",option:"number"},{name:"set_profile",label:"Set Profile",option:"profiles"},{name:"set_site",label:"Set Site",option:"sites"},{name:"set_parent",label:"Set Parent",option:"managers"},{name:"set_group",label:"Set Group",option:"groups"},{name:"add_traffic",label:"Add Traffic (MB)",option:"number"},{name:"add_traffic_dl",label:"Add Download Traffic (MB)",option:"number"},{name:"add_traffic_ul",label:"Add Upload Traffic (MB)",option:"number"},{name:"add_days",label:"Increase Expiration (Days)",option:"number"},{name:"disable",label:"Disable",option:null},{name:"delete",label:"Delete",option:null},{name:"enable",label:"Enable",option:null},{name:"disconnect",label:"Disconnect",option:null},{name:"set_auto_renew",label:"Enable Auto-Renew",option:null},{name:"set_simultaneous_sessions",label:"Set Simultaneous Sessions",option:"number"},{name:"unset_auto_renew",label:"Disable Auto-Renew",option:null},{name:"send_sms",label:"Send SMS",option:"text"},{name:"export",label:"Export (Excel)",option:null}],this.action_input_type=null,this.bulk_changes_applied=!1}ngOnInit(){this.loadResources()}addFilterRow(){const e=Object.assign(this.filter_input);e.id=this.ch.guid(),this.filter.push(e),this.filter_input={key:null,op:"=",value:null,value_label:null},this.previewUsers()}resetFilterRow(){this.filter_input={key:null,op:"=",value:null,value_label:null}}removeFilterRow(e){let t=0;this.filter.map(a=>{a.id===e&&this.filter.splice(t,1),t++}),0===this.filter.length?(this.records_found=[],this.n_records_found=0):this.previewUsers()}showProperInput(){this.fields.map(e=>{this.filter_input.key===e.name&&(this.input_type=e.type)})}showProperActionInput(){this.action.option=null,this.actions.map(e=>{this.action.name===e.name&&(this.action_input_type=e.option)})}loadResources(){this.api.get("list/profile/0").subscribe(e=>{this.profiles_list=[];for(let t of e.data)this.profiles_list.push({value:t.id,label:t.name})}),this.api.get("index/manager").subscribe(e=>{this.managers_list=[];for(let t of e.data)this.managers_list.push({value:t.id,label:t.username})}),this.api.get("site").subscribe(e=>{for(let t of e.data)this.sites_list.push({value:t.id,label:t.name});this.sites_list.unshift({value:-1,label:"Undefined"})});const e=[];this.api.get("group").subscribe(t=>{if(200===t.status){for(const a of t.data)e.push({value:a.id,label:a.name});e.unshift({value:-1,label:this.tr.translate("global_none")}),this.groups_list=e}})}setProfileLabel(e){this.profiles_list.map(t=>{t.value===e&&(this.filter_input.value_label=t.label)})}setManagerLabel(e){this.managers_list.map(t=>{t.value===e&&(this.filter_input.value_label=t.label)})}setSiteLabel(e){this.sites_list.map(t=>{t.value===e&&(this.filter_input.value_label=t.label)})}setGroupLabel(e){this.groups_list.map(t=>{t.value===e&&(this.filter_input.value_label=t.label)})}previewUsers(){this.bulk_changes_applied=!1,this.blockUI.start(),this.api.post("index/user",{bulk_filter:this.filter}).subscribe(e=>{this.blockUI.stop(),this.records_found=e.data,this.n_records_found=e.total})}applyAction(){this.blockUI.start(),this.api.post("bulkChanges/users/apply",{filter:this.filter,action:this.action}).subscribe(e=>{this.blockUI.stop(),200===e.status&&("export"===this.action.name?(this.action={name:null,option:null},this.action_input_type=null,this.api.downloadFile("storage/tmp/"+e.data,e.data)):(this.action={name:null,option:null},this.action_input_type=null,this.toastr.success(this.tr.translate(e.message)),this.bulk_changes_applied=!0))})}}rg.\u0275fac=function(e){return new(e||rg)(n.Y36(m),n.Y36(h),n.Y36(g._W),n.Y36(M))},rg.\u0275cmp=n.Xpm({type:rg,selectors:[["app-bulk-changes"]],decls:66,vars:31,consts:[["class","alert alert-success",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"fal","fa-users-class"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"table-sm","table-striped","filter-table"],["width","40%"],["width","10%"],[4,"ngFor","ngForOf"],["name","key",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","op",1,"form-control",3,"ngModel","hidden","ngModelChange"],[3,"value"],["type","text","class","form-control","name","value",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control","name","value",3,"ngModel","ngModelChange",4,"ngIf"],["name","value","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["class","ui-g",4,"ngIf"],["width","10%",2,"text-align","center"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-undo"],["class","alert bg-light","style","margin-top: 15px;",4,"ngIf"],[1,"bg-light","action-box","row",3,"hidden"],[1,"col-md-5","col-sm-12"],["name","action",1,"form-control",3,"ngModel","ngModelChange","change"],["disabled","","value","null"],["class","form-control","type","text","name","option",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","number","name","option",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","date","name","option",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-md-2","col-sm-12","btn","btn-primary",3,"disabled","click"],[1,"alert","alert-success"],[1,"fa","fa-check-circle"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-minus"],["type","text","name","value",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","value",1,"form-control",3,"ngModel","ngModelChange"],["name","value",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","0"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange","onChange"],[1,"alert","bg-light",2,"margin-top","15px"],[1,"fa","fa-info-circle"],[1,"btn","btn-sm","btn-secondary","fa-pull-right",3,"click"],[1,"fa","fa-sync"],["type","text","name","option",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","option",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","option",1,"form-control",3,"ngModel","ngModelChange"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.YNc(0,Rp,3,0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._UZ(3,"i",3),n._uU(4," Bulk Changes "),n.qZA(),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"table",7),n.TgZ(9,"thead"),n.TgZ(10,"tr"),n.TgZ(11,"th",8),n._uU(12,"Attribute"),n.qZA(),n._UZ(13,"th",9),n.TgZ(14,"th",8),n._uU(15,"Value"),n.qZA(),n._UZ(16,"th",9),n.qZA(),n.qZA(),n.YNc(17,Vp,10,3,"tr",10),n._UZ(18,"tr"),n.TgZ(19,"tr"),n.TgZ(20,"td",8),n.TgZ(21,"select",11),n.NdJ("ngModelChange",function(e){return t.filter_input.key=e})("ngModelChange",function(){return t.showProperInput()}),n.YNc(22,Lp,2,2,"option",12),n.qZA(),n.qZA(),n.TgZ(23,"td",9),n.TgZ(24,"select",13),n.NdJ("ngModelChange",function(e){return t.filter_input.op=e}),n.TgZ(25,"option",14),n._uU(26," = "),n.qZA(),n.TgZ(27,"option",14),n._uU(28," != "),n.qZA(),n.TgZ(29,"option",14),n._uU(30," < "),n.qZA(),n.TgZ(31,"option",14),n._uU(32," > "),n.qZA(),n.TgZ(33,"option",14),n._uU(34," like "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(35,"td",8),n.YNc(36,Ep,1,1,"input",15),n.YNc(37,Kp,1,1,"input",16),n.YNc(38,Bp,5,1,"select",17),n.YNc(39,zp,3,4,"div",18),n.YNc(40,jp,3,4,"div",18),n.YNc(41,Gp,3,4,"div",18),n.YNc(42,Wp,3,4,"div",18),n.qZA(),n.TgZ(43,"td",19),n.TgZ(44,"button",20),n.NdJ("click",function(){return t.addFilterRow()}),n._UZ(45,"i",21),n.qZA(),n._uU(46,"\xa0 "),n.TgZ(47,"button",22),n.NdJ("click",function(){return t.resetFilterRow()}),n._UZ(48,"i",23),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.YNc(49,$p,8,1,"div",24),n.qZA(),n.TgZ(50,"div",25),n.TgZ(51,"div",26),n.TgZ(52,"select",27),n.NdJ("ngModelChange",function(e){return t.action.name=e})("change",function(){return t.showProperActionInput()}),n.TgZ(53,"option",28),n._uU(54,"Select Action"),n.qZA(),n.YNc(55,Xp,2,2,"option",12),n.qZA(),n.qZA(),n.TgZ(56,"div",26),n.YNc(57,eg,1,1,"input",29),n.YNc(58,tg,1,1,"input",30),n.YNc(59,ag,1,1,"input",31),n.YNc(60,ig,3,4,"div",18),n.YNc(61,ng,3,4,"div",18),n.YNc(62,og,3,4,"div",18),n.YNc(63,sg,3,4,"div",18),n.qZA(),n.TgZ(64,"button",32),n.NdJ("click",function(){return t.applyAction()}),n._uU(65,"Apply"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",t.bulk_changes_applied),n.xp6(17),n.Q6J("ngForOf",t.filter),n.xp6(4),n.Q6J("ngModel",t.filter_input.key),n.xp6(1),n.Q6J("ngForOf",t.fields),n.xp6(2),n.Q6J("ngModel",t.filter_input.op)("hidden","bool"==t.input_type),n.xp6(1),n.Q6J("value","="),n.xp6(2),n.Q6J("value","!="),n.xp6(2),n.Q6J("value","<"),n.xp6(2),n.Q6J("value",">"),n.xp6(2),n.Q6J("value","like"),n.xp6(3),n.Q6J("ngIf","text"===t.input_type),n.xp6(1),n.Q6J("ngIf","date"===t.input_type),n.xp6(1),n.Q6J("ngIf","bool"==t.input_type),n.xp6(1),n.Q6J("ngIf","profiles"==t.input_type),n.xp6(1),n.Q6J("ngIf","managers"==t.input_type),n.xp6(1),n.Q6J("ngIf","sites"==t.input_type),n.xp6(1),n.Q6J("ngIf","groups"==t.input_type),n.xp6(2),n.Q6J("disabled",null===t.filter_input.value||!t.filter_input.key),n.xp6(5),n.Q6J("ngIf",t.n_records_found>0),n.xp6(1),n.Q6J("hidden",!t.n_records_found||0===t.n_records_found||0===t.filter.length),n.xp6(2),n.Q6J("ngModel",t.action.name),n.xp6(3),n.Q6J("ngForOf",t.actions),n.xp6(2),n.Q6J("ngIf","text"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","number"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","date"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","profiles"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","managers"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","sites"==t.action_input_type),n.xp6(1),n.Q6J("ngIf","groups"==t.action_input_type),n.xp6(1),n.Q6J("disabled",0===t.n_records_found||null===t.action.name))},directives:[J.O5,J.sg,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,Z.Fj,ma.Lt,Z.wV],styles:[".filter-table[_ngcontent-%COMP%]{width:100%}.action-box[_ngcontent-%COMP%]{margin:20px;padding:10px;box-sizing:border-box;border:1px solid lightgrey}"]}),(0,c.gn)([(0,u.bH)()],rg.prototype,"blockUI",void 0);const lg=["sessions_model_view"];function cg(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)}}let dg=(()=>{class e{constructor(e){this.tr=e,this.tableColumns=[{dataKey:"username",label:this.tr.translate("global_username")},{dataKey:"acctstarttime",label:this.tr.translate("user_session_table_started")},{dataKey:"acctstoptime",label:this.tr.translate("user_session_table_ended")},{dataKey:"framedipaddress",label:this.tr.translate("user_session_table_ip")},{dataKey:"nasipaddress",label:"NAS"},{dataKey:"callingstationid",label:"MAC"},{dataKey:"framedprotocol",label:this.tr.translate("user_session_table_protocol"),hidden:!0},{dataKey:"acctinputoctets",label:this.tr.translate("user_session_table_upload"),pipe:"bytes"},{dataKey:"acctoutputoctets",label:this.tr.translate("user_session_table_download"),pipe:"bytes"},{dataKey:"calledstationid",label:this.tr.translate("user_session_table_service")},{dataKey:"acctterminatecause",label:this.tr.translate("user_session_table_termination_cause")}],this.filterFields=[{key:"framedipaddress",label:"IP Address",type:"text",cols:12},{key:"username",label:"Username",type:"text",cols:12},{key:"mac",label:"MAC",type:"text",cols:12},{key:"start_date",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"end_date",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/UserSessions",primaryKey:"radacctid",sortBy:"acctstarttime",title:"Users Sessions",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,icon:"fa fa-list",actions:null,hasInlineActions:!1,allowSelect:!0}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sessions-report"]],viewQuery:function(e,t){if(1&e&&n.Gf(lg,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","sessions_model_view",3,"modelViewConfig","advancedFilterFields",4,"ngIf"],["name","sessions_model_view",3,"modelViewConfig","advancedFilterFields"],["sessions_model_view",""]],template:function(e,t){1&e&&n.YNc(0,cg,2,2,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();const ug=["activationForm"];function pg(e,t){1&e&&(n.TgZ(0,"div",10),n._UZ(1,"i",11),n._uU(2," No enough information available for this activation, system unable to refund it. "),n.qZA())}function gg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",12,13),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().refund(t)})("cancel",function(){return n.CHM(e),n.oxw().cancel()}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}class fg{constructor(e,t,a,i,n,o,s){this.tr=e,this.formLoader=t,this.route=a,this.toastr=i,this.location=n,this.confirmationService=o,this.api=s,this.form_config={layout:"horizontal",cancelText:this.tr.translate("global_button_dismiss"),submitText:this.tr.translate("global_button_refund"),fields:this.formLoader.getForm("user_cancellation_form"),helpBlock:"hidden"},this.options=[],this.user_id=null,this.refund_data={},this.no_refund=!1}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.getRefundData(this.user_id))})}getRefundData(e){this.api.get("user/refundData/"+e).subscribe(e=>{200===e.status?(this.refund_data=e.data,this.formView.setFormValue(this.refund_data)):this.no_refund=!0})}refund(){this.confirmationService.confirm({message:"Are you sure ?",accept:()=>{this.blockUI.start(),this.api.post("user/refund",{user_id:this.user_id,refund_comment:this.formView.form.value.refund_comment}).subscribe(e=>{this.blockUI.stop(),200===e.status?this.toastr.success("operation performed successfully"):this.toastr.error("something went wrong, unable to perform operation"),this.location.back()})}})}cancel(){this.location.back()}}fg.\u0275fac=function(e){return new(e||fg)(n.Y36(M),n.Y36(yi),n.Y36(p.gz),n.Y36(g._W),n.Y36(J.Ye),n.Y36(xi.YP),n.Y36(h))},fg.\u0275cmp=n.Xpm({type:fg,selectors:[["app-user-subscription-cancelation"]],viewQuery:function(e,t){if(1&e&&n.Gf(ug,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:11,vars:4,consts:[["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],["class","alert alert-warning",4,"ngIf"],[3,"hidden"],["name","activationForm",3,"formConfig","options","submit","cancel",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],["name","activationForm",3,"formConfig","options","submit","cancel"],["activationForm",""]],template:function(e,t){1&e&&(n._UZ(0,"p-confirmDialog",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._UZ(3,"i",3),n._uU(4),n.qZA(),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.YNc(8,pg,3,0,"div",7),n.TgZ(9,"div",8),n.YNc(10,gg,2,2,"dynamic-form",9),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.hij(" ",t.tr.translate("user_cancellation_form_title")," "),n.xp6(4),n.Q6J("ngIf",t.no_refund),n.xp6(1),n.Q6J("hidden",t.no_refund),n.xp6(1),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[T.Q,J.O5,vi],styles:[""]}),(0,c.gn)([(0,u.bH)()],fg.prototype,"blockUI",void 0);const hg=["myForm"];function mg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let _g=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("settings_billing"),this.form_config.fields=this.formFields,this.load()}load(){this.api.get("settings/billing_").subscribe(e=>{200===e.status&&this.myForm.setFormValue(e.data)})}save(e){this.api.post("settings/billing_",e.value).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-postpaid-billing-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(hg,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Postpaid & Billing Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,mg,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[""]}),e})();function bg(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}let Zg=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.tr=a,this.auth=i,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("manager_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("manager_receipt_table_date")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("global_username")},{dataKey:"type",label:this.tr.translate("manager_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("manager_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("manager_receipt_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_receipt_table_created_by")}],this.filterFields=[{key:"type",label:"Receipt Type",type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:"All"},{value:"deposit",label:"Deposit"}]},{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/ManagerReceipts",primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,title:"Manager Receipts",showSearchBox:!0,hasAdvancedFilter:!0,allowExport:!0},this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{const t=[{value:null,label:"All Managers"}];for(const a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.manager_id=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(M),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-receipts-report"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions"],["receipts_model_view",""]],template:function(e,t){1&e&&n.YNc(0,bg,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();var vg=a(56185),wg=a(49457);let yg=(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.summary=[],this.data=[]}ngOnInit(){this.load()}load(){this.api.get("usersReport/summary").subscribe(e=>{this.summary=e.data}),this.api.get("usersReport/perManager").subscribe(e=>{200===e.status&&(this._initChart(e.data),this.data=e.data)})}_initChart(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top 10 Managers"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Users",colorByPoint:!0}]},a=0;const i=[];for(;a<e.length&&a<11;)i.push({name:e[a].manager_name,y:e[a].c}),a++;t.series[0].data=i,this.chart=D.chart("users_per_manager_chart",t)}download(){this.api.get("usersReport/perManager/10000").subscribe(e=>{200===e.status&&this.generateExcelSheet(e.data)})}generateExcelSheet(e){const t=new vg.Workbook;t.creator="SASRADIUS 4";const a=t.addWorksheet("Users per Manager");a.columns=[{header:"Manager",key:"username"},{header:"Total Users",key:"total"},{header:"Active Users",key:"active"},{header:"Expired Users",key:"expired"}];for(let i of e)a.addRow({username:i.manager_name,total:i.c,active:i.active,expired:i.expired});t.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/octet-stream"});(0,wg.saveAs)(t,"sasradius_report_users_per_manager.xlsx")})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-users-report-per-manager"]],decls:27,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],[1,"row","row-eq-height"],[1,"col-12","col-md-8","order-2","order-md-1"],["id","users_per_manager_chart"],[1,"col-12","col-md-4","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"button",2),n.NdJ("click",function(){return t.load()}),n._UZ(3,"i",3),n._uU(4),n.qZA(),n.TgZ(5,"button",2),n.NdJ("click",function(){return t.download()}),n._UZ(6,"i",4),n._uU(7),n.qZA(),n.qZA(),n.qZA(),n._UZ(8,"br"),n.TgZ(9,"div",5),n.TgZ(10,"div",6),n.TgZ(11,"div",7),n._uU(12," Chart is loading... "),n.qZA(),n.qZA(),n.TgZ(13,"div",8),n.TgZ(14,"ul",9),n.TgZ(15,"li",10),n._uU(16),n.TgZ(17,"span",11),n._uU(18),n.qZA(),n.qZA(),n.TgZ(19,"li",10),n._uU(20),n.TgZ(21,"span",11),n._uU(22),n.qZA(),n.qZA(),n.TgZ(23,"li",10),n._uU(24),n.TgZ(25,"span",11),n._uU(26),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.hij(" ",t.tr.translate("global_reload"),""),n.xp6(3),n.hij(" ",t.tr.translate("global_download"),""),n.xp6(9),n.hij(" ",t.tr.translate("global_total")," "),n.xp6(2),n.Oqu(t.summary.total),n.xp6(2),n.hij(" ",t.tr.translate("users_status_active")," "),n.xp6(2),n.Oqu(t.summary.active),n.xp6(2),n.hij(" ",t.tr.translate("users_status_expired")," "),n.xp6(2),n.Oqu(t.summary.expired))},styles:[".list-group[_ngcontent-%COMP%]{height:100%}.list-group-item[_ngcontent-%COMP%]{font-size:1.2rem}.badge[_ngcontent-%COMP%]{font-size:1.2rem!important}"]}),e})();function xg(e,t){if(1&e&&(n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.qZA()),2&e){const e=t.$implicit;n.xp6(2),n.Oqu(e.profile_name),n.xp6(2),n.Oqu(e.c),n.xp6(2),n.Oqu(e.active),n.xp6(2),n.Oqu(e.expired)}}let Ag=(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.data=[],this.filter={manager_id:-1},this.managers_list=[]}ngOnInit(){this.loadResources(),this.load()}load(){this.api.post("usersReport/perProfile",this.filter).subscribe(e=>{200===e.status&&(this._initChart(e.data),this.data=e.data)})}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[],this.managers_list.unshift({value:-1,label:"All Managers"});for(let t of e.data)this.managers_list.push({value:t.id,label:t.username})})}_initChart(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top 10 Profiles"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Users",colorByPoint:!0}]},a=0;const i=[];for(;a<e.length&&a<11;)i.push({name:e[a].profile_name,y:e[a].c}),a++;t.series[0].data=i,this.chart=D.chart("users_per_profile_chart",t)}download(){var e=new vg.Workbook;e.creator="SASRADIUS 4";var t=e.addWorksheet("Users per Manager");t.columns=[{header:"Profile",key:"profile_name"},{header:"Total Users",key:"total"},{header:"Active Users",key:"active"},{header:"Expired Users",key:"expired"}];for(let a of this.data)t.addRow({profile_name:a.profile_name,total:a.c,active:a.active,expired:a.expired});e.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/octet-stream"});(0,wg.saveAs)(t,"sasradius_report_users_per_profile.xlsx")})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-users-report-per-profile"]],decls:30,vars:12,consts:[[1,"row"],[1,"col-12"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],["id","users_per_profile_chart"],[1,"table","table-hover"],[1,"thead-dark"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"button",2),n.NdJ("click",function(){return t.load()}),n._UZ(3,"i",3),n._uU(4),n.qZA(),n.TgZ(5,"button",2),n.NdJ("click",function(){return t.download()}),n._UZ(6,"i",4),n._uU(7),n.qZA(),n.TgZ(8,"div",5),n.TgZ(9,"div",6),n.TgZ(10,"p-dropdown",7),n.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",0),n.TgZ(12,"div",1),n.TgZ(13,"div",8),n._uU(14," Chart is loading... "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",0),n.TgZ(16,"div",1),n.TgZ(17,"table",9),n.TgZ(18,"thead",10),n.TgZ(19,"tr"),n.TgZ(20,"td"),n._uU(21),n.qZA(),n.TgZ(22,"td"),n._uU(23),n.qZA(),n.TgZ(24,"td"),n._uU(25),n.qZA(),n.TgZ(26,"td"),n._uU(27),n.qZA(),n.qZA(),n.qZA(),n.TgZ(28,"tbody"),n.YNc(29,xg,9,4,"tr",11),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.hij(" ",t.tr.translate("global_reload"),""),n.xp6(3),n.hij(" ",t.tr.translate("global_download"),""),n.xp6(3),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),n.xp6(11),n.Oqu(t.tr.translate("global_profile")),n.xp6(2),n.Oqu(t.tr.translate("global_total")),n.xp6(2),n.Oqu(t.tr.translate("users_status_active")),n.xp6(2),n.Oqu(t.tr.translate("users_status_expired")),n.xp6(2),n.Q6J("ngForOf",t.data))},directives:[ma.Lt,Z.JJ,Z.On,J.sg],styles:[""]}),e})();function qg(e,t){if(1&e&&(n.TgZ(0,"option",8),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}let Tg=(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.year_list=[],this.date=new Date,this.filter={month:this.date.getMonth()+1,year:this.date.getFullYear()},this.data=[]}ngOnInit(){for(let e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.load()}load(){for(let e=0;e<12;e++)this.data[e]=0;this.api.post("usersReport/registration",this.filter).subscribe(e=>{if(200===e.status){for(let t of e.data){let e=t.m;e-=1,this.data[e]=t.total}this.initChart()}})}initChart(){let e={title:{text:this.tr.translate("report_users_registrations_per_month")},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:1}},series:[{name:"New Users",data:this.data}]};console.log(e),this.chart=D.chart("registrations_chart",e)}download(){var e=new vg.Workbook;e.creator="SASRADIUS 4";var t=e.addWorksheet("Registrations "+this.filter.year);t.columns=[{header:"Month",key:"month"},{header:"New Users",key:"total"}];for(let a=0;a<12;a++)t.addRow({month:a+1,total:this.data[a]});e.xlsx.writeBuffer().then(e=>{const t=new Blob([e],{type:"application/octet-stream"});(0,wg.saveAs)(t,"sasradius_report_registrations.xlsx")})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-users-report-registration"]],decls:14,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"form-control","input-sm","d-inline",2,"width","100px !important",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],["id","registrations_chart"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("ngModelChange",function(){return t.load()}),n.YNc(3,qg,2,2,"option",3),n.qZA(),n.TgZ(4,"button",4),n.NdJ("click",function(){return t.load()}),n._UZ(5,"i",5),n._uU(6),n.qZA(),n.TgZ(7,"button",4),n.NdJ("click",function(){return t.download()}),n._UZ(8,"i",6),n._uU(9),n.qZA(),n.qZA(),n.qZA(),n.TgZ(10,"div",0),n.TgZ(11,"div",1),n.TgZ(12,"div",7),n._uU(13," Chart is loading... "),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.year_list),n.xp6(3),n.hij(" ",t.tr.translate("global_reload"),""),n.xp6(3),n.hij(" ",t.tr.translate("global_download"),""))},directives:[Z.EJ,Z.JJ,Z.On,J.sg,Z.YN,Z.Kr],styles:[""]}),e})(),Cg=(()=>{class e{constructor(e){this.tr=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-users-report"]],decls:7,vars:3,consts:[[3,"header"]],template:function(e,t){1&e&&(n.TgZ(0,"p-tabView"),n.TgZ(1,"p-tabPanel",0),n._UZ(2,"app-users-report-per-manager"),n.qZA(),n.TgZ(3,"p-tabPanel",0),n._UZ(4,"app-users-report-per-profile"),n.qZA(),n.TgZ(5,"p-tabPanel",0),n._UZ(6,"app-users-report-registration"),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.s9C("header",t.tr.translate("report_users_per_manager_title")),n.xp6(2),n.s9C("header",t.tr.translate("report_users_per_profile_title")),n.xp6(2),n.s9C("header",t.tr.translate("report_users_registrations_title")))},directives:[ru.xf,ru.x4,yg,Ag,Tg],styles:[""]}),e})();const kg=function(){return{width:"50vw"}};let Ug=(()=>{class e{constructor(e,t,a,i){this.api=e,this.toastr=t,this.tr=a,this.confirmationService=i,this.paperSize="A4",this.orientation="P",this.editorOptions={theme:"vs-dark",language:"html"}}ngOnInit(){this.load()}load(){this.api.get("userInvoice/template").subscribe(e=>{this.template=e.data.template,this.paperSize=e.data.size,this.orientation=e.data.orientation})}restoreOriginal(){this.confirmationService.confirm({message:"Restore orignal template? current one will get overwritten",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.api.delete("userInvoice/template").subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.load())})}})}save(){this.api.post("userInvoice/template",{size:this.paperSize,template:this.template,orientation:this.orientation}).subscribe(e=>{200===e.status&&this.toastr.success(e.message)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(g._W),n.Y36(M),n.Y36(xi.YP))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-invoice-designer"]],decls:37,vars:7,consts:[[1,"row"],[1,"col-10","editor-container"],[1,"alert","alert-info"],[1,"fa","fa-info-circle"],[1,"code-editor",3,"options","ngModel","ngModelChange"],[1,"col-2"],[1,"col-12"],[1,"form-control-static"],[1,"form-control",3,"ngModel","ngModelChange"],["value","A4"],["value","A5"],["value","80mm"],["value","P"],["value","L"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(n._UZ(0,"p-confirmDialog"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"div",2),n._UZ(4,"i",3),n._uU(5,"\xa0 This is a Laravel Blade template. Mind the PHP ($) variables when editing. "),n.qZA(),n.TgZ(6,"ngx-monaco-editor",4),n.NdJ("ngModelChange",function(e){return t.template=e}),n.qZA(),n.qZA(),n.TgZ(7,"div",5),n.TgZ(8,"div",0),n.TgZ(9,"div",6),n.TgZ(10,"label",7),n._uU(11," PDF Paper Size "),n.qZA(),n.TgZ(12,"select",8),n.NdJ("ngModelChange",function(e){return t.paperSize=e}),n.TgZ(13,"option",9),n._uU(14,"A4"),n.qZA(),n.TgZ(15,"option",10),n._uU(16,"A5"),n.qZA(),n.TgZ(17,"option",11),n._uU(18,"80mx200m"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(19,"div",6),n.TgZ(20,"label",7),n._uU(21," Page Orientation "),n.qZA(),n.TgZ(22,"select",8),n.NdJ("ngModelChange",function(e){return t.orientation=e}),n.TgZ(23,"option",12),n._uU(24,"Portrait"),n.qZA(),n.TgZ(25,"option",13),n._uU(26,"Landscape"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(27,"hr"),n.TgZ(28,"div",0),n.TgZ(29,"div",6),n.TgZ(30,"button",14),n.NdJ("click",function(){return t.save()}),n._uU(31,"Save"),n.qZA(),n.qZA(),n.qZA(),n._UZ(32,"hr"),n.TgZ(33,"div",0),n.TgZ(34,"div",6),n.TgZ(35,"button",15),n.NdJ("click",function(){return t.restoreOriginal()}),n._uU(36,"Factory Default"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.Akn(n.DdM(6,kg)),n.xp6(6),n.Q6J("options",t.editorOptions)("ngModel",t.template),n.xp6(6),n.Q6J("ngModel",t.paperSize),n.xp6(10),n.Q6J("ngModel",t.orientation))},directives:[T.Q,nu.PG,Z.JJ,Z.On,Z.EJ,Z.YN,Z.Kr],styles:[".btn[_ngcontent-%COMP%]{width:100%}.code-editor[_ngcontent-%COMP%]{height:100%;min-height:500px;width:100%}.editor-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}"]}),e})();function Mg(e,t){if(1&e&&(n.TgZ(0,"option",13),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}function Fg(e,t){if(1&e&&(n.TgZ(0,"option",13),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e.id),n.xp6(1),n.Oqu(e.name)}}function Jg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"select",2),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter.month=t})("change",function(){return n.CHM(e),n.oxw().load()}),n.TgZ(1,"option",14),n._uU(2,"All Months"),n.qZA(),n.YNc(3,Fg,2,2,"option",3),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.filter.month),n.xp6(3),n.Q6J("ngForOf",e.ch.months)}}class Og{constructor(e,t){this.api=e,this.ch=t,this.year_list=[],this.date=new Date,this.filter={year:this.date.getFullYear(),month:-1}}ngOnInit(){for(let e=this.date.getFullYear();e>2017;e--)this.year_list.push(e);this.load()}load(){this.blockUI.start(),this.api.post("trafficReport/all",this.filter).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this._initChart_topDownloads(e.data.topDownloaders),this._initChart_topUploaders(e.data.topUploaders),this._initChart_topConsumers(e.data.topConsumers),this._initChart_period(e.data.periodTraffic))})}_initChart_topConsumers(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Consumers"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0;const i=[];for(;a<e.length&&a<11;){let t="(deleted user)";null!=e[a].user_details&&(t=e[a].user_details.username),i.push({name:t||"(deleted user)",y:parseInt(e[a].traffic)}),a++}t.series[0].data=i,this.chart=D.chart("top_consumers",t)}_initChart_topDownloads(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Downloaders"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0;const i=[];for(;a<e.length&&a<11;){let t="(deleted user)";null!=e[a].user_details&&(t=e[a].user_details.username),i.push({name:t||"(deleted user)",y:parseInt(e[a].dl)}),a++}t.series[0].data=i,this.chart=D.chart("top_downloaders",t)}_initChart_topUploaders(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Uploaders"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0;const i=[];for(;a<e.length&&a<11;){let t="(deleted user)";null!=e[a].user_details&&(t=e[a].user_details.username),i.push({name:t||"(deleted user)",y:parseInt(e[a].ul)}),a++}t.series[0].data=i,this.chart=D.chart("top_uploaders",t)}_initChart_period(e){let t=[];if(-1==this.filter.month){for(let e=0;e<12;e++)t[e]=0;e.map(e=>{t[e.month-1]=parseInt(e.traffic)})}else{for(let e=0;e<31;e++)t[e]=0;e.map(e=>{t[e.day-1]=parseInt(e.traffic)})}let a={title:{text:"Total Traffic Usage"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:1,pointInterval:1}},series:[{name:"Data Usage",data:t,pointStart:0,pointInterval:1}],tooltip:{formatter:function(){let e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";let t="";e<0&&(t="-",e*=-1);let a=0;for(;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}};a.xAxis=-1==this.filter.month?{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}:{categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},this.chart=D.chart("period_chart",a)}}function Ng(e,t){if(1&e&&(n.TgZ(0,"option",12),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.s9C("value",e),n.xp6(1),n.Oqu(e)}}function Ig(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"select",2),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().filter.year=t})("change",function(){return n.CHM(e),n.oxw().load()}),n.YNc(1,Ng,2,2,"option",11),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("ngModel",e.filter.year),n.xp6(1),n.Q6J("ngForOf",e.year_list)}}function Yg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",14),n.TgZ(2,"p-calendar",15),n.NdJ("onSelect",function(){return n.CHM(e),n.oxw().load()})("ngModelChange",function(t){return n.CHM(e),n.oxw().selectedDate=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("yearNavigator",!0)("ngModel",e.selectedDate)}}function Qg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",13),n.TgZ(1,"div",14),n.TgZ(2,"p-calendar",16),n.NdJ("onSelect",function(){return n.CHM(e),n.oxw().load()})("ngModelChange",function(t){return n.CHM(e),n.oxw().selectedDate=t}),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("yearNavigator",!0)("ngModel",e.selectedDate)}}Og.\u0275fac=function(e){return new(e||Og)(n.Y36(h),n.Y36(m))},Og.\u0275cmp=n.Xpm({type:Og,selectors:[["app-traffic-report"]],decls:24,vars:3,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-control filter-select",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-12"],["id","period_chart"],["id","top_consumers"],["id","top_downloaders"],["id","top_uploaders"],[3,"value"],["value","-1"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),n.YNc(3,Mg,2,2,"option",3),n.qZA(),n.YNc(4,Jg,4,2,"select",4),n.qZA(),n.qZA(),n._UZ(5,"br"),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n.TgZ(10,"div",9),n._uU(11," loading... "),n.qZA(),n._UZ(12,"hr"),n.TgZ(13,"div",10),n._uU(14," loading... "),n.qZA(),n._UZ(15,"hr"),n.qZA(),n.TgZ(16,"div",8),n.TgZ(17,"div",11),n._uU(18," loading... "),n.qZA(),n._UZ(19,"hr"),n.qZA(),n.TgZ(20,"div",8),n.TgZ(21,"div",12),n._uU(22," loading... "),n.qZA(),n._UZ(23,"hr"),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngModel",t.filter.year),n.xp6(1),n.Q6J("ngForOf",t.year_list),n.xp6(1),n.Q6J("ngIf",-1!=t.filter.year))},directives:[F.M2,Z.EJ,Z.JJ,Z.On,J.sg,J.O5,Z.YN,Z.Kr],styles:[""]}),(0,c.gn)([(0,u.bH)()],Og.prototype,"blockUI",void 0);let Sg=(()=>{class e{constructor(e){this.api=e,this.year_list=[],this.date=new Date,this.filter={type:"hourly",day:this.date.getDate(),month:this.date.getMonth()+1,year:this.date.getFullYear()},this.data=[],this.selectedDate=new Date}ngOnInit(){for(let e=this.date.getFullYear();e>=2019;e--)this.year_list.push(e);this.load()}load(){"hourly"===this.filter.type&&(this.filter.day=this.selectedDate.getDate(),this.filter.month=this.selectedDate.getMonth()+1,this.filter.year=this.selectedDate.getFullYear()),"daily"===this.filter.type&&(this.filter.day=null,this.filter.month=this.selectedDate.getMonth()+1,this.filter.year=this.selectedDate.getFullYear()),this.api.post("onlineReport",this.filter).subscribe(e=>{200===e.status&&("hourly"===this.filter.type&&this.drawHourlyChart(e.data),"daily"===this.filter.type&&this.drawDailyChart(e.data),"monthly"===this.filter.type&&this.drawMonthlyChart(e.data))})}drawHourlyChart(e){let t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[];for(let o=0;o<24;o++){let t=0,n=0;e.map(e=>{e.hour==o&&(t=parseInt(e.n_online),n=parseInt(e.n_total))}),a.push([o,t]),i.push([o,n])}let n={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(n),console.log("drawing chart"),this.chart=D.chart("chart_container",t)}drawDailyChart(e){let t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[];for(let o=1;o<=31;o++){let t=0,n=0;e.map(e=>{e.day==o&&(t=parseInt(e.n_online),n=parseInt(e.n_total))}),a.push([o,t]),i.push([o,n])}let n={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(n),console.log("drawing chart"),this.chart=D.chart("chart_container",t)}drawMonthlyChart(e){let t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[];for(let o=1;o<=12;o++){let t=0,n=0;e.map(e=>{e.month===o&&(t=parseInt(e.n_online),n=parseInt(e.n_total))}),a.push([o,t]),i.push([o,n])}let n={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(n),console.log("drawing chart"),this.chart=D.chart("chart_container",t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-online-history-report"]],decls:17,vars:4,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],["value","hourly"],["value","daily"],["value","monthly"],["class","form-control filter-select",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","ui-g ui-fluid",4,"ngIf"],[1,"card"],[1,"card-body"],["id","chart_container"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ui-g","ui-fluid"],[1,"ui-g-12","p-0"],["showButtonBar","true","showIcon","true","view","month","dateFormat","mm/yy","yearRange","2019:2030",3,"yearNavigator","ngModel","onSelect","ngModelChange"],["showButtonBar","true","showIcon","true","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"yearNavigator","ngModel","onSelect","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"select",2),n.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),n.TgZ(3,"option",3),n._uU(4,"Hourly"),n.qZA(),n.TgZ(5,"option",4),n._uU(6,"Daily"),n.qZA(),n.TgZ(7,"option",5),n._uU(8,"Monthly"),n.qZA(),n.qZA(),n.YNc(9,Ig,2,2,"select",6),n.YNc(10,Yg,3,2,"div",7),n.YNc(11,Qg,3,2,"div",7),n.qZA(),n.qZA(),n._UZ(12,"br"),n.TgZ(13,"div",8),n.TgZ(14,"div",9),n.TgZ(15,"div",10),n._uU(16," Chart is loading... "),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngModel",t.filter.type),n.xp6(7),n.Q6J("ngIf","monthly"==t.filter.type),n.xp6(1),n.Q6J("ngIf","daily"==t.filter.type),n.xp6(1),n.Q6J("ngIf","hourly"==t.filter.type))},directives:[F.M2,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.O5,J.sg,Ya.f],styles:[""]}),e})();function Pg(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}let Dg=(()=>{class e{constructor(e,t,a,i){this.api=e,this.route=t,this.auth=a,this.tr=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"operation",label:this.tr.translate("manager_journal_table_operation")},{dataKey:"cr_manager",label:this.tr.translate("manager_journal_table_cr"),sortBy:"cr"},{dataKey:"dr_manager",label:this.tr.translate("manager_journal_table_dr"),sortBy:"dr"},{dataKey:"amount",label:this.tr.translate("manager_journal_table_amount")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"operation",label:"Operation",type:"select",cols:12,value:"deposit",options:[{label:"Deposit",value:"deposit"},{label:"Withdrawal",value:"withdrawal"}]},{key:"manager_id",label:"Manager",type:"select2",cols:12,value:-1,options:[]},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={dataUrl:"report/depodrawal",primaryKey:"id",title:"Money Transfer Report",icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:!0},this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];for(let a of e.data)t.push({value:a.id,label:a.username});t.unshift({value:-1,label:"All Managers"}),this.filterOptions.manager_id=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz),n.Y36(_),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-depodrawals-report"]],decls:1,vars:1,consts:[["name","depodrawal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","depodrawal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["depodrawal_model_view",""]],template:function(e,t){1&e&&n.YNc(0,Pg,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();var Hg=a(78556);const Rg=function(){return{height:"450px"}};function Vg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"p-editor",11),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().messageBody=t}),n.qZA()}if(2&e){const e=n.oxw();n.Akn(n.DdM(3,Rg)),n.Q6J("ngModel",e.messageBody)}}function Lg(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"textarea",12),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().messageBody=t}),n.qZA()}if(2&e){const e=n.oxw();n.Akn(n.DdM(3,Rg)),n.Q6J("ngModel",e.messageBody)}}class Eg{constructor(e,t,a){this.api=e,this.toast=t,this.tr=a,this.editorMode="normal"}ngOnInit(){this.load(),Hg.builtinPlugins.map(e=>{console.log(e.pluginName)})}load(){this.blockUI.start(),this.api.get("welcomeScreen").subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.messageBody=e.data)})}save(){this.api.post("welcomeScreen",{data:this.messageBody}).subscribe(e=>{200===e.status&&this.toast.success(this.tr.translate(e.message))})}}function Kg(e,t){if(1&e&&(n.TgZ(0,"div",8),n.TgZ(1,"div",9),n.TgZ(2,"span",10),n._uU(3),n.qZA(),n.TgZ(4,"span",11),n._uU(5),n.qZA(),n.qZA(),n._UZ(6,"br"),n.TgZ(7,"div",12),n._uU(8),n.qZA(),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(3),n.AsE("(",e.user_details.username,") ",e.user_details.firstname+" "+e.user_details.lastname,""),n.xp6(2),n.Oqu(e.created_at),n.xp6(3),n.hij(" ",e.message," ")}}function Bg(e,t){if(1&e&&(n.TgZ(0,"div",13),n.TgZ(1,"div",9),n.TgZ(2,"span",10),n._uU(3),n.qZA(),n.TgZ(4,"span",11),n._uU(5),n.qZA(),n.qZA(),n._UZ(6,"br"),n.TgZ(7,"div",12),n._uU(8),n.qZA(),n.qZA()),2&e){const e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.manager_details.username),n.xp6(2),n.Oqu(e.created_at),n.xp6(3),n.hij(" ",e.message," ")}}function zg(e,t){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,Kg,9,4,"div",6),n.YNc(2,Bg,9,3,"div",7),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.Q6J("ngIf",null==e.user_details?null:e.user_details.id),n.xp6(1),n.Q6J("ngIf",null==e.manager_details?null:e.manager_details.id)}}Eg.\u0275fac=function(e){return new(e||Eg)(n.Y36(h),n.Y36(g._W),n.Y36(M))},Eg.\u0275cmp=n.Xpm({type:Eg,selectors:[["app-welcome-screen"]],decls:16,vars:2,consts:[[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-sign"],["tooltip","Toggle HTML source view",1,"float-right",2,"cursor","pointer",3,"click"],[1,"fa","fa-code"],[1,"card-body"],[3,"ngModel","style","ngModelChange",4,"ngIf"],["class","form-control",3,"ngModel","style","ngModelChange",4,"ngIf"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],[3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Welcome Screen Editor "),n.TgZ(4,"a",3),n.NdJ("click",function(){return t.editorMode="normal"==t.editorMode?"html":"normal"}),n._UZ(5,"i",4),n.qZA(),n.qZA(),n.TgZ(6,"div",5),n.YNc(7,Vg,1,4,"p-editor",6),n.YNc(8,Lg,1,4,"textarea",7),n.TgZ(9,"div"),n._UZ(10,"hr"),n.TgZ(11,"div",8),n.TgZ(12,"button",9),n.NdJ("click",function(){return t.save()}),n._uU(13,"Save"),n.qZA(),n.TgZ(14,"button",10),n.NdJ("click",function(){return t.load()}),n._uU(15,"Reset"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf","normal"==t.editorMode),n.xp6(1),n.Q6J("ngIf","html"==t.editorMode))},directives:[J.O5,nc.ML,Z.JJ,Z.On,Z.Fj],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:500px!important}"]}),(0,c.gn)([(0,u.bH)()],Eg.prototype,"blockUI",void 0);let jg=(()=>{class e{constructor(e){this.api=e,this.thread_id=null,this.message=null}ngOnInit(){}scrollToButtom(){var e=document.getElementById("messages_container");e.scrollTop=e.scrollHeight}loadThread(e){this.api.get("ticket/"+e).subscribe(t=>{200===t.status&&(this.thread_id=e,this.thread=t.data,this.scrollToButtom())})}sendMessage(){this.message&&this.message.length>1&&this.api.post("ticket",{thread_id:this.thread_id,message:this.message}).subscribe(e=>{200===e.status&&(this.loadThread(this.thread_id),this.message=null)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-ticket-thread"]],decls:10,vars:3,consts:[[1,"wrapper"],["id","messages_container",1,"messages-wrapper"],[4,"ngFor","ngForOf"],[1,"message-reply"],["placeholder","write your response here",1,"form-control",2,"height","90%",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","float-right",2,"margin-top","5px","width","100px",3,"click"],["class","message-container user-message-container",4,"ngIf"],["class","message-container manager-message-container",4,"ngIf"],[1,"message-container","user-message-container"],[2,"width","100%"],[1,"message-writer","float-left"],[1,"message-writer","float-right"],[1,"message-content"],[1,"message-container","manager-message-container"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"h4"),n._uU(2),n.qZA(),n._UZ(3,"hr"),n.TgZ(4,"div",1),n.YNc(5,zg,3,2,"div",2),n.qZA(),n.TgZ(6,"div",3),n.TgZ(7,"textarea",4),n.NdJ("ngModelChange",function(e){return t.message=e}),n.qZA(),n.TgZ(8,"button",5),n.NdJ("click",function(){return t.sendMessage()}),n._uU(9,"Send"),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Oqu(null==t.thread?null:t.thread.subject),n.xp6(3),n.Q6J("ngForOf",null==t.thread?null:t.thread.messages),n.xp6(2),n.Q6J("ngModel",t.message))},directives:[J.sg,Z.Fj,Z.JJ,Z.On,J.O5],styles:['.wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.messages-wrapper[_ngcontent-%COMP%]{width:100%;height:70%;overflow-y:scroll;padding:5px}.message-container[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:5px;width:85%;margin-top:10px;padding:10px;min-height:40px}.user-message-container[_ngcontent-%COMP%]{background:rgb(255,255,255);background:linear-gradient(to bottom,rgba(255,255,255,1) 0%,rgba(246,246,246,1) 47%,rgba(237,237,237,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#ededed",GradientType=0);float:left}.manager-message-container[_ngcontent-%COMP%]{background:rgb(234,239,181);background:linear-gradient(to bottom,rgba(234,239,181,1) 0%,rgba(225,233,160,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#eaefb5",endColorstr="#e1e9a0",GradientType=0);float:right}.message-writer[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter}.message-content[_ngcontent-%COMP%]{display:block;padding-top:5px}.message-reply[_ngcontent-%COMP%]{height:20%;width:100%;margin-top:5px}']}),e})();const Gg=["ticket_thread"],Wg=["tickets_model_view"];function $g(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",20,21),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}const Xg=function(){return{width:"400px"}},ef=function(){return{width:"550px"}};class tf{constructor(e,t,a,i){this.api=e,this.tr=t,this.toastr=a,this.confirmationService=i,this.columns=[{dataKey:"id",label:"ID",hidden:!0},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"subject",label:this.tr.translate("global_subject"),class:"href"},{dataKey:"username",label:this.tr.translate("global_username"),parentKey:"user_details"},{dataKey:"firstname",label:this.tr.translate("global_firstname"),parentKey:"user_details"},{dataKey:"lastname",label:this.tr.translate("global_lastname"),parentKey:"user_details"},{dataKey:"closed",label:this.tr.translate("global_status"),dataResolver:function(e,t){let a="";return a+=1===t.closed?" closed ":" open ",a+=1===t.solved?" ,solved ":" ,unsolved ",a},classFn:function(e){return 1===e.closed?"row-ticket-closed":"row-ticket-open"}}],this.actions=[{name:"create_ticket",label:this.tr.translate("tickets_action_create"),icon:"",requiresRow:!1,acl:"prm_any",inline:!1},{name:"close_ticket",label:this.tr.translate("tickets_action_close"),icon:"",requiresRow:!0,acl:"prm_any",inline:!0},{name:"delete_ticket",label:this.tr.translate("global_actions_delete"),icon:"",requiresRow:!0,acl:"prm_any",inline:!0}],this.sidebar_visible=!1,this.modelViewConfig=null,this.close_ticket_dialog_visible=!1,this.close_status=!1,this.selected_user=null,this.suggestions=[],this.selected_thread_id=null,this.new_ticket_dialog_visible=!1,this.new_ticket={user:null,subject:""}}ngOnInit(){this.modelViewConfig={title:"User Tickets",icon:"fa fa-life-ring",columns:this.columns,dataUrl:"index/tickets",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:!0,modelName:"ticket",hasAdvancedFilter:!1,showRowsCount:!0,sortBy:"id",direction:"desc",hasInlineActions:!0}}onCellClicked(e){"subject"===e.column&&(this.sidebar_visible=!0,this.threadComponent.loadThread(e.row.id))}onAction(e){switch(e.row&&(this.selected_thread_id=e.row.id),e.action){case"close_ticket":this.close_ticket_dialog_visible=!0;break;case"create_ticket":this.new_ticket_dialog_visible=!0;break;case"delete_ticket":this.deleteTicket()}}closeTicket(){this.api.post("ticket/close",{thread_id:this.selected_thread_id,is_solved:this.close_status}).subscribe(e=>{200===e.status&&(this.ticketsModalView.reload(),this.close_ticket_dialog_visible=!1)})}search(e){let t=e.query;t.length<2||this.api.post("index/user",{search:t}).subscribe(e=>{this.suggestions=[],e.data.map(e=>{this.suggestions.push({id:e.id,name:"<"+e.username+"> "+e.firstname+" "+e.lastname})})})}create(){this.api.post("ticket/create",{user_id:this.new_ticket.user.id,subject:this.new_ticket.subject}).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.ticketsModalView.reload())})}deleteTicket(){this.confirmationService.confirm({message:this.tr.translate("tickets_confirm_delete"),header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.delete("ticket/"+this.selected_thread_id).subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message)),this.ticketsModalView.reload()})}})}}function af(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td",12),n._uU(2),n.qZA(),n.TgZ(3,"td",13),n.TgZ(4,"div",17),n._uU(5),n.qZA(),n.TgZ(6,"p-slider",14),n.NdJ("ngModelChange",function(t){const a=n.CHM(e).$implicit;return n.oxw().multiplier[a.id]=t}),n.qZA(),n.qZA(),n.TgZ(7,"td",15),n._uU(8),n.ALo(9,"bitrate"),n.ALo(10,"bitrate"),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,a=n.oxw();n.xp6(2),n.Oqu(e.name),n.xp6(3),n.hij("%",a.multiplier[e.id],""),n.xp6(1),n.Q6J("min",25)("max",200)("ngModel",a.multiplier[e.id]),n.xp6(2),n.AsE(" ",n.lcZ(9,7,(e.downrate*(a.multiplier[e.id]/100)).toString())," / ",n.lcZ(10,9,(e.uprate*(a.multiplier[e.id]/100)).toString())," ")}}tf.\u0275fac=function(e){return new(e||tf)(n.Y36(h),n.Y36(M),n.Y36(g._W),n.Y36(xi.YP))},tf.\u0275cmp=n.Xpm({type:tf,selectors:[["app-user-tickets"]],viewQuery:function(e,t){if(1&e&&(n.Gf(Gg,5),n.Gf(Wg,5)),2&e){let e;n.iGM(e=n.CRH())&&(t.threadComponent=e.first),n.iGM(e=n.CRH())&&(t.ticketsModalView=e.first)}},decls:33,vars:20,consts:[["name","tickets_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["position","right","baseZIndex","999","styleClass","ui-sidebar-md",3,"visible","visibleChange"],["id","ticket_thread"],["ticket_thread",""],["header","Close Ticket",3,"visible","modal","draggable","visibleChange"],["closeTicketDialog",""],[1,"form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["header","New Support Ticket",3,"visible","modal","draggable","visibleChange"],["newTicketDialog",""],[1,"form"],[1,"mb-3"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","user",3,"ngModel","suggestions","field","placeholder","ngModelChange","completeMethod"],["type","text","name","subject","id","subject","placeholder","Subject",1,"form-control",3,"ngModel","ngModelChange"],["name","tickets_model_view",3,"modelViewConfig","onAction","onCellClicked"],["tickets_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,$g,2,1,"model-table-view",0),n.TgZ(1,"p-sidebar",1),n.NdJ("visibleChange",function(e){return t.sidebar_visible=e}),n._UZ(2,"app-ticket-thread",2,3),n.qZA(),n.TgZ(4,"p-dialog",4,5),n.NdJ("visibleChange",function(e){return t.close_ticket_dialog_visible=e}),n.TgZ(6,"div",6),n.TgZ(7,"input",7),n.NdJ("ngModelChange",function(e){return t.close_status=e}),n.qZA(),n.TgZ(8,"label",8),n._uU(9,"Problem Solved"),n.qZA(),n.qZA(),n._UZ(10,"br"),n.TgZ(11,"div",9),n.TgZ(12,"button",10),n.NdJ("click",function(){return t.close_ticket_dialog_visible=!1}),n._uU(13,"Cancel"),n.qZA(),n.TgZ(14,"button",11),n.NdJ("click",function(){return t.closeTicket()}),n._uU(15,"Close Ticket"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"p-dialog",12,13),n.NdJ("visibleChange",function(e){return t.new_ticket_dialog_visible=e}),n.TgZ(18,"form",14),n._UZ(19,"br"),n.TgZ(20,"div",15),n.TgZ(21,"div",16),n.TgZ(22,"div",17),n.TgZ(23,"p-autoComplete",18),n.NdJ("ngModelChange",function(e){return t.new_ticket.user=e})("completeMethod",function(e){return t.search(e)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(24,"div",15),n.TgZ(25,"input",19),n.NdJ("ngModelChange",function(e){return t.new_ticket.subject=e}),n.qZA(),n.qZA(),n.qZA(),n._UZ(26,"br"),n.TgZ(27,"div",9),n.TgZ(28,"button",10),n.NdJ("click",function(){return t.new_ticket_dialog_visible=!1}),n._uU(29,"Cancel"),n.qZA(),n.TgZ(30,"button",11),n.NdJ("click",function(){return t.create()}),n._uU(31,"Create"),n.qZA(),n.qZA(),n.qZA(),n._UZ(32,"p-confirmDialog")),2&e&&(n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Q6J("visible",t.sidebar_visible),n.xp6(3),n.Akn(n.DdM(18,Xg)),n.Q6J("visible",t.close_ticket_dialog_visible)("modal",!0)("draggable",!0),n.xp6(3),n.Q6J("ngModel",t.close_status),n.xp6(9),n.Akn(n.DdM(19,ef)),n.Q6J("visible",t.new_ticket_dialog_visible)("modal",!0)("draggable",!0),n.xp6(7),n.Q6J("ngModel",t.new_ticket.user)("suggestions",t.suggestions)("field","name")("placeholder","Select Client"),n.xp6(2),n.Q6J("ngModel",t.new_ticket.subject))},directives:[J.O5,Aa.Y,jg,ki.V,Z.Wl,Z.JJ,Z.On,Z._Y,Z.JL,Z.F,hd.Qc,Z.Fj,T.Q,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],tf.prototype,"blockUI",void 0);let nf=(()=>{class e{constructor(e,t,a){this.api=e,this.tr=t,this.toastr=a,this.profiles=[],this.multiplier=[],this.master_multiplier=100}ngOnInit(){this.load()}load(){this.api.get("bandwidthController").subscribe(e=>{200===e.status&&(this.profiles=e.data),this.profiles.map(e=>{this.multiplier[e.id]=e.bandwidth_multiplier})})}changeAll(){this.profiles.map(e=>{this.multiplier[e.id]=this.master_multiplier})}reset(){this.profiles.map(e=>{this.multiplier[e.id]=100}),this.master_multiplier=100}save(){let e=[];this.profiles.map(t=>{e.push({profile_id:t.id,multiplier:this.multiplier[t.id]})}),this.api.post("bandwidthController",{multipliers:e}).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M),n.Y36(g._W))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-bandwidth-controller"]],decls:27,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"toolbar"],[1,"btn","btn-secondary",3,"click"],[1,"fa","fa-sync"],[1,"btn-group"],[1,"btn","btn-primary","btn-100px",3,"click"],[1,"btn","btn-secondary","btn-100px",3,"click"],["width","20%",1,"td-profile-name"],[1,"td-speed-slider"],[3,"min","max","ngModel","ngModelChange"],["width","30%",1,"td-profile-speed"],[4,"ngFor","ngForOf"],["stlye","width: 100%",1,"text-center"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Bandwidth Controller "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"button",7),n.NdJ("click",function(){return t.load()}),n._UZ(9,"i",8),n.qZA(),n.TgZ(10,"div",9),n.TgZ(11,"button",10),n.NdJ("click",function(){return t.save()}),n._uU(12,"Save"),n.qZA(),n.TgZ(13,"button",11),n.NdJ("click",function(){return t.reset()}),n._uU(14,"Reset"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(15,"div",4),n.TgZ(16,"div",5),n.TgZ(17,"table"),n.TgZ(18,"tr"),n.TgZ(19,"td",12),n._uU(20,"All Profiles"),n.qZA(),n.TgZ(21,"td",13),n.TgZ(22,"p-slider",14),n.NdJ("ngModelChange",function(e){return t.master_multiplier=e})("ngModelChange",function(){return t.changeAll()}),n.qZA(),n.qZA(),n._UZ(23,"td",15),n.qZA(),n.qZA(),n._UZ(24,"br"),n.TgZ(25,"table"),n.YNc(26,af,11,11,"tr",16),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(22),n.Q6J("min",25)("max",200)("ngModel",t.master_multiplier),n.xp6(4),n.Q6J("ngForOf",t.profiles))},directives:[lu.iR,Z.JJ,Z.On,J.sg],pipes:[Dt],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e9e9e9;padding:15px}.td-profile-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:lighter;text-align:right}.td-profile-speed[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:lighter;text-align:left}.toolbar[_ngcontent-%COMP%]{width:100%;padding:6px;background:#eaeaea}.toolbar[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{float:right}.toolbar[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]}),e})();var of=a(4207);let sf=(()=>{class e{constructor(e,t,a,i){this.api=e,this.tr=t,this.config=a,this.auth=i,this.managers_list=[],this.filter={manager_id:null,from_date:null,to_date:null},this.stats={qty:null,val:null},this.currency=this.config.siteConfig.site_currency}ngOnInit(){this.loadResources(),this.filter.manager_id=this.auth.client.id}loadResources(){this.api.get("index/manager").subscribe(e=>{this.managers_list=[],this.managers_list.unshift({value:-1,label:this.tr.translate("global_user_control_panel")});for(let t of e.data)this.managers_list.push({value:t.id,label:t.username})})}load(){let e={manager_id:this.filter.manager_id},t=null,a=null;this.filter.from_date&&(t=this.filter.from_date.getFullYear()+"-"+parseInt(this.filter.from_date.getMonth()+1)+"-"+this.filter.from_date.getDate()),this.filter.to_date&&(a=this.filter.to_date.getFullYear()+"-"+parseInt(this.filter.to_date.getMonth()+1)+"-"+this.filter.to_date.getDate()),e.from_date=t,e.to_date=a,this.api.post("cardsReport/usage",e).subscribe(e=>{200===e.status&&(this.stats=e.data.stats,this._initChart(e.data.distribution))})}_initChart(e){let t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Cards Usage By Value"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Qty",colorByPoint:!0}]},a=0;const i=[];for(;a<e.length&&a<11;)i.push({name:e[a].value,y:e[a].qty}),a++;t.series[0].data=i,D.chart("chart_container",t)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M),n.Y36(l),n.Y36(_))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cards-usage-report"]],decls:34,vars:20,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange","onChange"],[1,"ui-g","ui-fluid"],["showButtonBar","true","showIcon","true","placeholder","From Date","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"inputId","name","yearNavigator","ngModel","maxDate","onSelect","ngModelChange"],["showButtonBar","true","showIcon","true","placeholder","To Date","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"inputId","name","yearNavigator","ngModel","minDate","onSelect","ngModelChange"],["label","",3,"icon","onClick"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-sm-12","col-md-7"],["id","chart_container"],[1,"col-sm-12","col-md-5"],[1,"stats-table"],[1,"td-label"],[1,"td-value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"p-dropdown",4),n.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(5,"div",5),n.TgZ(6,"div",3),n.TgZ(7,"p-calendar",6),n.NdJ("onSelect",function(){return t.load()})("ngModelChange",function(e){return t.filter.from_date=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(8,"div",5),n.TgZ(9,"div",3),n.TgZ(10,"p-calendar",7),n.NdJ("onSelect",function(){return t.load()})("ngModelChange",function(e){return t.filter.to_date=e}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(11,"div",5),n.TgZ(12,"div",3),n.TgZ(13,"p-button",8),n.NdJ("onClick",function(){return t.load()}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(14,"br"),n.TgZ(15,"div",9),n.TgZ(16,"div",10),n.TgZ(17,"div",11),n.TgZ(18,"div",12),n.TgZ(19,"div",13),n._uU(20," Chart is loading... "),n.qZA(),n.qZA(),n.TgZ(21,"div",14),n.TgZ(22,"table",15),n.TgZ(23,"tr"),n.TgZ(24,"td",16),n._uU(25,"Cards Used"),n.qZA(),n.TgZ(26,"td",17),n._uU(27),n.qZA(),n.qZA(),n.TgZ(28,"tr"),n.TgZ(29,"td",16),n._uU(30,"Total Value"),n.qZA(),n.TgZ(31,"td",17),n._uU(32),n.ALo(33,"currency"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id),n.xp6(3),n.Q6J("inputId","a31")("name","from_date")("yearNavigator",!0)("ngModel",t.filter.from_date)("maxDate",t.filter.to_date),n.xp6(3),n.Q6J("inputId","a32")("name","to_date")("yearNavigator",!0)("ngModel",t.filter.to_date)("minDate",t.filter.from_date),n.xp6(3),n.Q6J("icon","fa fa-sync"),n.xp6(14),n.Oqu(t.stats.qty),n.xp6(5),n.Oqu(n.xi3(33,17,t.stats.val,t.currency)))},directives:[F.M2,ma.Lt,Z.JJ,Z.On,Ya.f,of.zx],pipes:[J.H9],styles:[".ui-fluid[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}.stats-table[_ngcontent-%COMP%]{width:100%}.stats-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee8d5;height:50px}.td-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:lighter}.td-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:lighter}"]}),e})();function rf(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n._UZ(2,"br"),n.qZA()),2&e){const e=t.$implicit;n.xp6(1),n.hij(" ",e,"")}}let lf=(()=>{class e{constructor(e){this.api=e,this.log=[]}ngOnInit(){this.poll()}poll(){this.consoleDiv=document.getElementById("console"),this.xhr=this.api.xhr("radius/log"),this.xhr.onprogress=(function(e){let t=this.xhr.responseText.split("\n");this.log=t,this.consoleDiv.scrollTop=this.consoleDiv.scrollHeight}).bind(this),this.xhr.onload=(function(e){console.log("finished")}).bind(this),this.xhr.send()}ngOnDestroy(){console.log("aborting xhr"),this.xhr.abort()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-radius-log"]],decls:8,vars:1,consts:[[1,"card"],[1,"card-header","card-default"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","console",1,"console"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._uU(2," FreeRADIUS Log "),n.qZA(),n.TgZ(3,"div",2),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,rf,3,1,"span",6),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngForOf",t.log))},directives:[J.sg],styles:['.console[_ngcontent-%COMP%]{width:100%;height:75rem;background:#464646;color:#eee8d5;font-family:"Courier New","Monospace";font-size:14px;overflow-y:auto;padding:10px}']}),e})();const cf=["myForm"];function df(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"dynamic-form",7,8),n.NdJ("submit",function(t){return n.CHM(e),n.oxw().save(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}let uf=(()=>{class e{constructor(e,t,a,i){this.api=e,this.formsLoader=t,this.toastr=a,this.tr=i,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("settings_telegram"),this.form_config.fields=this.formFields,this.load()}load(){this.api.get("settings/telegram_").subscribe(e=>{200===e.status&&this.myForm.setFormValue(e.data)})}save(e){this.api.post("settings/telegram",e.value).subscribe(e=>{200===e.status&&this.toastr.success(this.tr.translate(e.message))})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(yi),n.Y36(g._W),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-telegram-settings"]],viewQuery:function(e,t){if(1&e&&n.Gf(cf,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fab","fa-telegram-plane"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3," Telegram Settings "),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,df,2,2,"dynamic-form",6),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(7),n.Q6J("ngIf",t.form_config.fields.length>0))},directives:[J.O5,vi],styles:[""]}),e})();function pf(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",3),n._UZ(2,"i",4),n._UZ(3,"br"),n._uU(4," Waiting for Kushok "),n.qZA(),n.qZA())}function gf(e,t){if(1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",5),n._UZ(2,"i",6),n._UZ(3,"br"),n._uU(4," Your payment was successful. "),n.qZA(),n._UZ(5,"br"),n.TgZ(6,"p",7),n._uU(7," Deposit amount is "),n.TgZ(8,"b"),n._uU(9),n.qZA(),n._UZ(10,"br"),n._UZ(11,"br"),n._uU(12," Thank you for using Kushok. "),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(9),n.AsE("",e.transaction_data.currency," ",e.transaction_data.amount,"")}}function ff(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",8),n._UZ(2,"i",9),n._UZ(3,"br"),n._uU(4," Payment Failed ! "),n.qZA(),n.qZA())}let hf=(()=>{class e{constructor(e,t){this.route=e,this.api=t,this.payment_status="pending",this.transaction_data={}}ngOnInit(){this.route.params.subscribe(e=>{e.trans_id&&this.api.get("paymentGatewayTransaction/"+e.trans_id).subscribe(e=>{200===e.status?"success"===e.data.status&&(this.payment_status="success",this.transaction_data=e.data):this.payment_status="failure"})})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.gz),n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-kushok-result"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"payment-success"],[1,"fa","fa-3x","fa-check-circle"],[1,"text-center"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,pf,5,0,"div",2),n.YNc(3,gf,13,2,"div",2),n.YNc(4,ff,5,0,"div",2),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngIf","pending"===t.payment_status),n.xp6(1),n.Q6J("ngIf","success"===t.payment_status),n.xp6(1),n.Q6J("ngIf","failure"===t.payment_status))},directives:[J.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e})();const mf=["notifications_model_view"];function _f(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filter_fields)("advancedFilterOptions",e.filter_options)}}class bf{constructor(e,t,a,i,n){this.api=e,this.swal=t,this.toastr=a,this.tr=i,this.router=n,this.columns=[{dataKey:"threshold",label:"Threshold",class:"href",dataResolver:function(e){return"threshold_"+e+"%"}},{dataKey:"ProfileName",parentKey:"profile_details",label:"Profile",class:"href",sortBy:"profile_id"},{dataKey:"check_counter",label:"Counter"},{dataKey:"sms_enabled",label:"SMS",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"telegram_enabled",label:"Telegram",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"email_enabled",label:"Email",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"webhook_enabled",label:"Webhook",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.actions=[{name:"create",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus"},{name:"copy",label:this.tr.translate("global_actions_copy"),icon:"fa fa-copy",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_managers_sysadmin",requiresRow:!0}],this.filter_options=[],this.filter_fields=[{key:"profile_id",label:"Profile",type:"select2",options:[],layout:"vertical",cols:12,value:-1}]}ngOnInit(){this.modelViewConfig={title:"Profile Notifications",icon:"",columns:this.columns,dataUrl:"index/ProfileNotification",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"ProfileNotification",hasAdvancedFilter:!0,showRowsCount:!0},this.loadResources()}loadResources(){this.api.get("list/profile/0").subscribe(e=>{const t=[];t.push({value:-1,label:"All"}),200===e.status&&(e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.filter_options.profile_id=t)})}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"create":this.router.navigate(["profiles/notification"]);break;case"edit":this.router.navigate(["profiles/notification",t]);break;case"delete":this.destroy(t);break;case"copy":this.copy()}}onCellClicked(e){"threshold"===e.column&&this.router.navigate(["profiles/notification",e.row.id]),"ProfileName"===e.column&&this.router.navigate(["profile",e.row.profile_id])}destroy(e){this.swal.confirm({title:"Delete Notification",type:"warning",text:"Delete Selected Notification ?",confirmButtonText:"Yes"}).subscribe(t=>{this.api.delete("ProfileNotification/"+e).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})})}copy(){let e=null;this.modelView.currentRow&&(e=this.modelView.currentRow.id),this.swal.prompt("New Threshold").subscribe(t=>{this.api.post("ProfileNotification/copy",{notification_id:e,new_threshold:t}).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})})}}bf.\u0275fac=function(e){return new(e||bf)(n.Y36(h),n.Y36(Ge),n.Y36(g._W),n.Y36(M),n.Y36(p.F0))},bf.\u0275cmp=n.Xpm({type:bf,selectors:[["app-profile-notifications"]],viewQuery:function(e,t){if(1&e&&n.Gf(mf,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","notifications_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["name","notifications_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["notifications_model_view",""]],template:function(e,t){1&e&&n.YNc(0,_f,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],bf.prototype,"blockUI",void 0);const Zf=["myForm"];let vf=(()=>{class e{constructor(e,t,a){this.location=e,this.formsLoader=t,this.api=a,this.options=[]}ngOnInit(){this.formFields=this.formsLoader.getForm("traffic_usage_notifications"),this.loadResources()}loadResources(){const e=[],t=[];this.api.get("list/profile/0").subscribe(t=>{200===t.status&&(t.data.map(t=>{e.push({label:t.name,value:t.id})}),this.options.profile_id=e)}),this.api.get("emailTemplate").subscribe(e=>{e.data.map(e=>{t.push({value:e.id,label:e.name})}),this.options.email_template_id=t})}onSubmit(e){this.location.back()}onFormChanged(e){1==e.sms_enabled&&this.myForm.showField("sms_message"),0==e.sms_enabled&&this.myForm.hideField("sms_message"),1==e.telegram_enabled&&this.myForm.showField("telegram_message"),0==e.telegram_enabled&&this.myForm.hideField("telegram_message"),1==e.email_enabled&&this.myForm.showField("email_template_id"),0==e.email_enabled&&this.myForm.hideField("email_template_id"),1==e.webhook_enabled&&this.myForm.showField("webhook_url"),0==e.webhook_enabled&&this.myForm.hideField("webhook_url")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(J.Ye),n.Y36(yi),n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-usage-notification-form"]],viewQuery:function(e,t){if(1&e&&n.Gf(Zf,5),2&e){let e;n.iGM(e=n.CRH())&&(t.myForm=e.first)}},decls:2,vars:4,consts:[["name","myForm",3,"fields","options","title","icon","resourceRoute","submit","formChanged","cancel"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0,1),n.NdJ("submit",function(e){return t.onSubmit(e)})("formChanged",function(e){return t.onFormChanged(e)})("cancel",function(){return t.location.back()}),n.qZA()),2&e&&n.Q6J("fields",t.formFields)("options",t.options)("title","Usage Notification Form")("resourceRoute","ProfileNotification")},directives:[Ci],styles:[""]}),e})();const wf=["model_view"];function yf(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",1,2),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filter_fields)("advancedFilterOptions",e.filter_options)}}class xf{constructor(e,t,a,i,n){this.api=e,this.swal=t,this.toastr=a,this.tr=i,this.router=n,this.columns=[{dataKey:"name",label:"Addon Name",class:"href"},{dataKey:"expiration_amount",label:"Expiration",dataResolver:function(e,t){let a=e.toString(),i="Day(s)";return 1==t.expiration_unit&&(i="Month(s)"),2==t.expiration_unit&&(i="Hour(s)"),3==t.expiration_unit&&(i="Minute(s)"),a+" "+i}},{dataKey:"set_address_list",label:"Set Address List",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"set_pool_name",label:"Set Pool Name",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"call_url",label:"Call Url",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.actions=[{name:"create",label:"New",icon:"fa fa-plus"},{name:"edit",label:"Edit",icon:"fa fa-edit",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_managers_sysadmin",requiresRow:!0}],this.filter_options=[],this.filter_fields=[{key:"profile_id",label:"Profile",type:"select2",options:[],layout:"vertical",cols:12,value:-1}]}ngOnInit(){this.modelViewConfig={title:"Addons",icon:"",columns:this.columns,dataUrl:"index/Addon",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"Addon",hasAdvancedFilter:!0,showRowsCount:!0}}onAction(e){let t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"create":this.router.navigate(["profiles/addon"]);break;case"edit":this.router.navigate(["profiles/addon",t]);break;case"delete":this.destroy(t)}}onCellClicked(e){"name"===e.column&&this.router.navigate(["profiles/addon",e.row.id])}destroy(e){this.swal.confirm({title:"Delete Addon",type:"warning",text:"deleted the selected addon ?",confirmButtonText:"Yes"}).subscribe(t=>{this.api.delete("Addon/"+e).subscribe(e=>{200===e.status&&(this.toastr.success(this.tr.translate(e.message)),this.modelView.reload())})})}}xf.\u0275fac=function(e){return new(e||xf)(n.Y36(h),n.Y36(Ge),n.Y36(g._W),n.Y36(M),n.Y36(p.F0))},xf.\u0275cmp=n.Xpm({type:xf,selectors:[["app-addons"]],viewQuery:function(e,t){if(1&e&&n.Gf(wf,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:1,vars:1,consts:[["name","model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["name","model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["model_view",""]],template:function(e,t){1&e&&n.YNc(0,yf,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],xf.prototype,"blockUI",void 0);const Af=["myForm"];let qf=(()=>{class e{constructor(e,t,a,i,n){this.api=e,this.toastr=t,this.location=a,this.tr=i,this.formsLoader=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options=[]}ngOnInit(){this.formFields=this.formsLoader.getForm("addon_form"),this.form_config.fields=this.formFields}onFormChange(e){1==e.set_address_list&&this.formView.showField("address_list"),0==e.set_address_list&&this.formView.hideField("address_list"),1==e.set_pool_name&&this.formView.showField("pool_name"),0==e.set_pool_name&&this.formView.hideField("pool_name"),1==e.call_url&&this.formView.showField("url"),0==e.call_url&&this.formView.hideField("url")}onSubmit(e){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(g._W),n.Y36(J.Ye),n.Y36(M),n.Y36(yi))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-addon-form"]],viewQuery:function(e,t){if(1&e&&n.Gf(Af,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:2,vars:4,consts:[["name","myForm",3,"fields","options","title","icon","resourceRoute","submit","formChanged","cancel"],["myForm",""]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0,1),n.NdJ("submit",function(e){return t.onSubmit(e)})("formChanged",function(e){return t.onFormChange(e)})("cancel",function(){return t.location.back()}),n.qZA()),2&e&&n.Q6J("fields",t.formFields)("options",t.options)("title","Addon Form")("resourceRoute","Addon")},directives:[Ci],styles:[""]}),e})();const Tf=["dataForm"];function Cf(e,t){if(1&e&&n._UZ(0,"dynamic-form",17,18),2&e){const e=n.oxw();n.Q6J("formConfig",e.form_config)("options",e.options)}}function kf(e,t){if(1&e&&(n.TgZ(0,"option",19),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.id),n.xp6(1),n.Oqu(e.name)}}class Uf{constructor(e,t,a,i,n,o,s,r,l,c,d){this.tr=e,this.formLoader=t,this.route=a,this.config=i,this.toastr=n,this.ch=o,this.router=s,this.confirmationService=r,this.location=l,this.auth=c,this.api=d,this.form_config={layout:"horizontal",fields:this.formLoader.getForm("user_addon_form"),helpBlock:"hidden",showDiscardButton:!1,showSubmitButton:!1},this.options=[],this.user_id=null,this.user_data={},this.addons_list=[],this.selected_addon_id=-1,this.selected_addon={},this.transaction_id=null,this.activation_data={},this.addon_price=0}ngOnInit(){this.route.params.subscribe(e=>{e.id&&(this.user_id=e.id,this.getActivationData(this.user_id))}),this.api.get("Addon").subscribe(e=>{200===e.status&&(this.addons_list=e.data)})}onAddonSelected(){this.addons_list.map(e=>{e.id==this.selected_addon_id&&(this.selected_addon=e,this.addon_price=0==this.selected_addon.pricing_type?this.selected_addon.price*this.activation_data.n_required_amount:this.selected_addon.price)})}getActivationData(e){this.api.get("user/activationData/"+e).subscribe(e=>{this.activation_data=e.data,this.formView.setFormValue(this.activation_data)})}purchase(){this.confirmationService.confirm({message:this.tr.translate("user_addon_form_confirm"),accept:()=>{this.api.post("user/addon",{user_id:this.user_id,addon_id:this.selected_addon_id}).subscribe(e=>{200===e.status?(this.toastr.success(this.tr.translate(e.message)),this.location.back()):this.toastr.warning(this.tr.translate(e.message))})}})}}function Mf(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"div",6),n.TgZ(2,"h5",7),n._uU(3,"Click the button bellow to enable Two Factor Authentication"),n.qZA(),n._UZ(4,"br"),n.TgZ(5,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw().enable2FA()}),n._UZ(6,"i",9),n._uU(7," Enable 2FA"),n.qZA(),n.qZA(),n.qZA()}}function Ff(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",10),n.TgZ(1,"div",6),n.TgZ(2,"h4"),n._uU(3,"Please enter the code from your Authenticator app"),n.qZA(),n.TgZ(4,"p",11),n.TgZ(5,"input",12,13),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().otp=t}),n.qZA(),n.qZA(),n.TgZ(7,"button",14),n.NdJ("click",function(){return n.CHM(e),n.oxw().confirm2FA()}),n._uU(8,"Verify Code"),n.qZA(),n._UZ(9,"br"),n._UZ(10,"hr"),n._UZ(11,"img",15),n._UZ(12,"br"),n._UZ(13,"br"),n.TgZ(14,"h5"),n._uU(15,"Please scan the above QR using "),n.TgZ(16,"b"),n._uU(17,"Google Authenticator App"),n.qZA(),n.qZA(),n._UZ(18,"br"),n.TgZ(19,"div",16),n.TgZ(20,"div",17),n.TgZ(21,"a",18),n._UZ(22,"img",19),n.qZA(),n.qZA(),n.TgZ(23,"div",17),n.TgZ(24,"a",20),n._UZ(25,"img",21),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(5),n.Q6J("ngModel",e.otp),n.xp6(6),n.MGl("src","data:image/png;base64,",e.qr_image,"",n.LSH)}}function Jf(e,t){if(1&e&&(n.TgZ(0,"div",10),n.TgZ(1,"div",6),n.TgZ(2,"p"),n._UZ(3,"i",22),n.qZA(),n._UZ(4,"br"),n.TgZ(5,"h4"),n._uU(6,"Two Factor Authentication is now enabled for your account"),n.qZA(),n._UZ(7,"br"),n._UZ(8,"img",15),n._UZ(9,"br"),n._UZ(10,"br"),n.TgZ(11,"h5"),n._uU(12,"Please scan the above QR using "),n.TgZ(13,"b"),n._uU(14,"Google Authenticator App"),n.qZA(),n.qZA(),n._UZ(15,"br"),n.TgZ(16,"div",16),n.TgZ(17,"div",17),n.TgZ(18,"a",18),n._UZ(19,"img",19),n.qZA(),n.qZA(),n.TgZ(20,"div",17),n.TgZ(21,"a",20),n._UZ(22,"img",21),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(8),n.MGl("src","data:image/png;base64,",e.qr_image,"",n.LSH)}}function Of(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",23),n.TgZ(1,"div",6),n.TgZ(2,"h4",24),n._uU(3,"Two Factor Authentication is already enabled for your account"),n.qZA(),n.TgZ(4,"div",25),n.NdJ("click",function(){return n.CHM(e),n.oxw().disable2FA()}),n.TgZ(5,"h5",26),n._uU(6,"Disable 2FA?"),n.qZA(),n.qZA(),n.TgZ(7,"h5",24),n._uU(8,"Use "),n.TgZ(9,"b"),n._uU(10,"Google Authenticator App"),n.qZA(),n._uU(11," to login into your account"),n.qZA(),n._UZ(12,"br"),n.TgZ(13,"div",16),n.TgZ(14,"div",27),n.TgZ(15,"a",18),n._UZ(16,"img",28),n.qZA(),n.qZA(),n.TgZ(17,"div",27),n.TgZ(18,"a",20),n._UZ(19,"img",29),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}}Uf.\u0275fac=function(e){return new(e||Uf)(n.Y36(M),n.Y36(yi),n.Y36(p.gz),n.Y36(l),n.Y36(g._W),n.Y36(m),n.Y36(p.F0),n.Y36(xi.YP),n.Y36(J.Ye),n.Y36(_),n.Y36(h))},Uf.\u0275cmp=n.Xpm({type:Uf,selectors:[["app-purchase-addon"]],viewQuery:function(e,t){if(1&e&&n.Gf(Tf,5),2&e){let e;n.iGM(e=n.CRH())&&(t.formView=e.first)}},decls:34,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","dataForm",3,"formConfig","options",4,"ngIf"],[1,"form-group","row"],[1,"col-form-label","text-right"],[1,"col"],["name","selected_addon_id",1,"form-control",3,"ngModel","change","ngModelChange"],["disabled","","value","-1"],[3,"value",4,"ngFor","ngForOf"],[1,"col","form-control-plaintext"],[1,"col","form-control-plaintext",3,"hidden"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"disabled","click"],["name","dataForm",3,"formConfig","options"],["dataForm",""],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n._UZ(2,"i",2),n._uU(3),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.YNc(7,Cf,2,2,"dynamic-form",6),n.qZA(),n.TgZ(8,"div",5),n.TgZ(9,"div",7),n._UZ(10,"label",8),n.TgZ(11,"div",9),n.TgZ(12,"select",10),n.NdJ("change",function(){return t.onAddonSelected()})("ngModelChange",function(e){return t.selected_addon_id=e}),n.TgZ(13,"option",11),n._uU(14),n.qZA(),n.YNc(15,kf,2,2,"option",12),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",7),n._UZ(17,"label",8),n.TgZ(18,"div",13),n._uU(19),n.ALo(20,"currency"),n.qZA(),n.qZA(),n.TgZ(21,"div",7),n._UZ(22,"label",8),n.TgZ(23,"div",13),n._uU(24),n.qZA(),n.qZA(),n.TgZ(25,"div",7),n._UZ(26,"label",8),n.TgZ(27,"div",14),n._uU(28),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(29,"hr"),n.TgZ(30,"div",15),n.TgZ(31,"button",16),n.NdJ("click",function(){return t.purchase()}),n._uU(32),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(33,"p-confirmDialog")),2&e&&(n.xp6(3),n.hij(" ",t.tr.translate("user_addon_form_title")," "),n.xp6(4),n.Q6J("ngIf",t.form_config.fields.length>0),n.xp6(5),n.Q6J("ngModel",t.selected_addon_id),n.xp6(2),n.Oqu(t.tr.translate("user_addon_form_select_addon")),n.xp6(1),n.Q6J("ngForOf",t.addons_list),n.xp6(4),n.hij(" ",n.xi3(20,13,t.addon_price,t.config.siteConfig.site_currency+" ")," "),n.xp6(5),n.hij(" ",t.selected_addon.description," "),n.xp6(3),n.Q6J("hidden",!t.selected_addon.expiration_amount||t.selected_addon.expiration_amount<1),n.xp6(1),n.lnq(" ",t.tr.translate("user_addon_form_valid_for")," ",t.selected_addon.expiration_amount," ",t.tr.translate(0==t.selected_addon.expiration_unit?"global_days":"global_months")," "),n.xp6(3),n.Q6J("disabled",t.selected_addon_id<=0),n.xp6(1),n.Oqu(t.tr.translate("users_action_addon")))},directives:[J.O5,Z.EJ,Z.JJ,Z.On,Z.YN,Z.Kr,J.sg,T.Q,vi],pipes:[J.H9],styles:[""]}),(0,c.gn)([(0,u.bH)()],Uf.prototype,"blockUI",void 0);class Nf{constructor(e,t,a,i,n,o){this.auth=e,this.toastr=t,this.api=a,this.tr=i,this.confirmationService=n,this.router=o,this.setup_finished=!1,this.setup_already_enabled=!1,this.setup_waiting_confirmation=!1,this.qr_image=null,this.otp=""}ngOnInit(){1===this.auth.client.requires_2fa&&(this.setup_already_enabled=!0)}enable2FA(){this.blockUI.start(),this.api.post("manager/enable2FA",{confirm:!1}).subscribe(e=>{this.blockUI.stop(),200===e.status&&(this.setup_waiting_confirmation=!0,this.qr_image=e.data)})}disable2FA(){this.confirmationService.confirm({header:"Disable 2FA",message:"Disable two factor authentication ?",accept:()=>{this.api.post("manager/disable2FA",[]).subscribe(e=>{200===e.status&&(this.auth.client.requires_2fa=0,this.toastr.success(this.tr.translate(e.message)),this.router.navigate(["manager/profile"]))})}})}confirm2FA(){this.blockUI.start(),this.api.post("manager/enable2FA",{confirm:!0,otp:this.otp}).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.auth.client.requires_2fa=1,this.setup_waiting_confirmation=!1,this.setup_finished=!0):this.toastr.warning("Incorrect code, please try again")})}}function If(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}Nf.\u0275fac=function(e){return new(e||Nf)(n.Y36(_),n.Y36(g._W),n.Y36(h),n.Y36(M),n.Y36(xi.YP),n.Y36(p.F0))},Nf.\u0275cmp=n.Xpm({type:Nf,selectors:[["app-two-factor-setup"]],decls:7,vars:4,consts:[[2,"direction","ltr","text-align","center"],["src","assets/img/2fa-icon.png"],["class","v-container","style","height: 250px;",4,"ngIf"],["class","v-container","style","height: 500px;",4,"ngIf"],["class","v-container","style","height:250px !important;",4,"ngIf"],[1,"v-container",2,"height","250px"],[1,"vertical-center"],[1,"font-weight-lighter"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-shield-alt"],[1,"v-container",2,"height","500px"],[1,"text-center"],["type","text","name","otp","placeholder","6-digit code","maxlength","6",1,"form-control-lg",2,"letter-spacing","0.25em","text-align","center",3,"ngModel","ngModelChange"],["username","ngModel"],[1,"btn","btn-lg","btn-primary",3,"click"],["height","200",3,"src"],[1,"row"],[1,"col","col-md-6","text-center"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en&gl=US","target","_blank"],["src","assets/img/GooglePlay.png","width","200",1,"float-right"],["href","https://apps.apple.com/us/app/google-authenticator/id388497605","target","_blank"],["src","assets/img/iTunes.png","width","200",1,"float-left"],[1,"fa","fa-check-circle","fa-4x"],[1,"v-container",2,"height","250px !important"],[1,"font-weight-light"],[3,"click"],[1,"font-weight-bold","text-primary",2,"cursor","pointer","text-decoration","underline"],[1,"col-sm-12","col-md-6","text-center"],["src","assets/img/GooglePlay.png","width","200"],["src","assets/img/iTunes.png","width","200"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"img",1),n.YNc(2,Mf,8,0,"div",2),n.YNc(3,Ff,26,2,"div",3),n.YNc(4,Jf,23,1,"div",3),n.YNc(5,Of,20,0,"div",4),n.qZA(),n._UZ(6,"p-confirmDialog")),2&e&&(n.xp6(2),n.Q6J("ngIf",0===t.auth.client.requires_2fa&&!t.setup_waiting_confirmation),n.xp6(1),n.Q6J("ngIf",!0===t.setup_waiting_confirmation),n.xp6(1),n.Q6J("ngIf",!0===t.setup_finished),n.xp6(1),n.Q6J("ngIf",t.setup_already_enabled))},directives:[J.O5,T.Q,Z.Fj,Z.nD,Z.JJ,Z.On],styles:[".vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;transform:translateY(-50%);text-align:center;width:100%}.v-container[_ngcontent-%COMP%]{width:100%;position:relative;height:100%}"]}),(0,c.gn)([(0,u.bH)()],Nf.prototype,"blockUI",void 0);let Yf=(()=>{class e{constructor(e,t,a,i){this.api=e,this.auth=t,this.tr=a,this.route=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"cr",label:this.tr.translate("report_journal_cr")},{dataKey:"dr",label:this.tr.translate("report_journal_dr")},{dataKey:"amount",label:this.tr.translate("report_journal_amount")},{dataKey:"balance",label:this.tr.translate("report_journal_balance")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null,this.modelViewConfig={dataUrl:"index/ManagerDebtsJournal",primaryKey:"id",title:this.tr.translate("report_manager_debts_journal_title"),icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:this.auth.has("prm_journal_export"),exportPagination:!0}}ngOnInit(){this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{let t=[];for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.manager_id=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(_),n.Y36(M),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-manager-debts-journal"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["journal_model_view",""]],template:function(e,t){1&e&&n.YNc(0,If,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})();function Qf(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",3,4),n.NdJ("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterOptions",e.filterOptions)("advancedFilterFields",e.filterFields)}}const Sf=function(){return{width:"50vw"}};let Pf=(()=>{class e{constructor(e,t){this.tr=e,this.api=t,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"gateway_name",parentKey:"gateway_details",label:this.tr.translate("payment_gateways_transactions_table_gateway"),sortBy:"gateway_id"},{dataKey:"manager_name",parentKey:"manager_details",label:this.tr.translate("payment_gateways_transactions_table_manager"),sortBy:"manager_id"},{dataKey:"user_name",parentKey:"user_details",label:this.tr.translate("payment_gateways_transactions_table_user"),sortBy:"user_id"},{dataKey:"amount",label:this.tr.translate("payment_gateways_transactions_table_amount")},{dataKey:"currency",label:this.tr.translate("payment_gateways_transactions_table_currency")},{dataKey:"local_reference",label:"Local Reference",hidden:!0},{dataKey:"remote_reference",label:"Remote Reference",hidden:!0},{dataKey:"status",label:this.tr.translate("payment_gateways_transactions_table_status"),classFn:function(e){return"pending"===e.status?"text-warning":"success"===e.status?"text-success":void 0}}],this.modelViewConfig=null,this.dialog_visible=!1,this.transaction_details="",this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"gateway_id",label:this.tr.translate("menu_settings_payment_gateways"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"status",label:this.tr.translate("payment_gateways_transactions_table_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:"pending",label:"Pending"},{value:"success",label:"Success"}]}],this.filterOptions={manager_id:[],gateway_id:[]}}ngOnInit(){this.modelViewConfig={title:this.tr.translate("report_payment_gateway_transactions_title"),icon:"",columns:this.columns,dataUrl:"index/PaymentGatewayTransaction",page:1,showSearchBox:!0,allowExport:!1,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"PaymentGatewayTransaction",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}onCellClicked(e){"remote_reference"===e.column&&this.showRemoteReference(e.row.id)}showRemoteReference(e){this.api.get("paymentGatewayTransactionResponse/"+e.toString()).subscribe(e=>{200===e.status&&(this.transaction_details=e.data,this.dialog_visible=!0)})}loadResources(){this.api.get("index/manager").subscribe(e=>{const t=[];for(const a of e.data)t.push({value:a.id,label:a.username});t.unshift({value:-1,label:this.tr.translate("global_filter_all_managers")}),this.filterOptions.manager_id=t}),this.api.get("paymentgateways/list").subscribe(e=>{if(200===e.status){const t=[];for(const a of e.data)t.push({value:a.id,label:a.name});t.unshift({value:-1,label:this.tr.translate("global_all")}),this.filterOptions.gateway_id=t}})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M),n.Y36(h))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-payment-gateway-transactions-report"]],decls:4,vars:7,consts:[["name","gateway_transactions_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onCellClicked",4,"ngIf"],["header","Transaction Details",3,"visible","visibleChange"],[2,"padding","1px","width","100%","font-family","Courier New",3,"rows"],["name","gateway_transactions_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onCellClicked"],["gateway_transactions_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,Qf,2,3,"model-table-view",0),n.TgZ(1,"p-dialog",1),n.NdJ("visibleChange",function(e){return t.dialog_visible=e}),n.TgZ(2,"textarea",2),n._uU(3),n.qZA(),n.qZA()),2&e&&(n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Akn(n.DdM(6,Sf)),n.Q6J("visible",t.dialog_visible),n.xp6(1),n.Q6J("rows",5),n.xp6(1),n.hij("    ",t.transaction_details,"\n  "))},directives:[J.O5,ki.V,wt],styles:[""]}),e})();function Df(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",3),n._UZ(2,"i",4),n._UZ(3,"br"),n._uU(4," Waiting for Switch "),n.qZA(),n.qZA())}function Hf(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",3),n._UZ(2,"i",5),n._UZ(3,"br"),n._uU(4," Your request is being processed. "),n.qZA(),n.qZA())}function Rf(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",6),n._UZ(2,"i",5),n._UZ(3,"br"),n._uU(4," Your payment was successful. "),n.qZA(),n.qZA())}function Vf(e,t){1&e&&(n.TgZ(0,"div"),n.TgZ(1,"p",7),n._UZ(2,"i",8),n._UZ(3,"br"),n._uU(4," Payment Failed ! "),n.qZA(),n.qZA())}let Lf=(()=>{class e{constructor(e,t){this.api=e,this.route=t,this.paymentStatus="pending"}ngOnInit(){const e=this.route.snapshot.queryParamMap.get("resultIndicator"),t=this.route.snapshot.queryParamMap.get("sessionVersion");this.processToken(e,t)}ngOnChanges(){}processToken(e,t){this.api.post("paymentgateway/process/switch",{gateway:"switch",indicator:e,session_id:t}).subscribe(e=>{this.paymentStatus=200===e.status?"success":"failure"})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-switch-gateway"]],features:[n.TTD],decls:6,vars:4,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"fa","fa-3x","fa-check-circle"],[1,"payment-success"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.YNc(2,Df,5,0,"div",2),n.YNc(3,Hf,5,0,"div",2),n.YNc(4,Rf,5,0,"div",2),n.YNc(5,Vf,5,0,"div",2),n.qZA(),n.qZA()),2&e&&(n.xp6(2),n.Q6J("ngIf","pending"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","waiting_webhook"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","success"==t.paymentStatus),n.xp6(1),n.Q6J("ngIf","failure"==t.paymentStatus))},directives:[J.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e})();const Ef=["groups_model_view"];function Kf(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",4,5),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)})("onCellClicked",function(t){return n.CHM(e),n.oxw().onCellClicked(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)}}const Bf=function(){return{width:"35vw"}};class zf{constructor(e,t,a,i,n){this.api=e,this.router=t,this.confirmationService=a,this.toastr=i,this.tr=n,this.columns=[{dataKey:"id",label:"#",hidden:!0},{dataKey:"name",label:this.tr.translate("global_name"),class:"href"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"users_count",label:this.tr.translate("group_table_users"),sortBy:"none"},{dataKey:"managers_count",label:this.tr.translate("group_table_managers"),sortBy:"none"}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_groups_create"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_groups_delete",requiresRow:!0}]}ngOnInit(){this.modelViewConfig={title:this.tr.translate("groups_index_title"),icon:"fas fa-users-class",columns:this.columns,dataUrl:"index/group",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:!1,hasInlineActions:!0,modelName:"group",hasAdvancedFilter:!1,showRowsCount:!0}}onAction(e){switch(e.action){case"new":this.router.navigate(["group"]);break;case"delete":this.destroy(e)}}onCellClicked(e){"name"===e.column&&this.router.navigate(["group",e.row.id])}destroy(e){this.confirmationService.confirm({message:this.tr.translate("global_prompt_delete_selected_item"),header:this.tr.translate("global_confirmation"),icon:"pi pi-exclamation-triangle",accept:()=>{this.blockUI.start(),this.api.delete("group/"+e.row.id).subscribe(e=>{this.blockUI.stop(),this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()})}})}}zf.\u0275fac=function(e){return new(e||zf)(n.Y36(h),n.Y36(p.F0),n.Y36(xi.YP),n.Y36(g._W),n.Y36(M))},zf.\u0275cmp=n.Xpm({type:zf,selectors:[["app-groups-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(Ef,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},decls:5,vars:5,consts:[["role","alert",1,"alert","alert-info","mb-2"],[1,"fa","fa-info-circle"],["name","groups_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","groups_model_view",3,"modelViewConfig","onAction","onCellClicked"],["groups_model_view",""]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"i",1),n._uU(2),n.qZA(),n.YNc(3,Kf,2,1,"model-table-view",2),n._UZ(4,"p-confirmDialog",3)),2&e&&(n.xp6(2),n.hij("\xa0 ",t.tr.translate("group_note"),"\n"),n.xp6(1),n.Q6J("ngIf",t.modelViewConfig),n.xp6(1),n.Akn(n.DdM(4,Bf)))},directives:[J.O5,T.Q,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],zf.prototype,"blockUI",void 0);let jf=(()=>{class e{constructor(e,t,a){this.location=e,this.formsLoader=t,this.tr=a,this.options={}}ngOnInit(){this.formFields=this.formsLoader.getForm("group_form")}onSubmit(e){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(J.Ye),n.Y36(yi),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-group-form"]],decls:1,vars:5,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(n.TgZ(0,"model-form",0),n.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),n.qZA()),2&e&&n.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("group_form_name"))("icon","fas fa-users-class")("resourceRoute","group")},directives:[Ci],styles:[""]}),e})(),Gf=(()=>{class e{constructor(e,t){this.route=e,this.tr=t,this.message="",this.title="",this.type="info"}ngOnInit(){this.message=this.route.snapshot.queryParamMap.get("message"),this.title=this.route.snapshot.queryParamMap.get("title")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(p.gz),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-common-message"]],decls:5,vars:4,consts:[[1,"common-message-container"],[1,"common-message-title",3,"hidden"],[1,"common-message",3,"hidden"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n.TgZ(1,"h1",1),n._uU(2),n.qZA(),n.TgZ(3,"h3",2),n._uU(4),n.qZA(),n.qZA()),2&e&&(n.xp6(1),n.Q6J("hidden",""===t.title),n.xp6(1),n.Oqu(t.tr.translate(t.title)),n.xp6(1),n.Q6J("hidden",""===t.message),n.xp6(1),n.Oqu(t.tr.translate(t.message)))},styles:[".common-message-container[_ngcontent-%COMP%]{text-align:center;height:100%}.common-message-title[_ngcontent-%COMP%]{margin-top:10%}.common-message[_ngcontent-%COMP%]{margin-top:40px}"]}),e})();function Wf(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.AsE("",null==e.records[e.current_page]?null:e.records[e.current_page].days," ",e.tr.translate("user_compensation_target_days"),"")}}function $f(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.hij("",null==e.records[e.current_page]?null:e.records[e.current_page].traffic," MB")}}function Xf(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.AsE("",null==e.records[e.current_page]?null:e.records[e.current_page].hours," ",e.tr.translate("global_hours"),"")}}class eh{constructor(e,t,a,i,n){this.tr=e,this.ref=t,this.api=a,this.toastr=i,this.dialogConfig=n,this.current_page=0,this.admin_notes="",this.records=[]}ngOnInit(){const e={data:this.dialogConfig.data.rows};this.blockUI.start(),this.api.post("compensation/details",e).subscribe(e=>{this.blockUI.stop(),200===e.status?(this.records=e.data,0===this.records.length&&(this.toastr.warning("No Records Found"),this.ref.close())):this.toastr.error(this.tr.translate("rsp_unknown_error"))})}dismiss(){this.ref.close()}submit(){this.api.post("compensation/approve",{records:this.dialogConfig.data.rows,comment:this.admin_notes}).subscribe(e=>{200===e.status&&(this.toastr.success(e.message),this.ref.close())})}pageChanged(e){this.current_page=e.page}}eh.\u0275fac=function(e){return new(e||eh)(n.Y36(M),n.Y36(fa.E7),n.Y36(h),n.Y36(g._W),n.Y36(fa.S))},eh.\u0275cmp=n.Xpm({type:eh,selectors:[["app-user-compensation-approve"]],decls:59,vars:19,consts:[[1,"text-center","text-warning"],[1,"far","fa-3x","fa-exclamation-triangle"],[1,"mt-3","text-secondary",2,"font-size","medium"],[1,"mb-4",3,"hidden"],[3,"rows","totalRecords","pageLinkSize","onPageChange"],[1,"row"],[1,"col","col-md-6"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","expiration"],["type","text","readonly","","id","expiration",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","req_by"],["type","text","readonly","","id","req_by",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","target"],["id","target",1,"mt-1","font-weight-bold"],[4,"ngIf"],[1,"col"],["for","comment1"],["readonly","","placeholder","reason/comment","id","comment1",1,"form-control"],["for","note"],["placeholder","reason/comment","id","note",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"div",0),n._UZ(1,"i",1),n.qZA(),n.TgZ(2,"p",2),n._uU(3," You are about to approve compensations for the select users(s).\n"),n.qZA(),n.TgZ(4,"div",3),n.TgZ(5,"p-paginator",4),n.NdJ("onPageChange",function(e){return t.pageChanged(e)}),n.qZA(),n.qZA(),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"div",7),n.TgZ(9,"label",8),n._uU(10),n.qZA(),n._UZ(11,"input",9),n.TgZ(12,"small",10),n._uU(13,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",6),n.TgZ(15,"div",7),n.TgZ(16,"label",11),n._uU(17),n.qZA(),n._UZ(18,"input",12),n.TgZ(19,"small",10),n._uU(20,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(21,"div",5),n.TgZ(22,"div",6),n.TgZ(23,"div",7),n.TgZ(24,"label",13),n._uU(25),n.qZA(),n._UZ(26,"input",14),n.TgZ(27,"small",10),n._uU(28,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(29,"div",6),n.TgZ(30,"div",7),n.TgZ(31,"label",15),n._uU(32),n.qZA(),n.TgZ(33,"div",16),n.YNc(34,Wf,2,2,"span",17),n.YNc(35,$f,2,1,"span",17),n.YNc(36,Xf,2,2,"span",17),n.qZA(),n.TgZ(37,"small",10),n._uU(38,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(39,"div",5),n.TgZ(40,"div",18),n.TgZ(41,"div",7),n.TgZ(42,"label",19),n._uU(43),n.qZA(),n.TgZ(44,"textarea",20),n._uU(45),n.qZA(),n.TgZ(46,"small",10),n._uU(47,"\xa0"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(48,"div",7),n.TgZ(49,"label",21),n._uU(50,"Notes"),n.qZA(),n.TgZ(51,"textarea",22),n.NdJ("ngModelChange",function(e){return t.admin_notes=e}),n.qZA(),n.TgZ(52,"small",10),n._uU(53,"\xa0"),n.qZA(),n.qZA(),n.TgZ(54,"div",23),n.TgZ(55,"button",24),n.NdJ("click",function(){return t.dismiss()}),n._uU(56),n.qZA(),n.TgZ(57,"button",25),n.NdJ("click",function(){return t.submit()}),n._uU(58),n.qZA(),n.qZA()),2&e&&(n.xp6(4),n.Q6J("hidden",t.records.length<2),n.xp6(1),n.Q6J("rows",1)("totalRecords",t.records.length)("pageLinkSize",1),n.xp6(5),n.Oqu(t.tr.translate("global_username")),n.xp6(1),n.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].user_details?null:t.records[t.current_page].user_details.username),n.xp6(6),n.Oqu(t.tr.translate("global_expiration")),n.xp6(1),n.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].user_details?null:t.records[t.current_page].user_details.expiration),n.xp6(7),n.Oqu(t.tr.translate("user_compensation_requested_by")),n.xp6(1),n.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].manager_details?null:t.records[t.current_page].manager_details.created_by_username),n.xp6(6),n.Oqu(t.tr.translate("user_compensation_target")),n.xp6(2),n.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].days)>0),n.xp6(1),n.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].traffic)>0),n.xp6(1),n.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].hours)>0),n.xp6(7),n.Oqu(t.tr.translate("user_compensation_manager_reason")),n.xp6(2),n.Oqu(null==t.records[t.current_page]?null:t.records[t.current_page].comment),n.xp6(6),n.Q6J("ngModel",t.admin_notes),n.xp6(5),n.Oqu(t.tr.translate("global_button_dismiss")),n.xp6(2),n.Oqu(t.tr.translate("global_button_submit")))},directives:[uu.D,J.O5,Z.Fj,Z.JJ,Z.On],styles:[""]}),(0,c.gn)([(0,u.bH)()],eh.prototype,"blockUI",void 0);const th=["compensations_model_view"];function ah(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"model-table-view",2,3),n.NdJ("onAction",function(t){return n.CHM(e),n.oxw().onAction(t)}),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}class ih{constructor(e,t,a,i,n){this.api=e,this.toastr=t,this.dialogService=a,this.confirmationService=i,this.tr=n,this.columns=[{dataKey:"id",label:"id",hidden:!0},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",parentKey:"user_details",sortBy:"user_id",label:this.tr.translate("global_username")},{dataKey:"days",label:this.tr.translate("global_days")},{dataKey:"traffic",label:this.tr.translate("user_compensation_target_traffic")},{dataKey:"hours",label:this.tr.translate("user_compensation_target_uptime")},{dataKey:"created_by_username",parentKey:"manager_details",label:this.tr.translate("global_manager")},{dataKey:"approved",label:this.tr.translate("user_compensation_approved"),dataResolver:e=>this.tr.translate(1===e?"user_compensation_approved":"user_compensation_not_approved"),classFn:e=>1===e.approved?"text-success":"text-warning"},{dataKey:"approved_by_username",parentKey:"approval_details",label:this.tr.translate("user_compensation_approved_by")}],this.filterFields=[{key:"status",label:this.tr.translate("global_status"),type:"select",value:0,layout:"vertical",cols:12,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("user_compensation_approved")},{value:0,label:this.tr.translate("user_compensation_not_approved")}]},{key:"created_by",label:this.tr.translate("global_manager"),type:"select2",value:-1,layout:"vertical",cols:12},{key:"approved_by",label:this.tr.translate("user_compensation_approved_by"),type:"select2",value:-1,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={created_by:[],approved_by:[]},this.actions=[{name:"approve",label:this.tr.translate("user_compensation_action_approve"),icon:"fa fa-check",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_any"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_any"}],this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:"Compensations",icon:"fa fa-user",columns:this.columns,dataUrl:"index/compensation",page:1,sortBy:"id",direction:"desc",actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!0,allowExport:!0,modelName:"compensation",hasAdvancedFilter:!0,showRowsCount:!0},this.loadResources()}onAction(e){switch(e.action){case"approve":this.showApprovalDialog();break;case"delete":this.destroy()}}loadResources(){this.api.get("index/manager").subscribe(e=>{const t=[];t.push({value:-1,label:this.tr.translate("global_all")});for(let a of e.data)t.push({value:a.id,label:a.username});this.filterOptions.created_by=t,this.filterOptions.approved_by=t})}showApprovalDialog(){const e=this.modelView.currentRow,t=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(e=>{t.push(e.id)}):t.push(e.id),0!==t.length&&this.dialogService.open(eh,{header:this.tr.translate("user_compensation_approval_dialog_label"),width:"500px",data:{rows:t}}).onClose.subscribe(()=>{this.modelView.reload()})}destroy(){const e=this.modelView.currentRow,t=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(e=>{t.push(e.id)}):t.push(e.id),0!==t.length&&this.confirmationService.confirm({message:this.tr.translate("global_prompt_delete_selected_item"),accept:()=>{this.api.post("compensation/destroy",{rows:t}).subscribe(e=>{this.toastr.success(this.tr.translate(e.message)),this.modelView.reload()})}})}}function nh(e,t){if(1&e&&n._UZ(0,"model-table-view",1,2),2&e){const e=n.oxw();n.Q6J("modelViewConfig",e.modelViewConfig)("advancedFilterFields",e.filterFields)("advancedFilterOptions",e.filterOptions)}}ih.\u0275fac=function(e){return new(e||ih)(n.Y36(h),n.Y36(g._W),n.Y36(fa.xA),n.Y36(xi.YP),n.Y36(M))},ih.\u0275cmp=n.Xpm({type:ih,selectors:[["app-user-compensation-index"]],viewQuery:function(e,t){if(1&e&&n.Gf(th,5),2&e){let e;n.iGM(e=n.CRH())&&(t.modelView=e.first)}},features:[n._Bn([fa.xA])],decls:2,vars:1,consts:[["name","compensations_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","compensations_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction"],["compensations_model_view",""]],template:function(e,t){1&e&&(n.YNc(0,ah,2,3,"model-table-view",0),n._UZ(1,"p-confirmDialog",1)),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,T.Q,wt],styles:[""]}),(0,c.gn)([(0,u.bH)()],ih.prototype,"blockUI",void 0);const oh=[{path:"dashboard",component:_e,data:{title:"dashboard"}},{path:"message",component:Gf,data:{title:"message"}},{path:"managers/index",component:Oa,data:{title:"managers / index",prm:"prm_managers_index"}},{path:"manager/profile",component:nd,data:{title:"manager / profile"}},{path:"manager/twofactorsetup",component:Nf,data:{title:"manager / two factor authentication"}},{path:"manager/loginAs",component:md,data:{title:"manager / login as...",prm:"prm_managers_login_as"}},{path:"manager/selfDeposit",component:mp,data:{title:"manager / self deposit"}},{path:"manager",component:Ii,data:{title:"manager / form",prm:"prm_managers_index"}},{path:"manager/:id",component:kr,data:{title:"manager / form",prm:"prm_managers_index"}},{path:"profiles/index",component:Gi,data:{title:"profile / index",prm:"prm_profiles_index"}},{path:"profile",component:Ri,data:{title:"profile / form",prm:"prm_profiles_create"}},{path:"profiles/addons",component:xf,data:{title:"addons / index",prm:"prm_profiles_create"}},{path:"profiles/addon",component:qf,data:{title:"addons / form",prm:"prm_profiles_create"}},{path:"profiles/addon/:id",component:qf,data:{title:"addons / form",prm:"prm_profiles_create"}},{path:"profiles/notifications",component:bf,data:{title:"usage notifications / index",prm:"prm_profiles_create"}},{path:"profiles/notification/:id",component:vf,data:{title:"usage notifications / form",prm:"prm_profiles_create"}},{path:"profiles/notification",component:vf,data:{title:"usage notifications / form",prm:"prm_profiles_create"}},{path:"profile/policy/:profile_id",component:sn,data:{title:"profile policy / form",prm:"prm_profiles_policy_manager"}},{path:"profile/policy/:profile_id/:policy_id",component:sn,data:{title:"profile policy / form",prm:"prm_profiles_policy_manager"}},{path:"profile/policies/:profile_id",component:wn,data:{title:"policies",prm:"prm_profiles_policy_manager"}},{path:"profiles/pricing",component:js,data:{title:"profile / pricing",prm:"prm_profiles_pricing"}},{path:"profile/:id",component:Ri,data:{title:"profile / form",prm:"prm_profiles_update"}},{path:"nas/index",component:Ki,data:{title:"NAS / index",prm:"prm_nas_index"}},{path:"nas",component:Vi,data:{title:"NAS / form",prm:"prm_nas_create"}},{path:"nas/:id",component:Vi,data:{title:"NAS / form",prm:"prm_nas_update"}},{path:"compensations/index",component:ih,data:{title:"users / compensations"}},{path:"users/index",component:eo,data:{title:"users / index"}},{path:"users/online",component:Ac,data:{title:"users / online"}},{path:"users/tickets",component:tf,data:{title:"users / tickets"}},{path:"user",component:Mn,data:{title:"user / form"}},{path:"user/activate/:id",component:Ls,data:{title:"user / activate"}},{path:"user/addon/:id",component:Uf,data:{title:"user / activate"}},{path:"user/bulkActivate/:data",component:Fp,data:{title:"user / activate"}},{path:"user/extend/:id",component:ep,data:{title:"user / extend"}},{path:"user/cancel/:id",component:fg,data:{title:"user / cancel subscription"}},{path:"user/profile/:id",component:tr,data:{title:"user / profile"}},{path:"user/:id",component:Ds,data:{title:"user / form"}},{path:"cards/index",component:Qr,data:{title:"cards / index",prm:"prm_cards_index"}},{path:"cards/generate",component:Dr,data:{title:"cards / generate",prm:"prm_cards_generate_refill"}},{path:"cards/list/:series",component:Vr,data:{title:"cards / list",prm:"prm_cards_index"}},{path:"cards/designer",component:al,data:{title:"cards / designer",prm:"prm_cards_index"}},{path:"cards/print/:series",component:pl,data:{title:"cards / printer",prm:"prm_cards_index"}},{path:"cards/job/index",component:gc,data:{title:"cards / jobs",prm:"prm_cards_generate_user"}},{path:"cards/verify",component:Eu,data:{title:"cards / verify",prm:"prm_cards_verify"}},{path:"settings/general",component:Rl,data:{title:"settings/ general",prm:"prm_settings"}},{path:"settings/acl",component:Ot,data:{title:"settings/ acl",prm:"prm_settings"}},{path:"settings/sites",component:wl,data:{title:"settings / sites",prm:"prm_settings"}},{path:"settings/sms",component:ic,data:{title:"settings / sms",prm:"prm_settings"}},{path:"settings/email",component:uc,data:{title:"settings / email",prm:"prm_settings"}},{path:"settings/emailTemplates",component:lc,data:{title:"settings / email / templates",prm:"prm_settings"}},{path:"settings/freezone",component:ec,data:{title:"settings / freezone",prm:"prm_settings"}},{path:"settings/backup",component:Fc,data:{title:"settings / backup",prm:"prm_settings"}},{path:"settings/notifications",component:Pc,data:{title:"settings / notifications",prm:"prm_settings"}},{path:"settings/license",component:Ic,data:{title:"settings / license",prm:"prm_settings"}},{path:"settings/network",component:Vc,data:{title:"settings / network",prm:"prm_settings"}},{path:"settings/advanced",component:qd,data:{title:"settings / advanced",prm:"prm_settings"}},{path:"settings/portal",component:hu,data:{title:"settings / portal",prm:"prm_settings"}},{path:"settings/sastrack",component:Iu,data:{title:"settings / sastrack",prm:"prm_settings"}},{path:"settings/billing",component:_g,data:{title:"settings / billing",prm:"prm_settings"}},{path:"settings/ucp",component:ip,data:{title:"settings / user portal",prm:"prm_settings"}},{path:"settings/paymentgateways",component:cp,data:{title:"settings / payment gateways",prm:"prm_settings"}},{path:"settings/googleDrive",component:Yp,data:{title:"settings / google drive",prm:"prm_settings"}},{path:"settings/userInvoiceDesigner",component:Ug,data:{title:"settings / user invoice designer",prm:"prm_settings"}},{path:"settings/welcomeScreen",component:Eg,data:{title:"settings / welcome screen",prm:"prm_settings"}},{path:"settings/telegram",component:uf,data:{title:"settings / telegram",prm:"prm_settings"}},{path:"report/syslog",component:Al,data:{title:"report / system log"}},{path:"report/journal/managers",component:kd,data:{title:"report / manager journal"}},{path:"report/invoice/managers",component:Nd,data:{title:"report / managers invoices"}},{path:"report/userauthlog",component:zd,data:{title:"report / users authentication log"}},{path:"report/activations",component:Ju,data:{title:"report / activations"}},{path:"report/activations_statistics",component:Lu,data:{title:"report / activations"}},{path:"report/sessions",component:dg,data:{title:"report / sessions"}},{path:"report/profits",component:ju,data:{title:"report / profits"}},{path:"report/receipts/managers",component:Zg,data:{title:"report / receipts"}},{path:"report/users",component:Cg,data:{title:"report / users"}},{path:"report/traffic",component:Og,data:{title:"report / traffic"}},{path:"report/online",component:Sg,data:{title:"report / online history"}},{path:"report/money_transfer",component:Dg,data:{title:"report / money transfers"}},{path:"report/debtsJournal",component:Yf,data:{title:"report / debts journal"}},{path:"report/cardsUsage",component:sf,data:{title:"report / cards usage"}},{path:"report/radiusLog",component:lf,data:{title:"report / radius log"}},{path:"report/payment_gateway_transactions",component:Pf,data:{title:"report / payment gateway transactions"}},{path:"report/cardsTransfer",component:(()=>{class e{constructor(e,t){this.api=e,this.tr=t,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"old_owner_username",parentKey:"old_owner_details",label:this.tr.translate("cards_log_old_owner"),sortBy:"old_owner_id"},{dataKey:"new_owner_username",parentKey:"new_owner_details",label:this.tr.translate("cards_log_new_owner"),sortBy:"new_owner_id"},{dataKey:"qty",label:this.tr.translate("global_qty")},{dataKey:"unit_value",label:this.tr.translate("cards_log_unit_value")},{dataKey:"total_value",label:this.tr.translate("cards_log_total_value")},{dataKey:"card_type",label:this.tr.translate("global_type")},{dataKey:"range_start",label:this.tr.translate("cards_log_range_start")},{dataKey:"range_end",label:this.tr.translate("cards_log_range_end")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("global_manager")},{dataKey:"profile_name",parentKey:"profile_details",label:this.tr.translate("global_profile"),hidden:!0,sortBy:"profile_id"}],this.filterFields=[{key:"created_by",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"old_owner_id",label:this.tr.translate("cards_log_old_owner"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"new_owner_id",label:this.tr.translate("cards_log_new_owner"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"qty",label:this.tr.translate("global_qty"),type:"text",pattern:"[0-9]*",cols:12,required:!1},{key:"unit_value",label:this.tr.translate("cards_log_unit_value"),type:"text",pattern:"[0-9]*",cols:12,required:!1},{key:"range_start",label:this.tr.translate("cards_log_range_start"),type:"text",pattern:"[0-9]*",cols:12,required:!1}],this.filterOptions={created_by:[],old_owner_id:[],new_owner_id:[]},this.modelViewConfig=null}ngOnInit(){this.modelViewConfig={title:this.tr.translate("cards_log_report_title"),icon:"",columns:this.columns,dataUrl:"index/cardsTransferLog",page:1,showSearchBox:!0,showRowsCount:!0,allowExport:!0,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"cardTransferLog",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}loadResources(){this.api.get("index/manager").subscribe(e=>{const t=[];for(let a of e.data)t.push({value:a.id,label:a.username});t.unshift({value:-1,label:this.tr.translate("global_filter_all_managers")}),this.filterOptions.created_by=t,this.filterOptions.new_owner_id=t,this.filterOptions.old_owner_id=t})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(h),n.Y36(M))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-cards-transfers-report"]],decls:1,vars:1,consts:[["name","cards_log_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions",4,"ngIf"],["name","cards_log_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions"],["cards_log_model_view",""]],template:function(e,t){1&e&&n.YNc(0,nh,2,3,"model-table-view",0),2&e&&n.Q6J("ngIf",t.modelViewConfig)},directives:[J.O5,wt],styles:[""]}),e})(),data:{title:"report / cards transfers log"}},{path:"tools/dashboard-manager",component:Pl,data:{title:"tools / dashboard manager"}},{path:"tools/widget-factory",component:kl,data:{title:"tools / widget factory"}},{path:"tools/systemServices",component:fd,data:{title:"tools / system services"}},{path:"tools/systemUpdate",component:yd,data:{title:"tools / system update"}},{path:"tools/maintenance",component:Fd,data:{title:"tools / system maintenance"}},{path:"tools/migration",component:Ed,data:{title:"tools / database migration"}},{path:"tools/import",component:Ru,data:{title:"tools / import"}},{path:"tools/bulk-changes",component:rg,data:{title:"tools / bulk changes"}},{path:"tools/announcements",component:au,data:{title:"tools / announcements"}},{path:"tools/bandwidthcontroller",component:nf,data:{title:"tools / bandwidth control"}},{path:"radius/custom/:entity/:id",component:as,data:{title:"radius / custom attributes"}},{path:"backup/index",component:zc,data:{title:"backup / index"}},{path:"billing/userInvoiceForm",component:vu,data:{title:"billing / invoice"}},{path:"billing/userInvoiceForm/:user_id",component:vu,data:{title:"billing / invoice"}},{path:"billing/invoices/index",component:xu,data:{title:"billing / invoices"}},{path:"ippool/index",component:Pp,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"ippool",component:Hp,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"ippool/:id",component:Hp,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"groups",component:zf,data:{title:"Groups",prm:"prm_groups_index"}},{path:"group/:id",component:jf,data:{title:"Group Form",prm:"prm_groups_index"}},{path:"group",component:jf,data:{title:"Group Form",prm:"prm_groups_index"}},{path:"about",component:Uu,data:{title:"About..."}},{path:"zaincash/process",component:wp,data:{title:"ZainCash"}},{path:"switch/process",component:Lf,data:{title:"Switch Payment Gateway"}},{path:"kushok/process/:trans_id",component:hf,data:{title:"kushok"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}];let sh=(()=>{class e{constructor(e){this.el=e,this.focus=!0}ngOnInit(){this.focus&&window.setTimeout(()=>{this.el.nativeElement.focus()})}set autofocus(e){this.focus=!1!==e}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.SBq))},e.\u0275dir=n.lG2({type:e,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}}),e})();function rh(e,t){1&e&&(n.TgZ(0,"div",11),n._UZ(1,"i",12),n._uU(2,"\xa0\xa0 please wait ... "),n.qZA())}function lh(e,t){if(1&e&&(n.TgZ(0,"div",13),n.TgZ(1,"div",14),n._uU(2),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.hij(" ",e.settings.login_message," ")}}function ch(e,t){if(1&e&&(n.TgZ(0,"div",42),n._UZ(1,"i",43),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" \xa0\xa0",e.errorMessage," ")}}function dh(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",23),n.TgZ(1,"div",24),n.TgZ(2,"span",25),n._UZ(3,"i",44),n.qZA(),n.qZA(),n.TgZ(4,"input",45,46),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw(2).loginData.captcha_text=t}),n.qZA(),n.qZA()}if(2&e){const e=n.oxw(2);n.xp6(4),n.Q6J("ngModel",e.loginData.captcha_text)}}function uh(e,t){if(1&e&&(n.TgZ(0,"option",47),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.Oqu(e.label)}}function ph(e,t){if(1&e&&(n.TgZ(0,"div",23),n._UZ(1,"div",24),n._UZ(2,"img",48),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.MGl("src","data:image/jpeg;base64,",e.captcah_image,"",n.LSH)}}function gh(e,t){1&e&&n._UZ(0,"i",49)}function fh(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Login"),n.qZA())}function hh(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15),n.TgZ(1,"div",16),n.TgZ(2,"div",17),n.TgZ(3,"div",18),n.TgZ(4,"form",19,20),n.NdJ("ngSubmit",function(){n.CHM(e);const t=n.MAs(5);return n.oxw().login(t.value)}),n.TgZ(6,"h1"),n._uU(7,"Login"),n.qZA(),n.TgZ(8,"p",21),n._uU(9,"Sign In to your account"),n.qZA(),n.YNc(10,ch,3,1,"div",22),n.TgZ(11,"div",23),n.TgZ(12,"div",24),n.TgZ(13,"span",25),n._UZ(14,"i",26),n.qZA(),n.qZA(),n.TgZ(15,"input",27,28),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.username=t}),n.qZA(),n.qZA(),n.TgZ(17,"div",23),n.TgZ(18,"div",24),n.TgZ(19,"span",25),n._UZ(20,"i",29),n.qZA(),n.qZA(),n.TgZ(21,"input",30,31),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.password=t}),n.qZA(),n.qZA(),n.YNc(23,dh,6,1,"div",32),n.TgZ(24,"div",33),n.TgZ(25,"div",24),n.TgZ(26,"span",25),n._UZ(27,"i",34),n.qZA(),n.qZA(),n.TgZ(28,"select",35),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.language=t}),n.YNc(29,uh,2,2,"option",36),n.qZA(),n.qZA(),n._UZ(30,"hr"),n.YNc(31,ph,3,1,"div",32),n.TgZ(32,"div",37),n.TgZ(33,"div",38),n.TgZ(34,"button",39),n.YNc(35,gh,1,0,"i",40),n.YNc(36,fh,2,0,"span",41),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(10),n.Q6J("ngIf",e.showAlert),n.xp6(5),n.Q6J("ngModel",e.loginData.username)("autofocus",!0),n.xp6(6),n.Q6J("ngModel",e.loginData.password),n.xp6(2),n.Q6J("ngIf",e.requires_captcha),n.xp6(5),n.Q6J("ngModel",e.loginData.language),n.xp6(1),n.Q6J("ngForOf",e.languages),n.xp6(2),n.Q6J("ngIf",e.requires_captcha),n.xp6(3),n.Q6J("disabled",e.busy),n.xp6(1),n.Q6J("ngIf",e.busy),n.xp6(1),n.Q6J("ngIf",!e.busy)}}function mh(e,t){if(1&e&&(n.TgZ(0,"div",42),n._UZ(1,"i",43),n._uU(2),n.qZA()),2&e){const e=n.oxw(2);n.xp6(2),n.hij(" \xa0\xa0",e.errorMessage," ")}}function _h(e,t){if(1&e&&(n.TgZ(0,"option",47),n._uU(1),n.qZA()),2&e){const e=t.$implicit;n.Q6J("value",e.value),n.xp6(1),n.Oqu(e.label)}}function bh(e,t){1&e&&n._UZ(0,"i",49)}function Zh(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1,"Verify Code"),n.qZA())}function vh(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",15),n.TgZ(1,"div",16),n.TgZ(2,"div",17),n.TgZ(3,"div",18),n.TgZ(4,"div",50),n._UZ(5,"img",51),n.qZA(),n.TgZ(6,"form",19,20),n.NdJ("ngSubmit",function(){n.CHM(e);const t=n.MAs(7);return n.oxw().login(t.value)}),n.TgZ(8,"h3"),n._uU(9,"Two-factor authentication"),n.qZA(),n.TgZ(10,"p"),n._uU(11,"Open your authentication app and enter the code for SAS Radius."),n.qZA(),n.YNc(12,mh,3,1,"div",22),n.TgZ(13,"div",52),n.TgZ(14,"div",24),n.TgZ(15,"span",25),n._UZ(16,"i",29),n.qZA(),n.qZA(),n.TgZ(17,"input",53,28),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.username=t}),n.qZA(),n.qZA(),n.TgZ(19,"div",52),n.TgZ(20,"div",24),n.TgZ(21,"span",25),n._UZ(22,"i",29),n.qZA(),n.qZA(),n.TgZ(23,"input",54,31),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.password=t}),n.qZA(),n.qZA(),n.TgZ(25,"div",55),n.TgZ(26,"div",24),n.TgZ(27,"span",25),n._UZ(28,"i",56),n.qZA(),n.qZA(),n.TgZ(29,"input",57,28),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.otp=t}),n.qZA(),n.qZA(),n.TgZ(31,"div",58),n.TgZ(32,"div",24),n.TgZ(33,"span",25),n._UZ(34,"i",34),n.qZA(),n.qZA(),n.TgZ(35,"select",35),n.NdJ("ngModelChange",function(t){return n.CHM(e),n.oxw().loginData.language=t}),n.YNc(36,_h,2,2,"option",36),n.qZA(),n.qZA(),n.TgZ(37,"div",37),n.TgZ(38,"div",38),n.TgZ(39,"button",39),n.YNc(40,bh,1,0,"i",40),n.YNc(41,Zh,2,0,"span",41),n.qZA(),n.qZA(),n.qZA(),n.TgZ(42,"div",37),n.TgZ(43,"div",38),n.TgZ(44,"p",59),n.TgZ(45,"a",60),n.NdJ("click",function(){return n.CHM(e),n.oxw().reset()}),n._uU(46,"Back To Login"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(12),n.Q6J("ngIf",e.showAlert),n.xp6(5),n.Q6J("ngModel",e.loginData.username),n.xp6(6),n.Q6J("ngModel",e.loginData.password),n.xp6(6),n.Q6J("ngModel",e.loginData.otp),n.xp6(6),n.Q6J("ngModel",e.loginData.language),n.xp6(1),n.Q6J("ngForOf",e.languages),n.xp6(3),n.Q6J("disabled",e.busy),n.xp6(1),n.Q6J("ngIf",e.busy),n.xp6(1),n.Q6J("ngIf",!e.busy)}}class wh{constructor(e,t,a,i,n,o){this.api=e,this.config=t,this.auth=a,this.router=i,this.toastr=n,this.log=o,this.loginData={username:"",password:"",language:null,otp:null,captcha_text:null},this.busy=!1,this.showAlert=!1,this.settings={site_status:0,site_title:"SASRadius",site_language:"en"},this.errorMessage="",this.languages=[],this.logo_url="",this.background_image=null,this.otp_required=!1,this.requires_captcha=!1,this.captcah_image=null}ngOnInit(){this.blockUI.start(),this.api.get("auth").subscribe(e=>{this.blockUI.stop(),this.router.navigate(["dashboard"])},e=>{this.blockUI.stop()}),this.logo_url=this.config.getApiUrl()+"resources/logo",this.background_image=this.config.getApiUrl()+"resources/background_image",this.removeRTL(),this.api._get("resources/login").subscribe(e=>{var t,a;this.settings=e.data,this.languages=[],e.data.languages.map(e=>{this.languages.push({value:e.id,label:e.name})}),1===e.data.requires_captcha&&(this.requires_captcha=!0,this.loadCaptcha(this.auth.session_id)),(null===(t=e.data.site.login_background)||void 0===t?void 0:t.length)>5&&$(".login-background").css({"background-image":"url("+this.background_image+")"}),document.title=this.settings.site.title,this.loginData.language=this.settings.site_language,(null===(a=localStorage.getItem("remember_language"))||void 0===a?void 0:a.length)>1&&(this.loginData.language=localStorage.getItem("remember_language"))}),""!==localStorage.getItem("remember_username")&&(this.loginData.username=localStorage.getItem("remember_username"))}login(e){this.showAlert=!1,localStorage.removeItem(this.config.tokenName),this.busy=!0,e.session_id=this.auth.session_id,this.api._post("login",e).subscribe(e=>{if(this.busy=!1,-10===e.status&&(this.otp_required=!0),-11===e.status&&(this.errorMessage="Invalid Secret",this.showAlert=!0,this.loginData.otp=null),200===e.status){const t=e.token;localStorage.setItem("remember_username",this.loginData.username),localStorage.setItem("remember_language",this.loginData.language),localStorage.setItem("user_language",this.loginData.language),localStorage.setItem(this.config.tokenName,t),this.router.navigate(["dashboard"])}},e=>{this.busy=!1,401===e.status||(403===e.status?(this.errorMessage="Invalid Username or Password",this.showAlert=!0,this.loginData.captcha_text=null,this.loginData.password=null,this.loadCaptcha(this.auth.session_id)):429===e.status?(this.errorMessage="Too many tries, try again in 1 minute",this.showAlert=!0,this.loginData.captcha_text=null,this.loginData.password=null,this.loadCaptcha(this.auth.session_id)):402===e.status?(this.errorMessage="Server offline, only Administrator allowed to login",this.showAlert=!0):this.toastr.error("unable to connect to server","SAS"))})}removeRTL(){var e=document.getElementById("rtl_css");e&&e.parentNode.removeChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","ltr")}reset(){this.otp_required=!1,this.loginData.username=null,this.loginData.password=null,this.loginData.otp=null,this.loginData.captcha_text=null,this.errorMessage=null,this.showAlert=!1}ngAfterViewInit(){window.setTimeout(function(){$(".image-container").fadeTo(600,.4,"swing",function(){$(".image-container").fadeTo(900,.1)})},300)}loadCaptcha(e){this.api._get("login/captcha/"+this.auth.session_id).subscribe(e=>{200===e.status&&(this.captcah_image=e.data)})}}function yh(e,t){1&e&&(n.TgZ(0,"div",10),n._UZ(1,"img",11),n.qZA())}function xh(e,t){1&e&&n._UZ(0,"app-update-notification")}wh.\u0275fac=function(e){return new(e||wh)(n.Y36(h),n.Y36(l),n.Y36(_),n.Y36(p.F0),n.Y36(g._W),n.Y36(f))},wh.\u0275cmp=n.Xpm({type:wh,selectors:[["login-page"]],decls:13,vars:4,consts:[["sas_block_ui",""],[1,"app","flex-row","align-items-center","login-background"],["class","acp-alert-container",4,"ngIf"],["id","iot","name","iot",1,"image-container"],[1,"container"],[1,"row","justify-content-center","align-items-start",2,"margin-bottom","20px"],[1,"col-md-auto","text-center"],[1,"logo_image",3,"src","error"],[1,"row","justify-content-center"],[1,"row","justify-content-center",2,"opacity","1.0"],["class","col-lg-5 col-md-7 col-sm-8 col-xs-11",4,"ngIf"],[1,"block-ui-template","sas-block-ui"],[1,"fa","fa-spin","fa-circle-o-notch"],[1,"acp-alert-container"],["role","alert",1,"alert","alert-info","alert-dismissible","text-center"],[1,"col-lg-5","col-md-7","col-sm-8","col-xs-11"],[1,"card-group","mb-0"],[1,"card","p-4","login-card"],[1,"card-body"],["autocomplete","off",3,"ngSubmit"],["loginForm","ngForm"],[1,"text-muted"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","text","placeholder","Username","name","username","autocomplete","off",1,"form-control",3,"ngModel","autofocus","ngModelChange"],["username","ngModel"],[1,"fa","fa-lock"],["type","password","placeholder","Password","name","password","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["class","input-group mb-3",4,"ngIf"],[1,"input-group","mb-4"],[1,"fa","fa-language"],["name","language",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["type","submit",1,"btn","btn-primary","px-4",2,"width","100%",3,"disabled"],["class","fa fa-cog fa-spin",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[1,"fa","fa-exclamation-triangle"],[1,"fa","fa-robot"],["type","text","placeholder","Captcha","name","captcha_text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["captcha_text","ngModel"],[3,"value"],["alt","",3,"src"],[1,"fa","fa-cog","fa-spin"],[1,"text-center"],["src","assets/img/2fa-icon.png","height","120"],[1,"input-group","mb-3","d-none"],["type","text","name","username",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],[1,"input-group","input-group-lg","mb-3"],[1,"fad","fa-key"],["type","text","name","otp","placeholder","6-digit code","maxlength","6",1,"form-control",2,"letter-spacing","0.25em",3,"ngModel","ngModelChange"],[1,"input-group","mb-4","d-none"],[1,"text-center","mt-2"],[3,"routerLink","click"]],template:function(e,t){1&e&&(n.YNc(0,rh,3,0,"ng-template",null,0,n.W1O),n.TgZ(2,"div",1),n.YNc(3,lh,3,1,"div",2),n._UZ(4,"div",3),n.TgZ(5,"div",4),n.TgZ(6,"div",5),n.TgZ(7,"div",6),n.TgZ(8,"img",7),n.NdJ("error",function(){return t.logo_url="assets/img/sas.png"}),n.qZA(),n.qZA(),n.qZA(),n._UZ(9,"div",8),n.TgZ(10,"div",9),n.YNc(11,hh,37,11,"div",10),n.YNc(12,vh,47,9,"div",10),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(3),n.Q6J("ngIf",t.settings.login_message),n.xp6(5),n.s9C("src",t.logo_url,n.LSH),n.xp6(3),n.Q6J("ngIf",!1===t.otp_required),n.xp6(1),n.Q6J("ngIf",!0===t.otp_required))},directives:[J.O5,Z._Y,Z.JL,Z.F,Z.Fj,Z.JJ,Z.On,sh,Z.EJ,J.sg,Z.YN,Z.Kr,Z.nD,p.yS],styles:[".login-background[_ngcontent-%COMP%]{background:#314755;background:linear-gradient(to right,#26a0da,#314755)}.image-container[_ngcontent-%COMP%]{background-image:url(bg1.a19009bf4e504228c1e8.png);background-position:center;background-size:cover;background-repeat:no-repeat;opacity:.1;position:absolute;width:100%;height:100%}.logo_image[_ngcontent-%COMP%]{opacity:.8;max-width:400px;height:auto}.login-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.acp-alert-container[_ngcontent-%COMP%]{position:fixed;top:0px;padding:10px;width:100%}.acp-alert-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{width:100%}"]}),(0,c.gn)([(0,u.bH)()],wh.prototype,"blockUI",void 0);const Ah=function(){return{width:"85%",maxWidth:"700px"}},qh=[{path:"login",component:wh},{path:"",component:(()=>{class e{constructor(e,t,a,i,n,o,s){this.translator=e,this.auth=t,this.api=a,this.config=i,this.sanitizer=n,this.router=o,this.route=s,this.disabled=!1,this.status={isopen:!1},this.profile={},this.welcomeScreen={visible:!1,message:""}}ngOnInit(){const e=localStorage.getItem("user_language");("ar"===e||"ku"===e)&&this.enableRTL(e),document.title=this.config.siteConfig.site.title,(null===this.router.url||"/dashboard"===this.router.url)&&this.showWelcomeScreen();const t=this.route.snapshot.queryParamMap.get("resultIndicator");(null==t?void 0:t.length)>4&&(console.log("this is a switch return"),console.log("ri = "+t))}showWelcomeScreen(){this.api.get("resources/welcomeScreen").subscribe(e=>{200===e.status&&(this.welcomeScreen.visible=!0,this.welcomeScreen.message=this.sanitizer.bypassSecurityTrustHtml(e.data))})}enableRTL(e){const t=document.createElement("link");if(t.href="assets/css/rtl.css",t.type="text/css",t.id="rtl_css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("HTML")[0].setAttribute("dir","rtl"),"ku"===e){const e=document.createElement("link");e.href="assets/css/kurdi.css",e.type="text/css",e.id="rtl_ku_css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e)}}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(M),n.Y36(_),n.Y36(h),n.Y36(l),n.Y36(i.H7),n.Y36(p.F0),n.Y36(p.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:18,vars:10,consts:[["sas_block_ui",""],[3,"visible","modal","closable","visibleChange"],[1,"messageContainer",3,"innerHTML"],[4,"ngIf"],[1,"app-body"],[1,"sidebar"],[1,"main"],[1,"breadcrumb"],[1,"container-fluid"],[3,"template"],[1,"block-ui-template","sas-block-ui"],["src","assets/img/loading/animation2.gif"]],template:function(e,t){if(1&e&&(n.YNc(0,yh,2,0,"ng-template",null,0,n.W1O),n.TgZ(2,"p-dialog",1),n.NdJ("visibleChange",function(e){return t.welcomeScreen.visible=e}),n.TgZ(3,"p-header"),n._uU(4),n.qZA(),n._UZ(5,"div",2),n.qZA(),n.YNc(6,xh,1,0,"app-update-notification",3),n._UZ(7,"app-header"),n.TgZ(8,"div",4),n.TgZ(9,"div",5),n._UZ(10,"app-sidebar-nav"),n.qZA(),n.TgZ(11,"main",6),n.TgZ(12,"ol",7),n._UZ(13,"app-breadcrumbs"),n.qZA(),n.TgZ(14,"div",8),n.TgZ(15,"block-ui",9),n._UZ(16,"router-outlet"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n._UZ(17,"app-footer")),2&e){const e=n.MAs(1);n.xp6(2),n.Akn(n.DdM(9,Ah)),n.Q6J("visible",t.welcomeScreen.visible)("modal",!0)("closable",!0),n.xp6(2),n.hij(" ",t.translator.translate("label_welcome_screen_header")," "),n.xp6(1),n.Q6J("innerHTML",t.welcomeScreen.message,n.oJD),n.xp6(1),n.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")),n.xp6(9),n.Q6J("template",e)}},directives:[ki.V,xi.h4,J.O5,x,Q,Ee,Te,u.G8,p.lC,P,Td],styles:[".sas-block-ui[_ngcontent-%COMP%]{text-align:center;font-size:20px;#background-color: #3a3a3a;color:#fff;width:200px;border-radius:5px;padding:15px}.block-ui-wrapper[_ngcontent-%COMP%]{background:rgba(0,0,0,.4)!important}.messageContainer[_ngcontent-%COMP%]{width:100%!important;min-height:300px;background:white;padding:5px}body[_ngcontent-%COMP%]{background:#e4e5e6}"]}),e})(),children:oh,canActivateChild:[M,yi,_,l]}];let Th=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e,bootstrap:[b]}),e.\u0275inj=n.cJS({providers:[h,_,l,g._W,f,Ge,{provide:J.S$,useClass:J.Do}],imports:[[i.b2,r.JF,Z.u5,o.PW,g.Rh.forRoot(),pu,p.Bz.forRoot(qh,{relativeLinkResolution:"legacy"}),ma.kW,u.uh.forRoot({delayStart:0,delayStop:500})]]}),e})();(0,n.G48)(),i.q6().bootstrapModule(Th).catch(e=>console.log(e))}},function(e){e.O(0,[736],function(){return e(e.s=48452)}),e.O()}]);