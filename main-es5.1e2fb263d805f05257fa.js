!function(){function e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function t(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,r=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw r}}}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=new Array(t);a<t;a++)i[a]=e[a];return i}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunksas4=self.webpackChunksas4||[]).push([[179],{98255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=98255,e.exports=t},48452:function(e,a,n){"use strict";var r,s=n(39075),c=n(37716),u=n(46237),d=n(88002),f=n(91841),p=((r=function(){function e(t){o(this,e),this.http=t,this.tokenName="sas4_jwt",this.setLogLevels({info:!0,error:!0,log:!0,debug:!0})}return l(e,[{key:"getApiUrl",value:function(){var e=localStorage.getItem("sas4_api_url");return(!e||null==e)&&(e="http://localhost:8000/index.php/api/"),e}},{key:"setLogLevels",value:function(e){this.logLevels=e}},{key:"loadConfig",value:function(){var e=this.getApiUrl()+"resources/login";return this.http.get(e)}},{key:"canActivateChild",value:function(){var e=this;return!!this.siteConfig||this.loadConfig().pipe((0,d.U)(function(t){return 200==t.status&&(e.siteConfig=t.data,!0)}))}}]),e}()).\u0275fac=function(e){return new(e||r)(c.LFG(f.eN))},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac}),r),g=n(64762),h=n(69165),m=n(98044),_=n(39895),v=n(49344),b=function(){var e=function(){function e(t){o(this,e),this.config=t}return l(e,[{key:"currentTime",value:function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},{key:"prepareMessage",value:function(e,t){var a;return a=this.currentTime(),"object"==typeof t&&(t=JSON.stringify(t)),a+=" ["+e+"] ",a+=" "+t}},{key:"info",value:function(e,t){this.config.logLevels.info&&console.info(this.prepareMessage(e,t))}},{key:"log",value:function(e,t){this.config.logLevels.log&&console.log(this.prepareMessage(e,t))}},{key:"error",value:function(e,t){this.config.logLevels.error&&console.error(this.prepareMessage(e,t))}},{key:"debug",value:function(e,t){this.config.logLevels.debug&&console.log("%c "+this.prepareMessage(e,t)," background: #222; color: #bada55")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(p))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),Z=function(){function e(t,a,i,n,r){o(this,e),this.config=t,this.http=a,this.router=i,this.toastr=n,this.log=r}return l(e,[{key:"isTokenExpired",value:function(){var e=localStorage.getItem(this.config.tokenName);return!e||""==e||jwt_decode(e).exp-Math.floor(Date.now()/1e3)<0}},{key:"_post",value:function(e,t){var a=this.config.getApiUrl(),i=new f.WM;i.append("Content-Type","application/json");var n={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return this.log.debug("API,_post, url="+a+e,JSON.stringify(t)),this.http.post(a+e,n,{headers:i})}},{key:"_put",value:function(e,t){var a=this.config.getApiUrl(),i=new f.WM;i.append("Content-Type","application/json");var n={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return this.log.debug("API,_put, url="+a+e,JSON.stringify(t)),this.http.put(a+e,n,{headers:i})}},{key:"_get",value:function(e){var t=this.config.getApiUrl();return this.log.debug("API,_get","url="+t+e),this.http.get(t+e)}},{key:"post",value:function(e,t){var a=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.isTokenExpired()&&this.router.navigate(["login"]);var n=this.config.getApiUrl(),o=localStorage.getItem(this.config.tokenName),r=(new f.WM).set("authorization","Bearer "+o);r.set("authorization","Bearer "+o),r.set("Content-Type","application/json");var l={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return i||(l=t),this.log.debug("API,post, url="+n+e,JSON.stringify(t)),new h.y(function(t){a.http.post(n+e,l,{headers:r}).subscribe(function(e){t.next(e)},function(e){a.blockUI.stop(),a.log.error("API",e.status),a.toastr.error(403==e.status?"access denied":500==e.status?"server error occurred":"unknown error occurred"),t.error(e)})})}},{key:"upload",value:function(e,t){var a=this;this.isTokenExpired()&&this.router.navigate(["login"]);var i=this.config.getApiUrl(),n=new f.WM,o=localStorage.getItem(this.config.tokenName);n.append("authorization","Bearer "+o);var r=t;return new h.y(function(t){a.http.post(i+e,r,{headers:n}).subscribe(function(e){t.next(e)},function(e){t.error(e),console.log("error status = "+e.status),403==e.status&&a.toastr.error("access denied"),500==e.status&&a.toastr.error("server error occurred")})})}},{key:"put",value:function(e,t){var a=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.isTokenExpired()&&this.router.navigate(["login"]);var n=this.config.getApiUrl(),o=localStorage.getItem(this.config.tokenName),r=(new f.WM).set("authorization","Bearer "+o);r.set("authorization","Bearer "+o),r.set("Content-Type","application/json");var l={payload:CryptoJS.AES.encrypt(JSON.stringify(t),"abcdefghijuklmno0123456789012345").toString()};return i||(l=t),this.log.debug("API,post, url="+n+e,JSON.stringify(t)),new h.y(function(t){a.http.put(n+e,l,{headers:r}).subscribe(function(e){t.next(e)},function(e){t.error(e),console.log("error status = "+e.status),403==e.status&&a.toastr.error("access denied"),500==e.status&&a.toastr.error("server error occurred")})})}},{key:"get",value:function(e){var t=this;this.isTokenExpired();var a=this.config.getApiUrl(),i=localStorage.getItem(this.config.tokenName),n=(new f.WM).set("authorization","Bearer "+i);return new h.y(function(i){t.http.get(a+e,{headers:n}).subscribe(function(e){i.next(e)},function(e){(400===e.status||401===e.status)&&t.router.navigate(["login"]),403===e.status&&t.toastr.error("access denied"),500===e.status&&t.toastr.error("server error occurred"),i.error()})})}},{key:"delete",value:function(e){var t=this;this.isTokenExpired()&&this.router.navigate(["login"]);var a=this.config.getApiUrl(),i=localStorage.getItem(this.config.tokenName),n=(new f.WM).set("authorization","Bearer "+i);return n.append("Authorization","Bearer "+i),new h.y(function(i){t.http.delete(a+e,{headers:n}).subscribe(function(e){i.next(e)},function(e){t.blockUI.stop(),500==e.status&&t.toastr.error("server error occurred"),403==e.status&&t.toastr.error("access denied"),i.error(e)})})}},{key:"goto",value:function(e){var t=this.config.getApiUrl();location.href=t+e}},{key:"downloadFile",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.isTokenExpired();var a=this.config.getApiUrl(),i=localStorage.getItem(this.config.tokenName),n=(new f.WM).set("authorization","Bearer "+i);this.http.get(a+e,{headers:n,responseType:"blob"}).subscribe(function(e){var a=e.type,i=[];i.push(e);var n=document.createElement("a");n.href=window.URL.createObjectURL(new Blob(i,{type:a})),t&&n.setAttribute("download",t),document.body.appendChild(n),n.click()})}},{key:"xhr",value:function(e){var t=this.config.getApiUrl(),a=localStorage.getItem(this.config.tokenName),i=new XMLHttpRequest;return i.open("GET",t+e),i.setRequestHeader("authorization","Bearer "+a),i}}]),e}();Z.\u0275fac=function(e){return new(e||Z)(c.LFG(p),c.LFG(f.eN),c.LFG(_.F0),c.LFG(v._W),c.LFG(b))},Z.\u0275prov=c.Yz7({token:Z,factory:Z.\u0275fac}),(0,g.gn)([(0,m.bH)()],Z.prototype,"blockUI",void 0);var y=function(){var e=function(){function e(){o(this,e),this.months=[{name:"Jan",id:1},{name:"Feb",id:2},{name:"Mar",id:3},{name:"Apr",id:4},{name:"May",id:5},{name:"Jun",id:6},{name:"Jul",id:7},{name:"Aug",id:8},{name:"Spt",id:9},{name:"Oct",id:10},{name:"Nov",id:11},{name:"Dec",id:12}]}return l(e,[{key:"array_key_index",value:function(e,t,a){var n,o=0,r=null,l=i(e);try{for(l.s();!(n=l.n()).done;){var s=n.value;s[t]&&s[t]==a?r=o:o++}}catch(c){l.e(c)}finally{l.f()}return r>=0&&r}},{key:"now",value:function(){var e=new Date,t=e.getFullYear().toString(),a=(e.getMonth()+1).toString();a.length<2&&(a="0"+a);var i=e.getDate().toString();i.length<2&&(i="0"+i);var n=e.getHours().toString();n.length<2&&(n="0"+n);var o=e.getMinutes().toString();o.length<2&&(o="0"+o);var r=e.getSeconds().toString();return r.length<2&&(r="0"+r),t+"-"+a+"-"+i+" "+n+":"+o+":"+r}},{key:"guid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},{key:"bytesFormat",value:function(e){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}},{key:"bpsFormat",value:function(e){if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}},{key:"isMobileDevice",value:function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),w=function(){var e=function(){function e(t,a,i,n){o(this,e),this.config=t,this.api=a,this.router=i,this.ch=n,this.permissions=[],this.features=[],this.license_status=0,this.license_expiration=null,this.session_id=null,this.session_id=this.ch.guid()}return l(e,[{key:"decode_token",value:function(){localStorage.getItem(this.config.tokenName)}},{key:"isExpired",value:function(){var e=localStorage.getItem(this.config.tokenName);return!e||""==e||jwt_decode(e).exp-Math.floor(Date.now()/1e3)<0}},{key:"clearPermissions",value:function(){this.permissions=[]}},{key:"setPermissions",value:function(e){this.permissions=e}},{key:"has",value:function(e){return this.permissions.indexOf("prm_managers_sysadmin")>=0||this.permissions.indexOf(e)>=0}},{key:"logout",value:function(){this.clearPermissions(),localStorage.removeItem(this.config.tokenName),this.router.navigate(["login"])}},{key:"setProfile",value:function(e){this.client=e}},{key:"reload",value:function(){var e=this;this.api.get("auth").subscribe(function(t){200===t.status&&(e.setProfile(t.client),e.setPermissions(t.permissions),e.license_status=parseInt(t.license_status),e.license_expiration=t.license_expiration||null,e.features=t.features)})}},{key:"canActivateChild",value:function(){var e=this;return this.permissions.length>0||this.api.get("auth").pipe((0,d.U)(function(t){return 200===t.status&&(e.setProfile(t.client),e.setPermissions(t.permissions),e.license_status=parseInt(t.license_status),e.license_expiration=t.license_expiration||null,e.features=t.features,!0)},function(e){return!1}))}},{key:"checkRoutePermission",value:function(e){var t=null==e?void 0:e.data;void 0!==t._value&&void 0!==t._value.prm&&-1===this.permissions.indexOf("prm_managers_sysadmin")&&-1===this.permissions.indexOf(t._value.prm)&&this.router.navigate(["message"],{queryParams:{title:"Access Denied",message:"You do not have permission to access this page"}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(p),c.LFG(Z),c.LFG(_.F0),c.LFG(y))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),x=function(){var e=l(function e(t,a){o(this,e),this.auth=t,this.router=a,this.app_version="4.43.0",null===localStorage.getItem("application_version")&&localStorage.setItem("application_version",this.app_version.toString())});return e.\u0275fac=function(t){return new(t||e)(c.Y36(w),c.Y36(_.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&c._UZ(0,"router-outlet")},directives:[_.lC],styles:[""]}),e}(),A=n(3679),q=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"toggleOpen",value:function(e){e.preventDefault(),document.querySelector("body").classList.toggle("aside-menu-hidden")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=c.lG2({type:e,selectors:[["","appAsideMenuToggler",""]],hostBindings:function(e,t){1&e&&c.NdJ("click",function(e){return t.toggleOpen(e)})}}),e}(),T=function(){var e=function(){function e(t){o(this,e),this.el=t}return l(e,[{key:"toggle",value:function(){this.el.nativeElement.classList.toggle("open")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq))},e.\u0275dir=c.lG2({type:e,selectors:[["","appNavDropdown",""]]}),e}(),k=function(){var e=function(){function e(t){o(this,e),this.dropdown=t}return l(e,[{key:"toggleOpen",value:function(e){e.preventDefault(),this.dropdown.toggle()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(T))},e.\u0275dir=c.lG2({type:e,selectors:[["","appNavDropdownToggle",""]],hostBindings:function(e,t){1&e&&c.NdJ("click",function(e){return t.toggleOpen(e)})}}),e}(),C=function(){var e=function(){function e(t){o(this,e),this.el=t}return l(e,[{key:"ngOnInit",value:function(){for(var e=this.el.nativeElement,t=e.parentElement;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq))},e.\u0275dir=c.lG2({type:e,selectors:[["","appHostReplace",""],["app-aside"],["app-breadcrumbs"],["app-footer"],["app-header"],["app-sidebar"],["app-sidebar-footer"],["app-sidebar-form"],["app-sidebar-header"],["app-sidebar-minimizer"],["app-sidebar-nav"],["app-sidebar-nav-dropdown"],["app-sidebar-nav-item"],["app-sidebar-nav-link"],["app-sidebar-nav-title"]]}),e}(),U=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"toggleOpen",value:function(e){e.preventDefault(),document.querySelector("body").classList.toggle("sidebar-hidden")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=c.lG2({type:e,selectors:[["","appSidebarToggler",""]],hostBindings:function(e,t){1&e&&c.NdJ("click",function(e){return t.toggleOpen(e)})}}),e}(),M=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"hasClass",value:function(e,t){return new RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)}},{key:"toggleOpen",value:function(e){e.preventDefault(),document.querySelector("body").classList.toggle("sidebar-mobile-show")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=c.lG2({type:e,selectors:[["","appMobileSidebarToggler",""]],hostBindings:function(e,t){1&e&&c.NdJ("click",function(e){return t.toggleOpen(e)})}}),e}(),F=n(83473),J=n(76321),O=n(1282),N=n(75690),I=function(){var e=function(){function e(t,a,i){var n=this;o(this,e),this.api=t,this.auth=a,this.router=i,this.language="en",this.loadedLanguage="en",null==localStorage.getItem("user_language")&&localStorage.setItem("user_language","en"),this.language=localStorage.getItem("user_language"),console.log("loading default language"),this.api._get("resources/language/en").subscribe(function(e){n.words_en=e.words}),this.load(this.language)}return l(e,[{key:"ngOnInit",value:function(){}},{key:"load",value:function(e){return this.api._get("resources/language/"+e)}},{key:"translate",value:function(e){return this.words&&this.words[e]?this.words[e]:this.words_en&&this.words_en[e]?this.words_en[e]:e}},{key:"switchLanguage",value:function(e){var t=this;this.api._get("resources/language/"+e).subscribe(function(e){t.words=e.words,t.loadedLanguage=e.info.id})}},{key:"canActivateChild",value:function(){var e=this;return this.auth.isExpired()?(this.router.navigate(["login"]),!1):(this.language=localStorage.getItem("user_language"),!(!this.words||this.loadedLanguage!=this.language)||this.load(this.language).pipe((0,d.U)(function(t){return!!t&&(e.words=t.words,e.loadedLanguage=t.info.id,!0)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(Z),c.LFG(w),c.LFG(_.F0))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),Y=n(12664),Q=n(38583);function S(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",17),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).applyLanguage(e)}),c._uU(1),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(1),c.hij(" ",i.name,"")}}function P(e,t){if(1&e&&(c.TgZ(0,"div",15),c.YNc(1,S,2,1,"a",16),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.languages)}}function D(e,t){if(1&e&&(c.TgZ(0,"a",27),c._UZ(1,"i",28),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("header_login_as"),"")}}function H(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",18),c.TgZ(1,"div",19),c.TgZ(2,"strong"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"a",20),c._UZ(5,"i",21),c._uU(6),c.qZA(),c.TgZ(7,"a",22),c._UZ(8,"i",23),c._uU(9),c.qZA(),c.YNc(10,D,3,1,"a",24),c._UZ(11,"div",25),c.TgZ(12,"a",17),c.NdJ("click",function(){return c.CHM(a),c.oxw().logout()}),c._UZ(13,"i",26),c._uU(14),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Oqu(i.tr.translate("header_account")),c.xp6(3),c.hij(" ",i.tr.translate("header_profile"),""),c.xp6(3),c.hij(" ",i.tr.translate("header_self_deposit"),""),c.xp6(1),c.Q6J("ngIf",i.auth.has("prm_managers_login_as")),c.xp6(4),c.hij(" ",i.tr.translate("header_logout"),"")}}var R=function(){function e(t,a,i,n){o(this,e),this.auth=t,this.tr=a,this.api=i,this.cdr=n,this.languages=[],this.loadLanguages()}return l(e,[{key:"logout",value:function(){this.auth.logout()}},{key:"loadLanguages",value:function(){var e=this;this.api._get("resources/languages").subscribe(function(t){e.languages=t.data})}},{key:"applyLanguage",value:function(e){localStorage.setItem("user_language",e.id),this.tr.switchLanguage(e.id),"rtl"===e.direction?this.enableRTL():this.removeRTL(),this.blockUI.start(),window.location.reload()}},{key:"removeRTL",value:function(){var e=document.getElementById("rtl_css");e&&e.parentNode.removeChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","ltr")}},{key:"enableRTL",value:function(){var e=document.createElement("link");e.href="assets/css/rtl.css",e.type="text/css",e.id="rtl_css",e.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","rtl")}}]),e}();function V(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Oqu(a.footer_text)}}R.\u0275fac=function(e){return new(e||R)(c.Y36(w),c.Y36(I),c.Y36(Z),c.Y36(c.sBO))},R.\u0275cmp=c.Xpm({type:R,selectors:[["app-header"]],decls:20,vars:1,consts:[[1,"app-header","navbar"],["type","button","appMobileSidebarToggler","",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["href","#",1,"navbar-brand"],["type","button","appSidebarToggler","",1,"navbar-toggler","d-md-down-none","mr-auto"],[1,"nav","navbar-nav","ml-auto"],["dropdown","","placement","bottom right",1,"nav-item","dropdown"],["data-toggle","dropdown","href","#","role","button","aria-haspopup","true","aria-expanded","false","dropdownToggle","",1,"nav-link",3,"click"],[1,"fa","fa-language","fa-2x"],["class","dropdown-menu dropdown-menu-right","id","language-menu","aria-labelledby","simple-dropdown",4,"dropdownMenu"],["src","assets/img/avatars/user-placeholder.png",1,"img-avatar"],[1,"d-md-down-none"],["class","dropdown-menu dropdown-menu-right","id","profile-menu","aria-labelledby","simple-dropdown",4,"dropdownMenu"],[2,"width","20px"],["type","button","appAsideMenuToggler","",1,"navbar-toggler","d-md-down-none",2,"display","none"],["id","language-menu","aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],["id","profile-menu","aria-labelledby","simple-dropdown",1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-header","text-center"],["href","#/manager/profile",1,"dropdown-item"],[1,"fa","fa-user"],["href","#/manager/selfDeposit",1,"dropdown-item"],[1,"fa","fa-credit-card"],["class","dropdown-item","href","#/manager/loginAs",4,"ngIf"],[1,"divider"],[1,"fa","fa-lock"],["href","#/manager/loginAs",1,"dropdown-item"],[1,"fa","fa-user-secret"]],template:function(e,t){1&e&&(c.TgZ(0,"header",0),c.TgZ(1,"button",1),c._UZ(2,"span",2),c.qZA(),c._UZ(3,"a",3),c.TgZ(4,"button",4),c._UZ(5,"span",2),c.qZA(),c.TgZ(6,"ul",5),c.TgZ(7,"li",6),c.TgZ(8,"a",7),c.NdJ("click",function(){return!1}),c._UZ(9,"i",8),c.qZA(),c.YNc(10,P,2,1,"div",9),c.qZA(),c.TgZ(11,"li",6),c.TgZ(12,"a",7),c.NdJ("click",function(){return!1}),c._UZ(13,"img",10),c.TgZ(14,"span",11),c._uU(15),c.qZA(),c.qZA(),c.YNc(16,H,15,5,"div",12),c.qZA(),c.qZA(),c._UZ(17,"div",13),c.TgZ(18,"button",14),c._UZ(19,"span",2),c.qZA(),c.qZA()),2&e&&(c.xp6(15),c.Oqu(t.auth.client.username))},directives:[Y.M2,M,U,O.TOY,O.Mq7,O.HzE,q,Q.sg,Q.O5],encapsulation:2}),(0,g.gn)([(0,m.bH)()],R.prototype,"blockUI",void 0);var L=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.config=a,this.version="4.y.z",this.footer_text=""}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.api.get("resources/version").subscribe(function(t){200===t.status&&(e.version=t.data)}),this.config.siteConfig.footer_text&&this.config.siteConfig.footer_text.length>2&&(this.footer_text=this.config.siteConfig.footer_text)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(p))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-footer"]],decls:8,vars:3,consts:[[1,"app-footer"],[3,"hidden"],["href","https://sasradius.com"],["href","https://www.snono-systems.com/"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"footer",0),c.TgZ(1,"span",1),c.TgZ(2,"a",2),c._uU(3,"SAS Radius"),c.qZA(),c._uU(4),c.TgZ(5,"a",3),c._uU(6,"Snono Systems."),c.qZA(),c.qZA(),c.YNc(7,V,2,1,"span",4),c.qZA()),2&e&&(c.xp6(1),c.Q6J("hidden",t.footer_text.length>2),c.xp6(3),c.hij(" v",t.version," \xa9 2022 "),c.xp6(3),c.Q6J("ngIf",t.footer_text.length>2))},directives:[Q.O5],encapsulation:2}),e}(),E=n(28044),K=n(98835),B=n(86295),j=n(65424),z=n(28184);K(E),B(E),j(E),B(E),z(E);var G=function(){var e=function(){function e(t){o(this,e),this.api=t,this.timerHook=null,this.chart=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.initChart(),this.timerHook=setInterval(function(){return e.load()},5e3)}},{key:"initChart",value:function(){this.chart=E.chart("cpu_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:E.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#DF5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"CPU Load",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}},{key:"load",value:function(){var e=this;this.api.get("advancedDashboard/CpuUsage").subscribe(function(t){200===t.status&&e.chart.series[0].points[0].update(t.data)})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-cpu-gauge"]],decls:1,vars:0,consts:[["id","cpu_gauge_container"]],template:function(e,t){1&e&&c._UZ(0,"div",0)},styles:["#cpu_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e}(),W=n(98835),X=n(86295),ee=n(65424),te=n(28184);W(E),X(E),ee(E),X(E),te(E);var ae=function(){var e=function(){function e(t){o(this,e),this.api=t,this.timerHook=null,this.chart=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.initChart(),this.timerHook=setInterval(function(){return e.load()},1e4)}},{key:"initChart",value:function(){this.chart=E.chart("memory_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:E.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#df5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"Memory Usage",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}},{key:"load",value:function(){var e=this;this.api.get("advancedDashboard/MemoryUsage").subscribe(function(t){200===t.status&&e.chart.series[0].points[0].update(t.data)})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-memory-gauge"]],decls:1,vars:0,consts:[["id","memory_gauge_container"]],template:function(e,t){1&e&&c._UZ(0,"div",0)},styles:["#memory_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e}(),ie=function(){var e=function(){function e(t){o(this,e),this.api=t,this.timerHook=null,this.chart=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.initChart(),this.timerHook=setInterval(function(){return e.load()},12e4)}},{key:"initChart",value:function(){this.chart=E.chart("disk_gauge_container",{chart:{type:"solidgauge",backgroundColor:"rgba(0,0,0,0)"},title:null,pane:{center:["50%","50%"],size:"100%",startAngle:-90,endAngle:90,background:{backgroundColor:E.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.42)",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},exporting:{enabled:!1},tooltip:{enabled:!1},yAxis:{min:0,max:100,stops:[[.1,"#55BF3B"],[.5,"#DDDF0D"],[.9,"#df5353"]],lineWidth:0,tickWidth:0,minorTickInterval:null,tickAmount:2,labels:{y:-10}},plotOptions:{solidgauge:{dataLabels:{color:"#62B5C7",y:-40,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:"Disk Usage",data:[0],dataLabels:{format:'<div style="text-align:center"><span style="font-size:25px">{y}%</span><br/></div>'},tooltip:{valueSuffix:" %"}}]}),this.load()}},{key:"load",value:function(){var e=this;this.api.get("advancedDashboard/DiskUsage").subscribe(function(t){200===t.status&&e.chart.series[0].points[0].update(t.data)})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-system-disk-gauge"]],decls:1,vars:0,consts:[["id","disk_gauge_container"]],template:function(e,t){1&e&&c._UZ(0,"div",0)},styles:["#disk_gauge_container[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),e}(),ne=function(e){return{"text-warning":e}},oe=function(e,t){return{"text-success":e,"text-warning":t}},re=function(e,t){return{"text-success":e,"text-danger":t}},le=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.date=new Date,this.filter={type:"hourly",day:this.date.getDate(),month:this.date.getMonth()+1,year:this.date.getFullYear()},this.subscribersData={},this.financeData={},this.systemHealth={},this.timer1min=null,this.timer10min=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.timer1min=setInterval(function(){e.loadSubscribersWidget(),e.loadSystemHealthWidget(),e.loadFinanceWidget()},6e4),this.timer10min=setInterval(function(){return e.loadOnlineChart()},6e5),this.loadOnlineChart(),this.loadSubscribersWidget(),this.loadFinanceWidget(),this.loadSystemHealthWidget()}},{key:"loadSubscribersWidget",value:function(){var e=this;this.api.get("advancedDashboard/subscribers").subscribe(function(t){200===t.status&&(e.subscribersData=t.data)})}},{key:"loadFinanceWidget",value:function(){var e=this;this.api.get("advancedDashboard/finance").subscribe(function(t){200===t.status&&(e.financeData=t.data)})}},{key:"loadSystemHealthWidget",value:function(){var e=this;this.api.get("advancedDashboard/systemHealth").subscribe(function(t){200===t.status&&(e.systemHealth=t.data)})}},{key:"loadOnlineChart",value:function(){this.api.post("onlineReport",this.filter).subscribe(function(e){if(200===e.status){for(var t=e.data,a={chart:{type:"area",backgroundColor:{linearGradient:{x1:0,y1:0,x2:1,y2:1},stops:[[0,"#263946"],[1,"#263946"]]},style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},yAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#A0A0A3"},text:"Users"},min:0,floor:0,currentMin:0},title:{text:void 0,style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},legend:{backgroundColor:"rgba(0, 0, 0, 0.5)",itemStyle:{color:"#E0E0E3"},itemHoverStyle:{color:"#FFF"},itemHiddenStyle:{color:"#606063"},title:{style:{color:"#C0C0C0"}}},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[]},i=[],n=[],o=function(e){var a=0,o=0;t.map(function(t){t.hour==e&&(a=parseInt(t.n_online),o=parseInt(t.n_total))}),i.push([e,a]),n.push([e,o])},r=0;r<24;r++)o(r);var l={name:"Online Users",data:i,pointInterval:1,color:"#65a2f7"};a.series.push({name:"Active Users",data:n,pointInterval:1,color:"#d9d9d9"}),a.series.push(l);var s=E.chart("online_chart_container",a);window.setTimeout(function(){s.reflow()},2e3)}})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timer1min),clearInterval(this.timer10min)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-advanced-dashboard"]],decls:155,vars:82,consts:[[1,"dashboard-container"],[1,"row","row-eq-height"],[1,"col-md-6","col-sm-12","m-10"],[1,"advanced-widget"],[1,"title"],[1,"fa","fa-2x","fa-users","advanced-widget-badge"],[1,"key"],[1,"value"],[1,"value","text-info"],[1,"value","text-success"],[1,"value","text-warning"],[1,"last-tr"],[1,"fa","fa-2x","fa-chart-bar","advanced-widget-badge"],["id","online_chart_container"],[1,"row","row-eq-height","top-buffer"],[1,"fa","fa-2x","fa-dollar-sign","advanced-widget-badge"],[1,"fa","fa-2x","fa-laptop-medical","advanced-widget-badge"],[1,"value",3,"ngClass"],[1,"row","top-buffer"],[1,"col-md-4","col-sm-12"],[1,"fa","fa-2x","fa-robot","advanced-widget-badge"],[1,"fa","fa-2x","fa-microchip","advanced-widget-badge"],[1,"fa","fa-2x","fa-hdd","advanced-widget-badge"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"h5",4),c._uU(5),c.qZA(),c._UZ(6,"i",5),c.TgZ(7,"table"),c.TgZ(8,"tr"),c.TgZ(9,"td",6),c._uU(10),c.qZA(),c.TgZ(11,"td",7),c._uU(12),c.ALo(13,"number"),c.qZA(),c.qZA(),c.TgZ(14,"tr"),c.TgZ(15,"td",6),c._uU(16),c.qZA(),c.TgZ(17,"td",8),c._uU(18),c.ALo(19,"number"),c.qZA(),c.qZA(),c.TgZ(20,"tr"),c.TgZ(21,"td",6),c._uU(22),c.qZA(),c.TgZ(23,"td",9),c._uU(24),c.ALo(25,"number"),c.qZA(),c.qZA(),c.TgZ(26,"tr"),c.TgZ(27,"td",6),c._uU(28),c.qZA(),c.TgZ(29,"td",10),c._uU(30),c.ALo(31,"number"),c.qZA(),c.qZA(),c.TgZ(32,"tr"),c.TgZ(33,"td",6),c._uU(34),c.qZA(),c.TgZ(35,"td",7),c._uU(36),c.ALo(37,"number"),c.qZA(),c.qZA(),c.TgZ(38,"tr"),c.TgZ(39,"td",6),c._uU(40),c.qZA(),c.TgZ(41,"td",7),c._uU(42),c.ALo(43,"number"),c.qZA(),c.qZA(),c.TgZ(44,"tr"),c.TgZ(45,"td",6),c._uU(46),c.qZA(),c.TgZ(47,"td",7),c._uU(48),c.ALo(49,"number"),c.qZA(),c.qZA(),c.TgZ(50,"tr",11),c.TgZ(51,"td",6),c._uU(52),c.qZA(),c.TgZ(53,"td",7),c._uU(54),c.ALo(55,"number"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(56,"div",2),c.TgZ(57,"div",3),c.TgZ(58,"h5",4),c._uU(59),c.qZA(),c._UZ(60,"i",12),c.TgZ(61,"div",13),c._uU(62," Chart is loading... "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(63,"div",14),c.TgZ(64,"div",2),c.TgZ(65,"div",3),c.TgZ(66,"h5",4),c._uU(67),c.qZA(),c._UZ(68,"i",15),c.TgZ(69,"table"),c.TgZ(70,"tr"),c.TgZ(71,"td",6),c._uU(72),c.qZA(),c.TgZ(73,"td",7),c._uU(74),c.qZA(),c.qZA(),c.TgZ(75,"tr"),c.TgZ(76,"td",6),c._uU(77),c.qZA(),c.TgZ(78,"td",7),c._uU(79),c.qZA(),c.qZA(),c.TgZ(80,"tr"),c.TgZ(81,"td",6),c._uU(82),c.qZA(),c.TgZ(83,"td",7),c._uU(84),c.qZA(),c.qZA(),c.TgZ(85,"tr"),c.TgZ(86,"td",6),c._uU(87),c.qZA(),c.TgZ(88,"td",7),c._uU(89),c.qZA(),c.qZA(),c.TgZ(90,"tr"),c.TgZ(91,"td",6),c._uU(92),c.qZA(),c.TgZ(93,"td",7),c._uU(94),c.qZA(),c.qZA(),c.TgZ(95,"tr",11),c.TgZ(96,"td",6),c._uU(97),c.qZA(),c.TgZ(98,"td",7),c._uU(99),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(100,"div",2),c.TgZ(101,"div",3),c.TgZ(102,"h5",4),c._uU(103),c.qZA(),c._UZ(104,"i",16),c.TgZ(105,"table"),c.TgZ(106,"tr"),c.TgZ(107,"td",6),c._uU(108),c.qZA(),c.TgZ(109,"td",7),c._uU(110),c.qZA(),c.qZA(),c.TgZ(111,"tr"),c.TgZ(112,"td",6),c._uU(113),c.qZA(),c.TgZ(114,"td",17),c._uU(115),c.qZA(),c.qZA(),c.TgZ(116,"tr"),c.TgZ(117,"td",6),c._uU(118),c.qZA(),c.TgZ(119,"td",17),c._uU(120),c.qZA(),c.qZA(),c.TgZ(121,"tr"),c.TgZ(122,"td",6),c._uU(123),c.qZA(),c.TgZ(124,"td",7),c._uU(125),c.qZA(),c.qZA(),c.TgZ(126,"tr"),c.TgZ(127,"td",6),c._uU(128),c.qZA(),c.TgZ(129,"td",7),c._uU(130),c.qZA(),c.qZA(),c.TgZ(131,"tr",11),c.TgZ(132,"td",6),c._uU(133),c.qZA(),c.TgZ(134,"td",17),c._uU(135),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(136,"div",18),c.TgZ(137,"div",19),c.TgZ(138,"div",3),c.TgZ(139,"h5",4),c._uU(140),c.qZA(),c._UZ(141,"i",20),c._UZ(142,"app-cpu-gauge"),c.qZA(),c.qZA(),c.TgZ(143,"div",19),c.TgZ(144,"div",3),c.TgZ(145,"h5",4),c._uU(146),c.qZA(),c._UZ(147,"i",21),c._UZ(148,"app-memory-gauge"),c.qZA(),c.qZA(),c.TgZ(149,"div",19),c.TgZ(150,"div",3),c.TgZ(151,"h5",4),c._uU(152),c.qZA(),c._UZ(153,"i",22),c._UZ(154,"app-system-disk-gauge"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Oqu(t.tr.translate("aboard_label_subscribers")),c.xp6(5),c.Oqu(t.tr.translate("widget_title_total_users")),c.xp6(2),c.Oqu(c.xi3(13,50,null==t.subscribersData?null:t.subscribersData.total,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_online_users")),c.xp6(2),c.Oqu(c.xi3(19,53,null==t.subscribersData?null:t.subscribersData.online,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_active_users")),c.xp6(2),c.Oqu(c.xi3(25,56,null==t.subscribersData?null:t.subscribersData.active,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_expired_users")),c.xp6(2),c.Oqu(c.xi3(31,59,null==t.subscribersData?null:t.subscribersData.expired,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_expiring_today")),c.xp6(2),c.Oqu(c.xi3(37,62,null==t.subscribersData?null:t.subscribersData.expiring_today,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_about_expire")),c.xp6(2),c.Oqu(c.xi3(43,65,null==t.subscribersData?null:t.subscribersData.expiring_soon,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("widget_title_fup_online")),c.xp6(2),c.Oqu(c.xi3(49,68,null==t.subscribersData?null:t.subscribersData.fup,"1.0-0")),c.xp6(4),c.Oqu(t.tr.translate("menu_managers")),c.xp6(2),c.Oqu(c.xi3(55,71,null==t.subscribersData?null:t.subscribersData.managers,"1.0-0")),c.xp6(5),c.Oqu(t.tr.translate("aboard_label_online_users")),c.xp6(8),c.Oqu(t.tr.translate("aboard_label_finance")),c.xp6(5),c.Oqu(t.tr.translate("widget_title_balance")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.balance),c.xp6(3),c.Oqu(t.tr.translate("widget_title_reward_points")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.reward_points),c.xp6(3),c.Oqu(t.tr.translate("aboard_activations_today")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.activations),c.xp6(3),c.Oqu(t.tr.translate("aboard_registrations_today")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.registrations),c.xp6(3),c.Oqu(t.tr.translate("aboard_outstanding_debts")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.outstanding_debts),c.xp6(3),c.Oqu(t.tr.translate("aboard_outstanding_claims")),c.xp6(2),c.Oqu(null==t.financeData?null:t.financeData.outstanding_claims),c.xp6(4),c.Oqu(t.tr.translate("aboard_label_system_health")),c.xp6(5),c.Oqu(t.tr.translate("aboard_server_uptime")),c.xp6(2),c.Oqu(null==t.systemHealth?null:t.systemHealth.uptime),c.xp6(3),c.Oqu(t.tr.translate("aboard_backup")),c.xp6(1),c.Q6J("ngClass",c.VKq(74,ne,(null==t.systemHealth.backup?null:t.systemHealth.backup.indexOf("system disk"))>0)),c.xp6(1),c.Oqu(null==t.systemHealth?null:t.systemHealth.backup),c.xp6(3),c.Oqu(t.tr.translate("aboard_network_status")),c.xp6(1),c.Q6J("ngClass",c.WLB(76,oe,"Internet Reachable"===t.systemHealth.network,"Internet Reachable"!==t.systemHealth.network)),c.xp6(1),c.Oqu(t.systemHealth.network),c.xp6(3),c.Oqu(t.tr.translate("aboard_label_db_time")),c.xp6(2),c.Oqu(t.systemHealth.db_time),c.xp6(3),c.Oqu(t.tr.translate("aboard_label_timezone")),c.xp6(2),c.Oqu(t.systemHealth.timezone),c.xp6(3),c.Oqu(t.tr.translate("aboard_license_status")),c.xp6(1),c.Q6J("ngClass",c.WLB(79,re,"active"==t.systemHealth.license,"active"!=t.systemHealth.license)),c.xp6(1),c.Oqu(null==t.systemHealth?null:t.systemHealth.license),c.xp6(5),c.Oqu(t.tr.translate("aboard_label_cpu")),c.xp6(6),c.Oqu(t.tr.translate("aboard_label_memory")),c.xp6(6),c.Oqu(t.tr.translate("aboard_label_disk")))},directives:[Q.mk,G,ae,ie],pipes:[Q.JJ],styles:[".dashboard-container[_ngcontent-%COMP%]{background:#314757;width:100%;height:100%;padding:10px}.advanced-widget[_ngcontent-%COMP%]{background:#263946;border:8px solid #263946;box-shadow:inset 0 0 0 1px rgba(255,255,255,.34);box-sizing:border-box;padding:10px;height:100%}.advanced-widget[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:rgba(254,254,254,.93);text-transform:uppercase}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(255,255,255,.24);height:35px}.advanced-widget[_ngcontent-%COMP%]   .last-tr[_ngcontent-%COMP%]{border-bottom:unset!important}.advanced-widget[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:rgba(45,45,45,.4)}.advanced-widget[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{color:#62b5c7}.advanced-widget-badge[_ngcontent-%COMP%]{color:rgba(255,255,255,.73);position:absolute;right:35px;top:15px}.advanced-widget[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#fff;font-weight:600;direction:ltr}#online_chart_container[_ngcontent-%COMP%]{max-height:250px}@media (min-width:767px){.top-buffer[_ngcontent-%COMP%]{margin-top:10px}}"]}),e}();function se(e,t){if(1&e&&c._UZ(0,"app-dashboard-simple-widget",5),2&e){var a=c.oxw(2);c.Q6J("data",a._widgetData)}}function ce(e,t){if(1&e&&c._UZ(0,"app-dashboard-percentage-widget",6),2&e){var a=c.oxw(2);c.Q6J("data",a._widgetData)}}function ue(e,t){if(1&e&&c._UZ(0,"app-dashboard-data-list-widget",6),2&e){var a=c.oxw(2);c.Q6J("data",a._widgetData)}}function de(e,t){if(1&e&&c._UZ(0,"app-dashboard-gauge-widget",6),2&e){var a=c.oxw(2);c.Q6J("data",a._widgetData)}}function fe(e,t){if(1&e&&c._UZ(0,"app-dashboard-simple-widget2",6),2&e){var a=c.oxw(2);c.Q6J("data",a._widgetData)}}function pe(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",1),c.TgZ(1,"div",2),c.NdJ("click",function(){return c.CHM(a),c.oxw()._clicked()}),c.YNc(2,se,1,1,"app-dashboard-simple-widget",3),c.YNc(3,ce,1,1,"app-dashboard-percentage-widget",4),c.YNc(4,ue,1,1,"app-dashboard-data-list-widget",4),c.YNc(5,de,1,1,"app-dashboard-gauge-widget",4),c.YNc(6,fe,1,1,"app-dashboard-simple-widget2",4),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngSwitch",i._widgetData.type),c.xp6(1),c.Q6J("ngSwitchCase",1),c.xp6(1),c.Q6J("ngSwitchCase",2),c.xp6(1),c.Q6J("ngSwitchCase",4),c.xp6(1),c.Q6J("ngSwitchCase",5),c.xp6(1),c.Q6J("ngSwitchCase",6)}}var ge=function(){var e=function(){function e(){o(this,e),this.click=new c.vpe,this._widgetData=null}return l(e,[{key:"ngOnChanges",value:function(){this._widgetData=this.widget}},{key:"ngOnInit",value:function(){}},{key:"_clicked",value:function(){this.click.emit()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-widget"]],inputs:{widget:"widget"},outputs:{click:"click"},features:[c.TTD],decls:1,vars:1,consts:[["class","full-height",4,"ngIf"],[1,"full-height"],[1,"full-height",3,"ngSwitch","click"],["class","full-height",3,"data",4,"ngSwitchCase"],[3,"data",4,"ngSwitchCase"],[1,"full-height",3,"data"],[3,"data"]],template:function(e,t){1&e&&c.YNc(0,pe,7,6,"div",0),2&e&&c.Q6J("ngIf",t._widgetData)},styles:[".full-height{height:100%}\n"],encapsulation:2}),e}();function he(e,t){1&e&&(c.TgZ(0,"div",3),c._UZ(1,"i",4),c._uU(2," Your license is about to expire soon.\n"),c.qZA())}function me(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"strong"),c._uU(2),c.qZA(),c.TgZ(3,"button",6),c.NdJ("click",function(){return c.CHM(a),c.oxw().alert.dismissed=!0}),c.TgZ(4,"span",7),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.Gre("alert alert-",null==i.alert?null:i.alert.type," alert-dismissible fade show text-center"),c.xp6(2),c.Oqu(null==i.alert?null:i.alert.text)}}function _e(e,t){1&e&&c._UZ(0,"app-advanced-dashboard")}function ve(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"div",11),c.TgZ(2,"img",12),c.NdJ("error",function(){return c.CHM(a),c.oxw(2).logo_url="assets/img/sas.png"}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.s9C("src",i.logo_url,c.LSH)}}function be(e,t){if(1&e&&(c.TgZ(0,"div"),c._UZ(1,"app-dashboard-widget",15),c.qZA()),2&e){var a=t.$implicit;c.Gre("widget-component col-md-",a.width," col-sm-12"),c.xp6(1),c.Q6J("widget",a)}}function Ze(e,t){if(1&e&&(c.TgZ(0,"div",13),c.YNc(1,be,2,4,"div",14),c.qZA()),2&e){var a=t.$implicit;c.Q6J("id",a.id),c.xp6(1),c.Q6J("ngForOf",a.widgets)}}function ye(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,ve,3,1,"div",8),c.YNc(2,Ze,2,2,"div",9),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf","1"==a.config.siteConfig.site_show_logo),c.xp6(1),c.Q6J("ngForOf",a.dashboard_rows)}}var we=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.config=a,this.auth=i,this.dashboard_rows=[],this.logo_url="",this.license_about_expire=!1,this.alert={enabled:!1},this.dashboard_id=null,this.load(),this.logo_url=this.config.getApiUrl()+"resources/logo"}return l(e,[{key:"load",value:function(){var e=this;this.api.get("dashboard").subscribe(function(t){200===t.status&&(e.dashboard_rows=t.data.widgets,e.alert=t.data.alert,e.alert.dismissed=!1,e.dashboard_id=t.data.id)})}},{key:"setDefaultLogo",value:function(){this.logo_url="assets/img/sas.png"}},{key:"checkLicenseExpiration",value:function(){var e=new Date,t=Date.parse(this.auth.license_expiration),a=e.getTime(),i=Math.abs(t-a);Math.ceil(i/864e5)<4&&(this.license_about_expire=!0)}},{key:"ngOnInit",value:function(){this.checkLicenseExpiration()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(p),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:4,vars:4,consts:[["class","alert alert-danger",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"fa","fa-exclamation-circle"],["role","alert"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["class","row d-sm-none d-xs-none d-md-block",4,"ngIf"],["class","row row-flex",3,"id",4,"ngFor","ngForOf"],[1,"row","d-sm-none","d-xs-none","d-md-block"],[1,"col","logo-container","d-none","d-sm-none","d-md-block"],[3,"src","error"],[1,"row","row-flex",3,"id"],[3,"class",4,"ngFor","ngForOf"],[3,"widget"]],template:function(e,t){1&e&&(c.YNc(0,he,3,0,"div",0),c.YNc(1,me,6,4,"div",1),c.YNc(2,_e,1,0,"app-advanced-dashboard",2),c.YNc(3,ye,3,2,"div",2)),2&e&&(c.Q6J("ngIf",!0===t.license_about_expire),c.xp6(1),c.Q6J("ngIf",t.alert&&!0===t.alert.enabled&&!t.alert.dismissed),c.xp6(1),c.Q6J("ngIf",0===t.dashboard_id),c.xp6(1),c.Q6J("ngIf",t.dashboard_id>0))},directives:[Q.O5,le,Q.sg,ge],styles:[".widget-component[_ngcontent-%COMP%]{margin-bottom:.5em}.logo-container[_ngcontent-%COMP%]{text-align:center;padding:20px;width:100%}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:500px}"]}),e}(),xe=n(45435);function Ae(e,t){1&e&&(c.TgZ(0,"div",2),c._uU(1," License is inactive. Please check your "),c.TgZ(2,"a",3),c._uU(3,"license"),c.qZA(),c._uU(4,".\n"),c.qZA())}function qe(e,t){if(1&e&&(c.TgZ(0,"a",8),c._uU(1),c.qZA()),2&e){var a=c.oxw(2).$implicit;c.Q6J("routerLink",a.url),c.xp6(1),c.Oqu(a.label.title)}}function Te(e,t){if(1&e&&(c.TgZ(0,"span",8),c._uU(1),c.qZA()),2&e){var a=c.oxw(2).$implicit;c.Q6J("routerLink",a.url),c.xp6(1),c.Oqu(a.label.title)}}var ke=function(e){return{active:e}};function Ce(e,t){if(1&e&&(c.TgZ(0,"li",6),c.YNc(1,qe,2,2,"a",7),c.YNc(2,Te,2,2,"span",7),c.qZA()),2&e){var a=c.oxw().last;c.Q6J("ngClass",c.VKq(3,ke,a)),c.xp6(1),c.Q6J("ngIf",!a),c.xp6(1),c.Q6J("ngIf",a)}}function Ue(e,t){if(1&e&&c.YNc(0,Ce,3,5,"li",5),2&e){var a=t.$implicit,i=t.last;c.Q6J("ngIf",a.label.title&&"/"==a.url.substring(a.url.length-1)||a.label.title&&i)}}function Me(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Ue,1,1,"ng-template",4),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.breadcrumbs)}}var Fe=function(){var e=l(function e(t,a,i){var n=this;o(this,e),this.router=t,this.route=a,this.auth=i,this.router.events.pipe((0,xe.h)(function(e){return e instanceof _.m2})).subscribe(function(e){n.breadcrumbs=[];var t=n.route.root,a="";do{var i=t.children;t=null,i.forEach(function(e){"primary"===e.outlet&&(a+="/"+e.snapshot.url.map(function(e){return e.path}).join("/"),n.breadcrumbs.push({label:e.snapshot.data,url:a}),t=e)})}while(t)})});return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.F0),c.Y36(_.gz),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-breadcrumbs"]],decls:2,vars:2,consts:[["style","width: 100%; background-color: #ffdbd1; padding: 10px;",4,"ngIf"],[4,"ngIf"],[2,"width","100%","background-color","#ffdbd1","padding","10px"],["href","#/settings/license"],["ngFor","",3,"ngForOf"],["class","breadcrumb-item",3,"ngClass",4,"ngIf"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"routerLink"]],template:function(e,t){1&e&&(c.YNc(0,Ae,5,0,"div",0),c.YNc(1,Me,2,1,"div",1)),2&e&&(c.Q6J("ngIf",1!=t.auth.license_status&&t.auth.has("prm_managers_sysadmin")),c.xp6(1),c.Q6J("ngIf",1==t.auth.license_status))},directives:[Q.O5,Q.sg,Q.mk,_.yS,_.rH],encapsulation:2}),e}(),Je=function(){var e=function(){function e(t){o(this,e),this.translator=t}return l(e,[{key:"transform",value:function(e){return this.translator.translate(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I,16))},e.\u0275pipe=c.Yjl({name:"translate",type:e,pure:!0}),e}();function Oe(e,t){1&e&&c._UZ(0,"li",5)}function Ne(e,t){if(1&e&&c._UZ(0,"app-sidebar-nav-title",6),2&e){var a=c.oxw().$implicit;c.Q6J("title",a)}}function Ie(e,t){if(1&e&&c._UZ(0,"app-sidebar-nav-item",7),2&e){var a=c.oxw().$implicit;c.Q6J("item",a)}}function Ye(e,t){if(1&e&&(c.YNc(0,Oe,1,0,"li",3),c.YNc(1,Ne,1,1,"ng-template",4),c.YNc(2,Ie,1,1,"ng-template",4)),2&e){var a=t.$implicit,i=c.oxw();c.Q6J("ngIf",i.isDivider(a)),c.xp6(1),c.Q6J("ngIf",i.isTitle(a)),c.xp6(1),c.Q6J("ngIf",!i.isDivider(a)&&!i.isTitle(a))}}function Qe(e,t){if(1&e&&(c.TgZ(0,"li",2),c._UZ(1,"app-sidebar-nav-link",3),c.qZA()),2&e){var a=c.oxw();c.Q6J("ngClass",a.hasClass()?"nav-item "+a.item.class:"nav-item"),c.xp6(1),c.Q6J("link",a.item)}}function Se(e,t){if(1&e&&(c.TgZ(0,"li",4),c._UZ(1,"app-sidebar-nav-dropdown",3),c.qZA()),2&e){var a=c.oxw();c.ekj("open",a.isActive()),c.Q6J("ngClass",a.hasClass()?"nav-item nav-dropdown "+a.item.class:"nav-item nav-dropdown"),c.xp6(1),c.Q6J("link",a.item)}}function Pe(e,t){if(1&e&&c._UZ(0,"i"),2&e){var a=c.oxw(2);c.Tol(a.link.icon)}}function De(e,t){if(1&e&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.Q6J("ngClass","badge badge-"+a.link.badge.variant),c.xp6(1),c.Oqu(a.link.badge.text)}}var He=function(e){return[e]},Re=function(){return{}};function Ve(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",2),c.NdJ("click",function(){return c.CHM(a),c.oxw().hideMobile()}),c.YNc(1,Pe,1,3,"i",3),c._uU(2),c.ALo(3,"translate"),c.YNc(4,De,2,2,"span",4),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",i.hasVariant()?"nav-link nav-link-"+i.link.variant:"nav-link")("routerLink",c.VKq(8,He,i.link.url))("routerLinkActiveOptions",c.DdM(10,Re)),c.xp6(1),c.Q6J("ngIf",i.isIcon()),c.xp6(1),c.hij(" ",c.lcZ(3,6,i.link.name)," "),c.xp6(2),c.Q6J("ngIf",i.isBadge())}}function Le(e,t){if(1&e&&c._UZ(0,"i"),2&e){var a=c.oxw(2);c.Tol(a.link.icon)}}function Ee(e,t){if(1&e&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.Q6J("ngClass","badge badge-"+a.link.badge.variant),c.xp6(1),c.Oqu(a.link.badge.text)}}function Ke(e,t){if(1&e&&(c.TgZ(0,"a",6),c.YNc(1,Le,1,3,"i",3),c._uU(2),c.ALo(3,"translate"),c.YNc(4,Ee,2,2,"span",4),c.qZA()),2&e){var a=c.oxw();c.s9C("href",a.link.url,c.LSH),c.Q6J("ngClass",a.hasVariant()?"nav-link nav-link-"+a.link.variant:"nav-link"),c.xp6(1),c.Q6J("ngIf",a.isIcon()),c.xp6(1),c.hij(" ",c.lcZ(3,5,a.link.name)," "),c.xp6(2),c.Q6J("ngIf",a.isBadge())}}function Be(e,t){if(1&e&&c._UZ(0,"i"),2&e){var a=c.oxw();c.Tol(a.link.icon)}}function je(e,t){if(1&e&&(c.TgZ(0,"span",5),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.Q6J("ngClass","badge badge-"+a.link.badge.variant),c.xp6(1),c.Oqu(a.link.badge.text)}}function ze(e,t){1&e&&c._UZ(0,"app-sidebar-nav-item",6),2&e&&c.Q6J("item",t.$implicit)}var Ge=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.config=a,this.navigation=[],this.menu_logo_url=null,this.load()}return l(e,[{key:"isDivider",value:function(e){return!!e.divider}},{key:"isTitle",value:function(e){return!!e.title}},{key:"ngOnInit",value:function(){var e;if((null===(e=this.config.siteConfig)||void 0===e?void 0:e.menu_logo.length)>4){this.menu_logo_url=this.config.getApiUrl()+"resources/menuLogo";var t=document.getElementsByClassName("navbar-brand")[0];console.log(t),t&&document.styleSheets[0].insertRule(".navbar-brand { background-image: url("+this.menu_logo_url+") !important;}",0)}}},{key:"load",value:function(){var e,t=this,a=[];this.api.get("resources/menu").subscribe(function(n){var o,r=n,l=i(r);try{for(l.s();!(o=l.n()).done;){var s=o.value;if("root"==s.parent){e={name:s.title,url:s.link,icon:s.icon,weight:s.weight};var c,u=i(r);try{for(u.s();!(c=u.n()).done;){var d=c.value;if("root"!=d.parent&&d.parent==s.name){var f={name:d.title,url:d.link,icon:d.icon};e.children||(e.children=[]),e.children.push(f)}}}catch(p){u.e(p)}finally{u.f()}a.push(e)}}}catch(p){l.e(p)}finally{l.f()}a.sort(function(e,t){return e.weight<t.weight?-1:1}),t.navigation=a})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(p))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sidebar-nav"]],decls:3,vars:1,consts:[[1,"sidebar-nav"],[1,"nav"],["ngFor","",3,"ngForOf"],["class","nav-divider",4,"ngIf"],[3,"ngIf"],[1,"nav-divider"],[3,"title"],[3,"item"]],template:function(e,t){1&e&&(c.TgZ(0,"nav",0),c.TgZ(1,"ul",1),c.YNc(2,Ye,3,3,"ng-template",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngForOf",t.navigation))},directives:function(){return[Q.sg,Q.O5,C,et,We]},encapsulation:2}),e}(),We=function(){var e=function(){function e(t){o(this,e),this.router=t}return l(e,[{key:"hasClass",value:function(){return!!this.item.class}},{key:"isDropdown",value:function(){return!!this.item.children}},{key:"thisUrl",value:function(){return this.item.url}},{key:"isActive",value:function(){return this.router.isActive(this.thisUrl(),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sidebar-nav-item"]],inputs:{item:"item"},decls:3,vars:2,consts:[[3,"ngClass",4,"ngIf","ngIfElse"],["dropdown",""],[3,"ngClass"],[3,"link"],["routerLinkActive","open","appNavDropdown","",3,"ngClass"]],template:function(e,t){if(1&e&&(c.YNc(0,Qe,2,2,"li",0),c.YNc(1,Se,2,4,"ng-template",null,1,c.W1O)),2&e){var a=c.MAs(2);c.Q6J("ngIf",!t.isDropdown())("ngIfElse",a)}},directives:function(){return[Q.O5,Q.mk,C,$e,_.Od,T,Xe]},encapsulation:2}),e}(),$e=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"hasVariant",value:function(){return!!this.link.variant}},{key:"isBadge",value:function(){return!!this.link.badge}},{key:"isExternalLink",value:function(){return"http"===this.link.url.substring(0,4)}},{key:"isIcon",value:function(){return!!this.link.icon}},{key:"hideMobile",value:function(){document.body.classList.contains("sidebar-mobile-show")&&document.body.classList.toggle("sidebar-mobile-show")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sidebar-nav-link"]],inputs:{link:"link"},decls:3,vars:2,consts:[["routerLinkActive","active",3,"ngClass","routerLink","routerLinkActiveOptions","click",4,"ngIf","ngIfElse"],["external",""],["routerLinkActive","active",3,"ngClass","routerLink","routerLinkActiveOptions","click"],[3,"class",4,"ngIf"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"ngClass","href"]],template:function(e,t){if(1&e&&(c.YNc(0,Ve,5,11,"a",0),c.YNc(1,Ke,5,7,"ng-template",null,1,c.W1O)),2&e){var a=c.MAs(2);c.Q6J("ngIf",!t.isExternalLink())("ngIfElse",a)}},directives:[Q.O5,_.yS,_.Od,Q.mk],pipes:[Je],encapsulation:2}),e}(),Xe=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"isBadge",value:function(){return!!this.link.badge}},{key:"isIcon",value:function(){return!!this.link.icon}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sidebar-nav-dropdown"]],inputs:{link:"link"},decls:7,vars:6,consts:[["appNavDropdownToggle","",1,"nav-link","nav-dropdown-toggle"],[3,"class",4,"ngIf"],[3,"ngClass",4,"ngIf"],[1,"nav-dropdown-items"],["ngFor","",3,"ngForOf"],[3,"ngClass"],[3,"item"]],template:function(e,t){1&e&&(c.TgZ(0,"a",0),c.YNc(1,Be,1,3,"i",1),c._uU(2),c.ALo(3,"translate"),c.YNc(4,je,2,2,"span",2),c.qZA(),c.TgZ(5,"ul",3),c.YNc(6,ze,1,1,"ng-template",4),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.isIcon()),c.xp6(1),c.hij(" ",c.lcZ(3,4,t.link.name)," "),c.xp6(2),c.Q6J("ngIf",t.isBadge()),c.xp6(2),c.Q6J("ngForOf",t.link.children))},directives:[k,Q.O5,Q.sg,Q.mk,C,We],pipes:[Je],encapsulation:2}),e}(),et=function(){var e=function(){function e(t,a){o(this,e),this.el=t,this.renderer=a}return l(e,[{key:"ngOnInit",value:function(){var e=this.el.nativeElement,t=this.renderer.createElement("li"),a=this.renderer.createText(this.title.name);if(this.renderer.addClass(t,"nav-title"),this.title.class&&this.renderer.addClass(t,this.title.class),this.title.wrapper){var i=this.renderer.createElement(this.title.wrapper.element);this.renderer.appendChild(i,a),this.renderer.appendChild(t,i)}else this.renderer.appendChild(t,a);this.renderer.appendChild(e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq),c.Y36(c.Qsj))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sidebar-nav-title"]],inputs:{title:"title"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),tt=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"prompt",value:function(e,t){return t||(t=""),this.response=new h.y(function(a){swal({title:e,input:"text",showCancelButton:!0,confirmButtonText:"Ok",allowOutsideClick:!1,animation:!1,inputValue:t}).then(function(e){a.next(e),a.complete()},function(){a.complete()})}),this.response}},{key:"confirm",value:function(e){return this.response=new h.y(function(t){swal({title:e.title,text:e.text,type:e.type,showCancelButton:!0,animation:!1,confirmButtonText:e.confirmButtonText||"Ok"}).then(function(){t.next("ok"),t.complete()},function(){t.complete()})}),this.response}},{key:"alert",value:function(e){swal(e.title||"",e.text,e.type||"default")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),at=n(63301),it=function(){var e=function(){function e(){o(this,e),this.data=[],this.container="",this.onNodeSelected=new c.vpe,this.selectedNode=null,this.tree=null}return l(e,[{key:"ngOnInit",value:function(){}},{key:"init_tree",value:function(){var e=this;jQuery(this.container).jstree(),void 0!==jQuery(this.container).jstree().destroy&&(console.log("destroying a tree"),jQuery(this.container).jstree().destroy()),jQuery(this.container).jstree({plugins:["search","types"],core:{multiple:!1,data:this.data,check_callback:!0}}).on("changed.jstree",function(t,a){e.selectedNode=a.selected[0],e.onNodeSelected.emit(a.selected[0])}),this.tree=jQuery(this.container).jstree(!0)}},{key:"ngOnChanges",value:function(){this.init_tree()}},{key:"getSelectedNode",value:function(){return this.tree.get_node(this.selectedNode)}},{key:"addNode",value:function(e){var t=this.tree.create_node(e.parent,e,"last");return t||(this.tree.create_node("#",{id:e.parent,text:e.parent,type:"folder",state:{opened:!0}},"last"),t=this.tree.create_node(e.parent,e,"last")),t}},{key:"deleteNode",value:function(e){return this.tree.delete_node(e)}},{key:"getAllNodes",value:function(){return this.tree.get_json("#",{flat:!0})}},{key:"search",value:function(e){this.tree.search(e)}},{key:"ngAfterViewChecked",value:function(){null!==this.tree&&void 0!==this.tree.search||this.init_tree()}},{key:"destroyTree",value:function(){delete this.tree,this.tree=null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["js-tree"]],inputs:{data:"data",container:"container"},outputs:{onNodeSelected:"onNodeSelected"},features:[c.TTD],decls:1,vars:0,consts:[["id","my_tree"]],template:function(e,t){1&e&&c._UZ(0,"div",0)},encapsulation:2}),e}(),nt=n(17238),ot=["data_table"],rt=["advancedFilter"];function lt(e,t){if(1&e&&(c.TgZ(0,"span",39),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.lnq(" \xa0\xa0\xa0\xa0| ",a.tr.translate("global_table_label_found")," ",a.dataTable.totalItems," \xa0",a.tr.translate("global_table_label_records")," ")}}function st(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",40),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw()._onCustomHeaderAction(e.action)}),c.TgZ(1,"span",12),c._UZ(2,"i"),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Tol(i.icon)}}function ct(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"li"),c.TgZ(1,"div",43),c.TgZ(2,"div",44),c.TgZ(3,"input",45),c.NdJ("change",function(){var e=c.CHM(a).$implicit;return c.oxw(2).toggleColumn(e.dataKey)}),c.qZA(),c.TgZ(4,"label",46),c._uU(5),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(3),c.MGl("id","column_selector_",i.dataKey,""),c.Q6J("checked",!i.hidden),c.xp6(1),c.MGl("for","column_selector_",i.dataKey,""),c.xp6(1),c.Oqu(i.label)}}function ut(e,t){if(1&e&&(c.TgZ(0,"ul",41),c.YNc(1,ct,6,4,"li",42),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.modelViewConfig.columns)}}function dt(e,t){1&e&&c._UZ(0,"i",47)}function ft(e,t){1&e&&c._UZ(0,"i",48)}function pt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"ul",49),c.TgZ(1,"li"),c.TgZ(2,"div",50),c.NdJ("click",function(){return c.CHM(a),c.oxw().setRefresh(0)}),c._UZ(3,"i",47),c._uU(4," No Refresh "),c.qZA(),c.qZA(),c.TgZ(5,"li"),c.TgZ(6,"div",50),c.NdJ("click",function(){return c.CHM(a),c.oxw().setRefresh(5)}),c._UZ(7,"i",51),c._uU(8," 5 secs "),c.qZA(),c.qZA(),c.TgZ(9,"li"),c.TgZ(10,"div",50),c.NdJ("click",function(){return c.CHM(a),c.oxw().setRefresh(10)}),c._UZ(11,"i",51),c._uU(12," 10 secs "),c.qZA(),c.qZA(),c.TgZ(13,"li"),c.TgZ(14,"div",50),c.NdJ("click",function(){return c.CHM(a),c.oxw().setRefresh(20)}),c._UZ(15,"i",51),c._uU(16," 20 secs "),c.qZA(),c.qZA(),c.qZA()}}function gt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",52),c.NdJ("click",function(){return c.CHM(a),c.oxw().toggleAdvancedFilter()}),c.TgZ(1,"span",12),c._UZ(2,"i",53),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.s9C("pTooltip",i.tr.translate("table_show_hide_filter"))}}function ht(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",54),c.NdJ("click",function(){return c.CHM(a),c.oxw().export()}),c.TgZ(1,"span",12),c._UZ(2,"i",55),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.s9C("pTooltip",i.tr.translate("table_export_data"))}}function mt(e,t){if(1&e&&c._UZ(0,"i"),2&e){var a=c.oxw(2).$implicit;c.Tol(a.icon)}}function _t(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",66),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit;return c.oxw(3).fire_action(e.name)}),c.YNc(1,mt,1,3,"i",67),c._uU(2),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw(3);c.Q6J("hidden",i.acl&&!n.auth.has(i.acl)),c.xp6(1),c.Q6J("ngIf",i.icon),c.xp6(1),c.hij("\xa0 ",i.label," ")}}var vt=function(e,t){return{"divider dropdown-divider":e,"action-disabled":t}};function bt(e,t){if(1&e&&(c.TgZ(0,"li",64),c.YNc(1,_t,3,3,"a",65),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(3);c.Q6J("ngClass",c.WLB(2,vt,a.type&&"separator"==a.type,a.requiresRow&&!i.currentRow&&!(a.multipleRows&&i.selectedRows().length>0))),c.xp6(1),c.Q6J("ngIf",!a.type||"separator"!=a.type)}}function Zt(e,t){if(1&e&&(c.TgZ(0,"ul",62),c.YNc(1,bt,2,5,"li",63),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.Q6J("ngForOf",a.modelViewConfig.actions)}}function yt(e,t){if(1&e&&(c.TgZ(0,"div",56),c.TgZ(1,"div",57),c.TgZ(2,"button",58),c._UZ(3,"i",59),c._uU(4),c._UZ(5,"span",60),c.qZA(),c.YNc(6,Zt,2,1,"ul",61),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.hij(" ",a.tr.translate("global_table_actions")," ")}}function wt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",68),c.TgZ(1,"i",23),c.NdJ("click",function(){return c.CHM(a),c.oxw().reload()}),c.qZA(),c.qZA()}}function xt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"data-table",71,72),c.NdJ("dataLoaded",function(){return c.CHM(a),c.oxw(2).fire_onDataLoaded()})("dataLoading",function(){return c.CHM(a),c.oxw(2).fire_onDataLoading()})("onCellClicked",function(e){return c.CHM(a),c.oxw(2).fire_cellClicked(e)})("onCellMiddleClicked",function(e){return c.CHM(a),c.oxw(2).fire_cellMiddleClicked(e)})("onRowSelected",function(e){return c.CHM(a),c.oxw(2).fire_rowSelected(e)})("onAction",function(e){return c.CHM(a),c.oxw(2).fire_action(e)})("networkError",function(){return c.CHM(a),c.oxw(2).fire_networkError()})("onUrlFilterChanged",function(e){return c.CHM(a),c.oxw(2).fire_dataTableUrlChanged(e)})("onAdvancedFilterLoadedFromUrl",function(e){return c.CHM(a),c.oxw(2).fire_advancedTableLoadedFromUrl(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("tableConfig",i.tableConfig)}}function At(e,t){if(1&e&&(c.TgZ(0,"div",69),c.YNc(1,xt,2,1,"data-table",70),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.tableConfig)}}function qt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"advanced-filter",73,74),c.NdJ("changed",function(e){return c.CHM(a),c.oxw().onAdvancedFilterChanged(e)})("close",function(){return c.CHM(a),c.oxw().toggleAdvancedFilter()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("fields",i.advancedFilterFields)("options",i.advancedFilterOptions)}}var Tt=function(){function e(t,a,i){o(this,e),this.auth=t,this.tr=a,this.ch=i,this.advancedFilterFields=[],this.advancedFilterOptions={},this.onDataLoading=new c.vpe,this.onDataLoaded=new c.vpe,this.onCellClicked=new c.vpe,this.onCellMiddleClicked=new c.vpe,this.onAction=new c.vpe,this.onRowSelected=new c.vpe,this.currentRow=null,this.searchKeyword=null,this.loading=!1,this.advancedFilterVisible=!1,this.rowsCount=0,this.timerHook=null,this.refreshInterval=0}return l(e,[{key:"ngOnInit",value:function(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()})}},{key:"ngOnChanges",value:function(){var e={columns:this.modelViewConfig.columns,dataUrl:this.modelViewConfig.dataUrl,rowsPerPage:this.modelViewConfig.rowsPerPage||10,page:this.modelViewConfig.page||1,primaryKey:this.modelViewConfig.primaryKey||"id",allowSelect:this.modelViewConfig.allowSelect||!1,allowMultipleSelect:this.modelViewConfig.allowMultipleSelect||!1,hasInlineActions:this.modelViewConfig.hasInlineActions||!1,actions:this.modelViewConfig.actions||null,sortBy:this.modelViewConfig.sortBy||null,direction:this.modelViewConfig.direction||"asc",useUrlFilter:this.modelViewConfig.useUrlFilter||!1};e.useUrlFilter=!1!==this.modelViewConfig.useUrlFilter,this.tableConfig=e,this.modelViewConfig.showAdvancedFilter&&!0===this.modelViewConfig.showAdvancedFilter&&(this.advancedFilterVisible=!0),this.loadLocalConfig()}},{key:"fire_action",value:function(e){var t,a=i(this.tableConfig.actions);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.name==e&&n.requiresRow&&!this.currentRow)return}}catch(o){a.e(o)}finally{a.f()}this.onAction.emit({action:e,row:this.currentRow})}},{key:"fire_rowSelected",value:function(e){this.currentRow=e,this.onRowSelected.emit(e)}},{key:"fire_cellClicked",value:function(e){this.onCellClicked.emit(e)}},{key:"fire_cellMiddleClicked",value:function(e){this.onCellMiddleClicked.emit(e)}},{key:"reload",value:function(){this.dataTable.load()}},{key:"toggleColumn",value:function(e){var t,a=0,n=this.tableConfig.columns.slice(),o=i(n);try{for(o.s();!(t=o.n()).done;){if(t.value.dataKey==e){var r=!1;n[a].hidden&&!0===n[a].hidden&&(r=!0),n[a].hidden=!r}a++}}catch(l){o.e(l)}finally{o.f()}this.updateLocalConfig(),this.reload()}},{key:"fire_onDataLoading",value:function(){this.onDataLoading.emit(!0),this.loading=!0,this.blockUI.start("loading...")}},{key:"fire_onDataLoaded",value:function(){this.onDataLoaded.emit(!0),this.loading=!1,this.blockUI.stop()}},{key:"fire_networkError",value:function(){this.blockUI.stop(),this.loading=!1}},{key:"fire_dataTableUrlChanged",value:function(e){e.search&&e.search.length>0&&(this.searchKeyword=e.search)}},{key:"selectedRows",value:function(){return this.dataTable.selectedRows()}},{key:"onAdvancedFilterChanged",value:function(e){this.dataTable.setAdvancedFilter(e),this.ch.isMobileDevice()&&this.toggleAdvancedFilter()}},{key:"toggleAdvancedFilter",value:function(){this.advancedFilterVisible=!this.advancedFilterVisible}},{key:"updateLocalConfig",value:function(){this.modelViewConfig.id&&localStorage.setItem(this.modelViewConfig.id+"_columns",JSON.stringify(this.tableConfig.columns))}},{key:"loadLocalConfig",value:function(){if(this.modelViewConfig.id){var e=this.modelViewConfig.id;if(localStorage.getItem(e+"_columns")){var t,a=localStorage.getItem(e+"_columns"),n=i(JSON.parse(a));try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.hidden||!1===o.hidden)for(var r=0;r<this.modelViewConfig.columns.length;r++)this.modelViewConfig.columns[r].dataKey==o.dataKey&&(this.modelViewConfig.columns[r].hidden=o.hidden)}}catch(l){n.e(l)}finally{n.f()}}}}},{key:"setRefresh",value:function(e){var t=this;this.refreshInterval=1e3*e,(0===e||null!=this.timerHook)&&clearInterval(this.timerHook),this.refreshInterval>1e3&&(this.timerHook=setInterval(function(){return t.reload()},this.refreshInterval))}},{key:"export",value:function(){var e=!0;!0===this.modelViewConfig.exportPagination&&(e=!1),this.dataTable.export(e)}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"_onCustomHeaderAction",value:function(e){this.onAction.emit({action:e,row:null})}},{key:"setAdvancedFilter",value:function(e){this.advancedFilter.dynamicForm.setFormValue(e)}},{key:"fire_advancedTableLoadedFromUrl",value:function(e){var t=Object.keys(e),a=[];t.map(function(t){a[t]=e[t]}),setTimeout((function(){this.advancedFilter.dynamicForm.setFormValue(a)}).bind(this),1e3)}}]),e}();Tt.\u0275fac=function(e){return new(e||Tt)(c.Y36(w),c.Y36(I),c.Y36(y))},Tt.\u0275cmp=c.Xpm({type:Tt,selectors:[["model-table-view"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(ot,5),c.Gf(rt,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.dataTable=a.first),c.iGM(a=c.CRH())&&(t.advancedFilter=a.first))},inputs:{modelViewConfig:"modelViewConfig",advancedFilterFields:"advancedFilterFields",advancedFilterOptions:"advancedFilterOptions"},outputs:{onDataLoading:"onDataLoading",onDataLoaded:"onDataLoaded",onCellClicked:"onCellClicked",onCellMiddleClicked:"onCellMiddleClicked",onAction:"onAction",onRowSelected:"onRowSelected"},features:[c.TTD],decls:44,vars:25,consts:[[1,"row"],[1,"col"],[1,"card"],[1,"card-header",3,"hidden"],["class","header-rows-count d-none d-sm-none d-md-inline d-lg-inline",4,"ngIf"],[1,"card-actions","columns-switcher"],[3,"click",4,"ngFor","ngForOf"],["dropdown",""],["dropdownToggle","",1,"text-muted",3,"pTooltip"],[1,"fa","fa-list"],["id","table-fields-menu","class","table-fields-menu dropdown-menu hold-on-click","role","menu","style","margin-right: 100px;",4,"dropdownMenu"],[3,"hidden"],[1,"text-muted"],[1,"fa","fa-cog","fa-spin"],["dropdown","",1,"d-none","d-sm-none","d-md-block"],[1,"fa","fa-stopwatch"],["class","fa fa-pause",4,"ngIf"],["class","fa fa-play blink",4,"ngIf"],["id","table-refresh-selector","class","dropdown-menu","role","menu","style","margin-right: 100px;",4,"dropdownMenu"],["class","d-md-block",3,"pTooltip","click",4,"ngIf"],["class","d-none d-sm-none d-md-block",3,"pTooltip","click",4,"ngIf"],["tooltip","reload data",3,"hidden","pTooltip"],[1,"text-muted",2,"cursor","pointer"],[1,"fa","fa-sync",3,"click"],[1,"card-body"],[1,"row","justify-content-end","toolbar-row"],["class","col-md-auto col-xs-12 table-toolbar",4,"ngIf"],[1,"col-md-auto","ml-auto","table-toolbar",3,"hidden"],[1,"form-group","pull-right"],[1,"input-group"],["type","text","id","search","name","search",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"fa","fa-search"],["class","input-group-addon text-muted","style","cursor: pointer;",4,"ngIf"],["class","col-12",4,"blockUI"],[1,"advanced-filter-container","row","justify-content-end",3,"hidden"],[1,"col","col-md-4","col-sm-6","col-xs-12","align-self-end",2,"height","100%","min-height","100%"],["id","advancedFilter","style","height:100%;",3,"fields","options","changed","close",4,"ngIf"],[1,"header-rows-count","d-none","d-sm-none","d-md-inline","d-lg-inline"],[3,"click"],["id","table-fields-menu","role","menu",1,"table-fields-menu","dropdown-menu","hold-on-click",2,"margin-right","100px"],[4,"ngFor","ngForOf"],[1,"dropdown-item","dropdown-item-small",2,"text-align","left"],[1,"custom-control","custom-checkbox"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"],[1,"fa","fa-pause"],[1,"fa","fa-play","blink"],["id","table-refresh-selector","role","menu",1,"dropdown-menu",2,"margin-right","100px"],[1,"dropdown-item",3,"click"],[1,"fa","fa-clock"],[1,"d-md-block",3,"pTooltip","click"],[1,"fa","fa-filter"],[1,"d-none","d-sm-none","d-md-block",3,"pTooltip","click"],[1,"fa","fa-file-export"],[1,"col-md-auto","col-xs-12","table-toolbar"],["dropdown","",1,"btn-group","model-action-btn-group"],["dropdownToggle","","type","button",1,"btn","btn-primary","dropdown-toggle","actions-button"],[1,"fa","fa-wrench"],[1,"caret"],["class","dropdown-menu","role","menu",4,"dropdownMenu"],["role","menu",1,"dropdown-menu"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["class","dropdown-item",3,"hidden","click",4,"ngIf"],[1,"dropdown-item",3,"hidden","click"],[3,"class",4,"ngIf"],[1,"input-group-addon","text-muted",2,"cursor","pointer"],[1,"col-12"],["name","data_table",3,"tableConfig","dataLoaded","dataLoading","onCellClicked","onCellMiddleClicked","onRowSelected","onAction","networkError","onUrlFilterChanged","onAdvancedFilterLoadedFromUrl",4,"ngIf"],["name","data_table",3,"tableConfig","dataLoaded","dataLoading","onCellClicked","onCellMiddleClicked","onRowSelected","onAction","networkError","onUrlFilterChanged","onAdvancedFilterLoadedFromUrl"],["data_table",""],["id","advancedFilter",2,"height","100%",3,"fields","options","changed","close"],["advancedFilter",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i"),c._uU(5),c.YNc(6,lt,2,3,"span",4),c.TgZ(7,"div",5),c.YNc(8,st,3,3,"a",6),c.TgZ(9,"a",7),c.TgZ(10,"span",8),c._UZ(11,"i",9),c.qZA(),c.YNc(12,ut,2,1,"ul",10),c.qZA(),c.TgZ(13,"a",11),c.TgZ(14,"span",12),c._UZ(15,"i",13),c.qZA(),c.qZA(),c.TgZ(16,"a",14),c.TgZ(17,"span",8),c._UZ(18,"i",15),c._uU(19,"\xa0 "),c.YNc(20,dt,1,0,"i",16),c.YNc(21,ft,1,0,"i",17),c.qZA(),c.YNc(22,pt,17,0,"ul",18),c.qZA(),c.YNc(23,gt,3,1,"a",19),c.YNc(24,ht,3,1,"a",20),c.TgZ(25,"a",21),c.TgZ(26,"span",22),c.TgZ(27,"i",23),c.NdJ("click",function(){return t.reload()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"div",24),c.TgZ(29,"div",25),c.YNc(30,yt,7,1,"div",26),c.TgZ(31,"div",27),c.TgZ(32,"div",28),c.TgZ(33,"div",29),c.TgZ(34,"input",30),c.NdJ("ngModelChange",function(e){return t.searchKeyword=e})("keydown.enter",function(){return t.dataTable.search(t.searchKeyword)}),c.qZA(),c.TgZ(35,"div",31),c.TgZ(36,"span",32),c.NdJ("click",function(){return t.dataTable.search(t.searchKeyword)}),c._UZ(37,"i",33),c.qZA(),c.qZA(),c.YNc(38,wt,2,0,"span",34),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",0),c.YNc(40,At,2,1,"div",35),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"div",36),c.TgZ(42,"div",37),c.YNc(43,qt,2,2,"advanced-filter",38),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("hidden",!1===t.modelViewConfig.hasHeader),c.xp6(1),c.Tol(t.modelViewConfig.icon),c.xp6(1),c.hij(" ",t.modelViewConfig.title," "),c.xp6(1),c.Q6J("ngIf",(null==t.modelViewConfig?null:t.modelViewConfig.showRowsCount)&&!0===(null==t.modelViewConfig?null:t.modelViewConfig.showRowsCount)&&(null==t.dataTable?null:t.dataTable.totalItems)),c.xp6(2),c.Q6J("ngForOf",t.modelViewConfig.headerActions),c.xp6(2),c.s9C("pTooltip",t.tr.translate("table_show_hide_columns")),c.xp6(3),c.Q6J("hidden",!t.loading),c.xp6(4),c.s9C("pTooltip",t.tr.translate("table_toggle_refresh_timer")),c.xp6(3),c.Q6J("ngIf",0==t.refreshInterval),c.xp6(1),c.Q6J("ngIf",t.refreshInterval>0),c.xp6(2),c.Q6J("ngIf",!0===t.modelViewConfig.hasAdvancedFilter),c.xp6(1),c.Q6J("ngIf",!0===t.modelViewConfig.allowExport),c.xp6(1),c.s9C("pTooltip",t.tr.translate("table_reload")),c.Q6J("hidden",t.loading),c.xp6(5),c.Q6J("ngIf",t.modelViewConfig.actions),c.xp6(1),c.Q6J("hidden",!t.modelViewConfig.showSearchBox),c.xp6(3),c.s9C("placeholder",t.tr.translate("placeholder_search")),c.Q6J("ngModel",t.searchKeyword),c.xp6(4),c.Q6J("ngIf",!1===t.modelViewConfig.hasHeader),c.xp6(2),c.Q6J("blockUI","data-table"),c.xp6(1),c.Q6J("hidden",!t.advancedFilterVisible)("@enterAnimation",void 0),c.xp6(2),c.Q6J("ngIf",t.advancedFilterFields.length>0))},styles:[".action-disabled{color:#e3e8ec;cursor:not-allowed}.dropdown-item{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dropdown-item .action-disabled{cursor:not-allowed}.actions-button{min-width:120px}.card-actions .text-muted{cursor:pointer}.advanced-filter-container{position:absolute;top:0px;width:100%;height:100%;z-index:99;pointer-events:none}.dropdown-item-small{padding-top:2px!important;padding-bottom:2px!important}.header-rows-count{font-size:smaller}.columns-switcher .custom-control{min-height:1.1rem}label{margin-bottom:0!important}.model-action-btn-group{width:100%}.p-sidebar-content{height:100%;width:100%}\n"],encapsulation:2,data:{animation:[(0,nt.X$)("enterAnimation",[(0,nt.eR)(":enter",[(0,nt.oB)({transform:"translateX(100%)",opacity:1}),(0,nt.jt)("200ms",(0,nt.oB)({transform:"translateX(0)",opacity:0}))]),(0,nt.eR)(":leave",[(0,nt.oB)({transform:"translateX(0)",opacity:0}),(0,nt.jt)("200ms",(0,nt.oB)({transform:"translateX(100%)",opacity:1}))])])]}}),(0,g.gn)([(0,m.bH)()],Tt.prototype,"blockUI",void 0);var kt=n(36949),Ct=["acl_model_view"],Ut=["availablePermissionsTree"],Mt=["givenPermissionsTree"],Ft=["dashboard_modal"],Jt=["restriction_modal"];function Ot(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",26,27),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().actionFired(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1})("onRowSelected",function(e){return c.CHM(a),c.oxw().onAclGroupSelected(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}function Nt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().onSavePermissions()}),c._UZ(1,"i",29),c.qZA()}}function It(e,t){if(1&e&&(c.TgZ(0,"option",43),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function Yt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"h4",31),c._uU(2,"Set Group Dashboard"),c.qZA(),c.TgZ(3,"button",32),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",33),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",34),c.TgZ(7,"form",35),c.TgZ(8,"div",36),c.TgZ(9,"label"),c._uU(10,"Select Dashboard"),c.qZA(),c.TgZ(11,"select",37),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().selected_dashboard=e}),c.YNc(12,It,2,2,"option",38),c.qZA(),c.TgZ(13,"small",39),c._uU(14,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",40),c.TgZ(16,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(17,"Close"),c.qZA(),c.TgZ(18,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw().setDashboard()}),c._uU(19,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(11),c.Q6J("ngModel",i.selected_dashboard),c.xp6(1),c.Q6J("ngForOf",i.dashboard_list),c.xp6(6),c.Q6J("disabled",!i.selected_dashboard)}}function Qt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"h4",31),c._uU(2,"Restrict Group"),c.qZA(),c.TgZ(3,"button",32),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",33),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",34),c.TgZ(7,"form",35),c.TgZ(8,"div",36),c.TgZ(9,"label"),c._uU(10,"Restrict Usage To Only Following Managers"),c.qZA(),c.TgZ(11,"div",44),c.TgZ(12,"div",45),c.TgZ(13,"p-multiSelect",46),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().selected_managers=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"small",39),c._uU(15,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",40),c.TgZ(17,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(18,"Close"),c.qZA(),c.TgZ(19,"button",47),c.NdJ("click",function(){return c.CHM(a),c.oxw().setRestriction()}),c._uU(20,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(13),c.Q6J("options",i.manager_list)("ngModel",i.selected_managers)("filter",!0)}}var St=function(){function e(t,a,i,n,r,l,s){o(this,e),this.api=t,this.log=a,this.swal=i,this.toastr=n,this.modalService=r,this.translate=l,this.ref=s,this.columns=[{dataKey:"name",label:"Group",class:"href"},{dataKey:"dashboard_name",label:"Dashboard"},{dataKey:"total",label:"Permissions"}],this.actions=[{name:"create",label:"Create",icon:"fa fa-plus"},{name:"copy",label:"Copy",icon:"fa fa-copy",acl:"prm_managers_sysadmin",requiresRow:!0,inline:!0},{name:"",label:"",type:"separator"},{name:"restrict",label:"Restrict To...",icon:"fa fa-users",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"dashboard",label:"Set Dashboard...",icon:"fa fa-tachometer-alt",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"",label:"",type:"separator"},{name:"rename",label:"Rename",icon:"fa fa-edit",requiresRow:!0,inline:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:"Delete",icon:"fa fa-trash",requiresRow:!0,inline:!0,acl:"prm_any"}],this.modelViewConfig=null,this.loading=!1,this.selected_dashboard=null,this.selected_managers=[],this.selectedRow=null,this.availablePermissionsNodes=[],this.givenPermissionsNodes=[],this.deleteButtonEnabled=!1,this.addButtonEnabled=!1,this.removeButtonEnabled=!1,this.saveButtonEnabled=!1,this.dashboard_list=[],this.manager_list=[],this.selectize_config={highlight:!1,create:!1,persist:!0,plugins:["dropdown_direction","remove_button"],dropdownDirection:"down",labelField:"username",valueField:"id",maxItems:1e3},this.loadDashboardList(),this.loadManagerList()}return l(e,[{key:"create",value:function(){var e=this;this.swal.prompt("Group Name").subscribe(function(t){e.api.post("aclgroup",{name:t}).subscribe(function(t){e.modelView.reload()},function(e){})})}},{key:"copy",value:function(){var e=this,t=this.selectedRow;this.swal.prompt("New Group Name").subscribe(function(a){e.api.post("aclgroup/copy",{group_id:t,name:a}).subscribe(function(t){e.modelView.reload()},function(e){})})}},{key:"rename",value:function(){var e=this,t=this.selectedRow;this.swal.prompt("New Group Name").subscribe(function(a){e.api.put("aclgroup/"+t,{name:a}).subscribe(function(t){200==t.status&&(e.toastr.success(e.translate.translate(t.message)),e.modelView.reload())})})}},{key:"setDashboard",value:function(){var e=this,t=this.selectedRow;t&&this.selected_dashboard&&(this.blockUI.start(),this.api.put("aclgroup/"+t,{dashboard_id:this.selected_dashboard}).subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.toastr.success(e.translate.translate(t.message)),e.activeModal.hide(),e.modelView.reload())}))}},{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Security Groups",icon:"fa fa-lock",columns:this.columns,dataUrl:"index/acl",page:1,showSearchBox:!0,rowsPerPage:5,primaryKey:"id",actions:this.actions,allowSelect:!0,allowMultipleSelect:!0,hasInlineActions:!0,id:"acl_table"}}},{key:"actionFired",value:function(e){switch(e.action){case"create":this.create();break;case"rename":this.rename();break;case"dashboard":this.showDashboardSelector();break;case"delete":this.destroy();break;case"restrict":this.showRestrictionModal();break;case"copy":this.copy()}}},{key:"onAclGroupSelected",value:function(e){var t=e.id;this.selectedRow=t,this.showAclGroupPermissions(t),this.showGivenAclGroupPermissions(t)}},{key:"showAclGroupPermissions",value:function(e){var t=this;this.blockUI.start(),this.api.get("acl/available/"+e).subscribe(function(e){t.blockUI.stop();var a,n=[],o=[],r=e.data,l=[],s=i(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(l.indexOf(c.category)<0){var u=c.category;n[u]=[],l.push(c.category),o.push({id:u,text:u,state:{opened:!0},parent:"#",icon:"fa fa-folder font-yellow"})}}}catch(h){s.e(h)}finally{s.f()}var d,f=i(r);try{for(f.s();!(d=f.n()).done;){var p=d.value;n[p.category].push(p.permission);var g={id:p.permission,text:t.translate.translate(p.permission),parent:p.category,icon:"fa fa-eye-slash font-blue"};o.push(g)}}catch(h){f.e(h)}finally{f.f()}t.availablePermissionsNodes=o},function(e){t.blockUI.stop()})}},{key:"showGivenAclGroupPermissions",value:function(e){var t=this;this.blockUI.start(),this.api.get("acl/given/"+e).subscribe(function(e){t.blockUI.stop();var a,n=[],o=[],r=e.data,l=[],s=i(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;if(l.indexOf(c.acl_item.category)<0){var u=c.acl_item.category;n[u]=[],l.push(c.acl_item.category),o.push({id:u,text:u,state:{opened:!0},parent:"#",icon:"fa fa-folder font-yellow"})}}}catch(h){s.e(h)}finally{s.f()}var d,f=i(r);try{for(f.s();!(d=f.n()).done;){var p=d.value;n[p.acl_item.category].push(p.acl_item.permission);var g={id:p.acl_item.permission,text:t.translate.translate(p.acl_item.permission),parent:p.acl_item.category,icon:"fa fa-eye font-green"};o.push(g)}}catch(h){f.e(h)}finally{f.f()}t.givenPermissionsNodes=o},function(e){t.blockUI.stop()})}},{key:"onAvailablePermissionsTreeSelected",value:function(){"#"!==this.availablePermissionsTree.getSelectedNode().parent&&(this.addButtonEnabled=!0)}},{key:"onGivenPermissionsTreeSelected",value:function(){"#"!==this.givenPermissionsTree.getSelectedNode().parent&&(this.removeButtonEnabled=!0)}},{key:"onGrandPermission",value:function(){var e=this.availablePermissionsTree.getSelectedNode();this.givenPermissionsTree.addNode({parent:e.parent,id:e.id,text:e.text,icon:"fa fa-eye font-blue"}),this.availablePermissionsTree.deleteNode(e.id),this.addButtonEnabled=!1,this.saveButtonEnabled=!0}},{key:"onRevokePermission",value:function(){var e=this.givenPermissionsTree.getSelectedNode();this.availablePermissionsTree.addNode({parent:e.parent,id:e.id,text:e.text,icon:"fa fa-eye font-blue"}),this.givenPermissionsTree.deleteNode(e.id),this.removeButtonEnabled=!1,this.saveButtonEnabled=!0}},{key:"onSavePermissions",value:function(){var e,t=this,a=this.selectedRow,n=[],o=i(this.givenPermissionsTree.getAllNodes());try{for(o.s();!(e=o.n()).done;){var r=e.value;"#"!=r.parent&&n.push(r.id)}}catch(l){o.e(l)}finally{o.f()}this.api.post("acl/updateItems/"+a,n).subscribe(function(e){t.saveButtonEnabled=!1,t.addButtonEnabled=!1,t.removeButtonEnabled=!1})}},{key:"showDashboardSelector",value:function(){this.activeModal=this.modalService.show(this.dashboardModal)}},{key:"loadDashboardList",value:function(){var e=this;this.api.get("dashboardManager").subscribe(function(t){e.dashboard_list=t.data,e.dashboard_list.unshift({id:0,name:"Professional Dashboard"})})}},{key:"loadManagerList",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){t.data.map(function(t){e.manager_list.push({value:t.id,label:t.username})})})}},{key:"destroy",value:function(){var e=this,t=this.selectedRow;this.swal.confirm({title:"Delete Group",type:"warning",text:"Delete Selected Group ?",confirmButtonText:"Yes"}).subscribe(function(){e.blockUI.start(),e.api.delete("aclgroup/"+t).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.toastr.success(t.message),e.modelView.reload()):e.toastr.error(t.message)})})}},{key:"showRestrictionModal",value:function(){var e=this;this.selected_managers=[],this.blockUI.start(),this.api.get("aclgroup/allowedManagers/"+this.selectedRow).subscribe(function(t){e.blockUI.stop(),e.selected_managers=t.data,e.activeModal=e.modalService.show(e.restrictionModal)})}},{key:"setRestriction",value:function(){var e=this;this.activeModal.hide();var t={group_id:this.selectedRow,managers:this.selected_managers};console.log(t),this.blockUI.start(),this.api.post("acl/restrict",t).subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.toastr.success(t.message),e.modelView.reload())})}}]),e}();St.\u0275fac=function(e){return new(e||St)(c.Y36(Z),c.Y36(b),c.Y36(tt),c.Y36(v._W),c.Y36(at.tT),c.Y36(I),c.Y36(c.sBO))},St.\u0275cmp=c.Xpm({type:St,selectors:[["ng-component"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(Ct,5),c.Gf(Ut,5),c.Gf(Mt,5),c.Gf(Ft,5),c.Gf(Jt,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.availablePermissionsTree=a.first),c.iGM(a=c.CRH())&&(t.givenPermissionsTree=a.first),c.iGM(a=c.CRH())&&(t.dashboardModal=a.first),c.iGM(a=c.CRH())&&(t.restrictionModal=a.first))},decls:36,vars:8,consts:[[1,"settings-container"],["name","acl_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onRowSelected",4,"ngIf"],[1,"row"],[1,"col-md-12","col-sm-12"],[1,"col-md-5"],[1,"card"],[1,"card-header","card-success"],[1,"fa","fa-user"],[1,"card-body",2,"max-height","400px","overflow-y","auto"],["id","tree1"],[3,"data","container","onNodeSelected"],["givenPermissionsTree",""],[1,"col-md-2"],[1,"row","col-md-12"],[1,"btn","btn-block","btn-primary",2,"margin-top","50px",3,"disabled","click"],[1,"fa","fa-2x","fa-angle-left"],[1,"btn","btn-block"],[1,"btn","btn-block","btn-primary",3,"disabled","click"],[1,"fa","fa-2x","fa-angle-right"],["class","btn btn-block btn-success ",3,"click",4,"ngIf"],[1,"card-header","card-default"],[1,"fa","fa-desktop"],["id","tree2"],["availablePermissionsTree",""],["dashboard_modal",""],["restriction_modal",""],["name","acl_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onRowSelected"],["acl_model_view",""],[1,"btn","btn-block","btn-success",3,"click"],[1,"fa","fa-2x","fa-save"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["id","dashboard_id","name","selected_dashboard",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"form-text","text-muted"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","manager_list",3,"options","ngModel","filter","ngModelChange"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Ot,2,1,"model-table-view",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",2),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c._UZ(8,"i",7),c._uU(9," Given Permissions "),c.qZA(),c.TgZ(10,"div",8),c.TgZ(11,"div",9),c.TgZ(12,"js-tree",10,11),c.NdJ("onNodeSelected",function(){return t.onGivenPermissionsTreeSelected()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",12),c.TgZ(15,"div",13),c.TgZ(16,"button",14),c.NdJ("click",function(){return t.onGrandPermission()}),c._UZ(17,"i",15),c.qZA(),c._UZ(18,"hr",16),c.TgZ(19,"button",17),c.NdJ("click",function(){return t.onRevokePermission()}),c._UZ(20,"i",18),c.qZA(),c._UZ(21,"hr",16),c.YNc(22,Nt,2,0,"button",19),c.qZA(),c.qZA(),c.TgZ(23,"div",4),c.TgZ(24,"div",5),c.TgZ(25,"div",20),c._UZ(26,"i",21),c._uU(27," Available Permissions "),c.qZA(),c.TgZ(28,"div",8),c.TgZ(29,"div",22),c.TgZ(30,"js-tree",10,23),c.NdJ("onNodeSelected",function(){return t.onAvailablePermissionsTreeSelected()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(32,Yt,20,3,"ng-template",null,24,c.W1O),c.YNc(34,Qt,21,3,"ng-template",null,25,c.W1O),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.modelViewConfig),c.xp6(11),c.Q6J("data",t.givenPermissionsNodes)("container","#tree1"),c.xp6(4),c.Q6J("disabled",!t.addButtonEnabled),c.xp6(3),c.Q6J("disabled",!t.removeButtonEnabled),c.xp6(3),c.Q6J("ngIf",t.saveButtonEnabled),c.xp6(8),c.Q6J("data",t.availablePermissionsNodes)("container","#tree2"))},directives:[Q.O5,it,Tt,A._Y,A.JL,A.F,A.EJ,A.JJ,A.On,Q.sg,A.YN,A.Kr,kt.NU],styles:[""]}),(0,g.gn)([(0,m.bH)()],St.prototype,"blockUI",void 0);var Pt=n(92639),Dt=function(e){return{"page-link-active":e}};function Ht(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"li",2),c.TgZ(1,"a",3),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().countChanged(e)}),c._uU(2),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(1),c.Q6J("ngClass",c.VKq(2,Dt,n.count==i)),c.xp6(1),c.Oqu(i)}}var Rt=function(){var e=function(){function e(){o(this,e),this.selectors=[5,10,50,100,500],this.onCountChanged=new c.vpe,this.count=this.selectors[0]}return l(e,[{key:"countChanged",value:function(e){this.count=e,this.onCountChanged.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["rows-count-selector"]],inputs:{selectors:"selectors",count:"count"},outputs:{onCountChanged:"onCountChanged"},decls:2,vars:1,consts:[[1,"pagination","page-count-component"],["class","page-item",4,"ngFor","ngForOf"],[1,"page-item"],[1,"page-link",3,"ngClass","click"]],template:function(e,t){1&e&&(c.TgZ(0,"ul",0),c.YNc(1,Ht,3,4,"li",1),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngForOf",t.selectors))},directives:[Q.sg,Q.mk],styles:[".page-count-component[_ngcontent-%COMP%]{cursor:pointer}.page-count-component[_ngcontent-%COMP%]   .page-item[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.page-link-active[_ngcontent-%COMP%]{background-color:#c2cfd6;color:#fff!important;font-weight:bold}"]}),e}(),Vt=n(28220),Lt=function(){var e=function(){function e(){o(this,e),this.nasList=["generic","Mikrotik","Cisco","Ubiquti AP","Ubiquti EdgeRouter","Nokia"]}return l(e,[{key:"transform",value:function(e){return this.nasList[e]}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"nasname",type:e,pure:!0}),e}(),Et=function(){var e=function(){function e(t){o(this,e),this.translator=t}return l(e,[{key:"transform",value:function(e){var t=parseInt(e),a=t,i=t/1024,n=t/1024/1024;return n>=1?(Math.round(100*n)/100).toString()+" Gb/s":i>=1?(Math.round(100*i)/100).toString()+" Mb/s":(Math.round(100*a)/100).toString()+" Kb/s"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I,16))},e.\u0275pipe=c.Yjl({name:"bitrate",type:e,pure:!0}),e}(),Kt=function(){var e=function(){function e(t){o(this,e),this.translator=t,this.units=["bytes","KB","MB","GB","TB","PB"]}return l(e,[{key:"transform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var a="";e<0&&(a="-",e*=-1);for(var i=0;e>=1024;)e/=1024,i++;var n=a+e.toFixed(+t);return parseFloat(n)<=0?"0 B":n+" "+this.units[i]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I,16))},e.\u0275pipe=c.Yjl({name:"bytes",type:e,pure:!0}),e}(),Bt=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"transform",value:function(e){var t=parseInt(e),a=Math.floor(t/60),i=Math.floor(a/60),n=Math.floor(i/24);return n>0?n.toString()+" Day(s)":i>0?i.toString()+"Hour(s)":a>0?a.toString()+" Min":t.toString()+" sec"}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"humanizeSeconds",type:e,pure:!0}),e}(),jt=n(19966),zt=function(){var e=function(){function e(t,a,i,n,r,l,s,c){o(this,e),this.currencyPipe=t,this.nasNamePipe=a,this.bitRate=i,this.bytesPipe=n,this.humanSeconds=r,this.timeSince=l,this.tr=s,this.config=c}return l(e,[{key:"transform",value:function(e,t,a){var i=e;switch(t.pipe||!1){case"currency":i=this.currencyPipe.transform(e,this.config.siteConfig.site_currency+" ");break;case"nasname":i=this.nasNamePipe.transform(e);break;case"bitrate":i=this.bitRate.transform(e);break;case"bytes":i=this.bytesPipe.transform(e);break;case"duration":i=this.humanSeconds.transform(e);break;case"timeSince":i=this.timeSince.transform(e);break;case"translate":i=this.tr.translate(e)}return i}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Q.H9,16),c.Y36(Lt,16),c.Y36(Et,16),c.Y36(Kt,16),c.Y36(Bt,16),c.Y36(jt.Ap,16),c.Y36(I,16),c.Y36(p,16))},e.\u0275pipe=c.Yjl({name:"dataTablePipe",type:e,pure:!0}),e}();function Gt(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"input",14),c.NdJ("change",function(){return c.CHM(a),c.oxw(2).toggleSelection()})("ngModelChange",function(e){return c.CHM(a),c.oxw(2).toggleSelectAll=e}),c.qZA(),c._UZ(2,"label",15),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngModel",i.toggleSelectAll)}}function Wt(e,t){if(1&e&&(c.TgZ(0,"th",11),c.YNc(1,Gt,3,1,"div",12),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.tableConfig.allowMultipleSelect)}}function $t(e,t){1&e&&c._UZ(0,"i",19)}function Xt(e,t){1&e&&c._UZ(0,"i",20)}function ea(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"th",16),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().sortBy(e.sortBy||e.dataKey)}),c.YNc(1,$t,1,0,"i",17),c.YNc(2,Xt,1,0,"i",18),c._uU(3),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.Q6J("hidden",i.hidden),c.xp6(1),c.Q6J("ngIf",n.payload.sortBy==i.dataKey&&"asc"==n.payload.direction),c.xp6(1),c.Q6J("ngIf",n.payload.sortBy==i.dataKey&&"desc"==n.payload.direction),c.xp6(1),c.hij(" ",n.tr.translate(i.label)," ")}}function ta(e,t){1&e&&c._UZ(0,"th")}function aa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"input",23),c.NdJ("change",function(){c.CHM(a);var e=c.oxw(2).$implicit,t=c.oxw();return t.toggleCheckbox(e[t.primaryKey])}),c.qZA(),c._UZ(2,"label",24),c.qZA()}if(2&e){var i=c.oxw(2).$implicit,n=c.oxw();c.xp6(1),c.MGl("id","checkrow_",i[n.primaryKey],""),c.Q6J("checked",n._selectedRows.indexOf(i[n.primaryKey])>=0),c.xp6(1),c.MGl("for","checkrow_",i[n.primaryKey],"")}}function ia(e,t){if(1&e&&(c.TgZ(0,"td",11),c.YNc(1,aa,3,3,"div",12),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.Q6J("ngIf",a.tableConfig.allowMultipleSelect)}}function na(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",28),c.NdJ("click",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)})("auxclick",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)}),c._uU(1),c.ALo(2,"dataTablePipe"),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw().$implicit,o=c.oxw();c.Q6J("ngClass",i.classFn?i.classFn(n):i.class?i.class:""),c.xp6(1),c.hij(" ",c.xi3(2,2,o.resolveICell(i,n),i)," ")}}function oa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",29),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit,t=c.oxw().$implicit;return c.oxw().fire_cellClicked(t,e)})("auxclick",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)}),c.ALo(1,"dataTablePipe"),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw().$implicit,o=c.oxw();c.Q6J("ngClass",i.classFn?i.classFn(n):i.class?i.class:"")("innerHTML",c.xi3(1,2,o.resolveICell(i,n),i),c.oJD)}}function ra(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",28),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit,t=c.oxw().$implicit;return c.oxw().fire_cellClicked(t,e)})("auxclick",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)}),c._UZ(1,"i"),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw().$implicit,o=c.oxw();c.Q6J("ngClass",i.classFn?i.classFn(n):i.class?i.class:""),c.xp6(1),c.Tol(o.resolveICell(i,n))}}function la(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",28),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit,t=c.oxw().$implicit;return c.oxw().fire_cellClicked(t,e)})("auxclick",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)}),c._UZ(1,"img",30),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw().$implicit,o=c.oxw();c.Q6J("ngClass",i.classFn?i.classFn(n):i.class?i.class:""),c.xp6(1),c.s9C("src",o.resolveICell(i,n),c.LSH)}}function sa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",28),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit,t=c.oxw().$implicit;return c.oxw().fire_cellClicked(t,e)})("auxclick",function(e){c.CHM(a);var t=c.oxw().$implicit,i=c.oxw().$implicit;return c.oxw().fire_cellClicked(i,t,e)}),c._UZ(1,"p-progressBar",31),c.qZA()}if(2&e){var i=c.oxw().$implicit,n=c.oxw().$implicit,o=c.oxw();c.Q6J("ngClass",i.classFn?i.classFn(n):i.class?i.class:""),c.xp6(1),c.Q6J("value",o.resolveICell(i,n))}}function ca(e,t){if(1&e&&(c.TgZ(0,"td",25),c.YNc(1,na,3,5,"span",26),c.YNc(2,oa,2,5,"span",27),c.YNc(3,ra,2,4,"span",26),c.YNc(4,la,2,2,"span",26),c.YNc(5,sa,2,2,"span",26),c.qZA()),2&e){var a=t.$implicit;c.Q6J("hidden",a.hidden),c.xp6(1),c.Q6J("ngIf",!a.type||"text"==a.type),c.xp6(1),c.Q6J("ngIf","html"==(null==a?null:a.type)),c.xp6(1),c.Q6J("ngIf","icon"==a.type),c.xp6(1),c.Q6J("ngIf","image"==a.type),c.xp6(1),c.Q6J("ngIf","progress"==a.type)}}var ua=function(e){return{"row-selected":e}};function da(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr",21),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().fire_selectRow(e)})("contextmenu",function(){var e=c.CHM(a).$implicit;return c.oxw().fire_selectRow(e)}),c.YNc(1,ia,2,1,"td",2),c.YNc(2,ca,6,6,"td",22),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.Q6J("ngClass",c.VKq(5,ua,i[n.primaryKey]==n.selectedRow))("contextMenu",n.basicMenu)("contextMenuSubject",i),c.xp6(1),c.Q6J("ngIf",n.tableConfig.allowMultipleSelect),c.xp6(1),c.Q6J("ngForOf",n.tableConfig.columns)}}function fa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"ngb-pagination",33),c.NdJ("pageChange",function(e){return c.CHM(a),c.oxw(2).currentPage=e})("pageChange",function(e){return c.CHM(a),c.oxw(2).pageChanged(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("collectionSize",i.totalItems)("rotate",!0)("ellipses",!1)("boundaryLinks",!0)("maxSize",5)("pageSize",i.payload.count)("page",i.currentPage)}}function pa(e,t){if(1&e&&(c.TgZ(0,"div",7),c.TgZ(1,"div",8),c.YNc(2,fa,1,7,"ngb-pagination",32),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.Q6J("ngIf",a.totalItems)}}function ga(e,t){if(1&e&&c._UZ(0,"i"),2&e){var a=c.oxw(2).$implicit;c.Tol(a.icon)}}function ha(e,t){if(1&e&&(c.YNc(0,ga,1,3,"i",36),c._uU(1)),2&e){var a=c.oxw().$implicit;c.Q6J("ngIf",a.icon),c.xp6(1),c.hij("\xa0 ",a.label," ")}}function ma(e,t){if(1&e){var a=c.EpF();c.YNc(0,ha,2,2,"ng-template",35),c.NdJ("execute",function(e){var t=c.CHM(a).$implicit;return c.oxw(2).fire_context_action(e.item,t.name)})}if(2&e){var i=t.$implicit,n=c.oxw(2);c.Q6J("visible",i.inline&&1==i.inline&&i.acl&&n.auth.has(i.acl))}}function _a(e,t){if(1&e&&(c.TgZ(0,"context-menu"),c.YNc(1,ma,1,1,void 0,34),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",null==a.tableConfig?null:a.tableConfig.actions)}}var va=function(){function e(t,a,i,n,r,l){o(this,e),this.api=t,this.log=a,this.route=i,this.router=n,this.auth=r,this.tr=l,this.onRowSelected=new c.vpe,this.dataLoaded=new c.vpe,this.dataLoading=new c.vpe,this.onCellClicked=new c.vpe,this.onCellMiddleClicked=new c.vpe,this.networkError=new c.vpe,this.onAction=new c.vpe,this.onUrlFilterChanged=new c.vpe(!0),this.onAdvancedFilterLoadedFromUrl=new c.vpe,this.payload={page:1,count:10},this.lastPayload=this.payload,this.rows=[],this.selectedRow=null,this._selectedRows=[],this.primaryKey=null,this.currentPage=null,this.totalItems=0,this.toggleSelectAll=!1,this.advancedFilter={},this.basic_keys=["columns","sortBy","direction","search","page","count","from_date","to_date","date_start","date_end"],this.items=[{name:"John",otherProperty:"Foo"},{name:"Joe",otherProperty:"Bar"}],this.contextMenuItems=[]}return l(e,[{key:"load",value:function(){var e=this;this.dataLoading.emit(!0),this.payload.columns=this.visibleColumns(),this.payload.direction||(this.payload.direction="asc"),this.lastPayload=this.payload,this.api.post(this.tableConfig.dataUrl,this.payload).subscribe(function(t){e.rows=t.data,e.totalItems=t.total,e.dataLoaded.emit(!0)},function(t){e.networkError.emit(-1)})}},{key:"visibleColumns",value:function(){var e=[];return this.tableConfig.columns.map(function(t){t.hidden||e.push(t.dataKey)}),e}},{key:"export",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.payload.direction||(this.payload.direction="asc"),this.lastPayload=this.payload;var a={};a=Object.assign(a,this.payload),t&&(a.page=1,a.count=25e4),a.export=!0,this.blockUI.start(),this.api.post(this.tableConfig.dataUrl,a).subscribe(function(t){e.blockUI.stop(),e.payload=e.lastPayload,e.api.downloadFile("storage/tmp/"+t.data,"sas4_export.xlsx")},function(t){e.blockUI.stop(),e.networkError.emit(-1)})}},{key:"ngOnChanges",value:function(){var e=this,t=["page","count","direction","soryBy","search"];this.primaryKey=this.tableConfig.primaryKey||"id",null==this.tableConfig.useUrlFilter&&(this.tableConfig.useUrlFilter=!0),this.route.queryParamMap.pipe((0,d.U)(function(e){return e.params})).subscribe(function(a){if(a&&a.filter){var i=JSON.parse(CryptoJS.AES.decrypt(a.filter,"abcdefghijuklmno0123456789012345").toString(CryptoJS.enc.Utf8));Object.keys(i).map(function(a){-1===t.indexOf(a)&&(e.payload[a]=i[a],e.basic_keys.indexOf(a)<0&&(e.advancedFilter[a]=i[a]))}),e.payload.page=i.page||1,e.payload.count=i.count||10,e.payload.direction=i.direction||"asc",e.payload.sortBy=i.sortBy||null,e.payload.search=i.search||"",e.currentPage=i.page,e.onAdvancedFilterLoadedFromUrl.emit(e.advancedFilter),e.load(),i.search&&i.search.length>0&&e.onUrlFilterChanged.emit(i)}else e.reset_payload(),e.load()}),this.populateContextMenu()}},{key:"ngOnInit",value:function(){}},{key:"navigate",value:function(e){e||(e=this.payload);var a=t(t({},e),this.advancedFilter),i=CryptoJS.AES.encrypt(JSON.stringify(a),"abcdefghijuklmno0123456789012345").toString();if(!0===this.tableConfig.useUrlFilter)this.router.navigate(["."],{queryParams:{filter:i},relativeTo:this.route});else{var n=e;this.payload.page=n.page||1,this.payload.count=n.count||10,this.payload.direction=n.direction||"asc",this.payload.sortBy=n.sortBy||null,this.payload.search=n.search||"",this.currentPage=n.page,this.load()}}},{key:"reset_payload",value:function(){this.payload.page=this.tableConfig.page?this.tableConfig.page:1,this.payload.count=this.tableConfig.rowsPerPage||10,this.payload.sortBy=this.tableConfig.sortBy||null,this.payload.direction=this.tableConfig.direction||"asc",this.payload.search="",this.currentPage=1}},{key:"fire_selectRow",value:function(e){if(this.tableConfig.allowSelect){var t=this.tableConfig.primaryKey||"id";(!this.selectedRow||this.selectedRow!=e[t])&&(this.onRowSelected.emit(e),this.selectedRow=e[t])}}},{key:"countChanged",value:function(e){this.payload.page=1,this.currentPage=1,this.payload.count=e,this.navigate()}},{key:"pageChanged",value:function(e){console.log(e),this.payload.page=e,(!0===this.tableConfig.useUrlFilter&&void 0!==this.route.snapshot.queryParams.filter||e>0)&&this.navigate()}},{key:"sortBy",value:function(e){"none"!==e&&(this.payload.direction=this.lastPayload.direction?"asc"==this.lastPayload.direction?"desc":"asc":"desc",this.payload.sortBy=e,this.navigate())}},{key:"search",value:function(e){this.currentPage=1,this.selectedRow=null,this._selectedRows=[],this.payload.search=e,this.onRowSelected.emit(null),this.navigate()}},{key:"toggleSelection",value:function(){if(this.toggleSelectAll){var e,t=i(this.rows);try{for(t.s();!(e=t.n()).done;){var a=e.value;this._selectedRows.push(a.id)}}catch(n){t.e(n)}finally{t.f()}}else this._selectedRows=[]}},{key:"fire_cellClicked",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i={row:e,column:t.dataKey};a&&1===a.button&&this.onCellMiddleClicked.emit(i),a&&0===a.button&&this.onCellClicked.emit(i),a||this.onCellClicked.emit(i)}},{key:"resolveICell",value:function(e,t){var a="";if(e.parentKey){var i=e.parentKey,n=e.dataKey;a=t[i]&&t[i][n]?t[i][n]:""}else a=t[e.dataKey];return e.dataResolver?e.dataResolver(a,t):a}},{key:"resolveClass",value:function(e,t){return""}},{key:"selectedRows",value:function(){var e,t=[],a=i(this.rows);try{for(a.s();!(e=a.n()).done;){var n=e.value;this._selectedRows.indexOf(n[this.primaryKey])>=0&&t.push(n)}}catch(o){a.e(o)}finally{a.f()}return t}},{key:"toggleCheckbox",value:function(e){var t=this._selectedRows.indexOf(e);t<0?this._selectedRows.push(e):this._selectedRows.splice(t,1)}},{key:"setAdvancedFilter",value:function(e){this.payload.page=1,this.advancedFilter=e,this.navigate()}},{key:"fire_context_action",value:function(e,t){this.fire_selectRow(e),this.fire_action(t)}},{key:"fire_action",value:function(e){this.onAction.emit(e)}},{key:"populateContextMenu",value:function(){if(this.tableConfig.hasInlineActions){var e,t=i(this.tableConfig.actions);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.contextMenuItems.push("separator"===a.type?{separator:!0}:{label:a.label,icon:a.icon})}}catch(n){t.e(n)}finally{t.f()}}else this.contextMenuItems=[]}}]),e}();va.\u0275fac=function(e){return new(e||va)(c.Y36(Z),c.Y36(b),c.Y36(_.gz),c.Y36(_.F0),c.Y36(w),c.Y36(I))},va.\u0275cmp=c.Xpm({type:va,selectors:[["data-table"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Pt.GI,5),2&e)&&(c.iGM(a=c.CRH())&&(t.basicMenu=a.first))},inputs:{tableConfig:"tableConfig"},outputs:{onRowSelected:"onRowSelected",dataLoaded:"dataLoaded",dataLoading:"dataLoading",onCellClicked:"onCellClicked",onCellMiddleClicked:"onCellMiddleClicked",networkError:"networkError",onAction:"onAction",onUrlFilterChanged:"onUrlFilterChanged",onAdvancedFilterLoadedFromUrl:"onAdvancedFilterLoadedFromUrl"},features:[c.TTD],decls:15,vars:7,consts:[[1,"table-responsive"],["role","grid",1,"table","table-outline","datatable","dataTable","no-footer","sas-table","table-hover","table-sm",2,"border-collapse","collapse !important"],["width","2%",4,"ngIf"],[3,"hidden","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass","contextMenu","contextMenuSubject","click","contextmenu",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12","col-md-6"],[1,"text-center","text-sm-center","text-md-right",2,"width","100%"],[1,"dt-rows-count-selector","d-inline-block","d-md-block",3,"count","onCountChanged"],["class","col-12 col-md-6",4,"ngIf"],["width","2%"],["class","custom-control custom-checkbox",4,"ngIf"],[1,"custom-control","custom-checkbox"],["type","checkbox","name","toggleSelectAll","id","toggleSelectAll",1,"custom-control-input",3,"ngModel","change","ngModelChange"],["for","toggleSelectAll",1,"custom-control-label"],[3,"hidden","click"],["class","fa fa-sort-asc",4,"ngIf"],["class","fa fa-sort-desc",4,"ngIf"],[1,"fa","fa-sort-asc"],[1,"fa","fa-sort-desc"],[3,"ngClass","contextMenu","contextMenuSubject","click","contextmenu"],[3,"hidden",4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"],[3,"hidden"],[3,"ngClass","click","auxclick",4,"ngIf"],[3,"ngClass","innerHTML","click","auxclick",4,"ngIf"],[3,"ngClass","click","auxclick"],[3,"ngClass","innerHTML","click","auxclick"],[3,"src"],[3,"value"],["class","dt-pagination d-inline-block d-md-block",3,"collectionSize","rotate","ellipses","boundaryLinks","maxSize","pageSize","page","pageChange",4,"ngIf"],[1,"dt-pagination","d-inline-block","d-md-block",3,"collectionSize","rotate","ellipses","boundaryLinks","maxSize","pageSize","page","pageChange"],[4,"ngFor","ngForOf"],["contextMenuItem","",3,"visible","execute"],[3,"class",4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"table",1),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c.YNc(4,Wt,2,1,"th",2),c.YNc(5,ea,4,4,"th",3),c.YNc(6,ta,1,0,"th",4),c.qZA(),c.qZA(),c.TgZ(7,"tbody"),c.YNc(8,da,3,7,"tr",5),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",6),c.TgZ(10,"div",7),c.TgZ(11,"div",8),c.TgZ(12,"rows-count-selector",9),c.NdJ("onCountChanged",function(e){return t.countChanged(e)}),c.qZA(),c.qZA(),c.qZA(),c.YNc(13,pa,3,1,"div",10),c.qZA(),c.YNc(14,_a,2,1,"context-menu",4)),2&e&&(c.xp6(4),c.Q6J("ngIf",t.tableConfig.allowMultipleSelect),c.xp6(1),c.Q6J("ngForOf",t.tableConfig.columns),c.xp6(1),c.Q6J("ngIf",t.tableConfig.hasInlineActions),c.xp6(2),c.Q6J("ngForOf",t.rows),c.xp6(4),c.Q6J("count",t.payload.count),c.xp6(1),c.Q6J("ngIf",t.payload.page),c.xp6(1),c.Q6J("ngIf",!0===(null==t.tableConfig?null:t.tableConfig.hasInlineActions)))},directives:[Q.O5,Q.sg,Rt,A.Wl,A.JJ,A.On,Q.mk,Pt.HW,Vt.k,Y.N9,Pt.GI,Pt.n5],pipes:[zt],styles:[".href[_ngcontent-%COMP%]{color:#00f!important;cursor:pointer}.href[_ngcontent-%COMP%]:hover{text-decoration:underline!important}.row-selected[_ngcontent-%COMP%]{background-color:#73add8!important;color:#fff}.row-selected[_ngcontent-%COMP%]   .href[_ngcontent-%COMP%]{color:#fff!important}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{-ms-user-select:none;user-select:none;-moz-user-select:none;-webkit-user-select:none}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.45rem}.dt-pagination[_ngcontent-%COMP%]{float:right}@media (max-width: 744px){.dt-pagination[_ngcontent-%COMP%]{float:unset;text-align:center}.dt-rows-count-selector[_ngcontent-%COMP%]{float:unset}}"]}),(0,g.gn)([(0,m.bH)()],va.prototype,"blockUI",void 0);var ba=n(99451),Za=function(){function e(t,a,i,n,r,l,s){o(this,e),this.tr=t,this.api=a,this.config=i,this.auth=n,this.ref=r,this.toastr=l,this.dialogConfig=s,this.payDebtForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1},this.manager_id=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.manager_id=this.dialogConfig.data.manager_id,this.blockUI.start(),this.api.get("manager/debt/"+this.manager_id).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.payDebtForm.manager_id=e.manager_id,e.payDebtForm.manager_username=t.data.username,e.payDebtForm.debt_for_me=Math.abs(parseFloat(t.data.debt_for_me)),e.payDebtForm.debt=Math.abs(parseFloat(t.data.total)))})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"deposit",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/payDebt",this.payDebtForm).subscribe(function(t){e.blockUI.stop(),e.ref.close(),200===t.status?e.toastr.success(e.tr.translate(t.message)):e.toastr.error(e.tr.translate(t.message))})}}]),e}();Za.\u0275fac=function(e){return new(e||Za)(c.Y36(I),c.Y36(Z),c.Y36(p),c.Y36(w),c.Y36(ba.E7),c.Y36(v._W),c.Y36(ba.S))},Za.\u0275cmp=c.Xpm({type:Za,selectors:[["app-manager-pay-debt"]],decls:39,vars:19,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"mb-1",2,"width","100%"],[2,"direction","ltr"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.TgZ(1,"div",1),c.TgZ(2,"label",2),c._uU(3),c.qZA(),c._UZ(4,"input",3),c.TgZ(5,"small",4),c._uU(6,"\xa0"),c.qZA(),c.qZA(),c.TgZ(7,"div",1),c.TgZ(8,"label"),c._uU(9),c.qZA(),c.TgZ(10,"input",5,6),c.NdJ("ngModelChange",function(e){return t.payDebtForm.amount=e}),c.qZA(),c.TgZ(12,"small",4),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",1),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",7,8),c.NdJ("ngModelChange",function(e){return t.payDebtForm.comment=e}),c.qZA(),c.TgZ(19,"small",4),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"table",9),c.TgZ(22,"tr"),c.TgZ(23,"td"),c._uU(24),c.qZA(),c.TgZ(25,"td",10),c.TgZ(26,"strong"),c._uU(27),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"tr"),c.TgZ(29,"td"),c._uU(30),c.qZA(),c.TgZ(31,"td",10),c.TgZ(32,"strong"),c._uU(33),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"div",11),c.TgZ(35,"button",12),c.NdJ("click",function(){return t.dismiss()}),c._uU(36),c.qZA(),c.TgZ(37,"button",13),c.NdJ("click",function(){return t.deposit()}),c._uU(38),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.tr.translate("manager_depodrawal_form_username")),c.xp6(1),c.s9C("value",t.payDebtForm.manager_username),c.xp6(5),c.Oqu(t.tr.translate("manager_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",t.payDebtForm.amount),c.xp6(6),c.Oqu(t.tr.translate("manager_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",t.payDebtForm.comment),c.xp6(7),c.AsE("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.manager_username,""),c.xp6(3),c.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt,""),c.xp6(3),c.HOy("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.manager_username," ",t.tr.translate("global_debt_for")," ",t.auth.client.username,""),c.xp6(3),c.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt_for_me,""),c.xp6(3),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!t.payDebtForm.amount||t.payDebtForm.amount<=0||t.payDebtForm.amount>t.payDebtForm.debt_for_me),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,A.wV,A.Fj,A.JJ,A.On],styles:[".form[_ngcontent-%COMP%]{min-width:450px}"]}),(0,g.gn)([(0,m.bH)()],Za.prototype,"blockUI",void 0);var ya=n(50103),wa=n(12332),xa=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.dialogConfig=a,this.toastr=i,this.ref=n,this.tr=r,this.group_list=[],this.group_id=-1,this.manager=null,this.propagate_managers=!1,this.propagate_users=!1}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.manager=this.dialogConfig.data.manager,this.group_id=this.manager.group_id;var t=[];this.api.get("group").subscribe(function(a){if(200===a.status){var n,o=i(a.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}t.unshift({value:-1,label:e.tr.translate("global_none")}),e.group_list=t}})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"submit",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/group",{manager_id:this.manager.id,group_id:this.group_id,propagate_managers:this.propagate_managers,propagate_users:this.propagate_users}).subscribe(function(t){e.blockUI.stop(),200===t.status&&e.toastr.success(e.tr.translate(t.message)),e.ref.close()})}}]),e}();xa.\u0275fac=function(e){return new(e||xa)(c.Y36(Z),c.Y36(ba.S),c.Y36(v._W),c.Y36(ba.E7),c.Y36(I))},xa.\u0275cmp=c.Xpm({type:xa,selectors:[["app-manager-assign-group"]],decls:22,vars:15,consts:[[1,"form",2,"width","400px"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["appendTo","body","name","group_id",3,"filter","autoDisplayFirst","options","ngModel","ngModelChange"],[1,"form-group","mt-3"],["name","propagate_managers",3,"binary","label","ngModel","ngModelChange"],[1,"form-group","mt-2"],["name","propagate_users",3,"binary","label","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.TgZ(1,"div",1),c.TgZ(2,"label",2),c._uU(3),c.qZA(),c._UZ(4,"input",3),c.TgZ(5,"small",4),c._uU(6,"\xa0"),c.qZA(),c.qZA(),c.TgZ(7,"div",1),c.TgZ(8,"label"),c._uU(9),c.qZA(),c.TgZ(10,"p-dropdown",5),c.NdJ("ngModelChange",function(e){return t.group_id=e}),c.qZA(),c.qZA(),c.TgZ(11,"div",6),c._UZ(12,"label"),c.TgZ(13,"p-checkbox",7),c.NdJ("ngModelChange",function(e){return t.propagate_managers=e}),c.qZA(),c.qZA(),c.TgZ(14,"div",8),c._UZ(15,"label"),c.TgZ(16,"p-checkbox",9),c.NdJ("ngModelChange",function(e){return t.propagate_users=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",10),c.TgZ(18,"button",11),c.NdJ("click",function(){return t.dismiss()}),c._uU(19),c.qZA(),c.TgZ(20,"button",12),c.NdJ("click",function(){return t.submit()}),c._uU(21),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.tr.translate("global_username")),c.xp6(1),c.s9C("value",null==t.manager?null:t.manager.username),c.xp6(5),c.Oqu(t.tr.translate("global_group")),c.xp6(1),c.Q6J("filter",!0)("autoDisplayFirst",!1)("options",t.group_list)("ngModel",t.group_id),c.xp6(3),c.s9C("label",t.tr.translate("group_assign_propagate_managers")),c.Q6J("binary",!0)("ngModel",t.propagate_managers),c.xp6(3),c.s9C("label",t.tr.translate("group_assign_propagate_users")),c.Q6J("binary",!0)("ngModel",t.propagate_users),c.xp6(3),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(2),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,ya.Lt,A.JJ,A.On,wa.XZ],styles:[""]}),(0,g.gn)([(0,m.bH)()],xa.prototype,"blockUI",void 0);var Aa=n(24879),qa=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}},Ta=function(){function e(t,a,i,n,r,l,s,c){o(this,e),this.api=t,this.auth=a,this.tr=i,this.toastr=n,this.ch=r,this.ref=l,this.dialogConfig=s,this.config=c,this.depositForm={manager_id:null,my_balance:0,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.manager_id=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.manager_id=this.dialogConfig.data.manager_id,this.api.get("manager/"+this.manager_id).subscribe(function(t){200===t.status&&(e.depositForm.manager_id=e.manager_id,e.depositForm.my_balance=e.auth.client.balance,e.depositForm.manager_username=t.data.username,e.depositForm.balance=t.data.balance,e.depositForm.transaction_id=e.ch.guid())})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"deposit",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/deposit",this.depositForm).subscribe(function(t){e.blockUI.stop(),e.ref.close(),200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.auth.reload()):e.toastr.error(e.tr.translate(t.message))})}}]),e}();Ta.\u0275fac=function(e){return new(e||Ta)(c.Y36(Z),c.Y36(w),c.Y36(I),c.Y36(v._W),c.Y36(y),c.Y36(ba.E7),c.Y36(ba.S),c.Y36(p))},Ta.\u0275cmp=c.Xpm({type:Ta,selectors:[["app-manager-deposit-form"]],decls:44,vars:27,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","manager_balance"],["type","text","readonly","","id","manager_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control","font-weight-bold",3,"ngModel","options","ngModelChange"],["amount","ngModel"],[1,"text-muted"],["name","isLoan",3,"label","ngModel","binary","ngModelChange"],["for","my_balance"],["type","text","readonly","","id","my_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","comment","placeholder","",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.TgZ(1,"div",1),c.TgZ(2,"label",2),c._uU(3),c.qZA(),c._UZ(4,"input",3),c.TgZ(5,"small",4),c._uU(6,"\xa0"),c.qZA(),c.qZA(),c.TgZ(7,"div",1),c.TgZ(8,"label",5),c._uU(9),c.qZA(),c._UZ(10,"input",6),c.ALo(11,"currency"),c.TgZ(12,"small",4),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",1),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",7,8),c.NdJ("ngModelChange",function(e){return t.depositForm.amount=e}),c.qZA(),c.TgZ(19,"small",9),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.TgZ(21,"div",1),c.TgZ(22,"p-checkbox",10),c.NdJ("ngModelChange",function(e){return t.depositForm.is_loan=e}),c.qZA(),c.TgZ(23,"small",4),c._uU(24,"\xa0"),c.qZA(),c.qZA(),c.TgZ(25,"div",1),c.TgZ(26,"label",11),c._uU(27),c.qZA(),c._UZ(28,"input",12),c.ALo(29,"currency"),c.TgZ(30,"small",4),c._uU(31,"\xa0"),c.qZA(),c.qZA(),c.TgZ(32,"div",1),c.TgZ(33,"label"),c._uU(34),c.qZA(),c.TgZ(35,"input",13,14),c.NdJ("ngModelChange",function(e){return t.depositForm.comment=e}),c.qZA(),c.TgZ(37,"small",4),c._uU(38,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",15),c.TgZ(40,"button",16),c.NdJ("click",function(){return t.dismiss()}),c._uU(41),c.qZA(),c.TgZ(42,"button",17),c.NdJ("click",function(){return t.deposit()}),c._uU(43),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.tr.translate("global_manager")),c.xp6(1),c.s9C("value",t.depositForm.manager_username),c.xp6(5),c.AsE("",t.tr.translate("managers_table_balance")," (",t.depositForm.manager_username,")"),c.xp6(1),c.s9C("value",c.xi3(11,19,t.depositForm.balance,t.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(t.tr.translate("manager_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",t.depositForm.amount)("options",c.VKq(25,qa,t.config.siteConfig.site_currency+" ")),c.xp6(5),c.MGl("label"," \xa0",t.tr.translate("manager_depodrawal_form_loan"),"\xa0"),c.Q6J("ngModel",t.depositForm.is_loan)("binary",!0),c.xp6(5),c.AsE("",t.tr.translate("managers_table_balance")," (",t.auth.client.username,")"),c.xp6(1),c.s9C("value",c.xi3(29,22,t.auth.client.balance,t.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(t.tr.translate("manager_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",t.depositForm.comment),c.xp6(6),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!t.depositForm.amount||t.depositForm.amount<=0),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,A.Fj,Aa.g1,A.JJ,A.On,wa.XZ],pipes:[Q.H9],styles:[""]}),(0,g.gn)([(0,m.bH)()],Ta.prototype,"blockUI",void 0);var ka=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}},Ca=function(){function e(t,a,i,n,r,l,s,c){o(this,e),this.api=t,this.auth=a,this.tr=i,this.toastr=n,this.ch=r,this.ref=l,this.dialogConfig=s,this.config=c,this.withdrawalForm={manager_id:null,my_balance:0,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.manager_id=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.manager_id=this.dialogConfig.data.manager_id,this.api.get("manager/"+this.manager_id).subscribe(function(t){200===t.status&&(e.withdrawalForm.manager_id=e.manager_id,e.withdrawalForm.my_balance=e.auth.client.balance,e.withdrawalForm.manager_username=t.data.username,e.withdrawalForm.balance=t.data.balance,e.withdrawalForm.transaction_id=e.ch.guid())})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"deduct",value:function(){var e=this;console.log(this.withdrawalForm),this.api.post("manager/withdraw",this.withdrawalForm).subscribe(function(t){e.blockUI.stop(),e.ref.close(),200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.auth.reload()):e.toastr.error(e.tr.translate(t.message))})}}]),e}();Ca.\u0275fac=function(e){return new(e||Ca)(c.Y36(Z),c.Y36(w),c.Y36(I),c.Y36(v._W),c.Y36(y),c.Y36(ba.E7),c.Y36(ba.S),c.Y36(p))},Ca.\u0275cmp=c.Xpm({type:Ca,selectors:[["app-manager-withdrawal-form"]],decls:44,vars:27,consts:[[1,"form"],[1,"from-group"],["for","manager_username"],["type","text","readonly","","id","manager_username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","manager_balance"],["type","text","readonly","","id","manager_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control","font-weight-bold",3,"ngModel","options","ngModelChange"],["amount","ngModel"],[1,"text-muted"],["name","isLoan",3,"label","ngModel","binary","ngModelChange"],["for","my_balance"],["type","text","readonly","","id","my_balance",1,"form-control-plaintext","font-weight-bold",3,"value"],["type","text","name","comment","placeholder","",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.TgZ(1,"div",1),c.TgZ(2,"label",2),c._uU(3),c.qZA(),c._UZ(4,"input",3),c.TgZ(5,"small",4),c._uU(6,"\xa0"),c.qZA(),c.qZA(),c.TgZ(7,"div",1),c.TgZ(8,"label",5),c._uU(9),c.qZA(),c._UZ(10,"input",6),c.ALo(11,"currency"),c.TgZ(12,"small",4),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",1),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",7,8),c.NdJ("ngModelChange",function(e){return t.withdrawalForm.amount=e}),c.qZA(),c.TgZ(19,"small",9),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.TgZ(21,"div",1),c.TgZ(22,"p-checkbox",10),c.NdJ("ngModelChange",function(e){return t.withdrawalForm.is_loan=e}),c.qZA(),c.TgZ(23,"small",4),c._uU(24,"\xa0"),c.qZA(),c.qZA(),c.TgZ(25,"div",1),c.TgZ(26,"label",11),c._uU(27),c.qZA(),c._UZ(28,"input",12),c.ALo(29,"currency"),c.TgZ(30,"small",4),c._uU(31,"\xa0"),c.qZA(),c.qZA(),c.TgZ(32,"div",1),c.TgZ(33,"label"),c._uU(34),c.qZA(),c.TgZ(35,"input",13,14),c.NdJ("ngModelChange",function(e){return t.withdrawalForm.comment=e}),c.qZA(),c.TgZ(37,"small",4),c._uU(38,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",15),c.TgZ(40,"button",16),c.NdJ("click",function(){return t.dismiss()}),c._uU(41),c.qZA(),c.TgZ(42,"button",17),c.NdJ("click",function(){return t.deduct()}),c._uU(43),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.tr.translate("global_manager")),c.xp6(1),c.s9C("value",t.withdrawalForm.manager_username),c.xp6(5),c.AsE("",t.tr.translate("managers_table_balance")," (",t.withdrawalForm.manager_username,")"),c.xp6(1),c.s9C("value",c.xi3(11,19,t.withdrawalForm.balance,t.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(t.tr.translate("manager_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",t.withdrawalForm.amount)("options",c.VKq(25,ka,t.config.siteConfig.site_currency+" ")),c.xp6(5),c.MGl("label"," \xa0",t.tr.translate("manager_depodrawal_form_loan"),"\xa0"),c.Q6J("ngModel",t.withdrawalForm.is_loan)("binary",!0),c.xp6(5),c.AsE("",t.tr.translate("managers_table_balance")," (",t.auth.client.username,")"),c.xp6(1),c.s9C("value",c.xi3(29,22,t.auth.client.balance,t.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(t.tr.translate("manager_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",t.withdrawalForm.comment),c.xp6(6),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!t.withdrawalForm.amount||t.withdrawalForm.amount<=0),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,A.Fj,Aa.g1,A.JJ,A.On,wa.XZ],pipes:[Q.H9],styles:[""]}),(0,g.gn)([(0,m.bH)()],Ca.prototype,"blockUI",void 0);var Ua=n(77498),Ma=n(13928),Fa=["managers_tree"],Ja=function(){function e(t,a){o(this,e),this.api=t,this.auth=a,this.treeNodes=[],this.manager_id=null,this.onManagerSelected=new c.vpe}return l(e,[{key:"ngOnInit",value:function(){var e=this,t=[];this.api.get("manager/tree").subscribe(function(a){var n,o=i(a);try{for(o.s();!(n=o.n()).done;){var r=n.value;(1===r.id||null==r.parent_id)&&(r.parent_id="#"),t.push({id:r.id,text:r.username,parent:r.parent_id,icon:"fa fa-user"})}}catch(l){o.e(l)}finally{o.f()}e.treeNodes=t})}},{key:"_onNodeSelected",value:function(){var e=this.managersTree.getSelectedNode();this.onManagerSelected.emit({id:e.id,username:e.text,parent_id:e.parent})}},{key:"search",value:function(){this.managersTree.search(this.search_string)}}]),e}();Ja.\u0275fac=function(e){return new(e||Ja)(c.Y36(Z),c.Y36(w))},Ja.\u0275cmp=c.Xpm({type:Ja,selectors:[["app-managers-tree"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Fa,5),2&e)&&(c.iGM(a=c.CRH())&&(t.managersTree=a.first))},inputs:{showSearch:"showSearch"},outputs:{onManagerSelected:"onManagerSelected"},decls:11,vars:4,consts:[[1,"tree-container"],[1,"p-fluid",3,"hidden"],[1,"ui-sm-12","ui-g-12","ui-md-12"],[1,"p-inputgroup"],["type","text","pInputText","","placeholder","search managers...",1,"p-inputtext","p-component",3,"ngModel","ngModelChange"],[1,"p-inputgroup-addon"],[1,"fa","fa-search"],["id","tree1"],[3,"data","container","onNodeSelected"],["managers_tree",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(e){return t.search_string=e})("ngModelChange",function(){return t.search()}),c.qZA(),c.TgZ(5,"span",5),c._UZ(6,"i",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(7,"hr"),c.TgZ(8,"div",7),c.TgZ(9,"js-tree",8,9),c.NdJ("onNodeSelected",function(){return t._onNodeSelected()}),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.Q6J("hidden",!t.showSearch),c.xp6(3),c.Q6J("ngModel",t.search_string),c.xp6(5),c.Q6J("data",t.treeNodes)("container","#tree1"))},directives:[A.Fj,Ma.o,A.JJ,A.On,it],styles:[".tree-container[_ngcontent-%COMP%]{padding:10px;background:white;width:100%;height:100%}#tree1[_ngcontent-%COMP%]{overflow:auto;height:85%}"]}),(0,g.gn)([(0,m.bH)()],Ja.prototype,"blockUI",void 0);var Oa=["manager_model_view"],Na=["rename_modal"];function Ia(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",6,7),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw(2).onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw(2).onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw(2).loading=!0})("onCellMiddleClicked",function(e){return c.CHM(a),c.oxw(2).onCellMiddleClicked(e)})("onDataLoaded",function(){return c.CHM(a),c.oxw(2).loading=!1}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}function Ya(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"h4",9),c._uU(2),c.qZA(),c.TgZ(3,"button",10),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c.TgZ(4,"span",11),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",12),c.TgZ(7,"form",13),c.TgZ(8,"div",14),c.TgZ(9,"label"),c._uU(10),c.qZA(),c._UZ(11,"input",15),c.TgZ(12,"small",16),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",14),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",17,18),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).renameForm.new_username=e})("keydown.enter",function(){return c.CHM(a),c.oxw(2).rename()}),c.qZA(),c.TgZ(19,"small",16),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",19),c.TgZ(22,"button",20),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c._uU(23),c.qZA(),c.TgZ(24,"button",21),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).rename()}),c._uU(25),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.tr.translate("manager_rename_form_title")),c.xp6(8),c.Oqu(i.tr.translate("manager_rename_form_current_username")),c.xp6(1),c.s9C("value",i.renameForm.username),c.xp6(5),c.Oqu(i.tr.translate("manager_rename_form_new_username")),c.xp6(1),c.Q6J("ngModel",i.renameForm.new_username),c.xp6(6),c.Oqu(i.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!i.renameForm.new_username||i.renameForm.new_username.length<1),c.xp6(1),c.Oqu(i.tr.translate("global_button_submit"))}}function Qa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div"),c.YNc(1,Ia,2,3,"model-table-view",1),c.YNc(2,Ya,26,8,"ng-template",null,2,c.W1O),c.TgZ(4,"p-sidebar",3),c.NdJ("visibleChange",function(e){return c.CHM(a),c.oxw().show_managers_tree=e}),c.TgZ(5,"h4",4),c._uU(6),c.qZA(),c.TgZ(7,"app-managers-tree",5),c.NdJ("onManagerSelected",function(e){return c.CHM(a),c.oxw()._onTreeNodeSelected(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngIf",i.modelViewConfig),c.xp6(3),c.Q6J("visible",i.show_managers_tree),c.xp6(2),c.Oqu(i.tr.translate("mangers_tree_title")),c.xp6(1),c.Q6J("showSearch",!0)}}var Sa=function(){function e(t,a,i,n,r,l,s,c,u,d){o(this,e),this.api=t,this.router=a,this.modalService=i,this.swal=n,this.toastr=r,this.tr=l,this.ch=s,this.config=c,this.dialogService=u,this.auth=d,this.columns=[{dataKey:"username",label:this.tr.translate("global_username"),classFn:function(e){return 0===e.enabled?"manager_disabled":"href"}},{dataKey:"firstname",label:this.tr.translate("global_firstname")},{dataKey:"lastname",label:this.tr.translate("global_lastname")},{dataKey:"balance",label:this.tr.translate("managers_table_balance"),pipe:"currency"},{dataKey:"loan_balance",label:this.tr.translate("managers_table_loan_balance"),pipe:"currency"},{dataKey:"name",label:this.tr.translate("managers_table_acl_group"),parentKey:"acl_group_details",sortBy:"acl_group_id"},{dataKey:"username",label:this.tr.translate("managers_table_parent"),parentKey:"parent_details",sortBy:"parent_id"},{dataKey:"group_name",label:this.tr.translate("managers_table_group"),parentKey:"group_details",sortBy:"group_id",hidden:!0},{dataKey:"city",label:this.tr.translate("managers_table_city"),hidden:!0},{dataKey:"users_count",label:this.tr.translate("managers_table_users_count")},{dataKey:"reward_points",label:this.tr.translate("managers_table_reward_points"),hidden:!0},{dataKey:"site_name",sortBy:"site_id",parentKey:"site_details",label:"Site",hidden:!0},{dataKey:"discount_rate",label:this.tr.translate("manager_form_discount_rate"),hidden:!0},{dataKey:"created_at",label:this.tr.translate("Creation Date"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",acl:"prm_managers_update",inline:!0,requiresRow:!0},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"rename",label:this.tr.translate("global_actions_rename"),icon:"fa fa-edit",acl:"prm_managers_rename",requiresRow:!0,inline:!0},{name:"assign_group",label:this.tr.translate("manager_actions_assign_group"),icon:"fa fa-edit",acl:"prm_groups_assign",requiresRow:!0,inline:!0},{name:"",label:"",type:"separator"},{name:"deposit",label:this.tr.translate("global_actions_deposit"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_deposit"},{name:"withdraw",label:this.tr.translate("global_actions_withdrawal"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_withdrawal"},{name:"pay_debt",label:this.tr.translate("global_actions_pay_debt"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_managers_deposit"},{name:"",label:"",type:"separator"},{name:"add_reward_points",label:this.tr.translate("manager_actions_add_reward_points"),requiresRow:!0,inline:!0,icon:"fa fa-money",acl:"prm_manager_add_reward_points"},{name:"deduct_reward_points",label:this.tr.translate("manager_actions_deduct_reward_points"),requiresRow:!0,inline:!0,icon:"fa fa-money",acl:"prm_manager_deduct_reward_points"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,inline:!0,acl:"prm_managers_delete"}],this.filterFields=[{key:"parent_id",label:this.tr.translate("managers_table_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"sub_managers",label:this.tr.translate("manager_overview_submanagers"),type:"switch",layout:"vertical",value:1,cols:12},{key:"site_id",label:this.tr.translate("user_form_label_site"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_sites_management"},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"}],this.filterOptions={parent_id:[{value:1,label:"admin"}],group_id:[]},this.headerActions=[{icon:"fal fa-folder-tree",action:"managers_tree",label:"Managers Tree"}],this.show_managers_tree=!1,this.modelViewConfig=null,this.loading=!1,this.site_list=[],this.withdrawalForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,balance:0},this.renameForm={manager_id:null,username:"",new_username:""},this.currency_precision=0,this.loadResources()}return l(e,[{key:"ngOnInit",value:function(){this.auth.has("prm_managers_sysadmin")&&(this.currency_precision=2),this.modelViewConfig={title:this.tr.translate("managers_table_title"),icon:"fa fa-user-secret",columns:this.columns,dataUrl:"index/manager",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,allowExport:this.auth.has("prm_managers_export"),primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"managers",hasAdvancedFilter:!0,hasInlineActions:!0,id:"managers_index_table",showRowsCount:!0,sortBy:"username",headerActions:this.headerActions}}},{key:"username_class",value:function(e){return"href"}},{key:"onAction",value:function(e){var t=null;switch(e.action){case"new":this.router.navigate(["manager/"]);break;case"edit":t=this.modelView.currentRow.id,this.router.navigate(["manager/"+t]);break;case"deposit":this.showDepositForm();break;case"withdraw":this.showWithdrawalForm();break;case"pay_debt":this.showPayDebtForm();break;case"delete":this.destroy();break;case"rename":this.showRenameForm();break;case"managers_tree":this.showManagersTree();break;case"add_reward_points":this.addRewardPoints();break;case"deduct_reward_points":this.deductRewardPoints();break;case"edit_new_tab":t=this.modelView.currentRow.id,this.router.navigate([]).then(function(e){window.open("#/manager/"+t,"_blank")});break;case"assign_group":this.showAssignGroupDialog()}}},{key:"onCellClicked",value:function(e){"username"==e.column&&this.router.navigate(["manager",e.row.id])}},{key:"onCellMiddleClicked",value:function(e){console.log(e),"username"===e.column&&window.open("#/manager/"+e.row.id,"_blank")}},{key:"showDepositForm",value:function(){var e=this,t=this.modelView.currentRow;this.dialogService.open(Ta,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:t.id}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"showPayDebtForm",value:function(){var e=this,t=this.modelView.currentRow;this.dialogService.open(Za,{header:this.tr.translate("global_actions_pay_debt"),data:{manager_id:t.id}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"showWithdrawalForm",value:function(){var e=this,t=this.modelView.currentRow;this.dialogService.open(Ca,{header:this.tr.translate("manager_depodrawal_form_title_withdrawal"),width:"500px",data:{manager_id:t.id}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"addRewardPoints",value:function(){var e=this,t=this.modelView.currentRow.id;this.swal.prompt(this.tr.translate("manager_label_add_reward_point")).subscribe(function(a){var i=parseInt(a);i>0&&e.api.post("manager/addRewardPoints",{manager_id:t,amount:i}).subscribe(function(t){200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.warning(e.tr.translate(t.message))})})}},{key:"deductRewardPoints",value:function(){var e=this,t=this.modelView.currentRow.id;this.swal.prompt(this.tr.translate("manager_label_deduct_reward_point")).subscribe(function(a){var i=parseInt(a);i>0&&e.api.post("manager/deductRewardPoints",{manager_id:t,amount:i}).subscribe(function(t){200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.warning(e.tr.translate(t.message))})})}},{key:"showRenameForm",value:function(){var e=this.modelView.currentRow;this.renameForm.manager_id=e.id,this.renameForm.username=e.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}},{key:"rename",value:function(){var e=this,t=this.renameForm.manager_id,a={username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.put("manager/"+t,a).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.toastr.success("Manager Renamed"),e.modelView.reload()):e.toastr.error("Unable to rename manager"),e.activeModal.hide()},function(t){e.toastr.error("Error Occurred !"),e.activeModal.hide()})}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:this.tr.translate("manager_label_delete_manager"),type:"warning",text:this.tr.translate("manager_label_confirm_delete"),confirmButtonText:this.tr.translate("global_yes")}).subscribe(function(){var t=null;if(e.modelView.currentRow&&(t=e.modelView.currentRow.id),e.blockUI.start("loading..."),e.modelView.selectedRows().length>1){var a,n=[],o=i(e.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.id)}}catch(l){o.e(l)}finally{o.f()}e.api.post("manager/bulkDelete",n).subscribe(function(t){e.blockUI.stop(),200!==t.status?e.toastr.warning(e.tr.translate("msg_unable_delete_some_managers")):(e.toastr.success(e.tr.translate("msg_manager_delete_success")),e.modelView.reload())})}else e.api.delete("manager/"+t).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.modelView.reload(),e.toastr.success(e.tr.translate("msg_manager_delete_success"),"")):e.toastr.warning(e.tr.translate("msg_unable_delete_some_managers"))})})}},{key:"loadResources",value:function(){var e=this;if(this.api.get("index/manager").subscribe(function(t){var a=[{value:-1,label:"All"}];t.data.map(function(e){a.push({value:e.id,label:e.username})}),e.filterOptions.parent_id=a}),this.auth.has("prm_sites_management")&&this.api.get("site").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.site_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.filterOptions.site_id=e.site_list,e.filterOptions.site_id.unshift({value:-1,label:e.tr.translate("global_all")})}}),this.auth.has("prm_groups_assign")){var t=[];this.api.get("group").subscribe(function(a){if(200===a.status){var n,o=i(a.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}t.unshift({value:-1,label:e.tr.translate("global_all")}),e.filterOptions.group_id=t}})}}},{key:"showManagersTree",value:function(){this.show_managers_tree=!this.show_managers_tree}},{key:"_onTreeNodeSelected",value:function(e){var t={parent_id:parseInt(e.id),sub_managers:!0};this.modelView.setAdvancedFilter(t),this.modelView.advancedFilter.search(),this.activeModal.hide()}},{key:"showAssignGroupDialog",value:function(){var e=this,t=this.modelView.currentRow;this.dialogService.open(xa,{header:this.tr.translate("manager_actions_assign_group"),data:{manager:t}}).onClose.subscribe(function(){e.modelView.reload()})}}]),e}();Sa.\u0275fac=function(e){return new(e||Sa)(c.Y36(Z),c.Y36(_.F0),c.Y36(at.tT),c.Y36(tt),c.Y36(v._W),c.Y36(I),c.Y36(y),c.Y36(p),c.Y36(ba.xA),c.Y36(w))},Sa.\u0275cmp=c.Xpm({type:Sa,selectors:[["managers-index"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(Oa,5),c.Gf(Na,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.renameModal=a.first))},features:[c._Bn([ba.xA])],decls:1,vars:1,consts:[[4,"blockUI"],["name","manager_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded",4,"ngIf"],["rename_modal",""],["position","right","baseZIndex","999","styleClass","p-sidebar-md",3,"visible","visibleChange"],[1,"modal-title","text-center"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],["name","manager_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded"],["manager_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","","id","manager_username2",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&c.YNc(0,Qa,8,4,"div",0),2&e&&c.Q6J("blockUI","model-view")},directives:[m.Z2,Q.O5,Ua.Y,Ja,Tt,A._Y,A.JL,A.F,A.Fj,A.JJ,A.On],styles:[".manager_disabled{color:#bb3436!important}.tree-container{display:inline-block;min-width:100%;min-height:100px}\n"],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Sa.prototype,"blockUI",void 0);var Pa=n(66610),Da=n(25301),Ha=n(88598),Ra=n(97748);function Va(e,t){if(1&e&&(c.TgZ(0,"div",4),c.TgZ(1,"h4"),c._uU(2,"\xa0"),c.qZA(),c.TgZ(3,"h4"),c._uU(4),c.qZA(),c._UZ(5,"hr"),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.Oqu(a.tr.translate(a._fieldConfig.label))}}function La(e,t){1&e&&(c.TgZ(0,"span",29),c._uU(1,"*"),c.qZA())}function Ea(e,t){if(1&e&&(c.TgZ(0,"span",30),c._UZ(1,"i"),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.Tol(a._fieldConfig.icon)}}function Ka(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",31),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.s9C("pattern",i._fieldConfig.pattern),c.s9C("placeholder",i._fieldConfig.placeholder),c.Q6J("formControlName",i._fieldConfig.key)("id",i._fieldConfig.key)}}function Ba(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",32),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("formControlName",i._fieldConfig.key)("id",i._fieldConfig.key)}}function ja(e,t){if(1&e&&(c.TgZ(0,"option",35),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.text)}}function za(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"select",33),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.YNc(1,ja,2,2,"option",34),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("id",i._fieldConfig.key)("formControlName",i._fieldConfig.key),c.xp6(1),c.Q6J("ngForOf",i._fieldConfig.options)}}function Ga(e,t){if(1&e&&(c.TgZ(0,"option",35),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.value),c.xp6(1),c.Oqu(a.label)}}function Wa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"select",36),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.YNc(1,Ga,2,2,"option",34),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("id",i._fieldConfig.key)("name",i._fieldConfig.key)("formControlName",i._fieldConfig.key),c.xp6(1),c.Q6J("ngForOf",i._fieldConfig.options)}}function $a(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"div",38),c.TgZ(2,"p-dropdown",39),c.NdJ("onChange",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("id",i._fieldConfig.key)("name",i._fieldConfig.key)("autoDisplayFirst",!1)("options",i._fieldConfig.options)("formControlName",i._fieldConfig.key)("placeholder",i._fieldConfig.placeholder)}}function Xa(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"div",38),c.TgZ(2,"div",40),c.TgZ(3,"p-dropdown",41),c.NdJ("onChange",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(3),c.Q6J("id",i._fieldConfig.key)("options",i._fieldConfig.options)("autoDisplayFirst",!1)("formControlName",i._fieldConfig.key)("placeholder",i._fieldConfig.placeholder)("filter",!0)}}function ei(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.TgZ(1,"div",43),c.TgZ(2,"p-multiSelect",44),c.NdJ("onChange",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("id",i._fieldConfig.key)("options",i._fieldConfig.options)("formControlName",i._fieldConfig.key)("filter",!0)}}function ti(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",41),c.NdJ("onChange",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("id",i._fieldConfig.key)("options",i._fieldConfig.options)("autoDisplayFirst",!1)("formControlName",i._fieldConfig.key)("placeholder",i._fieldConfig.placeholder)("filter",!0)}}function ai(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"p-inputSwitch",45),c.NdJ("onChange",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("id",i._fieldConfig.key)("formControlName",i._fieldConfig.key)("trueValue",1)("falseValue",0)}}var ii=function(e){return{"font-weight-bold":e}};function ni(e,t){if(1&e&&(c.TgZ(0,"p",46),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.Q6J("ngClass",c.VKq(2,ii,1==a._fieldConfig.bold)),c.xp6(1),c.Oqu(a._fieldConfig.value)}}function oi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",37),c.TgZ(1,"div",47),c.TgZ(2,"p-calendar",48),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)})("onSelect",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Q6J("formControlName",i._fieldConfig.key)("name",i._fieldConfig.key)("id",i._fieldConfig.key)}}function ri(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",49),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.s9C("pattern",i._fieldConfig.pattern),c.s9C("placeholder",i._fieldConfig.placeholder),c.Q6J("formControlName",i._fieldConfig.key)("id",i._fieldConfig.key)}}function li(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",50),c.NdJ("change",function(){return c.CHM(a),c.oxw(2).uploader.uploadAll()}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("name",i._fieldConfig.key)("uploader",i.uploader)}}function si(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",51),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).onButton(e.action)}),c._UZ(1,"span",52),c.qZA()}if(2&e){var i=t.$implicit;c.Gre("btn ",i.class,""),c.xp6(1),c.Q6J("innerHTML",i.text,c.oJD)}}function ci(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"textarea",53),c.NdJ("change",function(e){return c.CHM(a),c.oxw(2).onChange(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.s9C("placeholder",i._fieldConfig.placeholder),c.Q6J("formControlName",i._fieldConfig.key)("id",i._fieldConfig.key)}}function ui(e,t){1&e&&c._UZ(0,"label")}function di(e,t){if(1&e&&(c.TgZ(0,"p",54),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.hij("",a.tr.translate(a._fieldConfig.label)," is required")}}function fi(e,t){1&e&&c._UZ(0,"p",55)}function pi(e,t){if(1&e&&(c.TgZ(0,"p",55),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.Oqu(a._fieldConfig.help)}}var gi=function(e){return{row:e}},hi=function(e,t){return{"col-sm-5 text-right":e,"col-md-auto":t}},mi=function(e){return{"pull-right":e}},_i=function(e){return{col:e}};function vi(e,t){if(1&e&&(c.TgZ(0,"div",5),c.TgZ(1,"label",6),c.TgZ(2,"span",7),c.YNc(3,La,2,0,"span",8),c._uU(4),c.qZA(),c.qZA(),c.TgZ(5,"div",9),c.TgZ(6,"div",10),c.TgZ(7,"div",11),c.YNc(8,Ea,2,3,"span",12),c.YNc(9,Ka,1,4,"input",13),c.YNc(10,Ba,1,2,"input",14),c.YNc(11,za,2,3,"select",15),c.YNc(12,Wa,2,4,"select",16),c.YNc(13,$a,3,6,"div",17),c.YNc(14,Xa,4,6,"div",17),c.YNc(15,ei,3,4,"div",18),c.YNc(16,ti,3,6,"div",18),c.YNc(17,ai,1,4,"p-inputSwitch",19),c.YNc(18,ni,2,4,"p",20),c.YNc(19,oi,3,3,"div",17),c.YNc(20,ri,1,4,"input",21),c.YNc(21,li,1,2,"input",22),c.TgZ(22,"div",23),c.YNc(23,si,2,4,"button",24),c.qZA(),c.YNc(24,ci,1,3,"textarea",25),c.YNc(25,ui,1,0,"label",26),c.qZA(),c.qZA(),c.YNc(26,di,2,1,"p",27),c.YNc(27,fi,1,0,"p",28),c.YNc(28,pi,2,1,"p",28),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.Q6J("formGroup",a.form)("ngClass",c.VKq(31,gi,"horizontal"==a._fieldConfig.layout))("hidden",a._fieldConfig.visible||!1),c.xp6(1),c.Q6J("ngClass",c.WLB(33,hi,"horizontal"==a._fieldConfig.layout,"horizontal"!=a._fieldConfig.layout))("hidden",a._fieldConfig.hideLabel),c.uIk("for",a._fieldConfig.key),c.xp6(1),c.Q6J("ngClass",c.VKq(36,mi,"horizontal"==a._fieldConfig.layout)),c.xp6(1),c.Q6J("ngIf",a._fieldConfig.required),c.xp6(1),c.hij(" ",a.tr.translate(a._fieldConfig.label),""),c.xp6(1),c.Q6J("ngSwitch",a._fieldConfig.type)("ngClass",c.VKq(38,_i,"horizontal"==a._fieldConfig.layout)),c.xp6(3),c.Q6J("ngIf",a._fieldConfig.icon),c.xp6(1),c.Q6J("ngSwitchCase","text"),c.xp6(1),c.Q6J("ngSwitchCase","password"),c.xp6(1),c.Q6J("ngSwitchCase","selectmultiple"),c.xp6(1),c.Q6J("ngSwitchCase","plainSelect"),c.xp6(1),c.Q6J("ngSwitchCase","select"),c.xp6(1),c.Q6J("ngSwitchCase","select2"),c.xp6(1),c.Q6J("ngSwitchCase","select2multiple"),c.xp6(1),c.Q6J("ngSwitchCase","selectize"),c.xp6(1),c.Q6J("ngSwitchCase","switch"),c.xp6(1),c.Q6J("ngSwitchCase","label"),c.xp6(1),c.Q6J("ngSwitchCase","date"),c.xp6(1),c.Q6J("ngSwitchCase","clock"),c.xp6(1),c.Q6J("ngSwitchCase","file"),c.xp6(2),c.Q6J("ngForOf",a._fieldConfig.buttons),c.xp6(1),c.Q6J("ngSwitchCase","textarea"),c.xp6(1),c.Q6J("ngSwitchCase","dummy"),c.xp6(1),c.Q6J("ngIf",!a.isValid&&a.isTouched),c.xp6(1),c.Q6J("ngIf",(a.isValid||!a.isTouched)&&!(null!=a._fieldConfig&&a._fieldConfig.help)&&"visible"==a._fieldConfig.helpBlock),c.xp6(1),c.Q6J("ngIf",(null==a._fieldConfig||null==a._fieldConfig.help?null:a._fieldConfig.help.length)>1)}}var bi=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.ref=t,this.log=a,this.auth=i,this.config=n,this.tr=r,this.changed=new c.vpe,this.action=new c.vpe}return l(e,[{key:"isValid",get:function(){return this.form.controls[this._fieldConfig.key].valid}},{key:"isTouched",get:function(){return this.form.controls[this._fieldConfig.key].touched}},{key:"subscribeForChanges",value:function(){var e=this;"separator"!=this._fieldConfig.type&&"file"!=this._fieldConfig.type&&"buttonGroup"!=this._fieldConfig.type&&this.form.controls[this._fieldConfig.key].valueChanges.subscribe(function(t){e.changed.emit({key:e._fieldConfig.key,value:t})})}},{key:"ngOnInit",value:function(){this.subscribeForChanges()}},{key:"ngOnChanges",value:function(){this._fieldConfig=this.fieldConfig,this._fieldConfig.key=this.fieldConfig.key,this._fieldConfig.label=this.fieldConfig.label||"",this._fieldConfig.required=this.fieldConfig.required||!1,this._fieldConfig.value=this.fieldConfig.value||null,this._fieldConfig.options=this.options||this.fieldConfig.options||[],this._fieldConfig.icon=this.fieldConfig.icon||null,this._fieldConfig.hidden=this.fieldConfig.hidden||!1,this._fieldConfig.cols=this.fieldConfig.cols||6,this._fieldConfig.pattern=this.fieldConfig.pattern||"",this._fieldConfig.layout=this.fieldConfig.layout||"horizontal",this._fieldConfig.checked=this.fieldConfig.checked||!1,this._fieldConfig.hideLabel=this.fieldConfig.hideLabel||!1,this._fieldConfig.placeholder=this.fieldConfig.placeholder||null,this._fieldConfig.bold=this.fieldConfig.bold||!1,this._fieldConfig.helpBlock=this.formConfig?this.formConfig.helpBlock:"visible",this._fieldConfig.acl=this.fieldConfig.acl||null,this._fieldConfig.buttons=this.fieldConfig.buttons||[],"file"===this._fieldConfig.type&&(this.uploader=new J.bA({url:this.config.getApiUrl()+this._fieldConfig.uploadUrl,isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",additionalParameter:this.form.value,authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}))}},{key:"onChange",value:function(e){var t=null;"switch"===this._fieldConfig.type&&(e&&void 0!==e.checked&&!0===e.checked&&(t=!0),e&&void 0!==e.checked&&!1===e.checked&&(t=!1)),("text"===this._fieldConfig.type||"password"===this._fieldConfig.type)&&(t=e.target.value),this._fieldConfig.type.includes("select")&&(t=e.value),"date"===this._fieldConfig.type&&(t=new Date(e).toLocaleDateString()),this.changed.emit({key:this._fieldConfig.key,value:t,e:e})}},{key:"onButton",value:function(e){this.action.emit(e)}},{key:"setOptions",value:function(e){this._fieldConfig.options=e,this.ref.detectChanges()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.sBO),c.Y36(b),c.Y36(w),c.Y36(p),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["dynamic-form-field"]],inputs:{fieldConfig:"fieldConfig",form:"form",options:"options",formConfig:"formConfig"},outputs:{changed:"changed",action:"action"},features:[c.TTD],decls:4,vars:2,consts:[["class","col-md-12",4,"ngIf"],[1,"row"],[1,"col-sm-12"],["class","form-group",3,"formGroup","ngClass","hidden",4,"ngIf"],[1,"col-md-12"],[1,"form-group",3,"formGroup","ngClass","hidden"],[1,"col-form-label",3,"ngClass","hidden"],[3,"ngClass"],["class","required-star",4,"ngIf"],[3,"ngSwitch","ngClass"],[1,"controls"],[1,"input-prepend","input-group","input-group-md"],["class","input-group-addon",4,"ngIf"],["type","text","class","form-control",3,"formControlName","id","pattern","placeholder","change",4,"ngSwitchCase"],["pPassword","","type","password","class","form-control",3,"formControlName","id","change",4,"ngSwitchCase"],["class","form-control","multiple","",3,"id","formControlName","change",4,"ngSwitchCase"],["class","form-control",3,"id","name","formControlName","change",4,"ngSwitchCase"],["class","p-fluid",4,"ngSwitchCase"],["class","ui-g ui-fluid w-100",3,"change",4,"ngSwitchCase"],[3,"id","formControlName","trueValue","falseValue","onChange",4,"ngSwitchCase"],["class","form-control-static",3,"ngClass",4,"ngSwitchCase"],["atp-time-picker","","type","text","class","form-control",3,"formControlName","id","pattern","placeholder","change",4,"ngSwitchCase"],["type","file","ng2FileSelect","",3,"name","uploader","change",4,"ngSwitchCase"],["ngSwitch","'buttonGroup'","role","group",1,"btn-group"],["type","button",3,"class","click",4,"ngFor","ngForOf"],["class","form-control",3,"formControlName","id","placeholder","change",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","help-block text-danger",4,"ngIf"],["class","help-block",4,"ngIf"],[1,"required-star"],[1,"input-group-addon"],["type","text",1,"form-control",3,"formControlName","id","pattern","placeholder","change"],["pPassword","","type","password",1,"form-control",3,"formControlName","id","change"],["multiple","",1,"form-control",3,"id","formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"id","name","formControlName","change"],[1,"p-fluid"],[1,"p-field","p-grid"],[3,"id","name","autoDisplayFirst","options","formControlName","placeholder","onChange"],[1,"p-col-12"],[3,"id","options","autoDisplayFirst","formControlName","placeholder","filter","onChange"],[1,"ui-g","ui-fluid","w-100",3,"change"],[1,"ui-g-12","p-0"],[3,"id","options","formControlName","filter","onChange"],[3,"id","formControlName","trueValue","falseValue","onChange"],[1,"form-control-static",3,"ngClass"],[1,"p-field","p-col-12","p-md-12"],["dateFormat","yy-mm-dd","showButtonBar","true","appendTo","body",3,"formControlName","name","id","change","onSelect"],["atp-time-picker","","type","text",1,"form-control",3,"formControlName","id","pattern","placeholder","change"],["type","file","ng2FileSelect","",3,"name","uploader","change"],["type","button",3,"click"],[3,"innerHTML"],[1,"form-control",3,"formControlName","id","placeholder","change"],[1,"help-block","text-danger"],[1,"help-block"]],template:function(e,t){1&e&&(c.YNc(0,Va,6,1,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.YNc(3,vi,29,40,"div",3),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf","separator"==t._fieldConfig.type),c.xp6(3),c.Q6J("ngIf","separator"!=t._fieldConfig.type))},directives:[Q.O5,A.JL,A.sg,Q.mk,Q.RF,Q.n9,Q.sg,A.Fj,A.JJ,A.u,A.c5,Pa.QK,A.K7,A.YN,A.Kr,A.EJ,ya.Lt,kt.NU,Da.Ql,Ha.f,Ra.ye,J.C6],styles:[".required-star[_ngcontent-%COMP%]{color:red;font-weight:bold}h4[_ngcontent-%COMP%]{font-weight:lighter}.form-control-static[_ngcontent-%COMP%]{margin-top:7px;font-weight:lighter}.form-group[_ngcontent-%COMP%]{margin-bottom:.5rem}.help-block[_ngcontent-%COMP%]{font-size:.7rem}"]}),e}();function Zi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form-field",6),c.NdJ("changed",function(e){return c.CHM(a),c.oxw(2).fire_change(e)})("action",function(e){return c.CHM(a),c.oxw(2).fire_action(e)}),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw(2);c.Gre("col-md-",i.cols,""),c.Q6J("formConfig",n.formConfig)("fieldConfig",i)("hidden",n.hiddenFields&&n.hiddenFields.indexOf(i.key)>=0||i.acl&&!n.auth.has(i.acl))("form",n.form)("options",n.options[i.key])}}function yi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",14),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(4).fire_action(e.action)}),c._uU(1),c.qZA()}if(2&e){var i=t.$implicit;c.Gre("btn form-action-button ",i.btnClass,""),c.xp6(1),c.Oqu(i.text)}}function wi(e,t){if(1&e&&(c.TgZ(0,"div",12),c.YNc(1,yi,2,4,"button",13),c.qZA()),2&e){var a=c.oxw(3);c.xp6(1),c.Q6J("ngForOf",a._formConfig.customActions)}}function xi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",7),c._UZ(1,"hr"),c.TgZ(2,"div"),c.YNc(3,wi,2,1,"div",8),c.TgZ(4,"div",9),c.TgZ(5,"button",10),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).fire_submit()}),c._uU(6),c.qZA(),c.TgZ(7,"button",11),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).fire_cancel()}),c._uU(8),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(3),c.Q6J("ngIf",i._formConfig.customActions),c.xp6(2),c.Q6J("hidden",!1===i._formConfig.showSubmitButton),c.xp6(1),c.Oqu(i._formConfig.submitText),c.xp6(1),c.Q6J("hidden",!1===i._formConfig.showDiscardButton),c.xp6(1),c.Oqu(i._formConfig.cancelText)}}function Ai(e,t){if(1&e&&(c.TgZ(0,"form",1,2),c.TgZ(2,"div",3),c.YNc(3,Zi,1,8,"dynamic-form-field",4),c.qZA(),c.YNc(4,xi,9,5,"div",5),c.qZA()),2&e){var a=c.oxw();c.Q6J("formGroup",a.form),c.xp6(3),c.Q6J("ngForOf",a._formConfig.fields),c.xp6(1),c.Q6J("ngIf",a._formConfig.customActions||!(!1===a._formConfig.showDiscardButton&&!1===a._formConfig.showSubmitButton))}}var qi=function(){var e=function(){function e(t,a,i){o(this,e),this.ref=t,this.auth=a,this.swal=i,this.submit=new c.vpe,this.cancel=new c.vpe,this.fieldChanged=new c.vpe,this.formChanged=new c.vpe,this.formAction=new c.vpe,this.hiddenFields=[]}return l(e,[{key:"ngOnInit",value:function(){this.ref.detectChanges()}},{key:"toFormGroup",value:function(e){var t=this,a={},i="";return e.forEach(function(e){i=("switch"!=e.type||!0===e.value)&&null,"separator"!=e.type&&(a[e.key]=e.required?new A.NI(void 0!==e.value?e.value:i,A.kI.required):new A.NI(void 0!==e.value?e.value:i)),e.hidden&&t.hiddenFields.push(e.key),e.formControl=a[e.key]}),new A.cw(a)}},{key:"ngOnChanges",value:function(){this._formConfig=this.formConfig,this._formConfig.layout=this.formConfig.layout||"horizontal",this._formConfig.helpBlock=this.formConfig.helpBlock||"visible",this._formConfig.submitText=this.formConfig.submitText||"Submit",this._formConfig.cancelText=this.formConfig.cancelText||"Cancel",this._formConfig.customActions=this.formConfig.customActions||null,this._formConfig.showSubmitButton=void 0===typeof this.formConfig.showSubmitButton||this.formConfig.showSubmitButton,this._formConfig.showDiscardButton=void 0===typeof this.formConfig.showDiscardButton||this.formConfig.showDiscardButton;var e,t=i(this.formConfig.fields);try{for(t.s();!(e=t.n()).done;){e.value.layout=this._formConfig.layout}}catch(a){t.e(a)}finally{t.f()}this._formConfig.fields=this.formConfig.fields,this.adjustFormFields(),this.form=this.toFormGroup(this._formConfig.fields),this.ref.detectChanges(),this.subscribeForChanges()}},{key:"regenerate",value:function(){this.form=this.toFormGroup(this.formConfig.fields),this.adjustFormFields(),this.ref.detectChanges(),this.subscribeForChanges()}},{key:"adjustFormFields",value:function(){var e,t=i(this._formConfig.fields);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.disabled&&this.disableField(a.key)}}catch(n){t.e(n)}finally{t.f()}}},{key:"subscribeForChanges",value:function(){var e=this;!this.form||this.form.valueChanges.subscribe(function(t){e.formChanged.emit(t)})}},{key:"fire_submit",value:function(){if("INVALID"==this.form.status){var e,t=i(this.formConfig.fields);try{for(t.s();!(e=t.n()).done;){var a=e.value;if("separator"!=a.type&&"file"!=a.type){var n=a.key;"INVALID"==this.form.controls[n].status&&(this.form.controls[n].markAsDirty(),this.form.controls[n].markAsTouched())}}}catch(o){t.e(o)}finally{t.f()}window.scrollTo(0,0)}"VALID"==this.form.status&&this.submit.emit(this.form)}},{key:"disableField",value:function(e){var t,a=i(this.formConfig.fields);try{for(a.s();!(t=a.n()).done;){var n=t.value;"separator"!==n.type&&n.key==e&&this.form.controls[e].disable()}}catch(o){a.e(o)}finally{a.f()}}},{key:"enableField",value:function(e){var t,a=i(this.formConfig.fields);try{for(a.s();!(t=a.n()).done;){t.value.key==e&&this.form.controls[e].enable()}}catch(n){a.e(n)}finally{a.f()}}},{key:"ignoreField",value:function(e){var t,a=i(this.formConfig.fields);try{for(a.s();!(t=a.n()).done;){t.value.key==e&&this.form.controls[e].setErrors(null)}}catch(n){a.e(n)}finally{a.f()}}},{key:"fire_cancel",value:function(){this.cancel.emit()}},{key:"fire_action",value:function(e){this.formAction.emit(e)}},{key:"getForm",value:function(){return this.form.value}},{key:"fire_change",value:function(e){this.fieldChanged.emit({key:e.key,value:e.value})}},{key:"reset",value:function(){this._formConfig=this.formConfig,this.regenerate()}},{key:"hideField",value:function(e){-1==this.hiddenFields.indexOf(e)&&this.hiddenFields.push(e)}},{key:"showField",value:function(e){for(var t=this.hiddenFields.indexOf(e);-1!=t;)this.hiddenFields.splice(t,1),t=this.hiddenFields.indexOf(e)}},{key:"setFieldValue",value:function(e,t){for(var a=this.formConfig.fields,i=0;i<a.length;i++)"htmlFile"!==a[i].type&&a[i].key==e&&(a[i].value=t);return a}},{key:"setFormValue",value:function(e){for(var t=Object.keys(e),a=this.formConfig.fields,i=0,n=t;i<n.length;i++){var o=n[i];a=this.setFieldValue(o,e[o])}this.formConfig.fields=a,this.regenerate()}},{key:"setLabel",value:function(e,t){for(var a=this.formConfig.fields,i=0;i<a.length;i++)a[i].key===e&&(a[i].label=t)}},{key:"getLabel",value:function(e){for(var t=null,a=this.formConfig.fields,i=0;i<a.length;i++)a[i].key===e&&(t=a[i].label);return t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.sBO),c.Y36(w),c.Y36(tt))},e.\u0275cmp=c.Xpm({type:e,selectors:[["dynamic-form"]],inputs:{formConfig:"formConfig",options:"options"},outputs:{submit:"submit",cancel:"cancel",fieldChanged:"fieldChanged",formChanged:"formChanged",formAction:"formAction"},features:[c.TTD],decls:2,vars:1,consts:[["class","form","id","myForm",3,"formGroup",4,"ngIf"],["id","myForm",1,"form",3,"formGroup"],["myForm",""],[1,"row"],[3,"formConfig","fieldConfig","hidden","form","options","class","changed","action",4,"ngFor","ngForOf"],["style","margin-top: 100px;",4,"ngIf"],[3,"formConfig","fieldConfig","hidden","form","options","changed","action"],[2,"margin-top","100px"],["class","form-actions left","style","float: left;",4,"ngIf"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"hidden","click"],["type","button",1,"btn","btn-default","form-action-button",3,"hidden","click"],[1,"form-actions","left",2,"float","left"],["type","button",3,"class","click",4,"ngFor","ngForOf"],["type","button",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.YNc(1,Ai,5,3,"form",0),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t._formConfig.fields.length>0))},styles:[".form-action-button[_ngcontent-%COMP%]{min-width:100px}"]}),e}(),Ti=n(3401),ki=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.auth=a,this.router=i,this.load()}return l(e,[{key:"load",value:function(){return this.api._get("resources/forms")}},{key:"getForm",value:function(e){this.forms=JSON.parse(localStorage.getItem("sas_forms"));for(var t=null,a=0;a<this.forms.length&&!t;a++)this.forms[a].name==e&&(t=a);return null!=t?Object.assign([],this.forms[t].form):null}},{key:"canActivateChild",value:function(){var e=this;return!!this.forms||this.load().pipe((0,d.U)(function(t){return t?(e.forms=t.data,localStorage.setItem("sas_forms",JSON.stringify(e.forms)),!0):(console.error("unable to load forms data"),!1)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(Z),c.LFG(w),c.LFG(_.F0))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),Ci=n(33013),Ui=["dynamic_form"];function Mi(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"alert",9),c._uU(2),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw();c.xp6(1),c.Q6J("type",a.type)("dismissible",!0),c.xp6(1),c.Oqu(i.tr.translate(a.text))}}function Fi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",10,11),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().fire_submit(e)})("cancel",function(){return c.CHM(a),c.oxw().cancel.emit()})("formAction",function(e){return c.CHM(a),c.oxw().onFormAction(e)})("fieldChanged",function(e){return c.CHM(a),c.oxw().onChange(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Ji=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.tr=i,this.toastr=n,this.header=!0,this.submit=new c.vpe,this.cancel=new c.vpe,this.changed=new c.vpe,this.formChanged=new c.vpe,this.formAction=new c.vpe,this.onLoaded=new c.vpe,this.form_config={layout:"",fields:[],submitText:this.tr.translate("global_button_submit"),cancelText:this.tr.translate("global_button_dismiss")},this.loading=!1,this.mode="store",this.alerts=[],this.primary_key_value=null,this.rowsCount=0}return l(e,[{key:"ngOnChanges",value:function(){var e=this;!this.fields||(this.form_config.fields=this.fields,this.form_config.layout="horizontal",this.form_config.helpBlock="hidden",this.route.params.subscribe(function(t){t.id&&(e.load(t.id),e.primary_key_value=t.id)}))}},{key:"setFieldValue",value:function(e,t){for(var a=this.fields,i=0;i<a.length;i++)a[i].key==e&&(a[i].value=t);return a}},{key:"setFormValue",value:function(e){for(var t=Object.keys(e),a=this.fields,i=0,n=t;i<n.length;i++){var o=n[i];a=this.setFieldValue(o,e[o])}return a}},{key:"fire_submit",value:function(e){var t=this;this.alerts=[];var a=this.resourceRoute,n={};for(var o in e.value)n[o]=e.value[o],""===e.value[o]&&(n[o]=null),"null"===e.value[o]&&(n[o]=null),!1===e.value[o]&&(n[o]=0),!0===e.value[o]&&(n[o]=1);this.loading=!0,this.primary_key_value&&(a=a+"/"+this.primary_key_value),this.blockUI.start("please wait..."),"store"==this.mode?this.api.post(a,n).subscribe(function(a){t.blockUI.stop(),t.loading=!1,200==a.status?t.submit.emit(e):(window.scrollTo(0,0),t.alerts.push({type:"warning",text:a.message}))},function(e){t.blockUI.stop()}):this.api.put(a,n).subscribe(function(a){t.blockUI.stop(),t.loading=!1;var n=a.status;if(200===n)t.submit.emit(e);else if(201===n){window.scrollTo(0,0);var o,r=i(a.message);try{for(r.s();!(o=r.n()).done;){var l=o.value;t.alerts.push({type:"warning",text:l})}}catch(s){r.e(s)}finally{r.f()}}-999===a.status&&t.toastr.warning(t.tr.translate(a.message))},function(e){t.blockUI.stop()})}},{key:"load",value:function(e){var t=this,a=this.resourceRoute;a=a+"/"+e,this.loading=!0,this.blockUI.start("loading..."),this.api.get(a).subscribe(function(e){t.blockUI.stop(),t.loading=!1;var a=e.data;t.form_config.fields=t.setFormValue(a),t.formView.regenerate(),t.disableUpdateFields(),t.ignoreUpdateFields(),t.formChanged.emit(e.data),t.mode="update",t.rowsCount=a.total,t.onLoaded.emit(e.data)},function(e){t.blockUI.stop()})}},{key:"disableUpdateFields",value:function(){if(this.disabledOnUpdate){var e,t=i(this.disabledOnUpdate);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.formView.disableField(a)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"ignoreUpdateFields",value:function(){if(this.ignoredOnUpdate){var e,t=i(this.ignoredOnUpdate);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.formView.ignoreField(a)}}catch(n){t.e(n)}finally{t.f()}}}},{key:"ignoreField",value:function(e){this.formView.ignoreField(e)}},{key:"enableField",value:function(e){this.formView.enableField(e)}},{key:"disableField",value:function(e){this.formView.disableField(e)}},{key:"hideField",value:function(e){this.formView.hideField(e)}},{key:"showField",value:function(e){this.formView.showField(e)}},{key:"onChange",value:function(e){this.changed.emit(e)}},{key:"onFormChange",value:function(e){this.formChanged.emit(e)}},{key:"onFormAction",value:function(e){this.formAction.emit(e)}}]),e}();Ji.\u0275fac=function(e){return new(e||Ji)(c.Y36(Z),c.Y36(_.gz),c.Y36(I),c.Y36(v._W))},Ji.\u0275cmp=c.Xpm({type:Ji,selectors:[["model-form"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Ui,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},inputs:{resourceRoute:"resourceRoute",fields:"fields",title:"title",icon:"icon",options:"options",disabledOnUpdate:"disabledOnUpdate",ignoredOnUpdate:"ignoredOnUpdate",header:"header"},outputs:{submit:"submit",cancel:"cancel",changed:"changed",formChanged:"formChanged",formAction:"formAction",onLoaded:"onLoaded"},features:[c.TTD],decls:11,vars:8,consts:[[1,"card"],[1,"card-header",3,"hidden"],[1,"card-actions"],[3,"hidden"],[1,"text-muted"],[1,"fa","fa-cog","fa-spin"],[1,"card-body"],[4,"ngFor","ngForOf"],["id","dynamic_form",3,"formConfig","options","submit","cancel","formAction","fieldChanged","formChanged",4,"ngIf"],[3,"type","dismissible"],["id","dynamic_form",3,"formConfig","options","submit","cancel","formAction","fieldChanged","formChanged"],["dynamic_form",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i"),c._uU(3),c.TgZ(4,"div",2),c.TgZ(5,"a",3),c.TgZ(6,"span",4),c._UZ(7,"i",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",6),c.YNc(9,Mi,3,3,"div",7),c.YNc(10,Fi,2,2,"dynamic-form",8),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.Q6J("hidden",!t.header),c.xp6(1),c.Tol(t.icon),c.xp6(1),c.hij(" ",t.title," "),c.xp6(2),c.Q6J("hidden",!t.loading),c.xp6(4),c.Q6J("ngForOf",t.alerts),c.xp6(1),c.Q6J("ngIf",t.fields))},directives:[Q.sg,Q.O5,O.wxo,qi],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Ji.prototype,"blockUI",void 0);var Oi=n(45121);function Ni(e,t){1&e&&(c.TgZ(0,"div",11),c._uU(1," No Records Found "),c.qZA())}function Ii(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"li",14),c._uU(1),c.TgZ(2,"span"),c.TgZ(3,"a",15),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).deletePPP(e.id)}),c._UZ(4,"i",16),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(1),c.hij(" ",i.service_name," ")}}function Yi(e,t){if(1&e&&(c.TgZ(0,"ul",12),c.YNc(1,Ii,5,1,"li",13),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.allowed_ppp_list)}}var Qi=function(){return["username"]},Si=function(){return["username","password","confirm_password"]},Pi=function(){return{width:"400px"}},Di=function(){var e=function(){function e(t,a,i,n,r,l,s,c,u,d){o(this,e),this.api=t,this.log=a,this.router=i,this.formLoader=n,this.auth=r,this.location=l,this.tr=s,this.toastr=c,this.route=u,this.confirmationService=d,this.hasHeader=!0,this.acl_list=null,this.managers_list=null,this.site_list=[],this.ppp_dialog_visible=!1,this.allowed_ppp_list=[],this.ppp_user_input="",this.nas_list=[],this.group_list=[],this.options={parent_id:[],acl_group_id:[],site_id:[],group_id:[]}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.formFields=this.formLoader.getForm("manager_form"),this.loadResources(),this.route.params.subscribe(function(t){t.id&&(e.manager_id=t.id,e.loadAllowedPPP())})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/acl").subscribe(function(t){e.acl_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.acl_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.acl_group_id=e.acl_list}),this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.parent_id=e.managers_list}),this.api.get("nas").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.nas_list.push({value:o.id,label:o.shortname})}}catch(r){n.e(r)}finally{n.f()}e.options.allowed_nases=e.nas_list}}),this.auth.has("prm_groups_assign")&&this.api.get("group").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.group_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.group_list.unshift({value:-1,label:e.tr.translate("global_none")}),e.options.group_id=e.group_list}}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.site_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.site_id=e.site_list,e.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"})}},{key:"onSubmit",value:function(e){this.toastr.success(this.tr.translate("rsp_success")),this.router.navigate(["managers/index"])}},{key:"onFormAction",value:function(e){"ppp_service_editor"===e&&(this.ppp_dialog_visible=!0,this.ppp_user_input="")}},{key:"loadAllowedPPP",value:function(){var e=this;this.api.get("manager/ppp/"+this.manager_id).subscribe(function(t){200===t.status&&(e.allowed_ppp_list=t.data)})}},{key:"addPPP",value:function(){var e=this;this.ppp_user_input.length<1||this.api.post("manager/ppp",{manager_id:this.manager_id,service_name:this.ppp_user_input}).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.loadAllowedPPP(),e.ppp_user_input="")})}},{key:"deletePPP",value:function(e){var t=this;this.confirmationService.confirm({message:"Delete selected service?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){t.api.delete("manager/ppp/"+e).subscribe(function(e){t.toastr.success(t.tr.translate(e.message)),t.loadAllowedPPP()})}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(b),c.Y36(_.F0),c.Y36(ki),c.Y36(w),c.Y36(Q.Ye),c.Y36(I),c.Y36(v._W),c.Y36(_.gz),c.Y36(Ci.YP))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-form"]],inputs:{hasHeader:"hasHeader"},decls:14,vars:21,consts:[[3,"fields","options","title","icon","resourceRoute","disabledOnUpdate","ignoredOnUpdate","header","submit","formAction","cancel"],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","aria-describedby","button-addon2","placeholder","PPP service name","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-plus"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0),c.NdJ("submit",function(e){return t.onSubmit(e)})("formAction",function(e){return t.onFormAction(e)})("cancel",function(){return t.location.back()}),c.qZA(),c.TgZ(1,"p-dialog",1),c.NdJ("visibleChange",function(e){return t.ppp_dialog_visible=e}),c.TgZ(2,"p-header"),c._uU(3),c.qZA(),c.TgZ(4,"div",2),c.TgZ(5,"div",3),c.TgZ(6,"input",4),c.NdJ("ngModelChange",function(e){return t.ppp_user_input=e}),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"button",6),c.NdJ("click",function(){return t.addPPP()}),c._UZ(9,"i",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",8),c.YNc(11,Ni,2,0,"div",9),c.YNc(12,Yi,2,1,"ul",10),c.qZA(),c.qZA(),c._UZ(13,"p-confirmDialog")),2&e&&(c.Q6J("fields",t.formFields)("options",t.options)("title","Manager Form")("icon","fa fa-user-secret")("resourceRoute","manager")("disabledOnUpdate",c.DdM(18,Qi))("ignoredOnUpdate",c.DdM(19,Si))("header",t.hasHeader),c.xp6(1),c.Akn(c.DdM(20,Pi)),c.Q6J("visible",t.ppp_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),c.xp6(2),c.hij(" ",t.tr.translate("manager_ppp_dialog_title")," "),c.xp6(3),c.Q6J("ngModel",t.ppp_user_input),c.xp6(5),c.Q6J("ngIf",0===t.allowed_ppp_list.length),c.xp6(1),c.Q6J("ngIf",t.allowed_ppp_list.length>0))},directives:[Ji,Oi.V,Ci.h4,A.Fj,A.JJ,A.On,Q.O5,F.Q,Q.sg],encapsulation:2}),e}(),Hi=["advanced_filter"];function Ri(e,t){if(1&e&&c._UZ(0,"dynamic-form",9,10),2&e){var a=c.oxw();c.Q6J("formConfig",a.form_config)("options",a.options)}}var Vi=function(){var e=function(){function e(t){o(this,e),this.tr=t,this.fields=[],this.options={},this.changed=new c.vpe,this.close=new c.vpe,this.form_config={layout:"vertical",fields:[],showDiscardButton:!1,showSubmitButton:!1},this.advancedFilter={}}return l(e,[{key:"ngOnChanges",value:function(){this.fields.length>0&&(this.form_config.fields=this.fields)}},{key:"search",value:function(){this.advancedFilter=[];var e=this.dynamicForm.getForm(),t=Object.keys(e);console.log(e);for(var a=0,i=t;a<i.length;a++){var n=i[a];this.advancedFilter[n]=0===e[n]||e[n]&&null!==e[n]&&""!==e[n]?e[n]:""}this.changed.emit(this.advancedFilter)}},{key:"reset",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["advanced-filter"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Hi,5),2&e)&&(c.iGM(a=c.CRH())&&(t.dynamicForm=a.first))},inputs:{fields:"fields",options:"options"},outputs:{changed:"changed",close:"close"},features:[c.TTD],decls:11,vars:3,consts:[[1,"card"],[1,"card-header"],[1,"card-actions"],[3,"click"],[1,"text-muted"],[1,"fa","fa-times"],[1,"card-body"],["id","advanced_filter",3,"formConfig","options",4,"ngIf"],[1,"btn","btn-secondary","search-button",3,"click"],["id","advanced_filter",3,"formConfig","options"],["advanced_filter",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._uU(2),c.TgZ(3,"div",2),c.TgZ(4,"a",3),c.NdJ("click",function(){return t.close.emit()}),c.TgZ(5,"span",4),c._UZ(6,"i",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,Ri,2,2,"dynamic-form",7),c.TgZ(9,"button",8),c.NdJ("click",function(){return t.search()}),c._uU(10),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.hij(" \xa0",t.tr.translate("global_label_advanced_filter")," "),c.xp6(6),c.Q6J("ngIf",t.fields),c.xp6(2),c.Oqu(t.tr.translate("global_button_search")))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{height:100%;pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{border:1px solid #b2b2b2;background-color:#f5f5f5}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .col-form-label{padding-top:0!important}"]}),e}(),Li=["profileFormView"];function Ei(e,t){if(1&e&&(c.TgZ(0,"a",8),c._uU(1,"Daily Policies"),c.qZA()),2&e){var a=c.oxw(2);c.MGl("href","#/profile/policies/",a.profile_id,"",c.LSH)}}function Ki(e,t){if(1&e&&(c.TgZ(0,"div",3),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.YNc(4,Ei,2,1,"a",7),c._uU(5,"\xa0|\xa0 "),c.TgZ(6,"a",8),c._uU(7,"Custom Radius Attributes"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.Q6J("ngIf",a.auth.has("prm_profiles_policy_manager")),c.xp6(2),c.MGl("href","#/radius/custom/profile/",a.profile_id,"",c.LSH)}}var Bi=function(){var e=function(){function e(t,a,i,n,r,l,s,c){var u=this;o(this,e),this.api=t,this.log=a,this.location=i,this.route=n,this.auth=r,this.config=l,this.router=s,this.tr=c,this.profile_id=null,this.managers_list=[],this.site_list=[],this.ippool_list=[],this.formFields=[{key:"separator1",label:this.tr.translate("profile_form_basic_info"),type:"separator",cols:12},{key:"name",label:this.tr.translate("profile_form_name"),type:"text",cols:6,required:!0},{key:"enabled",label:this.tr.translate("global_enabled"),type:"switch",cols:6,value:1},{key:"price",label:this.tr.translate("profile_form_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!0},{key:"available_ucp",label:this.tr.translate("profile_form_available_ucp"),type:"switch",value:1,cols:6},{key:"downrate",label:this.tr.translate("profile_form_downrate"),type:"text",pattern:"[0-9]*",placeholder:"0",value:0,required:!0,cols:6},{key:"uprate",label:"profile_form_uprate",type:"text",pattern:"[0-9]*",placeholder:"0",value:0,required:!0,cols:6},{key:"type",label:"profile_form_type",type:"select",value:0,required:!0,placeholder:"profile type",cols:6,options:[{value:0,label:this.tr.translate("profile_form_type_prepaid")},{value:1,label:this.tr.translate("profile_form_type_postpaid")},{value:2,label:this.tr.translate("profile_form_type_fup")},{value:3,label:this.tr.translate("profile_form_type_extension")}]},{key:"extension_allowed_profiles",label:"profile_form_allowed_to_extend",type:"select2multiple",cols:6,required:!1,value:[],options:[],hidden:!0},{key:"description",label:"profile_form_description",type:"text",cols:6,required:!1},{key:"vat",label:"profile_form_vat",type:"text",pattern:"[0-9.]*",placeholder:"0",value:"0",cols:6,required:!1},{key:"separator2",type:"separator",label:"profile_form_service_limits",cols:12},{key:"limit_expiration",label:"profile_form_limit_expiration",type:"switch",value:0,cols:6},{key:"expiration_amount",label:"profile_form_expiration_units",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"expiration_unit",label:"",type:"select",value:1,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_days")},{value:1,label:this.tr.translate("global_months")},{value:2,label:this.tr.translate("global_hours")}]},{key:"limit_uptime",label:"profile_form_limit_uptime",type:"switch",value:0,cols:6},{key:"uptime_amount",label:"profile_form_uptime_units",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_hours")}]},{key:"limit_download",label:"profile_form_limit_download",type:"switch",value:0,cols:6},{key:"download_amount",label:"profile_form_download_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"limit_upload",label:"profile_form_limit_upload",type:"switch",value:0,cols:6},{key:"upload_amount",label:"profile_form_upload_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"limit_traffic",label:"profile_form_limit_total_traffic",type:"switch",value:0,cols:6},{key:"traffic_amount",label:"profile_form_total_traffic_limit",type:"text",placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"sepearator3",type:"separator",label:"profile_form_daily_quota",cols:12},{key:"daily_download_limit",label:"profile_form_daily_download_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_upload_limit",label:"profile_form_daily_upload_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_traffic_limit",label:"profile_form_daily_traffic_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:6},{key:"daily_uptime_limit",label:"profile_form_daily_uptime_limit",type:"text",pattern:"[0-9]*",required:!1,value:"0",cols:4},{key:"daily_uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_hours")}]},{key:"separator3",type:"separator",label:"profile_form_advanced_settings",cols:12},{key:"ippool_mode",label:"profile_form_pool_mode",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_pool_nas")},{value:1,label:this.tr.translate("profile_form_pool_sas")}]},{key:"pool",label:"profile_form_pool_name",type:"text",required:!1,cols:6},{key:"sas_ippool_id",label:"SAS4 Pool Name",type:"select2",options:[],hidden:!0},{key:"burst_enabled",label:"profile_form_enable_burst",type:"switch",value:0,cols:6},{key:"burst_limit_dl",label:"Download Burst Limit",type:"text",pattern:"[0-9]*",placeholder:"kbps",hidden:!0,required:!1,cols:6},{key:"burst_limit_ul",label:"Upload Burst Limit",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_threshold_dl",label:"Download Burst Threshold",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_threshold_ul",label:"Upload Burst Threshold",type:"text",pattern:"[0-9]*",placeholder:"kbps",required:!1,hidden:!0,cols:6},{key:"burst_time_dl",label:"Download Burst Time (sec)",type:"text",pattern:"[0-9]*",placeholder:"seconds",required:!1,hidden:!0,cols:6},{key:"burst_time_ul",label:"Upload Burst Time (sec)",type:"text",pattern:"[0-9]*",placeholder:"seconds",required:!1,hidden:!0,cols:6},{key:"expired_next_profile_id",label:"profile_form_expired_next_profile",type:"select",value:null},{key:"quota_next_profile_id",label:"profile_form_quota_next_profile",type:"select",value:null},{key:"daily_next_profile_id",label:"profile_form_daily_next_profile",type:"select",value:null},{key:"ignore_static_ip",label:"profile_form_ignore_static_ip",type:"switch",value:0,cols:6},{key:"private",label:"profile_form_privacy",type:"select",value:0,options:[{value:0,label:"public"},{value:1,label:"private"}]},{key:"allowed_managers",label:"profile_form_privacy_allowed_managers",type:"select2multiple",value:[],options:[],hidden:!0},{key:"allow_submanagers",label:"profile_form_privacy_sub_managers",type:"switch",value:0,hidden:!0},{key:"site_id",label:"profile_form_site",type:"select2",value:null,acl:"prm_sites_management",options:[]},{key:"allowed_services",label:"profile_form_allowed_services",type:"select",value:0,options:[{value:0,label:"any"},{value:1,label:"PPP"},{value:2,label:"Hotspot"}]},{key:"fixed_expiration_time",label:"profile_form_fix_expiration_time",type:"switch",value:0,cols:6},{key:"expiration_time",label:"profile_form_expiration_time",type:"clock",cols:6,hidden:!0},{key:"debitable",label:"profile_form_debitable_service",type:"switch",value:0,cols:6},{key:"no_freezone",label:"profile_form_freezone",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_freezone_allowed")},{value:1,label:this.tr.translate("profile_form_no_freezone")}],cols:6},{key:"max_price",label:this.tr.translate("profile_form_max_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!1},{key:"max_ucp_price",label:this.tr.translate("profile_form_max_ucp_price")+" ("+this.config.siteConfig.site_currency+")",type:"text",pattern:"[0-9.]*",placeholder:"0.00",cols:6,required:!1},{key:"expiration_grace_period",label:"profile_form_grace_period",type:"text",pattern:"[0-9.]*",cols:6,required:!1},{key:"hotspot_separate_session",label:"profile_form_separate_hotspot_session",type:"switch",value:0,cols:6,helpBlock:"visible",help:"Allow users to login with ppp and hotspot simultaneously"},{key:"ignore_pool_on_hotspot",label:"profile_form_ignore_pool_on_hotspot",type:"switch",value:!1,cols:6},{key:"separator4",label:"Mikrotik Settings",type:"separator",cols:12},{key:"mikrotik_cir_download",label:"Download CIR (kbps)",type:"text",pattern:"[0-9.]*",required:!1},{key:"mikrotik_cir_upload",label:"Upload CIR (kbps)",type:"text",pattern:"[0-9.]*",required:!1},{key:"mikrotik_addresslist",label:"Address List",type:"text",required:!1},{key:"mikrotik_queue_priority",label:"Queue Priority",type:"text",pattern:"[0-9.]*",required:!1,value:"8"},{key:"sepearator8",type:"separator",label:"Cisco Options",cols:12},{key:"cisco_qos_policy_in",label:"QOS-Policy-In",type:"text",value:0,cols:6},{key:"cisco_qos_policy_out",label:"QOS-Policy-Out",type:"text",value:0,cols:6},{key:"separator5",label:"profile_form_billing_options",type:"separator",cols:12},{key:"monthly",label:"profile_form_monthly_account",type:"switch",value:0},{key:"monthly_start_day",label:"profile_form_monthly_start_day",type:"text",value:"1",pattern:"[0-9]*",required:!1,hidden:!0},{key:"monthly_charge_entire_month",label:"profile_form_monthly_charge_full",type:"switch",value:0,hidden:!0},{key:"carry_over",label:"profile_form_carry_over",type:"switch",value:0},{key:"reset_daily_traffic",label:"profile_form_reset_daily_traffic",type:"switch",value:0},{key:"reset_expiration_on_activation",label:"profile_form_reset_expiration",type:"switch",value:0},{key:"quota_addition_date",label:"profile_form_quota_addition_date",type:"select",value:0,options:[{value:0,label:this.tr.translate("profile_form_quota_immediate")},{value:1,label:this.tr.translate("profile_form_quota_next")}]},{key:"preserve_traffic_counters_expired",label:"profile_form_preserve_counters",type:"switch",value:0},{key:"separator6",label:"profile_forward_reward_points",type:"separator",cols:12},{key:"reward_points_awarded",label:"profile_form_awarded_points",type:"text",value:"0",pattern:"[0-9]*",required:!1},{key:"reward_points_allow_activation",label:"profile_form_allow_activation",type:"switch",value:!1},{key:"reward_points_required",label:"profile_form_required_points",type:"text",value:"0",pattern:"[0-9]*",required:!1},{key:"sepearator7",type:"separator",label:"profile_form_initial_values",cols:12},{key:"initial_expiration_amount",label:"profile_form_initial_expiration",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"initial_expiration_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_days")},{value:1,label:this.tr.translate("global_months")},{value:2,label:this.tr.translate("global_hours")}]},{key:"initial_traffic_amount",label:"profile_form_initial_traffic",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:6},{key:"initial_uptime_amount",label:"profile_form_initial_uptime",type:"text",value:0,placeholder:"0",pattern:"[0-9]*",required:!1,cols:4},{key:"initial_uptime_unit",label:"",type:"select",value:0,cols:2,hideLabel:!0,options:[{value:0,label:this.tr.translate("global_minutes")},{value:1,label:this.tr.translate("global_days")}]}],this.options={expired_next_profile_id:[{value:null,label:"None"}],quota_next_profile_id:[{value:null,label:"None"}],daily_next_profile_id:[{value:null,label:"None"}],allowed_managers:[],site_id:[{value:null,label:"any"}],extension_allowed_profiles:[]},this.fupProfiles=[],this.allowed_extension_fields=["name","enabled","price","available_ucp","type","extension_allowed_profiles","description","vat","expiration_amount","expiration_unit","limit_expiration","limit_uptime","uptime_amount","uptime_unit","limit_download","download_amount","limit_upload","upload_amount","limit_traffic","traffic_amount","reward_points_allow_activation","reward_points_required"],r.has("prm_profiles_update")?(this.route.params.subscribe(function(e){e.id&&(u.profile_id=e.id)}),this.loadResources()):this.router.navigate(["dashboard"])}return l(e,[{key:"ngOnInit",value:function(){!this.auth.has("prm_profiles_index")&&!this.auth.has("prm_managers_sysadmin")&&this.router.navigate(["dashboard"])}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.allowed_managers=e.managers_list}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.site_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.site_id=e.site_list,e.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"}),this.api.get("list/profile/2").subscribe(function(t){200===t.status&&t.data.map(function(t){e.fupProfiles.push({value:t.id,label:t.name})}),e.fupProfiles.push({value:null,label:"None"}),e.options.expired_next_profile_id=e.fupProfiles,e.options.quota_next_profile_id=e.fupProfiles,e.options.daily_next_profile_id=e.fupProfiles});var t=[];this.api.get("list/profile/0").subscribe(function(a){200===a.status&&(a.data.map(function(e){t.push({value:e.id,label:e.name})}),e.options.extension_allowed_profiles=t)}),this.api.get("index/ippool").subscribe(function(t){200===t.status&&(t.data.map(function(t){e.ippool_list.push({value:t.id,label:t.name})}),e.options.sas_ippool_id=e.ippool_list)})}},{key:"onFormChanged",value:function(e){1===e.burst_enabled&&(this.profileFormView.showField("burst_limit_dl"),this.profileFormView.showField("burst_limit_ul"),this.profileFormView.showField("burst_threshold_dl"),this.profileFormView.showField("burst_threshold_ul"),this.profileFormView.showField("burst_time_dl"),this.profileFormView.showField("burst_time_ul")),0===e.burst_enabled&&(this.profileFormView.hideField("burst_limit_dl"),this.profileFormView.hideField("burst_limit_ul"),this.profileFormView.hideField("burst_threshold_dl"),this.profileFormView.hideField("burst_threshold_ul"),this.profileFormView.hideField("burst_time_dl"),this.profileFormView.hideField("burst_time_ul")),1==e.monthly&&(this.profileFormView.showField("monthly_start_day"),this.profileFormView.showField("monthly_charge_entire_month")),1!=e.monthly&&(this.profileFormView.hideField("monthly_start_day"),this.profileFormView.hideField("monthly_charge_entire_month")),"1"==e.private&&(this.profileFormView.showField("allowed_managers"),this.profileFormView.showField("allow_submanagers")),"1"!=e.private&&(this.profileFormView.hideField("allowed_managers"),this.profileFormView.hideField("allow_submanagers")),1==e.fixed_expiration_time&&this.profileFormView.showField("expiration_time"),1!=e.fixed_expiration_time&&this.profileFormView.hideField("expiration_time"),1===e.ippool_mode&&(this.profileFormView.showField("sas_ippool_id"),this.profileFormView.hideField("pool")),0===e.ippool_mode&&(this.profileFormView.hideField("sas_ippool_id"),this.profileFormView.showField("pool")),1!=e.reward_points_allow_activation&&this.profileFormView.hideField("reward_points_required"),1==e.reward_points_allow_activation&&this.profileFormView.showField("reward_points_required"),3===e.type&&this.profileFormView.showField("extension_allowed_profiles"),3!==e.type&&this.profileFormView.hideField("extension_allowed_profiles")}},{key:"enableAllFields",value:function(){var e,t=i(this.profileFormView.fields);try{for(t.s();!(e=t.n()).done;){var a=e.value;"separator"!==a.type&&this.profileFormView.enableField(a.key)}}catch(n){t.e(n)}finally{t.f()}}},{key:"onSubmit",value:function(e){this.location.back()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(b),c.Y36(Q.Ye),c.Y36(_.gz),c.Y36(w),c.Y36(p),c.Y36(_.F0),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-profile-form"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Li,5),2&e)&&(c.iGM(a=c.CRH())&&(t.profileFormView=a.first))},decls:3,vars:6,consts:[["class","card",4,"ngIf"],["name","profileFormView",3,"fields","options","title","icon","resourceRoute","submit","cancel","formChanged"],["profileFormView",""],[1,"card"],[1,"card-body",2,"border","1px solid grey","padding-top","10px","padding-bottom","10px","background","white","box-sizing","border-box"],[1,"toolbar"],[1,"btn-group","float-right"],[3,"href",4,"ngIf"],[3,"href"]],template:function(e,t){1&e&&(c.YNc(0,Ki,8,2,"div",0),c.TgZ(1,"model-form",1,2),c.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()})("formChanged",function(e){return t.onFormChanged(e)}),c.qZA()),2&e&&(c.Q6J("ngIf",null!=t.profile_id),c.xp6(1),c.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("profile_form_title"))("icon","fa fa-puzzle-piece")("resourceRoute","profile"))},directives:[Q.O5,Ji],encapsulation:2}),e}(),ji=function(){var e=function(){function e(t,a,n,r){var l=this;o(this,e),this.location=t,this.formsLoader=a,this.auth=n,this.api=r,this.site_list=[],this.options={},this.formFields=this.formsLoader.getForm("nas_form"),this.options.site_id=[],this.auth.has("prm_sites_management")?this.api.get("site").subscribe(function(e){if(200===e.status){var t,a=i(e.data);try{for(a.s();!(t=a.n()).done;){var n=t.value;l.site_list.push({value:n.id,label:n.name})}}catch(o){a.e(o)}finally{a.f()}l.options.site_id=l.site_list,l.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id.unshift({value:null,label:"Any"})}return l(e,[{key:"onSubmit",value:function(e){this.location.back()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Q.Ye),c.Y36(ki),c.Y36(w),c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-nas-form"]],decls:1,vars:5,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0),c.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),c.qZA()),2&e&&c.Q6J("fields",t.formFields)("options",t.options)("title","NAS Form")("icon","fa fa-server")("resourceRoute","nas")},directives:[Ji],encapsulation:2}),e}(),zi=["nas_model_view"];function Gi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",2,3),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Wi=function(){function e(t,a,i,n,r,l){o(this,e),this.router=t,this.toastr=a,this.api=i,this.swal=n,this.confirmationService=r,this.auth=l,this.columns=[{dataKey:"shortname",label:"Name",class:"href"},{dataKey:"nasname",label:"IP Address"},{dataKey:"type",label:"Type",pipe:"nasname"},{dataKey:"secret",label:"Secret"},{dataKey:"online_users_count",label:"Online Users",sortBy:"online_users_count"},{dataKey:"ping_time",label:"RTT",dataResolver:function(e,t){return 1!==t.monitor?"-":-1===t.ping_time?"timeout":e+"ms"},classFn:function(e){return 1!==e.monitor?"":e.ping_time>2e3||e.ping_time<0?"text-secondary":e.ping_time>500?"text-warning":"text-success"}},{dataKey:"ping_loss",label:"Packet Loss %",dataResolver:function(e,t){return 1!==t.monitor?"-":e+"%"},classFn:function(e){return 1!==e.monitor?"":e.ping_loss>=50?"text-danger":e.ping_loss>=25?"text-warning":"text-success"}}],this.actions=[{name:"new",label:"New",icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"NAS List",icon:"fa fa-server",columns:this.columns,dataUrl:"index/nas",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:this.auth.has("prm_nas_export"),modelName:"nas",hasAdvancedFilter:!1,showRowsCount:!0}}},{key:"onAction",value:function(e){switch(e.action){case"new":this.router.navigate(["nas/"]);break;case"delete":this.destroy();break;case"reboot":this.reboot()}}},{key:"onCellClicked",value:function(e){"shortname"===e.column&&this.router.navigate(["nas",e.row.id])}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete NAS",type:"warning",text:"Delete Selected NAS ?",confirmButtonText:"Yes"}).subscribe(function(){var t=null;if(e.modelView.currentRow&&(t=e.modelView.currentRow.id),e.blockUI.start("loading..."),e.modelView.selectedRows().length>1){var a,n=[],o=i(e.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.id)}}catch(l){o.e(l)}finally{o.f()}e.api.post("nas/bulkDelete",n).subscribe(function(t){e.blockUI.stop(),200!==t.status?e.toastr.warning("Unable to delete some NASs"):(e.toastr.success("NAS(s) deleted"),e.modelView.reload())})}else e.api.delete("nas/"+t).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.modelView.reload(),e.toastr.success("NAS Deleted","")):e.toastr.warning("Unable to delete NAS")})})}},{key:"reboot",value:function(){var e=this,t=[];0===this.modelView.selectedRows().length&&null===this.modelView.currentRow||(this.modelView.selectedRows().map(function(e){t.push(e.id)}),t.push(this.modelView.currentRow.id),this.confirmationService.confirm({message:"Reboot selected NAS(s)",accept:function(){e.api.post("nas/reboot",{rows:t}).subscribe(function(e){})}}))}}]),e}();Wi.\u0275fac=function(e){return new(e||Wi)(c.Y36(_.F0),c.Y36(v._W),c.Y36(Z),c.Y36(tt),c.Y36(Ci.YP),c.Y36(w))},Wi.\u0275cmp=c.Xpm({type:Wi,selectors:[["app-nas-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(zi,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:2,vars:1,consts:[["name","nas_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","nas_model_view",3,"modelViewConfig","onAction","onCellClicked"],["nas_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,Gi,2,1,"model-table-view",0),c._UZ(1,"p-confirmDialog",1)),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,F.Q,Tt],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Wi.prototype,"blockUI",void 0);var $i=["profile_model_view"];function Xi(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",2,3),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw(2).onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw(2).onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw(2).loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw(2).loading=!1}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("modelViewConfig",i.modelViewConfig)}}function en(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Xi,2,1,"model-table-view",1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.modelViewConfig)}}var tn=function(){function e(t,a,i,n,r,l,s){o(this,e),this.api=t,this.router=a,this.modalService=i,this.swal=n,this.tr=r,this.auth=l,this.toastr=s,this.columns=[{dataKey:"name",label:this.tr.translate("profiles_table_name"),class:"href"},{dataKey:"price",label:this.tr.translate("global_price"),pipe:"currency"},{dataKey:"pool",label:this.tr.translate("profiles_table_pool_name")},{dataKey:"downrate",label:this.tr.translate("profiles_table_downrate"),pipe:"bitrate"},{dataKey:"uprate",label:this.tr.translate("profiles_table_uprate"),pipe:"bitrate"},{dataKey:"type",label:this.tr.translate("global_type"),dataResolver:this.profileTypeResolver},{dataKey:"expiration_amount",label:this.tr.translate("profiles_table_expiry"),dataResolver:this.profileExpiryResolver},{dataKey:"monthly",label:this.tr.translate("profiles_table_monthly"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"burst_enabled",label:this.tr.translate("profiles_table_burst"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"limit_expiration",label:this.tr.translate("profiles_table_expires"),hidden:!0,type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"users_count",label:this.tr.translate("profiles_table_users")},{dataKey:"site_name",parentKey:"site_details",label:this.tr.translate("profiles_table_site"),hidden:!0},{dataKey:"online_users_count",label:this.tr.translate("profiles_table_online_users")},{dataKey:"expiration_grace_period",label:this.tr.translate("profiles_table_grace_period"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_profiles_create"},{name:"",label:"",type:"separator"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_profiles_create",inline:!0},{name:"copy",label:this.tr.translate("global_actions_copy"),icon:"fa fa-copy",requiresRow:!0,acl:"prm_profiles_create",inline:!0},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,acl:"prm_profiles_delete",inline:!0}],this.modelViewConfig=null,this.loading=!1}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Profiles List",icon:"fa fa-puzzle-piece",columns:this.columns,dataUrl:"index/profile",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"profiles",hasInlineActions:!0,hasAdvancedFilter:!1,showRowsCount:!0,allowExport:this.auth.has("prm_managers_sysadmin")}}},{key:"onCellClicked",value:function(e){"name"===e.column&&this.auth.has("prm_profiles_update")&&this.router.navigate(["profile",e.row.id])}},{key:"profileTypeResolver",value:function(e){switch(e){case 0:return"Prepaid";case 1:return"Postpaid";case 2:return"FUP";case 3:return"Extension"}}},{key:"profileExpiryResolver",value:function(e,t){var a=e.toString(),i="Day(s)";return 1==t.expiration_unit&&(i="Month(s)"),2==t.expiration_unit&&(i="Hour(s)"),3==t.expiration_unit&&(i="Minute(s)"),a+" "+i}},{key:"onAction",value:function(e){switch(e.action){case"new":this.router.navigate(["profile/"]);break;case"edit":this.router.navigate(["profile",this.modelView.currentRow.id]);break;case"delete":this.destroy();break;case"copy":this.copy()}}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete Profile(s)",type:"warning",text:"Delete Selected Profile(s) ?",confirmButtonText:"Yes"}).subscribe(function(){var t=null;if(e.modelView.currentRow&&(t=e.modelView.currentRow.id),e.blockUI.start("loading..."),e.modelView.selectedRows().length>1){var a,n=[],o=i(e.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.id)}}catch(l){o.e(l)}finally{o.f()}e.api.post("profile/bulkDelete",n).subscribe(function(t){e.blockUI.stop(),200!=t.status?e.toastr.warning("Unable to delete some profiles"):(e.toastr.success("profile(s) deleted"),e.modelView.reload())})}else e.api.delete("profile/"+t).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.modelView.reload(),e.toastr.success("profile Deleted","")):e.toastr.warning("Unable to delete profile")})})}},{key:"copy",value:function(){var e=this,t=null;this.modelView.currentRow&&(t=this.modelView.currentRow.id),this.swal.prompt("New Profile Name").subscribe(function(a){e.api.post("profile/copy",{profile_id:t,new_name:a}).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload())})})}}]),e}();function an(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"div",38),c.TgZ(2,"div",6),c.TgZ(3,"label"),c._uU(4,"Traffic Threshold (MB)"),c.qZA(),c.TgZ(5,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.threshold1=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(5),c.Q6J("ngModel",i.policyForm.threshold1)}}function nn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",4),c.TgZ(1,"div",38),c.TgZ(2,"div",6),c.TgZ(3,"label"),c._uU(4,"Start Time"),c.qZA(),c.TgZ(5,"ngb-timepicker",40),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.start_time=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",38),c.TgZ(7,"div",6),c.TgZ(8,"label"),c._uU(9,"End Time"),c.qZA(),c.TgZ(10,"ngb-timepicker",40),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.end_time=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(5),c.Q6J("ngModel",i.policyForm.start_time),c.xp6(5),c.Q6J("ngModel",i.policyForm.end_time)}}function on(e,t){1&e&&(c.TgZ(0,"option",9),c._uU(1,"Accounting"),c.qZA())}function rn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",43),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.TgZ(4,"label"),c._uU(5,"Download Burst Limit"),c.qZA(),c.TgZ(6,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_limit_dl=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"label"),c._uU(10,"Upload Burst Limit"),c.qZA(),c.TgZ(11,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_limit_ul=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",4),c.TgZ(13,"div",5),c.TgZ(14,"div",6),c.TgZ(15,"label"),c._uU(16,"Download Burst Threshold"),c.qZA(),c.TgZ(17,"input",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_threshold_dl=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"div",5),c.TgZ(19,"div",6),c.TgZ(20,"label"),c._uU(21,"Upload Burst Threshold"),c.qZA(),c.TgZ(22,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_threshold_ul=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",4),c.TgZ(24,"div",5),c.TgZ(25,"div",6),c.TgZ(26,"label"),c._uU(27,"Download Burst Time (sec)"),c.qZA(),c.TgZ(28,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_time_dl=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"div",5),c.TgZ(30,"div",6),c.TgZ(31,"label"),c._uU(32,"Upload Burst Time (sec)"),c.qZA(),c.TgZ(33,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).policyForm.bandwidth.burst_time_ul=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(6),c.Q6J("ngModel",i.policyForm.bandwidth.burst_limit_dl),c.xp6(5),c.Q6J("ngModel",i.policyForm.bandwidth.burst_limit_ul),c.xp6(6),c.Q6J("ngModel",i.policyForm.bandwidth.burst_threshold_dl),c.xp6(5),c.Q6J("ngModel",i.policyForm.bandwidth.burst_threshold_ul),c.xp6(6),c.Q6J("ngModel",i.policyForm.bandwidth.burst_time_dl),c.xp6(5),c.Q6J("ngModel",i.policyForm.bandwidth.burst_time_ul)}}function ln(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",41),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.TgZ(4,"label"),c._uU(5,"Download Rate (kbps)"),c.qZA(),c.TgZ(6,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.bandwidth.downrate=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"label"),c._uU(10,"Upload Rate (kbps)"),c.qZA(),c.TgZ(11,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.bandwidth.uprate=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",4),c.TgZ(13,"div",5),c.TgZ(14,"div",6),c.TgZ(15,"label"),c._uU(16,"Enable Burst"),c.qZA(),c._UZ(17,"br"),c.TgZ(18,"p-inputSwitch",40),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.bandwidth.burst_enabled=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(19,rn,34,6,"div",42),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngModel",i.policyForm.bandwidth.downrate),c.xp6(5),c.Q6J("ngModel",i.policyForm.bandwidth.uprate),c.xp6(7),c.Q6J("ngModel",i.policyForm.bandwidth.burst_enabled),c.xp6(1),c.Q6J("ngIf",i.policyForm.bandwidth.burst_enabled)}}function sn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",45),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.TgZ(4,"label"),c._uU(5,"Download Ratio (%)"),c.qZA(),c.TgZ(6,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.accounting.dlratio=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"label"),c._uU(10,"Upload Ratio (%)"),c.qZA(),c.TgZ(11,"input",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.accounting.ulratio=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngModel",i.policyForm.accounting.dlratio),c.xp6(5),c.Q6J("ngModel",i.policyForm.accounting.ulratio)}}function cn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",46),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.TgZ(4,"label"),c._uU(5,"Address-List"),c.qZA(),c.TgZ(6,"input",47),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.address_list=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngModel",i.policyForm.address_list)}}function un(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",48),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c.TgZ(4,"label"),c._uU(5,"qos-policy-in"),c.qZA(),c.TgZ(6,"input",47),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.cisco_policy.qos_policy_in=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"label"),c._uU(10,"qos-policy-out"),c.qZA(),c.TgZ(11,"input",47),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().policyForm.cisco_policy.qos_policy_out=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngModel",i.policyForm.cisco_policy.qos_policy_in),c.xp6(5),c.Q6J("ngModel",i.policyForm.cisco_policy.qos_policy_out)}}tn.\u0275fac=function(e){return new(e||tn)(c.Y36(Z),c.Y36(_.F0),c.Y36(at.tT),c.Y36(tt),c.Y36(I),c.Y36(w),c.Y36(v._W))},tn.\u0275cmp=c.Xpm({type:tn,selectors:[["app-profiles-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf($i,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[[4,"blockUI"],["name","profile_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","profile_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["profile_model_view",""]],template:function(e,t){1&e&&c.YNc(0,en,2,1,"div",0),2&e&&c.Q6J("blockUI","model-view")},directives:[m.Z2,Q.O5,Tt],encapsulation:2}),(0,g.gn)([(0,m.bH)()],tn.prototype,"blockUI",void 0);var dn=function(){var e=function(){function e(t,a,i,n){var r=this;o(this,e),this.api=t,this.route=a,this.router=i,this.location=n,this.policyForm={id:null,type:0,profile_id:null,start_time:{hour:null,minute:null},end_time:{hour:null,minute:null},dow:0,threshold1:null,target:0,bandwidth:{downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},accounting:{dlratio:100,ulratio:100},cisco_policy:{qos_policy_out:"",qos_policy_in:""},address_list:""},this.dow=[],this.dayValue=[0,1,2,4,8,16,32,64],this.policyId=null;for(var l=0;l<8;l++)this.dow[l]=0;this.route.params.subscribe(function(e){e.profile_id&&(r.policyForm.profile_id=e.profile_id),e.policy_id&&(r.policyId=e.policy_id,r.api.get("policy/"+r.policyId).subscribe(function(e){if(r.policyForm=e,0==r.policyForm.target&&(r.policyForm.bandwidth=JSON.parse(e.target_options),r.policyForm.accounting={dlratio:100,ulratio:100}),1==r.policyForm.target&&(r.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},r.policyForm.accounting=JSON.parse(e.target_options)),2==r.policyForm.target&&(r.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},r.policyForm.accounting={dlratio:100,ulratio:100}),3==r.policyForm.target&&(r.policyForm.bandwidth={downrate:0,uprate:0,burst_enabled:0,burst_limit_dl:0,burst_limit_ul:0,burst_threshold_dl:0,burst_threshold_ul:0,burst_time_dl:0,burst_time_ul:0},r.policyForm.address_list=JSON.parse(e.target_options).address_list),4==r.policyForm.target&&(r.policyForm.cisco_policy=JSON.parse(e.target_options)),r.checkDays(r.policyForm.dow),0==r.policyForm.type){var t=e.start_time.split(":"),a=e.end_time.split(":");r.policyForm.start_time={hour:parseInt(t[0]),minute:parseInt(t[1])},r.policyForm.end_time={hour:parseInt(a[0]),minute:parseInt(a[1])}}}))})}return l(e,[{key:"toggleDOW",value:function(e){var t=this.policyForm.dow;this.dow[e]?t+=this.dayValue[e]:t-=this.dayValue[e],this.policyForm.dow=t}},{key:"save",value:function(){var e=this;this.policyForm.id?this.api.put("policy/"+this.policyForm.id,this.policyForm).subscribe(function(t){e.router.navigate(["/profile/policies/",e.policyForm.profile_id])}):this.api.post("policy",this.policyForm).subscribe(function(t){e.router.navigate(["/profile/policies/",e.policyForm.profile_id])})}},{key:"checkDays",value:function(e){this.dow=[0,0,0,0,0,0,0,0],1&e&&(this.dow[1]=1),2&e&&(this.dow[2]=1),4&e&&(this.dow[3]=1),8&e&&(this.dow[4]=1),16&e&&(this.dow[5]=1),32&e&&(this.dow[6]=1),64&e&&(this.dow[7]=1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(_.F0),c.Y36(Q.Ye))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:78,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","cb_1",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_1",1,"custom-control-label"],["type","checkbox","id","cb_2",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_2",1,"custom-control-label"],["type","checkbox","id","cb_3",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_3",1,"custom-control-label"],["type","checkbox","id","cb_4",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_4",1,"custom-control-label"],["type","checkbox","id","cb_5",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_5",1,"custom-control-label"],["type","checkbox","id","cb_6",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_6",1,"custom-control-label"],["type","checkbox","id","cb_7",1,"custom-control-input",3,"ngModel","ngModelChange","change"],["for","cb_7",1,"custom-control-label"],["value","1",4,"ngIf"],["value","2"],["value","3"],["value","4"],["id","bandwidth",4,"ngIf"],["id","accounting",4,"ngIf"],["id","addresslist",4,"ngIf"],["id","cisco_policy",4,"ngIf"],[1,"form-actions","right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],[1,"col-sm-6"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["id","bandwidth"],["id","burst",4,"ngIf"],["id","burst"],["type","number","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"],["id","accounting"],["id","addresslist"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["id","cisco_policy"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Policy Form "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"label"),c._uU(9,"Policy Type"),c.qZA(),c.TgZ(10,"select",7),c.NdJ("ngModelChange",function(e){return t.policyForm.type=e}),c.TgZ(11,"option",8),c._uU(12,"Time Based"),c.qZA(),c.TgZ(13,"option",9),c._uU(14,"Traffic Based"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div"),c.YNc(16,an,6,1,"div",10),c.YNc(17,nn,11,2,"div",10),c.TgZ(18,"div",4),c.TgZ(19,"div",11),c.TgZ(20,"div",6),c.TgZ(21,"label"),c._uU(22,"Days Of Week"),c.qZA(),c.TgZ(23,"div"),c.TgZ(24,"div",12),c.TgZ(25,"input",13),c.NdJ("ngModelChange",function(e){return t.dow[1]=e})("change",function(){return t.toggleDOW(1)}),c.qZA(),c.TgZ(26,"label",14),c._uU(27,"Sun"),c.qZA(),c.qZA(),c.TgZ(28,"div",12),c.TgZ(29,"input",15),c.NdJ("ngModelChange",function(e){return t.dow[2]=e})("change",function(){return t.toggleDOW(2)}),c.qZA(),c.TgZ(30,"label",16),c._uU(31,"Mon"),c.qZA(),c.qZA(),c.TgZ(32,"div",12),c.TgZ(33,"input",17),c.NdJ("ngModelChange",function(e){return t.dow[3]=e})("change",function(){return t.toggleDOW(3)}),c.qZA(),c.TgZ(34,"label",18),c._uU(35,"Tus"),c.qZA(),c.qZA(),c.TgZ(36,"div",12),c.TgZ(37,"input",19),c.NdJ("ngModelChange",function(e){return t.dow[4]=e})("change",function(){return t.toggleDOW(4)}),c.qZA(),c.TgZ(38,"label",20),c._uU(39,"Wed"),c.qZA(),c.qZA(),c.TgZ(40,"div",12),c.TgZ(41,"input",21),c.NdJ("ngModelChange",function(e){return t.dow[5]=e})("change",function(){return t.toggleDOW(5)}),c.qZA(),c.TgZ(42,"label",22),c._uU(43,"Thr"),c.qZA(),c.qZA(),c.TgZ(44,"div",12),c.TgZ(45,"input",23),c.NdJ("ngModelChange",function(e){return t.dow[6]=e})("change",function(){return t.toggleDOW(6)}),c.qZA(),c.TgZ(46,"label",24),c._uU(47,"Fri"),c.qZA(),c.qZA(),c.TgZ(48,"div",12),c.TgZ(49,"input",25),c.NdJ("ngModelChange",function(e){return t.dow[7]=e})("change",function(){return t.toggleDOW(7)}),c.qZA(),c.TgZ(50,"label",26),c._uU(51,"Sat"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(52,"div",4),c.TgZ(53,"div",5),c.TgZ(54,"div",6),c.TgZ(55,"label"),c._uU(56,"Target"),c.qZA(),c.TgZ(57,"select",7),c.NdJ("ngModelChange",function(e){return t.policyForm.target=e}),c.TgZ(58,"option",8),c._uU(59,"Bandwidth"),c.qZA(),c.YNc(60,on,2,0,"option",27),c.TgZ(61,"option",28),c._uU(62,"Terminate"),c.qZA(),c.TgZ(63,"option",29),c._uU(64,"Mikrotik Address-List"),c.qZA(),c.TgZ(65,"option",30),c._uU(66,"Cisco Policy"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(67,ln,20,4,"div",31),c.YNc(68,sn,12,2,"div",32),c.YNc(69,cn,7,1,"div",33),c.YNc(70,un,12,2,"div",34),c.qZA(),c.TgZ(71,"div"),c._UZ(72,"hr"),c.TgZ(73,"div",35),c.TgZ(74,"button",36),c.NdJ("click",function(){return t.save()}),c._uU(75,"Save"),c.qZA(),c.TgZ(76,"button",37),c.NdJ("click",function(){return t.router.navigate(["/profile/policies",t.policyForm.profile_id])}),c._uU(77,"Cancel "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(10),c.Q6J("ngModel",t.policyForm.type),c.xp6(6),c.Q6J("ngIf",1==t.policyForm.type),c.xp6(1),c.Q6J("ngIf",0==t.policyForm.type),c.xp6(8),c.Q6J("ngModel",t.dow[1]),c.xp6(4),c.Q6J("ngModel",t.dow[2]),c.xp6(4),c.Q6J("ngModel",t.dow[3]),c.xp6(4),c.Q6J("ngModel",t.dow[4]),c.xp6(4),c.Q6J("ngModel",t.dow[5]),c.xp6(4),c.Q6J("ngModel",t.dow[6]),c.xp6(4),c.Q6J("ngModel",t.dow[7]),c.xp6(8),c.Q6J("ngModel",t.policyForm.target),c.xp6(3),c.Q6J("ngIf",0==t.policyForm.type),c.xp6(7),c.Q6J("ngIf",0==t.policyForm.target),c.xp6(1),c.Q6J("ngIf",1==t.policyForm.target),c.xp6(1),c.Q6J("ngIf",3==t.policyForm.target),c.xp6(1),c.Q6J("ngIf",4==t.policyForm.target))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.O5,A.Wl,A.wV,A.Fj,Y.Pm,Da.Ql],styles:[".custom-checkbox[_ngcontent-%COMP%]{float:left;margin-left:10px}"]}),e}();function fn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.hij("",a.threshold1," MB")}}function pn(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Bandwidth"),c.qZA())}function gn(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Accounting"),c.qZA())}function hn(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Terminate"),c.qZA())}function mn(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Address-List"),c.qZA())}function _n(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Cisco Policy"),c.qZA())}function vn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bitrate"),c.ALo(3,"bitrate"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.AsE("",c.lcZ(2,2,a.target_options.downrate)," / ",c.lcZ(3,4,a.target_options.uprate),"")}}function bn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.AsE("",a.target_options.dlratio,"% / ",a.target_options.ulratio,"%")}}function Zn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(null==a.target_options?null:a.target_options.address_list)}}function yn(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.AsE("",null==a.target_options?null:a.target_options.qos_policy_in," / ",null==a.target_options?null:a.target_options.qos_policy_out,"")}}var wn=function(e){return[e]};function xn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c.YNc(6,fn,2,1,"span",11),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.YNc(10,pn,2,0,"span",11),c.YNc(11,gn,2,0,"span",11),c.YNc(12,hn,2,0,"span",11),c.YNc(13,mn,2,0,"span",11),c.YNc(14,_n,2,0,"span",11),c.qZA(),c.TgZ(15,"td"),c.YNc(16,vn,4,6,"span",11),c.YNc(17,bn,2,2,"span",11),c.YNc(18,Zn,2,1,"span",11),c.YNc(19,yn,2,2,"span",11),c.qZA(),c.TgZ(20,"td"),c.TgZ(21,"div",12),c.TgZ(22,"a",3),c._UZ(23,"i",13),c.qZA(),c._uU(24," \xa0\xa0\xa0 "),c.TgZ(25,"a",14),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).destroy(e.id)}),c._UZ(26,"i",15),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw(2);c.xp6(2),c.hij(" ",i.start_time," "),c.xp6(2),c.hij(" ",i.end_time," "),c.xp6(2),c.Q6J("ngIf",i.threshold1),c.xp6(2),c.hij(" ",i.days," "),c.xp6(2),c.Q6J("ngIf",0==i.target),c.xp6(1),c.Q6J("ngIf",1==i.target),c.xp6(1),c.Q6J("ngIf",2==i.target),c.xp6(1),c.Q6J("ngIf",3==i.target),c.xp6(1),c.Q6J("ngIf",4==i.target),c.xp6(2),c.Q6J("ngIf",0==i.target),c.xp6(1),c.Q6J("ngIf",1==i.target),c.xp6(1),c.Q6J("ngIf",3==i.target),c.xp6(1),c.Q6J("ngIf",4==i.target),c.xp6(3),c.Q6J("routerLink",c.VKq(14,wn,"/profile/policy/"+n.profile_id+"/"+i.id))}}function An(e,t){if(1&e&&(c.TgZ(0,"table",8),c.TgZ(1,"thead"),c.TgZ(2,"tr",9),c.TgZ(3,"th"),c._uU(4,"From"),c.qZA(),c.TgZ(5,"th"),c._uU(6,"To"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Threshold (MB)"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Days"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Target"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Target Details"),c.qZA(),c._UZ(15,"th"),c.qZA(),c.qZA(),c.TgZ(16,"tbody"),c.YNc(17,xn,27,16,"tr",10),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(17),c.Q6J("ngForOf",a.policyList)}}var qn=function(e){return["/profile/policy/",e]},Tn=function(){var e=function(){function e(t,a,i,n){var r=this;o(this,e),this.api=t,this.route=a,this.swal=i,this.toastr=n,this.profile_id=null,this.timeBasedPolicies=[],this.trafficBasedPolicies=[],this.policyIndexType=0,this.policyList=[],this.route.params.subscribe(function(e){e.profile_id&&(r.profile_id=e.profile_id,r.loadIndex(r.profile_id))})}return l(e,[{key:"loadIndex",value:function(e){var t=this;this.api.get("index/policy/"+e).subscribe(function(e){var a=e.data;t.policyList=e.data;for(var i=0;i<a.length;i++)a[i].days=t.daysOfWeek(a[i].dow),a[i].target_options=JSON.parse(a[i].target_options),0==a[i].type&&t.timeBasedPolicies.push(a[i]),1==a[i].type&&t.trafficBasedPolicies.push(a[i])})}},{key:"daysOfWeek",value:function(e){var t=[];return 127==e?(t.push("Every Day"),t):(1&e&&t.push("SUN"),2&e&&t.push("MON"),4&e&&t.push("TUS"),8&e&&t.push("WED"),16&e&&t.push("THR"),32&e&&t.push("FRI"),64&e&&t.push("SAT"),t)}},{key:"destroy",value:function(e){var t=this;this.swal.confirm({title:"Delete Policy",type:"warning",text:"Delete Selected Policy ?",confirmButtonText:"Yes"}).subscribe(function(){t.api.delete("policy/"+e).subscribe(function(e){t.timeBasedPolicies=[],t.trafficBasedPolicies=[],t.loadIndex(t.profile_id),t.toastr.success("Policy Deleted","")})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(tt),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:9,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"card-actions"],[3,"routerLink"],[1,"text-muted",2,"cursor","pointer"],[1,"fa","fa-plus"],[1,"card-body"],["class","table dataTable table-hover table-outline","role","grid","style","border-collapse: collapse !important",4,"ngIf"],["role","grid",1,"table","dataTable","table-hover","table-outline",2,"border-collapse","collapse !important"],["role","row"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-row-actions"],[1,"fa","fa-2x","fa-edit"],[2,"cursor","pointer",3,"click"],[1,"fa","fa-2x","fa-trash"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._uU(2," Profile Policies "),c.TgZ(3,"div",2),c.TgZ(4,"a",3),c.TgZ(5,"span",4),c._UZ(6,"i",5),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",6),c.YNc(8,An,18,1,"table",7),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("routerLink",c.VKq(2,qn,t.profile_id)),c.xp6(4),c.Q6J("ngIf",0==t.policyIndexType))},directives:[_.yS,Q.O5,Q.sg],pipes:[Et],styles:[".PolicyList[_ngcontent-%COMP%]{list-style:none;-webkit-padding-start:0px;-moz-padding-start:0px}.PolicyListItem[_ngcontent-%COMP%]{width:100%;padding:10px;box-sizing:border-box;background:#f1f3f8;margin-top:10px;border:1px dashed grey}.policy-item-label[_ngcontent-%COMP%]{font-size:14px;text-transform:capitalize;display:block}.policy-item-value[_ngcontent-%COMP%]{font-size:16px;text-transform:capitalize;color:#3a3a3a;font-weight:bold;display:block}.policy-item-actions[_ngcontent-%COMP%]{opacity:.1}.policy-item-actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer}.PolicyListItem[_ngcontent-%COMP%]:hover   .policy-item-actions[_ngcontent-%COMP%]{opacity:1}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:bold}.table-row-actions[_ngcontent-%COMP%]{opacity:.1}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .table-row-actions[_ngcontent-%COMP%]{opacity:1}"]}),e}(),kn=["userForm"];function Cn(e,t){1&e&&(c.TgZ(0,"div",13),c._UZ(1,"i",14),c._uU(2," Passwords do not match"),c.qZA())}function Un(e,t){1&e&&(c.TgZ(0,"div",15),c._uU(1," No Records Found "),c.qZA())}function Mn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"li",18),c._uU(1),c.TgZ(2,"span"),c.TgZ(3,"a",19),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).deleteMac(e.id)}),c._UZ(4,"i",20),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(1),c.hij(" ",i.mac," ")}}function Fn(e,t){if(1&e&&(c.TgZ(0,"ul",16),c.YNc(1,Mn,5,1,"li",17),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.allowed_mac_list)}}var Jn=function(){return["username","profile_id"]},On=function(){return["username","password","confirm_password"]},Nn=function(){return{width:"400px"}},In=function(){var e=function(){function e(t,a,i,n,r,l,s,c,u){o(this,e),this.api=t,this.swal=a,this.auth=i,this.location=n,this.toastr=r,this.formLoader=l,this.ch=s,this.route=c,this.tr=u,this.hasHeader=!0,this.passwordsMismatch=!1,this.advancedFields=[{key:"separator3",label:this.tr.translate("user_form_label_advanced"),type:"separator",cols:12},{key:"expiration",label:this.tr.translate("user_form_label_expiration"),required:!1,value:this.ch.now(),placeholder:"YYYY-MM-DD hh:mm:ss",type:"text",pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2} [0-9]{2}:[0-9]{2}:[0-9]{2}"},{key:"simultaneous_sessions",label:this.tr.translate("users_table_simultaneous_sessions"),type:"text",pattern:"[0-9]*",value:1,required:!1},{key:"static_ip",label:this.tr.translate("users_table_static_ip"),type:"text"},{key:"mikrotik_winbox_group",label:"Mikrotik Winbox Group",type:"text"},{key:"mikrotik_framed_route",label:"Mikrotik Framed Route",type:"text"},{key:"mikrotik_addresslist",label:"Mikrotik Address List",type:"text"},{key:"mikrotik_ipv6_prefix",label:"IPv6 Prefix",type:"text"},{key:"user_type",label:this.tr.translate("user_form_label_user_type"),type:"select",options:[{value:0,label:"Regular User"},{value:1,label:"Wireless Access Point"}],value:"0"},{key:"restricted",label:this.tr.translate("user_form_label_restricted"),type:"switch",value:!1}],this.options={site_id:[],group_id:[],parent_id:[],profile_id:[]},this.managers_list=[],this.profiles_list=[],this.group_list=[],this.site_list=[],this.mac_dialog_visible=!1,this.mac_user_input="",this.user_id="",this.allowed_mac_list=[];var d=this.formLoader.getForm("user_form");d[6].value=this.auth.client.id,this.formFields=d,this.auth.has("prm_users_advanced")&&(this.formFields=this.formFields.concat(this.advancedFields)),this.loadResources()}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.loadAllowedMacList())}),setTimeout(function(){e.auth.has("prm_managers_sysadmin")&&e.userForm.enableField("profile_id")},4e3)}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.parent_id=e.managers_list}),this.api.get("list/profile/5").subscribe(function(t){e.profiles_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.profiles_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.profile_id=e.profiles_list}),this.auth.has("prm_groups_assign")&&this.api.get("group").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.group_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.group_list.unshift({value:-1,label:e.tr.translate("global_none")}),e.options.group_id=e.group_list}}),this.auth.has("prm_sites_management")?this.api.get("site").subscribe(function(t){if(200==t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.site_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.site_id=e.site_list,e.options.site_id.unshift({value:null,label:"Any"})}}):this.options.site_id=[{value:null,label:"Any"}]}},{key:"onFormAction",value:function(e){"mac_editor"==e&&(this.mac_dialog_visible=!0)}},{key:"addMac",value:function(){var e=this;this.api.post("mac",{mac:this.mac_user_input,user_id:this.user_id}).subscribe(function(t){e.mac_user_input="",200===t.status&&e.loadAllowedMacList()})}},{key:"loadAllowedMacList",value:function(){var e=this;this.api.get("mac/"+this.user_id).subscribe(function(t){200===t.status&&(e.allowed_mac_list=t.data)})}},{key:"deleteMac",value:function(e){var t=this;this.api.delete("mac/"+e.toString()).subscribe(function(e){200===e.status&&t.loadAllowedMacList()})}},{key:"onSubmit",value:function(e){this.toastr.success(this.tr.translate("msg_update_success")),this.location.back()}},{key:"dataChanged",value:function(e){this.passwordsMismatch=e.password!=e.confirm_password,1==e.user_type&&(console.log("ignoring password"),this.userForm.ignoreField("password"),this.userForm.ignoreField("confirm_password"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(tt),c.Y36(w),c.Y36(Q.Ye),c.Y36(v._W),c.Y36(ki),c.Y36(y),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["user-form"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(kn,5),2&e)&&(c.iGM(a=c.CRH())&&(t.userForm=a.first))},inputs:{hasHeader:"hasHeader"},decls:15,vars:22,consts:[["class","alert alert-warning",4,"ngIf"],["name","userForm",3,"fields","options","title","icon","resourceRoute","disabledOnUpdate","ignoredOnUpdate","header","formAction","submit","cancel","formChanged"],["userForm",""],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","placeholder","xx:xx:xx:xx:xx:xx","aria-label","xx:xx:xx:xx:xx","aria-describedby","button-addon2","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[1,"fa","fa-plus"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(c.YNc(0,Cn,3,0,"div",0),c.TgZ(1,"model-form",1,2),c.NdJ("formAction",function(e){return t.onFormAction(e)})("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()})("formChanged",function(e){return t.dataChanged(e)}),c.qZA(),c.TgZ(3,"p-dialog",3),c.NdJ("visibleChange",function(e){return t.mac_dialog_visible=e}),c.TgZ(4,"p-header"),c._uU(5),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c.TgZ(8,"input",6),c.NdJ("ngModelChange",function(e){return t.mac_user_input=e}),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"button",8),c.NdJ("click",function(){return t.addMac()}),c._UZ(11,"i",9),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",10),c.YNc(13,Un,2,0,"div",11),c.YNc(14,Fn,2,1,"ul",12),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.passwordsMismatch),c.xp6(1),c.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("user_form_label"))("icon","fa fa-user")("resourceRoute","user")("disabledOnUpdate",c.DdM(19,Jn))("ignoredOnUpdate",c.DdM(20,On))("header",t.hasHeader),c.xp6(2),c.Akn(c.DdM(21,Nn)),c.Q6J("visible",t.mac_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),c.xp6(2),c.hij(" ",t.tr.translate("user_mac_dialog_title")," "),c.xp6(3),c.Q6J("ngModel",t.mac_user_input),c.xp6(5),c.Q6J("ngIf",0===t.allowed_mac_list.length),c.xp6(1),c.Q6J("ngIf",t.allowed_mac_list.length>0))},directives:[Q.O5,Ji,Oi.V,Ci.h4,A.Fj,A.JJ,A.On,Q.sg],encapsulation:2}),e}(),Yn=function(){function e(t,a,i,n,r,l,s){o(this,e),this.tr=t,this.api=a,this.config=i,this.auth=n,this.ref=r,this.toastr=l,this.dialogConfig=s,this.payDebtForm={user_id:null,username:"",amount:null,comment:"",transaction_id:null,is_loan:!1},this.user_id=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.user_id=this.dialogConfig.data.user_id,this.blockUI.start(),this.api.get("user/debt/"+this.user_id).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.payDebtForm.user_id=e.user_id,e.payDebtForm.username=t.data.username,e.payDebtForm.debt_for_me=Math.abs(parseFloat(t.data.debt_for_me)),e.payDebtForm.debt=Math.abs(parseFloat(t.data.total)))})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"deposit",value:function(){var e=this;this.blockUI.start(),this.api.post("user/payDebt",this.payDebtForm).subscribe(function(t){e.blockUI.stop(),e.ref.close(),200===t.status?e.toastr.success(e.tr.translate(t.message)):e.toastr.error(e.tr.translate(t.message))})}}]),e}();function Qn(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",3),c.TgZ(2,"div",4),c.TgZ(3,"label",21),c._uU(4),c.qZA(),c._UZ(5,"input",22),c.TgZ(6,"small",11),c._uU(7,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"div",4),c.TgZ(10,"label",23),c._uU(11),c.qZA(),c._UZ(12,"input",24),c.TgZ(13,"small",11),c._uU(14,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.Oqu(a.tr.translate("global_username")),c.xp6(1),c.s9C("value",a.userData.username),c.xp6(6),c.Oqu(a.tr.translate("global_owner")),c.xp6(1),c.s9C("value",a.userData.parent_username)}}function Sn(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",3),c.TgZ(2,"div",4),c.TgZ(3,"label",25),c._uU(4),c.qZA(),c._UZ(5,"input",26),c.TgZ(6,"small",11),c._uU(7,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"div",4),c.TgZ(10,"label",27),c._uU(11),c.qZA(),c._UZ(12,"input",28),c.TgZ(13,"small",11),c._uU(14,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.Oqu(a.tr.translate("global_profile")),c.xp6(1),c.s9C("value",a.userData.profile_name),c.xp6(6),c.Oqu(a.tr.translate("global_expiration")),c.xp6(1),c.s9C("value",a.userData.expiration)}}function Pn(e,t){if(1&e&&(c.TgZ(0,"label",29),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Oqu(a.tr.translate("user_compensation_title_days"))}}function Dn(e,t){if(1&e&&(c.TgZ(0,"label",29),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Oqu(a.tr.translate("user_compensation_title_traffic"))}}function Hn(e,t){if(1&e&&(c.TgZ(0,"label",29),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Oqu(a.tr.translate("user_compensation_title_uptime"))}}Yn.\u0275fac=function(e){return new(e||Yn)(c.Y36(I),c.Y36(Z),c.Y36(p),c.Y36(w),c.Y36(ba.E7),c.Y36(v._W),c.Y36(ba.S))},Yn.\u0275cmp=c.Xpm({type:Yn,selectors:[["app-user-pay-debt"]],decls:39,vars:19,consts:[[1,"form"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"mb-1",2,"width","100%"],[2,"direction","ltr"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.TgZ(1,"div",1),c.TgZ(2,"label",2),c._uU(3),c.qZA(),c._UZ(4,"input",3),c.TgZ(5,"small",4),c._uU(6,"\xa0"),c.qZA(),c.qZA(),c.TgZ(7,"div",1),c.TgZ(8,"label"),c._uU(9),c.qZA(),c.TgZ(10,"input",5,6),c.NdJ("ngModelChange",function(e){return t.payDebtForm.amount=e}),c.qZA(),c.TgZ(12,"small",4),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",1),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",7,8),c.NdJ("ngModelChange",function(e){return t.payDebtForm.comment=e}),c.qZA(),c.TgZ(19,"small",4),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"table",9),c.TgZ(22,"tr"),c.TgZ(23,"td"),c._uU(24),c.qZA(),c.TgZ(25,"td",10),c.TgZ(26,"strong"),c._uU(27),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"tr"),c.TgZ(29,"td"),c._uU(30),c.qZA(),c.TgZ(31,"td",10),c.TgZ(32,"strong"),c._uU(33),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(34,"div",11),c.TgZ(35,"button",12),c.NdJ("click",function(){return t.dismiss()}),c._uU(36),c.qZA(),c.TgZ(37,"button",13),c.NdJ("click",function(){return t.deposit()}),c._uU(38),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Oqu(t.tr.translate("user_depodrawal_form_username")),c.xp6(1),c.s9C("value",t.payDebtForm.username),c.xp6(5),c.Oqu(t.tr.translate("user_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",t.payDebtForm.amount),c.xp6(6),c.Oqu(t.tr.translate("user_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",t.payDebtForm.comment),c.xp6(7),c.AsE("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.username,""),c.xp6(3),c.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt,""),c.xp6(3),c.HOy("",t.tr.translate("manager_label_total_debt_on")," ",t.payDebtForm.username," ",t.tr.translate("global_debt_for")," ",t.auth.client.username,""),c.xp6(3),c.AsE("",t.config.siteConfig.site_currency," ",t.payDebtForm.debt_for_me,""),c.xp6(3),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!t.payDebtForm.amount||t.payDebtForm.amount<=0||t.payDebtForm.amount>t.payDebtForm.debt_for_me),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,A.wV,A.Fj,A.JJ,A.On],styles:[""]}),(0,g.gn)([(0,m.bH)()],Yn.prototype,"blockUI",void 0);var Rn=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.tr=t,this.api=a,this.ref=i,this.dialogConfig=n,this.toastr=r,this.compensationForm={user_ids:null,target:-1,amount:"",comment:"",days:0,traffic:0,uptime:0},this.userData={}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.user_id=null;var t=this.dialogConfig.data.rows;this.compensationForm.user_ids=t,1===t.length&&(this.user_id=this.dialogConfig.data.rows[0],this.api.get("user/"+this.user_id).subscribe(function(t){200===t.status&&(e.userData=t.data)}))}},{key:"submit",value:function(){var e=this;this.compensationForm[this.compensationForm.target]=this.compensationForm.amount,this.api.post("compensation",this.compensationForm).subscribe(function(t){e.ref.close(),200===t.status&&e.toastr.success(e.tr.translate(t.message))})}},{key:"dismiss",value:function(){this.ref.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I),c.Y36(Z),c.Y36(ba.E7),c.Y36(ba.S),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-compensation"]],decls:38,vars:20,consts:[[1,"form"],["class","row",4,"ngIf"],[1,"row"],[1,"col","col-md-6"],[1,"from-group"],["for","target"],["type","select","id","target","name","target",1,"form-control","font-weight-bold",3,"ngModel","ngModelChange"],["value","-1","disabled",""],["value","days"],["value","traffic"],["value","uptime"],[1,"form-text","text-muted"],[1,"from-group",3,"hidden"],["for","amount",4,"ngIf"],["type","number","name","amount","id","amount",1,"form-control","font-weight-bold",3,"ngModel","placeholder","ngModelChange"],[1,"col","col-md-12"],["for","comment"],["name","comment","id","comment",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["for","username"],["type","text","readonly","","id","username",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","owner"],["type","text","readonly","","id","owner",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","profile"],["type","text","readonly","","id","profile",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","expiration"],["type","text","readonly","","id","expiration",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","amount"]],template:function(e,t){1&e&&(c.TgZ(0,"form",0),c.YNc(1,Qn,15,4,"div",1),c.YNc(2,Sn,15,4,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"label",5),c._uU(7),c.qZA(),c.TgZ(8,"select",6),c.NdJ("ngModelChange",function(e){return t.compensationForm.target=e}),c.TgZ(9,"option",7),c._uU(10),c.qZA(),c.TgZ(11,"option",8),c._uU(12),c.qZA(),c.TgZ(13,"option",9),c._uU(14),c.qZA(),c.TgZ(15,"option",10),c._uU(16),c.qZA(),c.qZA(),c.TgZ(17,"small",11),c._uU(18,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",3),c.TgZ(20,"div",12),c.YNc(21,Pn,2,1,"label",13),c.YNc(22,Dn,2,1,"label",13),c.YNc(23,Hn,2,1,"label",13),c.TgZ(24,"input",14),c.NdJ("ngModelChange",function(e){return t.compensationForm.amount=e}),c.qZA(),c.TgZ(25,"small",11),c._uU(26,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"div",2),c.TgZ(28,"div",15),c.TgZ(29,"div",12),c.TgZ(30,"label",16),c._uU(31),c.qZA(),c.TgZ(32,"textarea",17),c.NdJ("ngModelChange",function(e){return t.compensationForm.comment=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"div",18),c.TgZ(34,"button",19),c.NdJ("click",function(){return t.dismiss()}),c._uU(35),c.qZA(),c.TgZ(36,"button",20),c.NdJ("click",function(){return t.submit()}),c._uU(37),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",null!==t.user_id),c.xp6(1),c.Q6J("ngIf",null!==t.user_id),c.xp6(5),c.Oqu(t.tr.translate("user_compensation_target")),c.xp6(1),c.Q6J("ngModel",t.compensationForm.target),c.xp6(2),c.Oqu(t.tr.translate("user_compensation_target_select")),c.xp6(2),c.Oqu(t.tr.translate("user_compensation_target_days")),c.xp6(2),c.Oqu(t.tr.translate("user_compensation_target_traffic")),c.xp6(2),c.Oqu(t.tr.translate("user_compensation_target_uptime")),c.xp6(4),c.Q6J("hidden",-1==t.compensationForm.target),c.xp6(1),c.Q6J("ngIf","days"===t.compensationForm.target),c.xp6(1),c.Q6J("ngIf","traffic"===t.compensationForm.target),c.xp6(1),c.Q6J("ngIf","uptime"===t.compensationForm.target),c.xp6(1),c.s9C("placeholder",t.tr.translate(t.compensationForm.target)),c.Q6J("ngModel",t.compensationForm.amount),c.xp6(5),c.Q6J("hidden",-1==t.compensationForm.target),c.xp6(2),c.Oqu(t.tr.translate("global_comment")),c.xp6(1),c.Q6J("ngModel",t.compensationForm.comment),c.xp6(3),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",-1==t.compensationForm.target||(null==t.compensationForm?null:t.compensationForm.amount)<1),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")))},directives:[A._Y,A.JL,A.F,Q.O5,A.EJ,A.JJ,A.On,A.YN,A.Kr,A.wV,A.Fj],styles:[""]}),e}(),Vn=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.tr=a,this.ch=i,this.toastr=n,this.i=1,this.series=[],this.dl_series_data=[],this.ul_series_data=[],this.finished=new c.vpe}return l(e,[{key:"ngOnInit",value:function(){}},{key:"setUserId",value:function(e){this.user_id=e}},{key:"pullLiveTrafficData",value:function(){this.xhr=this.api.xhr("user/liveTraffic/"+this.user_id),this.xhr.onprogress=(function(e){var t=this.xhr.responseText.split("\n"),a=(t=t[t.length-2]).split(","),i=parseInt(a[0]),n=parseInt(a[1]),o=this.chart.series[0].data.length>25,r=this.chart.series[1].data.length>25,l=(new Date).getTime(),s=[l,i],c=[l,n];this.rx_rate=this.ch.bpsFormat(i),this.tx_rate=this.ch.bpsFormat(n),this.chart.series[0].addPoint(s,!0,o),this.chart.series[1].addPoint(c,!0,r)}).bind(this),this.xhr.onload=(function(e){"bad_session"===this.xhr.responseText&&this.toastr.warning("Bad Session"),this.finished.emit()}).bind(this),this.xhr.send()}},{key:"stopPolling",value:function(){this.xhr.abort()}},{key:"start",value:function(){setTimeout((function(){this.initChart()}).bind(this),1e3)}},{key:"initChart",value:function(){this.chart=E.chart("chart_container",{chart:{type:"line",zoomType:null},legend:{enabled:!0},title:{text:this.tr.translate("user_live_traffic_chart_title")},xAxis:{type:"datetime",tickPixelInterval:90,labels:{formatter:function(){return E.dateFormat("%M:%S",this.value)}}},yAxis:{minPadding:.1,maxPadding:.1,title:{text:"Bit Rate"},labels:{formatter:function(){var e=this.value;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}}},plotOptions:{series:{marker:{enabled:!1}}},tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bps","Kbps","Mbps","Gbps"][a]}}}),this.chart.addSeries({name:"DL",data:[],color:"#ce2c48"}),this.chart.addSeries({name:"UL",data:[],color:"#95adce"});var e=(new Date).getTime();this.chart.series[0].addPoint([e,0],!1),this.chart.series[1].addPoint([e,0],!0),this.pullLiveTrafficData()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I),c.Y36(y),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-live-traffic"]],outputs:{finished:"finished"},decls:15,vars:2,consts:[["id","chart_container",1,"chart_container"],[1,"text-center"],[1,"fad","fa-compact-disc","fa-3x","fa-spin"],[1,"row",2,"margin-right","unset","margin-left","unset"],[1,"col-6"],[1,"rate-title"],[1,"rate-value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"h4",1),c._UZ(2,"i",2),c.qZA(),c.qZA(),c._UZ(3,"hr"),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"span",5),c._uU(7,"RX rate"),c.qZA(),c.TgZ(8,"span",6),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c.TgZ(11,"span",5),c._uU(12,"TX rate"),c.qZA(),c.TgZ(13,"span",6),c._uU(14),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(9),c.hij(" ",t.rx_rate,""),c.xp6(5),c.hij(" ",t.tx_rate,""))},styles:[".chart_container[_ngcontent-%COMP%]{width:100%}.rate-title[_ngcontent-%COMP%]{font-size:14px;font-weight:lighter}.rate-value[_ngcontent-%COMP%]{font-size:18px;margin-left:15px}"]}),e}(),Ln=["user_model_view"],En=["deposit_modal"],Kn=["withdrawal_modal"],Bn=["rename_modal"],jn=["live_traffic"],zn=["liveTrafficDialog"],Gn=["add_traffic_modal"];function Wn(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",19,20),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw(2).onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw(2).onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw(2).loading=!0})("onCellMiddleClicked",function(e){return c.CHM(a),c.oxw(2).onCellMiddleClicked(e)})("onDataLoaded",function(){return c.CHM(a),c.oxw(2).loading=!1}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}function $n(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"h4",22),c._uU(2),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c.TgZ(4,"span",24),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",25),c.TgZ(7,"form",26),c.TgZ(8,"div",27),c.TgZ(9,"label",28),c._uU(10),c.qZA(),c._UZ(11,"input",29),c.TgZ(12,"small",30),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",27),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"select",31,32),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).traffic_form.target=e}),c.TgZ(19,"option",33),c._uU(20,"Download + Upload"),c.qZA(),c.TgZ(21,"option",34),c._uU(22,"Download"),c.qZA(),c.TgZ(23,"option",35),c._uU(24,"Upload"),c.qZA(),c.qZA(),c.TgZ(25,"small",30),c._uU(26,"\xa0"),c.qZA(),c.qZA(),c.TgZ(27,"div",27),c.TgZ(28,"label"),c._uU(29),c.qZA(),c.TgZ(30,"input",36,37),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).traffic_form.amount=e}),c.qZA(),c.TgZ(32,"small",30),c._uU(33,"\xa0"),c.qZA(),c.qZA(),c.TgZ(34,"div",27),c.TgZ(35,"label"),c._uU(36),c.qZA(),c.TgZ(37,"input",38,39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).traffic_form.comment=e}),c.qZA(),c.TgZ(39,"small",30),c._uU(40,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"div",40),c.TgZ(42,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c._uU(43),c.qZA(),c.TgZ(44,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).addTraffic()}),c._uU(45),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.tr.translate("user_traffic_form_title")),c.xp6(8),c.Oqu(i.tr.translate("global_username")),c.xp6(1),c.s9C("value",i.traffic_form.username),c.xp6(5),c.Oqu(i.tr.translate("user_traffic_form_target")),c.xp6(1),c.Q6J("ngModel",i.traffic_form.target),c.xp6(12),c.Oqu(i.tr.translate("user_traffic_form_amount")),c.xp6(1),c.Q6J("ngModel",i.traffic_form.amount),c.xp6(6),c.Oqu(i.tr.translate("global_comment")),c.xp6(1),c.Q6J("ngModel",i.traffic_form.comment),c.xp6(6),c.Oqu(i.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!i.traffic_form.amount||0===i.traffic_form.amount),c.xp6(1),c.Oqu(i.tr.translate("global_button_submit"))}}var Xn=function(e){return{prefix:e,align:"left",allowNegative:!1,inputMode:1}};function eo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"h4",22),c._uU(2),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c.TgZ(4,"span",24),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",25),c.TgZ(7,"form",26),c.TgZ(8,"div",27),c.TgZ(9,"label",28),c._uU(10),c.qZA(),c._UZ(11,"input",43),c.TgZ(12,"small",30),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",27),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",44,37),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).deposit_form.amount=e}),c.qZA(),c.TgZ(19,"small",30),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.TgZ(21,"div",27),c.TgZ(22,"label"),c._uU(23),c.qZA(),c.TgZ(24,"input",38,39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).deposit_form.comment=e}),c.qZA(),c.TgZ(26,"small",30),c._uU(27,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"div",40),c.TgZ(29,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c._uU(30),c.qZA(),c.TgZ(31,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).deposit()}),c._uU(32),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.tr.translate("user_depodrawal_form_title_deposit")),c.xp6(8),c.Oqu(i.tr.translate("user_depodrawal_form_username")),c.xp6(1),c.s9C("value",i.deposit_form.user_username),c.xp6(5),c.Oqu(i.tr.translate("user_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",i.deposit_form.amount)("options",c.VKq(11,Xn,i.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(i.tr.translate("user_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",i.deposit_form.comment),c.xp6(6),c.Oqu(i.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!i.deposit_form.amount||i.deposit_form.amount<=0),c.xp6(1),c.Oqu(i.tr.translate("global_button_submit"))}}function to(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"h4",22),c._uU(2),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c.TgZ(4,"span",24),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",25),c.TgZ(7,"form",26),c.TgZ(8,"div",27),c.TgZ(9,"label",28),c._uU(10),c.qZA(),c._UZ(11,"input",43),c.TgZ(12,"small",30),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",27),c.TgZ(15,"label"),c._uU(16),c.qZA(),c.TgZ(17,"input",36,37),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).withdrawal_form.amount=e}),c.qZA(),c.TgZ(19,"small",30),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.TgZ(21,"div",27),c.TgZ(22,"label"),c._uU(23),c.qZA(),c.TgZ(24,"input",45,39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).withdrawal_form.comment=e}),c.qZA(),c.TgZ(26,"small",30),c._uU(27,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"div",40),c.TgZ(29,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c._uU(30),c.qZA(),c.TgZ(31,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).withdraw()}),c._uU(32),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(2),c.Oqu(i.tr.translate("user_depodrawal_form_title_withdrawal")),c.xp6(8),c.Oqu(i.tr.translate("user_depodrawal_form_username")),c.xp6(1),c.s9C("value",i.withdrawal_form.user_username),c.xp6(5),c.Oqu(i.tr.translate("user_depodrawal_form_amount")),c.xp6(1),c.Q6J("ngModel",i.withdrawal_form.amount),c.xp6(6),c.Oqu(i.tr.translate("user_depodrawal_form_comment")),c.xp6(1),c.Q6J("ngModel",i.withdrawal_form.comment)("options",c.VKq(11,Xn,i.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(i.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!i.withdrawal_form.amount||i.withdrawal_form.amount<=0),c.xp6(1),c.Oqu(i.tr.translate("global_button_submit"))}}function ao(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.TgZ(1,"h4",22),c._uU(2),c.qZA(),c.TgZ(3,"button",23),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c.TgZ(4,"span",24),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",25),c.TgZ(7,"form",26),c.TgZ(8,"div",27),c.TgZ(9,"label",28),c._uU(10),c.qZA(),c._UZ(11,"input",46),c.TgZ(12,"small",30),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",27),c.TgZ(15,"label",47),c._uU(16),c.qZA(),c._uU(17,"s "),c.TgZ(18,"input",48,49),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).rename_form.new_username=e})("keydown.enter",function(){return c.CHM(a),c.oxw(2).rename()}),c.qZA(),c.TgZ(20,"small",30),c._uU(21,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",40),c.TgZ(23,"button",41),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).activeModal.hide()}),c._uU(24),c.qZA(),c.TgZ(25,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).rename()}),c._uU(26),c.qZA(),c.qZA()}if(2&e){var i=c.MAs(19),n=c.oxw(2);c.xp6(2),c.Oqu(n.tr.translate("user_rename_form_title")),c.xp6(8),c.Oqu(n.tr.translate("user_rename_form_current_username")),c.xp6(1),c.s9C("value",n.rename_form.username),c.xp6(5),c.Oqu(n.tr.translate("user_rename_form_new_username")),c.xp6(2),c.Q6J("ngModel",n.rename_form.new_username),c.xp6(6),c.Oqu(n.tr.translate("global_button_dismiss")),c.xp6(1),c.Q6J("disabled",!n.rename_form.new_username||n.rename_form.new_username.length<1||i.invalid),c.xp6(1),c.Oqu(n.tr.translate("global_button_submit"))}}var io=function(){return{width:"750px"}};function no(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div"),c.YNc(1,Wn,2,3,"model-table-view",7),c.YNc(2,$n,46,12,"ng-template",null,8,c.W1O),c.YNc(4,eo,33,13,"ng-template",null,9,c.W1O),c.YNc(6,to,33,13,"ng-template",null,10,c.W1O),c.YNc(8,ao,27,8,"ng-template",null,11,c.W1O),c.TgZ(10,"p-sidebar",12),c.NdJ("visibleChange",function(e){return c.CHM(a),c.oxw().show_managers_tree=e}),c.TgZ(11,"h4",13),c._uU(12),c.qZA(),c.TgZ(13,"app-managers-tree",14),c.NdJ("onManagerSelected",function(e){return c.CHM(a),c.oxw()._onTreeNodeSelected(e)}),c.qZA(),c.qZA(),c.TgZ(14,"p-dialog",15,16),c.NdJ("visibleChange",function(e){return c.CHM(a),c.oxw().traffic_dialog_visible=e})("onShow",function(){return c.CHM(a),c.oxw().liveTraffic.start()})("onHide",function(){return c.CHM(a),c.oxw().liveTraffic.stopPolling()}),c.TgZ(16,"app-user-live-traffic",17,18),c.NdJ("finished",function(){return c.CHM(a),c.oxw().traffic_dialog_visible=!1}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngIf",i.modelViewConfig),c.xp6(9),c.Q6J("visible",i.show_managers_tree),c.xp6(2),c.Oqu(i.tr.translate("mangers_tree_title")),c.xp6(1),c.Q6J("showSearch",!0),c.xp6(1),c.Akn(c.DdM(10,io)),c.MGl("header","User Traffic - ",i.traffic_dialog_user,""),c.Q6J("visible",i.traffic_dialog_visible)("modal",!0)("draggable",!0)}}var oo=function(){function e(t,a,i,n,r,l,s,c,u,d){o(this,e),this.api=t,this.router=a,this.modalService=i,this.swal=n,this.toastr=r,this.tr=l,this.dialogService=s,this.ch=c,this.config=u,this.auth=d,this.columns=[{dataKey:"n_row",label:"#",hidden:!0},{dataKey:"idx",type:"html",sortBy:"none",label:this.tr.translate("users_table_status"),dataResolver:function(e,t){return 1!==t.online_status||!0===t.status.expiration&&!0===t.status.traffic&&0!==t.enable?1===t.online_status?"<span class='user_online'>\u2588\u2588</span>":"\u2588\u2588":"<span class='user_online'>\u2588</span>\u2588"},classFn:function(e){var t=e.status;return 0===e.enable?"user_disabled":!1===t.status&&!1===t.expiration?"user_expired":!0===t.status&&!1===t.traffic?"user_traffic_depleted":"user_active"}},{dataKey:"id",sortBy:"id",hidden:!0,label:this.tr.translate("users_table_user_id")},{dataKey:"username",label:this.tr.translate("users_table_username"),classFn:function(e){return 0===e.enabled?"user_disabled":1===e.online_status?"href username_online":"href"}},{dataKey:"firstname",label:this.tr.translate("users_table_firstname")},{dataKey:"lastname",label:this.tr.translate("users_table_lastname")},{dataKey:"expiration",label:this.tr.translate("users_table_expiration")},{dataKey:"parent_username",label:this.tr.translate("users_table_parent"),sortBy:"parent_id"},{dataKey:"name",label:this.tr.translate("users_table_profile"),parentKey:"profile_details",sortBy:"profile_id",classFn:function(e){return"href"}},{dataKey:"balance",label:this.tr.translate("users_table_balance"),pipe:"currency",hidden:!0},{dataKey:"loan_balance",label:this.tr.translate("managers_table_loan_balance"),pipe:"currency"},{dataKey:"group_name",label:this.tr.translate("managers_table_group"),parentKey:"group_details",sortBy:"group_id",hidden:!0},{dataKey:"traffic",label:this.tr.translate("users_table_daily_traffic"),parentKey:"daily_traffic_details",pipe:"bytes",sortBy:"none"},{dataKey:"city",label:this.tr.translate("users_table_city"),hidden:!0},{dataKey:"remaining_days",label:this.tr.translate("users_table_remaining_days"),hidden:!1,sortBy:"expiration"},{dataKey:"static_ip",label:this.tr.translate("users_table_static_ip"),hidden:!0},{dataKey:"notes",label:this.tr.translate("users_table_notes"),hidden:!0},{dataKey:"last_online",label:this.tr.translate("users_table_last_online"),hidden:!0,sortBy:"last_online"},{dataKey:"company",label:this.tr.translate("users_table_company"),hidden:!0},{dataKey:"simultaneous_sessions",label:this.tr.translate("users_table_simultaneous_sessions"),hidden:!0},{dataKey:"used_traffic",label:this.tr.translate("users_table_used_traffic"),hidden:!0,type:"progress",sortBy:"none"},{dataKey:"phone",label:this.tr.translate("users_table_phone"),hidden:!0},{dataKey:"address",label:this.tr.translate("users_table_address"),hidden:!0},{dataKey:"contract_id",label:this.tr.translate("user_form_label_contract"),hidden:!0},{dataKey:"created_at",label:this.tr.translate("user_overview_created_on"),hidden:!0},{dataKey:"available_traffic",label:this.tr.translate("user_table_available_traffic"),pipe:"bytes",hidden:!0,sortBy:"id"},{dataKey:"national_id",label:this.tr.translate("user_form_label_national_id"),hidden:!0},{dataKey:"mikrotik_ipv6_prefix",label:"IPv6 Prefix",hidden:!0},{dataKey:"site_name",label:"Site",parentKey:"site_details",sortBy:"site_id",hidden:!0},{dataKey:"pin_tries",label:this.tr.translate("users_table_pin_tries"),hidden:!0}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_users_create"},{name:"",label:"",type:"separator"},{name:"show_live_traffic",label:this.tr.translate("global_actions_live_traffic"),icon:"fal fa-chart-area",acl:"prm_users_live_traffic",inline:!0},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update"},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"rename",label:this.tr.translate("global_actions_rename"),icon:"fa fa-edit",requiresRow:!0,inline:!0,acl:"prm_users_rename"},{name:"",label:"",type:"separator"},{name:"add_traffic",label:this.tr.translate("users_action_add_traffic"),icon:"fa fa-abacus",requiresRow:!0,inline:!0,acl:"prm_users_add_traffic"},{name:"activate",label:this.tr.translate("users_action_activate"),icon:"fa fa-flash",requiresRow:!0,inline:!0,acl:"prm_users_activate"},{name:"extend",label:this.tr.translate("users_action_extend"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_extend"},{name:"compensate",label:this.tr.translate("users_action_compensate"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_compensate"},{name:"addon",label:this.tr.translate("users_action_addon"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_addon"},{name:"profile",label:this.tr.translate("users_action_change_profile"),icon:"fa fa-puzzle-piece",requiresRow:!0,inline:!0,acl:"prm_users_change_profile"},{name:"",label:"",type:"separator"},{name:"deposit",label:this.tr.translate("global_actions_deposit"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_users_deposit"},{name:"withdraw",label:this.tr.translate("global_actions_withdrawal"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_users_withdrawal"},{name:"pay_debt",label:this.tr.translate("global_actions_pay_debt"),icon:"fa fa-money",requiresRow:!0,inline:!0,acl:"prm_any"},{name:"",label:"",type:"separator"},{name:"cancel",label:this.tr.translate("users_action_cancel"),icon:"fal fa-stop-circle",multipleRows:!1,requiresRow:!0,inline:!0,acl:"prm_users_cancel"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_users_delete"}],this.filterFields=[{key:"status",label:this.tr.translate("users_filter_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_active")},{value:2,label:this.tr.translate("users_status_expired")},{value:3,label:this.tr.translate("users_status_disabled")},{value:4,label:this.tr.translate("users_status_expiring_soon")},{value:5,label:this.tr.translate("users_status_expiring_today")}]},{key:"connection",label:this.tr.translate("users_filter_connection"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_offline")},{value:2,label:this.tr.translate("users_status_online")}]},{key:"profile_id",label:this.tr.translate("users_filter_profile"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]},{key:"parent_id",label:this.tr.translate("users_filter_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"},{key:"site_id",label:this.tr.translate("user_form_label_site"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_sites_management"},{key:"sub_users",label:this.tr.translate("users_filter_sub_users"),type:"switch",layout:"vertical",value:1,cols:12},{key:"mac",label:"MAC",type:"text",layout:"vertical",value:"",cols:12}],this.filterOptions={parent_id:[],profile_id:[],group_id:[]},this.headerActions=[{icon:"fal fa-folder-tree",action:"managers_tree",label:"Managers Tree"}],this.deposit_form={user_id:null,user_username:"",amount:null,comment:"",transaction_id:null},this.withdrawal_form={user_id:null,user_username:"",amount:null,comment:"",transaction_id:null},this.rename_form={user_id:null,username:"",new_username:""},this.traffic_form={user_id:null,username:"",amount:null,comment:"",transaction_id:null,target:"rxtx_mbytes"},this.modelViewConfig=null,this.loading=!1,this.site_list=[],this.show_managers_tree=!1,this.traffic_dialog_visible=!1,this.traffic_dialog_user="",this.loadResources()}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("users_table_title"),icon:"fa fa-users",columns:this.columns,dataUrl:"index/user",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,modelName:"users",hasAdvancedFilter:!0,hasInlineActions:!0,allowExport:this.auth.has("prm_users_export"),id:"users_index_table",showRowsCount:!0,sortBy:"username",headerActions:this.headerActions}}},{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"show_live_traffic":this.showLiveTraffic(e);break;case"new":this.router.navigate(["user/"]);break;case"edit":this.router.navigate(["user/"+t]);break;case"deposit":this.showDepositForm();break;case"withdraw":this.showWithdrawalForm();break;case"add_traffic":this.showAddTrafficForm();break;case"delete":this.destroy();break;case"rename":this.showRenameForm();break;case"activate":this.modelView.selectedRows().length<=1?this.router.navigate(["user/activate/"+t]):this.bulkActivation();break;case"profile":this.router.navigate(["user/profile/"+t]);break;case"extend":this.router.navigate(["user/extend/"+t]);break;case"cancel":this.cancelSubscription(e.row);break;case"managers_tree":this.showManagersTree();break;case"edit_new_tab":this.router.navigate([]).then(function(e){window.open("#/user/"+t,"_blank")});break;case"addon":this.router.navigate(["user/addon/"+t]);break;case"pay_debt":this.showPayDebtForm();break;case"compensate":this.showCompensationDialog()}}},{key:"onCellClicked",value:function(e){"username"===e.column&&this.router.navigate(["user",e.row.id]),"name"===e.column&&this.auth.has("prm_profiles_update")&&this.router.navigate(["profile",e.row.profile_id]),"expiration"===e.column&&this.auth.has("prm_users_advanced")&&this.alterExpiration(e)}},{key:"onCellMiddleClicked",value:function(e){"username"===e.column&&window.open("#/user/"+e.row.id,"_blank")}},{key:"showAddTrafficForm",value:function(){var e=this.modelView.currentRow;this.traffic_form.amount=null,this.traffic_form.user_id=e.id,this.traffic_form.comment="",this.traffic_form.target="rxtx_mbytes",this.traffic_form.username=e.username,this.traffic_form.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.trafficModal)}},{key:"showCompensationDialog",value:function(){var e=this,t=this.modelView.currentRow,a=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(function(e){a.push(e.id)}):a.push(t.id),0!==a.length&&this.dialogService.open(Rn,{header:this.tr.translate("user_compensation_title"),width:"500px",data:{rows:a}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"showDepositForm",value:function(){var e=this.modelView.currentRow;this.deposit_form.amount=null,this.deposit_form.user_id=e.id,this.deposit_form.comment="",this.deposit_form.user_username=e.username,this.deposit_form.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.depositModal)}},{key:"deposit",value:function(){var e=this;this.activeModal.hide(),this.api.post("user/deposit",this.deposit_form).subscribe(function(t){200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.warning(e.tr.translate(t.message))})}},{key:"addTraffic",value:function(){var e=this;this.activeModal.hide(),this.api.post("user/addTraffic",this.traffic_form).subscribe(function(t){200===t.status&&e.toastr.success(e.tr.translate(t.message))})}},{key:"showWithdrawalForm",value:function(){var e=this.modelView.currentRow;this.withdrawal_form.amount=null,this.withdrawal_form.user_id=e.id,this.withdrawal_form.comment="",this.withdrawal_form.transaction_id=this.ch.guid(),this.withdrawal_form.user_username=e.username,this.activeModal=this.modalService.show(this.withdrawalModal)}},{key:"withdraw",value:function(){var e=this;this.activeModal.hide(),this.api.post("user/withdraw",this.withdrawal_form).subscribe(function(t){200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.warning(e.tr.translate(t.message))})}},{key:"showPayDebtForm",value:function(){var e=this,t=this.modelView.currentRow;this.dialogService.open(Yn,{header:this.tr.translate("global_actions_pay_debt"),data:{user_id:t.id}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"showRenameForm",value:function(){var e=this.modelView.currentRow;this.rename_form.user_id=e.id,this.rename_form.username=e.username,this.rename_form.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}},{key:"rename",value:function(){var e=this,t=this.rename_form.user_id,a={new_username:this.rename_form.new_username};this.blockUI.start(this.tr.translate("msg_wait")),this.api.post("user/rename/"+t,a).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.toastr.success(e.tr.translate("msg_user_rename_success")),e.modelView.reload()):e.toastr.error(e.tr.translate("msg_user_rename_error")),e.activeModal.hide()},function(t){e.toastr.error(e.tr.translate("msg_user_rename_error")),e.activeModal.hide()})}},{key:"destroy",value:function(){var e=this;this.modelView.selectedRows().length<1&&!this.modelView.currentRow||this.swal.confirm({title:this.tr.translate("prompt_delete_user"),type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(function(){var t=null;if(e.modelView.currentRow&&(t=e.modelView.currentRow.id),e.blockUI.start("loading..."),e.modelView.selectedRows().length>1){var a,n=[],o=i(e.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.id)}}catch(l){o.e(l)}finally{o.f()}e.api.post("user/bulkDelete",n).subscribe(function(t){e.blockUI.stop(),200!=t.status?e.toastr.warning(e.tr.translate("msg_user_delete_warning")):(e.toastr.success(e.tr.translate("msg_user_delete_success")),e.modelView.reload())})}else e.api.delete("user/"+t).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.modelView.reload(),e.toastr.success(e.tr.translate("msg_user_delete_success"),"")):e.toastr.warning(e.tr.translate("msg_user_delete_warning"))})})}},{key:"alterExpiration",value:function(e){var t=this;this.swal.prompt("New Expiration",e.row.expiration).subscribe(function(a){var i={expiration:a,id:e.row.id};t.blockUI.start(),t.api.post("user/expiration",i).subscribe(function(i){t.blockUI.stop(),200==i.status&&(e.row.expiration=a)})})}},{key:"loadResources",value:function(){var e=this;if(this.api.get("index/manager").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")});var n,o=i(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.parent_id=a}),this.auth.has("prm_sites_management")&&this.api.get("site").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.site_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.filterOptions.site_id=e.site_list,e.filterOptions.site_id.unshift({value:-1,label:e.tr.translate("global_all")})}}),this.api.get("list/profile/0").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")}),200===t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filterOptions.profile_id=a)}),this.auth.has("prm_groups_assign")){var t=[];this.api.get("group").subscribe(function(a){if(200===a.status){var n,o=i(a.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}t.unshift({value:-1,label:e.tr.translate("global_all")}),e.filterOptions.group_id=t}})}}},{key:"bulkActivation",value:function(){var e,t=[],a=i(this.modelView.selectedRows());try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(n.id)}}catch(r){a.e(r)}finally{a.f()}var o=JSON.stringify(t);o=btoa(o),this.router.navigate(["user/bulkActivate",o])}},{key:"cancelSubscription",value:function(e){e.status.expiration&&!1!==e.status.expiration?this.router.navigate(["user/cancel",e.id]):this.toastr.warning("user_expired")}},{key:"showManagersTree",value:function(){this.show_managers_tree=!this.show_managers_tree}},{key:"_onTreeNodeSelected",value:function(e){var t={parent_id:parseInt(e.id),sub_managers:!0};this.modelView.setAdvancedFilter(t),this.modelView.advancedFilter.search(),this.activeModal.hide()}},{key:"showLiveTraffic",value:function(e){1===e.row.online_status?(this.liveTraffic.setUserId(e.row.id),this.traffic_dialog_visible=!0,this.traffic_dialog_user=e.row.username):this.toastr.warning(this.tr.translate("msg_user_not_online"))}}]),e}();oo.\u0275fac=function(e){return new(e||oo)(c.Y36(Z),c.Y36(_.F0),c.Y36(at.tT),c.Y36(tt),c.Y36(v._W),c.Y36(I),c.Y36(ba.xA),c.Y36(y),c.Y36(p),c.Y36(w))},oo.\u0275cmp=c.Xpm({type:oo,selectors:[["users-index"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(Ln,5),c.Gf(En,5),c.Gf(Kn,5),c.Gf(Bn,5),c.Gf(jn,5),c.Gf(zn,5),c.Gf(Gn,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.depositModal=a.first),c.iGM(a=c.CRH())&&(t.withdrawalModal=a.first),c.iGM(a=c.CRH())&&(t.renameModal=a.first),c.iGM(a=c.CRH())&&(t.liveTraffic=a.first),c.iGM(a=c.CRH())&&(t.pDialog=a.first),c.iGM(a=c.CRH())&&(t.trafficModal=a.first))},features:[c._Bn([ba.xA])],decls:16,vars:5,consts:[[1,"legend-box"],[2,"width","100%"],[1,"fa","fa-stop","user_active"],[1,"fa","fa-stop","user_expired"],[1,"fa","fa-stop","user_traffic_depleted"],[1,"fa","fa-stop","user_disabled"],[4,"blockUI"],["name","user_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded",4,"ngIf"],["add_traffic_modal",""],["deposit_modal",""],["withdrawal_modal",""],["rename_modal",""],["position","right","baseZIndex","999","styleClass","p-sidebar-md",3,"visible","visibleChange"],[1,"modal-title","text-center"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],[3,"header","visible","modal","draggable","visibleChange","onShow","onHide"],["liveTrafficDialog",""],["id","live_traffic",3,"finished"],["live_traffic",""],["name","user_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onDataLoading","onCellMiddleClicked","onDataLoaded"],["user_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["for","user_username"],["type","text","readonly","",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["name","target",1,"form-control",3,"ngModel","ngModelChange"],["target","ngModel"],["value","rxtx_mbytes"],["value","rx_mbytes"],["value","tx_mbytes"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],["type","text","name","comment",1,"form-control",3,"ngModel","ngModelChange"],["comment","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text","readonly","","id","user_username",1,"form-control","form-control-plaintext",3,"value"],["name","amount","placeholder","0","autofocus","","autocomplete","off","currencyMask","",1,"form-control",3,"ngModel","options","ngModelChange"],["type","text","name","comment","currencyMask","",1,"form-control",3,"ngModel","options","ngModelChange"],["type","text","readonly","","id","user_username2",1,"form-control","form-control-plaintext",3,"value"],["for","new_username"],["type","text","id","new_username","name","new_username","placeholder","Enter new username","pattern","[a-zA-Z.@_0-9:-]*","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"table",1),c.TgZ(2,"tr"),c.TgZ(3,"td"),c._UZ(4,"i",2),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._UZ(7,"i",3),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._UZ(10,"i",4),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._UZ(13,"i",5),c._uU(14),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(15,no,18,11,"div",6)),2&e&&(c.xp6(5),c.hij(" ",t.tr.translate("users_status_active"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_expired"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_traffic_depleted"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_disabled"),""),c.xp6(1),c.Q6J("blockUI","model-view"))},directives:[m.Z2,Q.O5,Ua.Y,Ja,Oi.V,Vn,Tt,A._Y,A.JL,A.F,A.EJ,A.JJ,A.On,A.YN,A.Kr,A.wV,A.Fj,Aa.g1,A.c5],styles:[".user_disabled{color:#bb3436!important;cursor:pointer}.user_active{color:#9fe22b!important}.user_online{color:#1b9dec}.username_online{font-weight:bold}.user_expired{color:#ff9416}.user_traffic_depleted{color:#e3dd4e}.legend-box{font-size:12px;background:white;margin-bottom:5px;padding:5px 15px;box-sizing:border-box}\n"],encapsulation:2}),(0,g.gn)([(0,m.bH)()],oo.prototype,"blockUI",void 0);var ro=n(15971);function lo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"agm-map",10),c.TgZ(1,"agm-marker",11),c.NdJ("dragEnd",function(e){return c.CHM(a),c.oxw().updateLocation(e)}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("latitude",i.currentGPSLocation.gps_lat)("longitude",i.currentGPSLocation.gps_lng),c.xp6(1),c.Q6J("latitude",i.currentGPSLocation.gps_lat)("longitude",i.currentGPSLocation.gps_lng)("markerDraggable",!0)}}var so=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.tr=i,this.toastr=n,this.currentGPSLocation={gps_lat:34.895158,gps_lng:21.686261},this.user_id=null}return l(e,[{key:"updateLocation",value:function(e){var t=this;console.log(e),this.currentGPSLocation.gps_lat=e.coords.lat,this.currentGPSLocation.gps_lng=e.coords.lng,this.api.post("user/location/"+this.user_id.toString(),this.currentGPSLocation).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}},{key:"load",value:function(){var e=this;this.api.get("user/"+this.user_id.toString()).subscribe(function(t){null!=t.data.gps_lat&&null!=t.data.gps_lng&&(e.currentGPSLocation.gps_lat=parseFloat(t.data.gps_lat),e.currentGPSLocation.gps_lng=parseFloat(t.data.gps_lng))})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.load())})}},{key:"ngAfterContentInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-location"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(ro.SA,5),2&e)&&(c.iGM(a=c.CRH())&&(t.agmMap=a.first))},decls:19,vars:4,consts:[[1,"card"],[1,"card-body"],[3,"latitude","longitude",4,"ngIf"],[1,"row",2,"margin-top","20px"],[1,"col"],[1,"ui-fluid"],[1,"p-field"],["type","text pInputText",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"btn","btn-primary","float-right",3,"click"],[3,"latitude","longitude"],[3,"latitude","longitude","markerDraggable","dragEnd"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,lo,2,5,"agm-map",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"div",6),c.TgZ(7,"label"),c._uU(8,"LAT"),c.qZA(),c.TgZ(9,"input",7),c.NdJ("ngModelChange",function(e){return t.currentGPSLocation.gps_lat=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c.TgZ(11,"div",5),c.TgZ(12,"div",6),c.TgZ(13,"label"),c._uU(14,"LNG"),c.qZA(),c.TgZ(15,"input",7),c.NdJ("ngModelChange",function(e){return t.currentGPSLocation.gps_lng=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",8),c.TgZ(17,"div",9),c.NdJ("click",function(){return t.updateLocation({coords:{lat:t.currentGPSLocation.gps_lat,lng:t.currentGPSLocation.gps_lng}})}),c._uU(18),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf",t.currentGPSLocation.gps_lat&&""!=t.currentGPSLocation.gps_lat),c.xp6(7),c.Q6J("ngModel",t.currentGPSLocation.gps_lat),c.xp6(6),c.Q6J("ngModel",t.currentGPSLocation.gps_lng),c.xp6(3),c.Oqu(t.tr.translate("global_button_submit")))},directives:[Q.O5,A.Fj,A.JJ,A.On,ro.SA,ro.pt],styles:["agm-map[_ngcontent-%COMP%]{height:500px}"]}),e}(),co=["user_model_view"],uo=["deposit_modal"],fo=["withdrawal_modal"],po=["rename_modal"];function go(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().activate()}),c._UZ(1,"i",29),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("users_action_activate")," ")}}function ho(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().issueInvoice()}),c._UZ(1,"i",30),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("users_action_issue_invoice")," ")}}function mo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().changeProfile()}),c._UZ(1,"i",31),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("users_action_change_profile")," ")}}function _o(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().disconnect()}),c._UZ(1,"i",32),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("users_action_disconnect")," ")}}function vo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().showDepositForm()}),c._UZ(1,"i",33),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_deposit")," ")}}function bo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().showWithdrawalForm()}),c._UZ(1,"i",33),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_withdrawal")," ")}}function Zo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().resetDailyTraffic()}),c._UZ(1,"i",34),c._UZ(2,"br"),c._uU(3," Reset Traffic "),c.qZA()}}function yo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().showRenameForm()}),c._UZ(1,"i",35),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_rename")," ")}}function wo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("click",function(){return c.CHM(a),c.oxw().destroy()}),c._UZ(1,"i",36),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_delete")," ")}}function xo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",37),c._UZ(2,"i",38),c._uU(3," Profile is scheduled to be changed on the "),c.TgZ(4,"b"),c._uU(5),c.qZA(),c._uU(6," to "),c.TgZ(7,"b"),c._uU(8),c.qZA(),c._uU(9," ."),c._UZ(10,"br"),c.TgZ(11,"span",39),c.NdJ("click",function(){return c.CHM(a),c.oxw().cancelProfileChange()}),c._uU(12,"Cancel"),c.qZA(),c._uU(13," Profile Change "),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(5),c.Oqu(i.overview.next_profile_change.due_date),c.xp6(3),c.Oqu(i.overview.next_profile_change.profile_name)}}function Ao(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"button",45),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).cancelAddon(e.id)}),c._UZ(7,"i",46),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.addon_details.name),c.xp6(2),c.Oqu(i.expiration)}}function qo(e,t){if(1&e&&(c.TgZ(0,"div",40),c.TgZ(1,"div",41),c._uU(2),c.qZA(),c.TgZ(3,"div",42),c.TgZ(4,"table",43),c.TgZ(5,"tr"),c.TgZ(6,"th"),c._uU(7),c.qZA(),c.TgZ(8,"th"),c._uU(9),c.qZA(),c._UZ(10,"th"),c.qZA(),c.TgZ(11,"tbody"),c.YNc(12,Ao,8,2,"tr",44),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.Oqu(a.tr.translate("user_overview_active_addons")),c.xp6(5),c.Oqu(a.tr.translate("user_overview_addon")),c.xp6(2),c.Oqu(a.tr.translate("global_expiration")),c.xp6(3),c.Q6J("ngForOf",a.overview.addons)}}function To(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",47),c.TgZ(1,"h4",48),c._uU(2,"Deposit Amount"),c.qZA(),c.TgZ(3,"button",49),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",50),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",51),c.TgZ(7,"form",52),c.TgZ(8,"div",53),c.TgZ(9,"label"),c._uU(10,"Username"),c.qZA(),c._UZ(11,"input",54),c.TgZ(12,"small",55),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",53),c.TgZ(15,"label"),c._uU(16,"Amount"),c.qZA(),c.TgZ(17,"input",56,57),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().depositForm.amount=e}),c.qZA(),c.TgZ(19,"small",55),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",58),c.TgZ(22,"button",59),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(23,"Close"),c.qZA(),c.TgZ(24,"button",60),c.NdJ("click",function(){return c.CHM(a),c.oxw().deposit()}),c._uU(25,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(11),c.s9C("value",i.depositForm.user_username),c.xp6(6),c.Q6J("ngModel",i.depositForm.amount),c.xp6(7),c.Q6J("disabled",!i.depositForm.amount||i.depositForm.amount<=0)}}function ko(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",47),c.TgZ(1,"h4",48),c._uU(2,"Deduct Amount"),c.qZA(),c.TgZ(3,"button",49),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",50),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",51),c.TgZ(7,"form",52),c.TgZ(8,"div",53),c.TgZ(9,"label"),c._uU(10,"Username"),c.qZA(),c._UZ(11,"input",54),c.TgZ(12,"small",55),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",53),c.TgZ(15,"label"),c._uU(16,"Amount"),c.qZA(),c.TgZ(17,"input",56,57),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().withdrawalForm.amount=e}),c.qZA(),c.TgZ(19,"small",55),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",58),c.TgZ(22,"button",59),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(23,"Close"),c.qZA(),c.TgZ(24,"button",60),c.NdJ("click",function(){return c.CHM(a),c.oxw().withdraw()}),c._uU(25,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(11),c.s9C("value",i.withdrawalForm.user_username),c.xp6(6),c.Q6J("ngModel",i.withdrawalForm.amount),c.xp6(7),c.Q6J("disabled",!i.withdrawalForm.amount||i.withdrawalForm.amount<=0)}}function Co(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",47),c.TgZ(1,"h4",48),c._uU(2,"Rename User"),c.qZA(),c.TgZ(3,"button",49),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",50),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",51),c.TgZ(7,"form",52),c.TgZ(8,"div",53),c.TgZ(9,"label"),c._uU(10,"Current Username"),c.qZA(),c._UZ(11,"input",54),c.TgZ(12,"small",55),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",53),c.TgZ(15,"label"),c._uU(16,"New Username"),c.qZA(),c.TgZ(17,"input",61,62),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().renameForm.new_username=e})("keydown.enter",function(){return c.CHM(a),c.oxw().rename()}),c.qZA(),c.TgZ(19,"small",55),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",58),c.TgZ(22,"button",59),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(23,"Close"),c.qZA(),c.TgZ(24,"button",60),c.NdJ("click",function(){return c.CHM(a),c.oxw().rename()}),c._uU(25,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(11),c.s9C("value",i.renameForm.username),c.xp6(6),c.Q6J("ngModel",i.renameForm.new_username),c.xp6(7),c.Q6J("disabled",!i.renameForm.new_username||i.renameForm.new_username.length<1)}}var Uo=function(e){return["/profile",e]},Mo=function(){function e(t,a,i,n,r,l,s,c,u,d,f){o(this,e),this.api=t,this.route=a,this.modalService=i,this.toastr=n,this.router=r,this.swal=l,this.ch=s,this.auth=c,this.config=u,this.tr=d,this.confirmationService=f,this.depositForm={user_id:null,user_username:"",amount:null},this.withdrawalForm={user_id:null,user_username:"",amount:null},this.renameForm={user_id:null,username:"",new_username:""},this.modelViewConfig=null,this.loading=!1,this.user_id=null,this.overview={}}return l(e,[{key:"load",value:function(){var e=this;this.api.get("user/overview/"+this.user_id).subscribe(function(t){e.overview=t.data})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.load())})}},{key:"showDepositForm",value:function(){this.depositForm.amount=null,this.depositForm.user_id=this.user_id,this.depositForm.user_username=this.overview.username,this.depositForm.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.depositModal)}},{key:"deposit",value:function(){var e=this;this.activeModal.hide(),this.api.post("user/deposit",this.depositForm).subscribe(function(t){200===t.status&&(e.toastr.success("Credit Added Successfully"),e.load())})}},{key:"showWithdrawalForm",value:function(){this.withdrawalForm.amount=null,this.withdrawalForm.user_id=this.user_id,this.withdrawalForm.user_username=this.overview.username,this.withdrawalForm.transaction_id=this.ch.guid(),this.activeModal=this.modalService.show(this.withdrawalModal)}},{key:"withdraw",value:function(){var e=this;this.activeModal.hide(),this.api.post("user/withdraw",this.withdrawalForm).subscribe(function(t){200===t.status&&(e.toastr.success("Credit Deducted Successfully"),e.load())})}},{key:"activate",value:function(){this.router.navigate(["user/activate",this.user_id])}},{key:"showRenameForm",value:function(){this.renameForm.user_id=this.user_id,this.renameForm.username=this.overview.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}},{key:"rename",value:function(){var e=this,t=this.renameForm.user_id,a={new_username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.post("user/rename/"+t,a).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.toastr.success("User Renamed"),e.load()):e.toastr.error("Unable to rename user"),e.activeModal.hide()},function(t){e.toastr.error("Error Occurred !"),e.activeModal.hide()})}},{key:"changeProfile",value:function(){this.router.navigate(["user/profile/"+this.user_id])}},{key:"cancelProfileChange",value:function(){var e=this;this.swal.confirm({title:"Change Profile",type:"warning",text:"Cancel Scheduled Profile Change ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.get("user/cancelProfileChange/"+e.user_id).subscribe(function(t){200===t.status&&(e.toastr.success(t.message),e.load())})})}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete User",type:"warning",text:"Delete "+this.overview.username+" ?",confirmButtonText:"Yes"}).subscribe(function(){e.blockUI.start("loading..."),e.api.delete("user/"+e.user_id).subscribe(function(t){e.blockUI.stop(),200==t.status?(e.router.navigate(["index/users"]),e.toastr.success(t.message,""),e.router.navigate(["users/index"])):e.toastr.warning(t.error)})})}},{key:"disconnect",value:function(){var e=this;this.swal.confirm({title:"Disconnect User",type:"warning",text:"Disconnect Selected User(s) ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.get("user/disconnect/userid/"+e.user_id.toString()).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.load())})})}},{key:"issueInvoice",value:function(){this.router.navigate(["billing/userInvoiceForm",this.user_id.toString()])}},{key:"resetDailyTraffic",value:function(){var e=this;this.confirmationService.confirm({message:"Are you sure that you want to perform this action?",accept:function(){e.api.post("user/resetDailyTraffic",{user_id:e.user_id.toString()}).subscribe(function(t){e.toastr.success(e.tr.translate(t.message))})}})}},{key:"cancelAddon",value:function(e){var t=this,a={addon_id:e,user_id:this.user_id};this.confirmationService.confirm({message:"Cancel Addon Subscription ?",accept:function(){t.api.post("user/cancelAddon",a).subscribe(function(e){200===e.status?(t.load(),t.toastr.success(t.tr.translate(e.message))):t.toastr.error(t.tr.translate(e.message))})}})}}]),e}();function Fo(e,t){if(1&e&&(c.TgZ(0,"option",17),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.key),c.xp6(1),c.Oqu(a.text)}}function Jo(e,t){if(1&e&&(c.TgZ(0,"option",17),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a),c.xp6(1),c.hij("",a,"\xa0")}}function Oo(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.rx))}}function No(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.tx))}}function Io(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total))}}function Yo(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total_real))}}function Qo(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",20),c.YNc(4,Oo,3,3,"span",21),c.qZA(),c.TgZ(5,"td",20),c.YNc(6,No,3,3,"span",21),c.qZA(),c.TgZ(7,"td",20),c.YNc(8,Io,3,3,"span",21),c.qZA(),c.TgZ(9,"td",20),c.YNc(10,Yo,3,3,"span",21),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(2);c.xp6(2),c.lnq("",i.filter.year,"-",i.filter.month,"-",a.day,""),c.xp6(2),c.Q6J("ngIf",a.rx>0),c.xp6(2),c.Q6J("ngIf",a.tx>0),c.xp6(2),c.Q6J("ngIf",a.total>0),c.xp6(2),c.Q6J("ngIf",a.total_real>0)}}function So(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",14),c.TgZ(2,"table",18),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6,"Day"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Download"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Upload"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Total"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Real Traffic"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"tbody"),c.YNc(16,Qo,11,7,"tr",19),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(16),c.Q6J("ngForOf",a.table_data)}}function Po(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.rx))}}function Do(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.tx))}}function Ho(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total))}}function Ro(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total_real))}}function Vo(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",20),c.YNc(4,Po,3,3,"span",21),c.qZA(),c.TgZ(5,"td",20),c.YNc(6,Do,3,3,"span",21),c.qZA(),c.TgZ(7,"td",20),c.YNc(8,Ho,3,3,"span",21),c.qZA(),c.TgZ(9,"td",20),c.YNc(10,Ro,3,3,"span",21),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(2);c.xp6(2),c.AsE("",i.filter.year,"-",a.month,""),c.xp6(2),c.Q6J("ngIf",a.rx>0),c.xp6(2),c.Q6J("ngIf",a.tx>0),c.xp6(2),c.Q6J("ngIf",a.total>0),c.xp6(2),c.Q6J("ngIf",a.total_real>0)}}function Lo(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",14),c.TgZ(2,"table",18),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6,"Month"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Download"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Upload"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Total"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Real Traffic"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"tbody"),c.YNc(16,Vo,11,6,"tr",19),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(16),c.Q6J("ngForOf",a.table_data)}}Mo.\u0275fac=function(e){return new(e||Mo)(c.Y36(Z),c.Y36(_.gz),c.Y36(at.tT),c.Y36(v._W),c.Y36(_.F0),c.Y36(tt),c.Y36(y),c.Y36(w),c.Y36(p),c.Y36(I),c.Y36(Ci.YP))},Mo.\u0275cmp=c.Xpm({type:Mo,selectors:[["app-user-overview"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(co,5),c.Gf(uo,5),c.Gf(fo,5),c.Gf(po,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.depositModal=a.first),c.iGM(a=c.CRH())&&(t.withdrawalModal=a.first),c.iGM(a=c.CRH())&&(t.renameModal=a.first))},decls:134,vars:66,consts:[["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"row"],[1,"col-md","col-sm-12","order-2","order-md-1"],[1,"col","col-md-4","text-center"],[1,"user-photo-frame",2,"background-image","url(./assets/img/avatars/user-placeholder.png)"],[1,"image-cover"],[1,"btn","btn-primary","btn-sm",2,"position","absolute","top","50%","left","50%","transform","translate(-50%,-50%)"],[1,"col","col-md-8"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"row",2,"margin-top","10px","margin-left","5px"],["class","col overview-button",3,"click",4,"ngIf"],[2,"margin-top","10px","margin-left","5px"],[1,"col"],["class","row","style","margin-top: 10px; margin-left: 5px;",4,"ngIf"],[1,"col-md","col-sm-12","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item"],[1,"label"],[1,"value"],[3,"routerLink"],["class","card bg-white",4,"ngIf"],["deposit_modal",""],["withdrawal_modal",""],["rename_modal",""],[1,"col","overview-button",3,"click"],[1,"fa","fa-2x","fa-bolt"],[1,"fa","fa-2x","fa-file-invoice-dollar"],[1,"fa","fa-2x","fa-puzzle-piece"],[1,"fa","fa-2x","fa-unlink"],[1,"fa","fa-2x","fa-money-bill-alt"],[1,"fa","fa-2x","fa-sync"],[1,"fa","fa-2x","fa-edit"],[1,"fa","fa-2x","fa-trash"],["role","alert",1,"col","alert","alert-info"],[1,"fa","fa-info-circle"],[1,"fake-link",3,"click"],[1,"card","bg-white"],[1,"card-header"],[1,"card-body"],[1,"table","table-clear",2,"width","100%","border-top","none"],[4,"ngFor","ngForOf"],["type","button","title","cancel addon",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fa","fa-ban"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","number","name","amount","placeholder","0","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["amount","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"]],template:function(e,t){1&e&&(c._UZ(0,"p-confirmDialog",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",1),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"button",6),c._uU(8,"Change"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"ul",8),c.TgZ(11,"li"),c._UZ(12,"i",9),c._uU(13),c.qZA(),c.TgZ(14,"li"),c._UZ(15,"i",10),c._uU(16),c.qZA(),c.TgZ(17,"li"),c._UZ(18,"i",11),c._uU(19),c.qZA(),c.TgZ(20,"li"),c._UZ(21,"i",12),c._uU(22),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",13),c.YNc(24,go,4,1,"div",14),c.YNc(25,ho,4,1,"div",14),c.YNc(26,mo,4,1,"div",14),c.YNc(27,_o,4,1,"div",14),c.YNc(28,vo,4,1,"div",14),c.YNc(29,bo,4,1,"div",14),c.YNc(30,Zo,4,0,"div",14),c.YNc(31,yo,4,1,"div",14),c.YNc(32,wo,4,1,"div",14),c.qZA(),c._UZ(33,"app-user-location",15),c.TgZ(34,"div",13),c._UZ(35,"div",16),c.qZA(),c.YNc(36,xo,14,2,"div",17),c.qZA(),c.TgZ(37,"div",18),c.TgZ(38,"div",19),c.TgZ(39,"li",20),c.TgZ(40,"span",21),c._uU(41),c.qZA(),c.TgZ(42,"span",22),c._uU(43),c.qZA(),c.qZA(),c.TgZ(44,"li",20),c.TgZ(45,"span",21),c._uU(46),c.qZA(),c.TgZ(47,"span",22),c._uU(48),c.qZA(),c.qZA(),c.TgZ(49,"li",20),c.TgZ(50,"span",21),c._uU(51),c.qZA(),c.TgZ(52,"span",22),c._uU(53),c.ALo(54,"currency"),c.qZA(),c.qZA(),c.TgZ(55,"li",20),c.TgZ(56,"span",21),c._uU(57),c.qZA(),c.TgZ(58,"span",22),c._uU(59),c.qZA(),c.qZA(),c.TgZ(60,"li",20),c.TgZ(61,"span",21),c._uU(62),c.qZA(),c.TgZ(63,"span",22),c.TgZ(64,"a",23),c._uU(65),c.qZA(),c.qZA(),c.qZA(),c.TgZ(66,"li",20),c.TgZ(67,"span",21),c._uU(68),c.qZA(),c.TgZ(69,"span",22),c._uU(70),c.ALo(71,"date"),c.qZA(),c.qZA(),c.TgZ(72,"li",20),c.TgZ(73,"span",21),c._uU(74),c.qZA(),c.TgZ(75,"span",22),c._uU(76),c.qZA(),c.qZA(),c.TgZ(77,"li",20),c.TgZ(78,"span",21),c._uU(79),c.qZA(),c.TgZ(80,"span",22),c._uU(81),c.qZA(),c.qZA(),c.TgZ(82,"li",20),c.TgZ(83,"span",21),c._uU(84),c.qZA(),c.TgZ(85,"span",22),c._uU(86),c.qZA(),c.qZA(),c.TgZ(87,"li",20),c.TgZ(88,"span",21),c._uU(89),c.qZA(),c.TgZ(90,"span",22),c._uU(91),c.ALo(92,"bytes"),c.qZA(),c.qZA(),c.TgZ(93,"li",20),c.TgZ(94,"span",21),c._uU(95),c.qZA(),c.TgZ(96,"span",22),c._uU(97),c.ALo(98,"bytes"),c.qZA(),c.qZA(),c.TgZ(99,"li",20),c.TgZ(100,"span",21),c._uU(101),c.qZA(),c.TgZ(102,"span",22),c._uU(103),c.ALo(104,"bytes"),c.qZA(),c.qZA(),c.TgZ(105,"li",20),c.TgZ(106,"span",21),c._uU(107),c.qZA(),c.TgZ(108,"span",22),c._uU(109),c.ALo(110,"humanizeSeconds"),c.qZA(),c.qZA(),c.TgZ(111,"li",20),c.TgZ(112,"span",21),c._uU(113),c.qZA(),c.TgZ(114,"span",22),c._uU(115),c.qZA(),c.qZA(),c.TgZ(116,"li",20),c.TgZ(117,"span",21),c._uU(118),c.qZA(),c.TgZ(119,"span",22),c._uU(120),c.qZA(),c.qZA(),c.TgZ(121,"li",20),c.TgZ(122,"span",21),c._uU(123),c.qZA(),c.TgZ(124,"span",22),c._uU(125),c.qZA(),c.qZA(),c.qZA(),c._UZ(126,"br"),c.YNc(127,qo,13,4,"div",24),c.qZA(),c.qZA(),c.YNc(128,To,26,3,"ng-template",null,25,c.W1O),c.YNc(130,ko,26,3,"ng-template",null,26,c.W1O),c.YNc(132,Co,26,3,"ng-template",null,27,c.W1O)),2&e&&(c.xp6(13),c.AsE(" ",t.overview.firstname," ",t.overview.lastname,""),c.xp6(3),c.hij(" ",t.overview.phone||"N/A",""),c.xp6(3),c.AsE(" ",t.overview.address||"N/A",", ",t.overview.city,""),c.xp6(3),c.hij(" ",t.overview.email||"N/A",""),c.xp6(2),c.Q6J("ngIf",t.auth.has("prm_users_activate")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_billing")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_change_profile")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_disconnect")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_deposit")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_withdrawal")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_reset_quota")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_rename")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_delete")),c.xp6(4),c.Q6J("ngIf",t.overview&&t.overview.next_profile_change),c.xp6(5),c.Oqu(t.tr.translate("global_label_username")),c.xp6(2),c.Oqu(t.overview.username),c.xp6(3),c.Oqu(t.tr.translate("global_label_password")),c.xp6(2),c.Oqu(t.overview.password),c.xp6(3),c.Oqu(t.tr.translate("global_label_balance")),c.xp6(2),c.Oqu(c.xi3(54,50,t.overview.balance,t.config.siteConfig.site_currency)),c.xp6(4),c.Oqu(t.tr.translate("user_overview_owner")),c.xp6(2),c.Oqu(t.overview.parent_username),c.xp6(3),c.Oqu(t.tr.translate("user_overview_profile")),c.xp6(2),c.Q6J("routerLink",c.VKq(64,Uo,t.overview.profile_id)),c.xp6(1),c.Oqu(t.overview.profile_name),c.xp6(3),c.Oqu(t.tr.translate("user_overview_expiration")),c.xp6(2),c.Oqu(c.xi3(71,53,t.overview.expiration,"medium")),c.xp6(4),c.Oqu(t.tr.translate("user_overview_pin_tries")),c.xp6(2),c.Oqu(t.overview.pin_tries),c.xp6(3),c.Oqu(t.tr.translate("user_overview_status")),c.xp6(2),c.Oqu(!0===t.overview.status?"Active":"Inactive"),c.xp6(3),c.Oqu(t.tr.translate("user_overview_last_login")),c.xp6(2),c.Oqu(t.overview.last_online),c.xp6(3),c.Oqu(t.tr.translate("user_overview_remaining_download")),c.xp6(2),c.Oqu(c.lcZ(92,56,t.overview.remaining_rx)),c.xp6(4),c.Oqu(t.tr.translate("user_overview_remaining_upload")),c.xp6(2),c.Oqu(c.lcZ(98,58,t.overview.remaining_tx)),c.xp6(4),c.Oqu(t.tr.translate("user_overview_remaining_traffic")),c.xp6(2),c.Oqu(c.lcZ(104,60,t.overview.remaining_rxtx)),c.xp6(4),c.Oqu(t.tr.translate("user_overview_remaining_uptime")),c.xp6(2),c.Oqu(c.lcZ(110,62,t.overview.remaining_uptime)),c.xp6(4),c.Oqu(t.tr.translate("user_overview_purchases")),c.xp6(2),c.Oqu(t.overview.total_purchases),c.xp6(3),c.Oqu(t.tr.translate("user_overview_created_on")),c.xp6(2),c.Oqu(t.overview.created_at),c.xp6(3),c.Oqu(t.tr.translate("user_overview_created_by")),c.xp6(2),c.Oqu(t.overview.created_by),c.xp6(2),c.Q6J("ngIf",t.overview.addons&&t.overview.addons.length>0))},directives:[F.Q,Q.O5,so,_.yS,Q.sg,A._Y,A.JL,A.F,A.wV,A.Fj,A.JJ,A.On],pipes:[Q.H9,Q.uU,Kt,Bt],styles:[".list-group-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:normal}.list-group-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;float:right}.user-photo-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #eee;background-size:contain;background-repeat:no-repeat;background-position:center}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.overview-button[_ngcontent-%COMP%]{width:150px;height:100px;font-size:14px;color:#fff;text-align:center;background:#6e84a7;cursor:pointer;border:1px solid #b4bcbf;padding-top:25px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:150px;max-width:150px}.overview-button[_ngcontent-%COMP%]:hover{background:#1f64a7}.overview-button[_ngcontent-%COMP%]:active{background:#6e84a7}.image-cover[_ngcontent-%COMP%]{display:none;position:absolute;x:0;y:0;padding:0;maring:0px;width:100%;height:100%;background:rgba(255,255,255,.5);text-align:center}.user-photo-frame[_ngcontent-%COMP%]:hover   .image-cover[_ngcontent-%COMP%]{display:block}"]}),(0,g.gn)([(0,m.bH)()],Mo.prototype,"blockUI",void 0);var Eo=function(){var e=function(){function e(t,a){var i=this;o(this,e),this.api=t,this.route=a,this.months=[{key:1,text:"Jan"},{key:2,text:"Feb"},{key:3,text:"Mar"},{key:4,text:"Apr"},{key:5,text:"May"},{key:6,text:"Jun"},{key:7,text:"Jul"},{key:8,text:"Aug"},{key:9,text:"Spt"},{key:10,text:"Oct"},{key:11,text:"Nov"},{key:12,text:"Dec"}],this.years=[],this.filter={report_type:"daily",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),user_id:null},this.chart_labels_daily=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.chart_labels_monthly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],this.chart_labels=[],this.chart_data=[],this.chart_options={responsive:!0,elements:{line:{fill:!1}}},this.chart_ready=!1,this.table_data=[],this.highcharts_options_monthly={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"31"},yAxis:{title:{text:"Activities"},currentMin:0}};for(var n=(new Date).getFullYear();n>2017;n--)this.years.push(n.toString());this.route.params.subscribe(function(e){e.id&&(i.filter.user_id=e.id,i.load())})}return l(e,[{key:"load",value:function(){var e=this;this.chart_data=[],this.table_data=[],this.chart_ready=!1,this.api.post("user/traffic",this.filter).subscribe(function(t){"daily"==e.filter.report_type?(e.drawDailyGraph(t.data),e.populateDailyTable(t.data)):(e.drawMonthlyGraph(t.data),e.populateMonthlyTable(t.data))})}},{key:"drawDailyGraph",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Traffic"},currentMin:0}},a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1},n={name:"Real Traffic",type:"spline",data:e.total_real,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),t.series.push(n),this.chart=E.chart("chart_container",t)}},{key:"drawMonthlyGraph",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"12"},yAxis:{title:{text:"Traffic"},currentMin:1}};t.xAxis={type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:this.chart_labels_monthly};var a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1},n={name:"Real Traffic",type:"spline",data:e.total_real,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),t.series.push(n),this.chart=E.chart("chart_container",t)}},{key:"populateDailyTable",value:function(e){var t,a=0,n=i(e.rx);try{for(n.s();!(t=n.n()).done;){t.value;this.table_data.push({day:a+1,rx:e.rx[a],tx:e.tx[a],total:e.total[a],free_traffic:e.free_traffic[a],total_real:e.total_real[a]}),a++}}catch(o){n.e(o)}finally{n.f()}}},{key:"populateMonthlyTable",value:function(e){var t,a=0,n=i(e.rx);try{for(n.s();!(t=n.n()).done;){t.value;this.table_data.push({month:a+1,rx:e.rx[a],tx:e.tx[a],total:e.total[a],free_traffic:e.free_traffic[a],total_real:e.total_real[a]}),a++}}catch(o){n.e(o)}finally{n.f()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-traffic-data"]],decls:24,vars:8,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-auto","ml-auto","table-toolbar"],[1,"form-group","pull-right"],[1,"input-group"],["name","type",1,"form-control",3,"ngModel","ngModelChange","change"],["value","daily"],["value","monthly"],["name","month",1,"form-control",3,"ngModel","hidden","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["name","year",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-sync"],[1,"col"],["id","chart_container"],["class","row",4,"ngIf"],[3,"value"],[1,"table","table-bordered","table-hover","table-sm"],[4,"ngFor","ngForOf"],[1,"font-weight-light"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"select",6),c.NdJ("ngModelChange",function(e){return t.filter.report_type=e})("change",function(){return t.load()}),c.TgZ(7,"option",7),c._uU(8,"\xa0Daily\xa0"),c.qZA(),c.TgZ(9,"option",8),c._uU(10,"\xa0Monthly\xa0"),c.qZA(),c.qZA(),c.TgZ(11,"select",9),c.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),c.YNc(12,Fo,2,2,"option",10),c.qZA(),c.TgZ(13,"select",11),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),c.YNc(14,Jo,2,2,"option",10),c.qZA(),c.TgZ(15,"a",12),c.NdJ("click",function(){return t.load()}),c._UZ(16,"i",13),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"div",2),c.TgZ(18,"div",14),c.TgZ(19,"div",15),c._uU(20," Chart is loading... "),c.qZA(),c.qZA(),c.qZA(),c._UZ(21,"br"),c.YNc(22,So,17,1,"div",16),c.YNc(23,Lo,17,1,"div",16),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Q6J("ngModel",t.filter.report_type),c.xp6(5),c.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.report_type),c.xp6(1),c.Q6J("ngForOf",t.months),c.xp6(1),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.years),c.xp6(8),c.Q6J("ngIf","daily"==t.filter.report_type),c.xp6(1),c.Q6J("ngIf","monthly"==t.filter.report_type))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Q.O5],pipes:[Kt],encapsulation:2}),e}();function Ko(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Bo=function(){var e=function(){function e(t,a,i){o(this,e),this.route=t,this.tr=a,this.auth=i,this.tableColumns=[{dataKey:"acctstarttime",label:this.tr.translate("user_session_table_started")},{dataKey:"acctstoptime",label:this.tr.translate("user_session_table_ended")},{dataKey:"framedipaddress",label:this.tr.translate("user_session_table_ip")},{dataKey:"acctoutputoctets",label:this.tr.translate("user_session_table_download"),pipe:"bytes"},{dataKey:"acctinputoctets",label:this.tr.translate("user_session_table_upload"),pipe:"bytes"},{dataKey:"callingstationid",label:this.tr.translate("user_session_table_mac")},{dataKey:"calledstationid",label:this.tr.translate("user_session_table_service")},{dataKey:"nasipaddress",label:"NAS"},{dataKey:"name",parentKey:"profile_details",label:this.tr.translate("user_session_table_profile")},{dataKey:"acctterminatecause",label:this.tr.translate("user_session_table_termination_cause")}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;!this.auth.has("prm_users_sessions_index")||this.route.params.subscribe(function(t){t.id&&(e.modelViewConfig={hasHeader:!1,dataUrl:"index/UserSessions/"+t.id,primaryKey:"radacctid",sortBy:"acctstarttime",direction:"desc",columns:e.tableColumns,useUrlFilter:!1})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.gz),c.Y36(I),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-sessions"]],decls:1,vars:1,consts:[["name","sessions_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","sessions_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["sessions_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Ko,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function jo(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var zo=function(){var e=l(function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("user_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("user_invoice_table_date")},{dataKey:"type",label:this.tr.translate("user_invoice_table_type"),pipe:"translate"},{dataKey:"amount",label:this.tr.translate("user_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("user_invoice_table_description"),pipe:"translate"},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("user_invoice_table_created_by")},{dataKey:"payment_method",label:this.tr.translate("user_invoice_table_method")},{dataKey:"paid",label:this.tr.translate("user_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/UserInvoices/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})});return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-invoices"]],decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["invoices_model_view",""]],template:function(e,t){1&e&&c.YNc(0,jo,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],encapsulation:2}),e}();function Go(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Wo=function(){var e=l(function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("user_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("user_receipt_table_date")},{dataKey:"type",label:this.tr.translate("user_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("user_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("user_receipt_table_description")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("user_receipt_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/UserReceipts/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})});return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-receipts"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["receipts_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Go,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],encapsulation:2}),e}();function $o(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Xo=function(){var e=function(){function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("user_history_table_date")},{dataKey:"event",label:this.tr.translate("user_history_table_action")},{dataKey:"description",label:this.tr.translate("user_history_table_description")},{dataKey:"username",parentKey:"manager_details",sortBy:"created_by_manager_id",label:this.tr.translate("user_history_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/UserHistory/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-history"]],decls:1,vars:1,consts:[["name","user_history_model",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","user_history_model",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["user_history_model",""]],template:function(e,t){1&e&&c.YNc(0,$o,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),er=["fileUpload"],tr=["documents_model_view"];function ar(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",3,4),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var ir=function(){var e=function(){function e(t,a,i,n,r,l){var s=this;o(this,e),this.api=t,this.route=a,this.config=i,this.toastr=n,this.swal=r,this.tr=l,this.tableColumns=[{dataKey:"name",label:this.tr.translate("user_document_table_name")},{dataKey:"size",label:this.tr.translate("user_document_table_size"),pipe:"bytes"},{dataKey:"filename",label:"Filename",hidden:!0},{dataKey:"created_at",label:this.tr.translate("user_document_table_date")}],this.actions=[{name:"upload",label:this.tr.translate("global_label_upload"),icon:"fa fa-upload"},{name:"download",label:this.tr.translate("global_label_download"),icon:"fa fa-download",inline:!0,acl:"prm_any",requiresRow:!0},{name:"rename",label:this.tr.translate("global_label_rename"),icon:"fa fa-edit",inline:!0,acl:"prm_any",requiresRow:!0},{name:"delete",label:this.tr.translate("global_label_delete"),icon:"fa fa-trash",inline:!0,acl:"prm_any",requiresRow:!0}],this.modelViewConfig=null,this.route.params.subscribe(function(e){if(e.id){var t=e.id;s.user_id=t,s.modelViewConfig={hasHeader:!1,dataUrl:"index/UserDocuments/"+t,primaryKey:"id",sortBy:"id",direction:"desc",columns:s.tableColumns,useUrlFilter:!1,actions:s.actions,showSearchBox:!0,allowSelect:!0,hasInlineActions:!0}}})}return l(e,[{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"upload":this.upload();break;case"download":this.download(t);break;case"rename":this.rename(t);break;case"delete":this.destroy(t)}}},{key:"ngOnInit",value:function(){}},{key:"upload",value:function(){var e=this;this.uploader=new J.bA({url:this.config.getApiUrl()+"user/document/"+this.user_id,isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.onAfterAddingFile=function(e){e.withCredentials=!1},this.uploader.response.subscribe(function(t){e.toastr.success("file_uploaded_successfully"),delete e.uploader;var a=JSON.parse(t).document_id.toString();e.swal.prompt("Document Name").subscribe(function(t){e.api.post("user/document/rename/"+a,{name:t}).subscribe(function(){e.modelView.reload()})})}),this.fileUploadField.nativeElement.click()}},{key:"download",value:function(e){this.api.downloadFile("user/document/"+e,this.modelView.currentRow.filename)}},{key:"rename",value:function(e){var t=this;this.swal.prompt("Document Name").subscribe(function(a){t.api.post("user/document/rename/"+e,{name:a}).subscribe(function(){t.modelView.reload()})})}},{key:"destroy",value:function(e){var t=this;this.swal.confirm({title:"Delete Document",type:"warning",text:"Delete Selected Document ?",confirmButtonText:"Yes"}).subscribe(function(){t.api.delete("user/document/"+e).subscribe(function(e){t.modelView.reload()})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(p),c.Y36(v._W),c.Y36(tt),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-documents"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(er,5),c.Gf(tr,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.fileUploadField=a.first),c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:3,vars:2,consts:[["name","documents_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],["name","documents_model_view",3,"modelViewConfig","onAction"],["documents_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,ar,2,1,"model-table-view",0),c.TgZ(1,"input",1,2),c.NdJ("change",function(){return t.uploader.uploadAll()}),c.qZA()),2&e&&(c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Q6J("uploader",t.uploader))},directives:[Q.O5,J.C6,Tt],styles:[""]}),e}();function nr(e,t){1&e&&c._UZ(0,"i",30)}function or(e,t){1&e&&c._UZ(0,"i",30)}function rr(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",8),c._uU(2),c.qZA(),c.TgZ(3,"td",8),c._uU(4),c.qZA(),c.TgZ(5,"td",20),c.YNc(6,nr,1,0,"i",21),c.qZA(),c.TgZ(7,"td",20),c.YNc(8,or,1,0,"i",21),c.qZA(),c.TgZ(9,"td",8),c.TgZ(10,"button",18),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().edit(e.id)}),c._UZ(11,"i",22),c.qZA(),c.TgZ(12,"button",18),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().destroy(e.id)}),c._UZ(13,"i",23),c.qZA(),c.qZA(),c.TgZ(14,"td",8),c.TgZ(15,"input",24),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.attribute=e}),c.qZA(),c.qZA(),c.TgZ(16,"td",8),c.TgZ(17,"input",25),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.value=e}),c.qZA(),c.qZA(),c.TgZ(18,"td",26),c.TgZ(19,"div",12),c.TgZ(20,"input",27),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.cisco_av_pair=e}),c.qZA(),c._UZ(21,"label",28),c.qZA(),c.qZA(),c.TgZ(22,"td",26),c.TgZ(23,"div",12),c.TgZ(24,"input",27),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.enabled=e}),c.qZA(),c._UZ(25,"label",28),c.qZA(),c.qZA(),c.TgZ(26,"td",29),c.TgZ(27,"button",18),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().updateRecord(e)}),c._UZ(28,"i",19),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(1),c.Q6J("hidden",n.edit_mode&&n.edit_row_id==i.id),c.xp6(1),c.hij(" ",i.attribute," "),c.xp6(1),c.Q6J("hidden",n.edit_mode&&n.edit_row_id==i.id),c.xp6(1),c.hij(" ",i.value," "),c.xp6(1),c.Q6J("hidden",n.edit_mode&&n.edit_row_id==i.id),c.xp6(1),c.Q6J("ngIf",1==i.cisco_av_pair),c.xp6(1),c.Q6J("hidden",n.edit_mode&&n.edit_row_id==i.id),c.xp6(1),c.Q6J("ngIf",1==i.enabled),c.xp6(1),c.Q6J("hidden",n.edit_mode&&n.edit_row_id==i.id),c.xp6(5),c.Q6J("hidden",!n.edit_mode||n.edit_row_id!=i.id),c.xp6(1),c.Q6J("ngModel",i.attribute),c.xp6(1),c.Q6J("hidden",!n.edit_mode||n.edit_row_id!=i.id),c.xp6(1),c.Q6J("ngModel",i.value),c.xp6(1),c.Q6J("hidden",!n.edit_mode||n.edit_row_id!=i.id),c.xp6(2),c.MGl("id","e1_",i.id,""),c.Q6J("ngModel",i.cisco_av_pair),c.xp6(1),c.MGl("for","e1_",i.id,""),c.xp6(1),c.Q6J("hidden",!n.edit_mode||n.edit_row_id!=i.id),c.xp6(2),c.MGl("id","e2_",i.id,""),c.Q6J("ngModel",i.enabled),c.xp6(1),c.MGl("for","e2_",i.id,""),c.xp6(1),c.Q6J("hidden",!n.edit_mode||n.edit_row_id!=i.id)}}var lr=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.router=i,this.toastr=n,this.entity=null,this.edit_mode=!1,this.edit_row_id=null,this.entity_id=null,this.attribute_list=[],this.new_record={attribute:"",value:"",cisco_av_pair:!1,enabled:!0,id:null}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.entity&&t.id?(e.entity=t.entity,e.entity_id=t.id,e.load()):(e.entity="user",e.entity_id=t.id,e.load())})}},{key:"load",value:function(){var e=this;this.api.get("customRadiusAttribute/"+this.entity+"/"+this.entity_id).subscribe(function(t){200===t.status&&(e.attribute_list=t.data)})}},{key:"addRecord",value:function(){var e=this;this.api.post("customRadiusAttribute",{entity:this.entity,entity_id:this.entity_id,record:this.new_record}).subscribe(function(t){200===t.status?(e.toastr.success(t.message),e.load(),e.new_record={attribute:"",value:"",enabled:!0,cisco_av_pair:!1,id:null}):e.toastr.error(t.message)})}},{key:"destroy",value:function(e){var t=this;this.api.delete("customRadiusAttribute/"+e.toString()).subscribe(function(e){200===e.status?(t.load(),t.toastr.success(e.message)):t.toastr.error(e.message)})}},{key:"edit",value:function(e){this.edit_row_id=e,this.edit_mode=!0}},{key:"updateRecord",value:function(e){var t=this;this.edit_row_id=null,this.edit_mode=!1,this.api.put("customRadiusAttribute/"+e.id,e).subscribe(function(e){t.load()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(_.F0),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-custom-radius-attributes"]],decls:38,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-asterisk"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table","table-sm"],[4,"ngFor","ngForOf"],[3,"hidden"],["type","text","name","new_attribute",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","new_value",1,"form-control",3,"ngModel","ngModelChange"],[2,"text-align","center"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","cb_av_pair",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","cb_av_pair",1,"custom-control-label"],["type","checkbox","id","cb_enabled",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","cb_enabled",1,"custom-control-label"],[1,"text-left"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-save"],[1,"text-center",3,"hidden"],["class","fa fa-check",4,"ngIf"],[1,"fa","fa-edit"],[1,"fa","fa-trash"],["type","text","name","attribute",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","value",1,"form-control",3,"ngModel","ngModelChange"],[2,"text-align","center",3,"hidden"],["type","checkbox",1,"custom-control-input",3,"id","ngModel","ngModelChange"],[1,"custom-control-label",3,"for"],[1,"text-left",3,"hidden"],[1,"fa","fa-check"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Custom Radius Attributes "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"table",6),c.TgZ(8,"thead"),c.TgZ(9,"tr"),c.TgZ(10,"th"),c._uU(11,"Attribute"),c.qZA(),c.TgZ(12,"th"),c._uU(13,"Value"),c.qZA(),c.TgZ(14,"th"),c._uU(15,"Is Cisco-Av-Pair"),c.qZA(),c.TgZ(16,"th"),c._uU(17,"Enabled"),c.qZA(),c.TgZ(18,"th"),c._uU(19,"Action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"tbody"),c.YNc(21,rr,29,22,"tr",7),c.TgZ(22,"tr",8),c.TgZ(23,"td"),c.TgZ(24,"input",9),c.NdJ("ngModelChange",function(e){return t.new_record.attribute=e}),c.qZA(),c.qZA(),c.TgZ(25,"td"),c.TgZ(26,"input",10),c.NdJ("ngModelChange",function(e){return t.new_record.value=e}),c.qZA(),c.qZA(),c.TgZ(27,"td",11),c.TgZ(28,"div",12),c.TgZ(29,"input",13),c.NdJ("ngModelChange",function(e){return t.new_record.cisco_av_pair=e}),c.qZA(),c._UZ(30,"label",14),c.qZA(),c.qZA(),c.TgZ(31,"td",11),c.TgZ(32,"div",12),c.TgZ(33,"input",15),c.NdJ("ngModelChange",function(e){return t.new_record.enabled=e}),c.qZA(),c._UZ(34,"label",16),c.qZA(),c.qZA(),c.TgZ(35,"td",17),c.TgZ(36,"button",18),c.NdJ("click",function(){return t.addRecord()}),c._UZ(37,"i",19),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(21),c.Q6J("ngForOf",t.attribute_list),c.xp6(1),c.Q6J("hidden",!0===t.edit_mode),c.xp6(2),c.Q6J("ngModel",t.new_record.attribute),c.xp6(2),c.Q6J("ngModel",t.new_record.value),c.xp6(3),c.Q6J("ngModel",t.new_record.cisco_av_pair),c.xp6(4),c.Q6J("ngModel",t.new_record.enabled))},directives:[Q.sg,A.Fj,A.JJ,A.On,A.Wl,Q.O5],styles:[""]}),e}();function sr(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)}}var cr=function(){var e=function(){function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("user_journal_table_date")},{dataKey:"cr",label:this.tr.translate("user_journal_table_cr")},{dataKey:"dr",label:this.tr.translate("user_journal_table_dr")},{dataKey:"amount",label:this.tr.translate("user_journal_table_amount")},{dataKey:"balance",label:this.tr.translate("user_journal_table_balance")},{dataKey:"operation",label:this.tr.translate("user_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("user_journal_table_description")}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/UserJournal/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-journal"]],decls:1,vars:1,consts:[["name","user_model_view",3,"modelViewConfig",4,"ngIf"],["name","user_model_view",3,"modelViewConfig"],["user_model_view",""]],template:function(e,t){1&e&&c.YNc(0,sr,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function ur(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function dr(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.key),c.xp6(1),c.Oqu(a.text)}}function fr(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a),c.xp6(1),c.hij("",a,"\xa0")}}function pr(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.rx))}}function gr(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.tx))}}function hr(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total))}}function mr(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",22),c.YNc(4,pr,3,3,"span",23),c.qZA(),c.TgZ(5,"td",22),c.YNc(6,gr,3,3,"span",23),c.qZA(),c.TgZ(7,"td",22),c.YNc(8,hr,3,3,"span",23),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(2);c.xp6(2),c.lnq("",i.filter.year,"-",i.filter.month,"-",a.day,""),c.xp6(2),c.Q6J("ngIf",a.rx>0),c.xp6(2),c.Q6J("ngIf",a.tx>0),c.xp6(2),c.Q6J("ngIf",a.total>0)}}function _r(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",16),c.TgZ(2,"table",20),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6,"Day"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Download"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Upload"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Total"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,mr,9,6,"tr",21),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(14),c.Q6J("ngForOf",a.table_data)}}function vr(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.rx))}}function br(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.tx))}}function Zr(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"bytes"),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,a.total))}}function yr(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",22),c.YNc(4,vr,3,3,"span",23),c.qZA(),c.TgZ(5,"td",22),c.YNc(6,br,3,3,"span",23),c.qZA(),c.TgZ(7,"td",22),c.YNc(8,Zr,3,3,"span",23),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(2);c.xp6(2),c.AsE("",i.filter.year,"-",a.month,""),c.xp6(2),c.Q6J("ngIf",a.rx>0),c.xp6(2),c.Q6J("ngIf",a.tx>0),c.xp6(2),c.Q6J("ngIf",a.total>0)}}function wr(e,t){if(1&e&&(c.TgZ(0,"div",2),c.TgZ(1,"div",16),c.TgZ(2,"table",20),c.TgZ(3,"thead"),c.TgZ(4,"tr"),c.TgZ(5,"th"),c._uU(6,"Month"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Download"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Upload"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Total"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"tbody"),c.YNc(14,yr,9,5,"tr",21),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(14),c.Q6J("ngForOf",a.table_data)}}var xr=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.route=a,this.months=[{key:1,text:"Jan"},{key:2,text:"Feb"},{key:3,text:"Mar"},{key:4,text:"Apr"},{key:5,text:"May"},{key:6,text:"Jun"},{key:7,text:"Jul"},{key:8,text:"Aug"},{key:9,text:"Spt"},{key:10,text:"Oct"},{key:11,text:"Nov"},{key:12,text:"Dec"}],this.years=[],this.filter={report_type:"daily",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),user_id:null,zone_id:-1},this.chart_labels_daily=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"],this.chart_labels_monthly=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],this.chart_labels=[],this.chart_data=[],this.chart_options={responsive:!0,elements:{line:{fill:!1}}},this.chart_ready=!1,this.table_data=[],this.zones=[],this.highcharts_options_monthly={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"31"},yAxis:{title:{text:"Activities"},currentMin:0}}}return l(e,[{key:"ngOnInit",value:function(){for(var e=this,t=(new Date).getFullYear();t>2017;t--)this.years.push(t.toString());this.route.params.subscribe(function(t){t.id&&(e.filter.user_id=t.id,e.load())}),this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/freezone").subscribe(function(t){200===t.status&&(e.zones=t.data)})}},{key:"load",value:function(){var e=this;this.chart_data=[],this.table_data=[],this.chart_ready=!1,this.api.post("userNetworksTraffic",this.filter).subscribe(function(t){"daily"===e.filter.report_type?(e.drawDailyGraph(t.data),e.populateDailyTable(t.data)):(e.drawMonthlyGraph(t.data),e.populateMonthlyTable(t.data))})}},{key:"drawDailyGraph",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}},title:{text:"Traffic Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Traffic"},currentMin:0}},a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1,color:"#1d1e98"},i={name:"Total",type:"spline",data:e.total,pointInterval:1,color:"#980000"};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1,color:"#2b6a3d"}),t.series.push(a),t.series.push(i),this.chart=E.chart("chart_container_fzt",t)}},{key:"drawMonthlyGraph",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" MB"}},series:[],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}},title:{text:"Traffic Report"},xAxis:{currentMin:"1",currentMax:"12"},yAxis:{title:{text:"Traffic"},currentMin:1}};t.xAxis={type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:this.chart_labels_monthly};var a={name:"Upload",type:"spline",data:e.tx,pointInterval:1,visible:!1},i={name:"Total",type:"spline",data:e.total,pointInterval:1};t.series.push({name:"Download",type:"spline",data:e.rx,pointInterval:1,visible:!1}),t.series.push(a),t.series.push(i),this.chart=E.chart("chart_container_fzt",t)}},{key:"populateDailyTable",value:function(e){var t,a=0,n=i(e.rx);try{for(n.s();!(t=n.n()).done;){t.value;this.table_data.push({day:a+1,rx:e.rx[a],tx:e.tx[a],total:e.total[a]}),a++}}catch(o){n.e(o)}finally{n.f()}}},{key:"populateMonthlyTable",value:function(e){var t,a=0,n=i(e.rx);try{for(n.s();!(t=n.n()).done;){t.value;this.table_data.push({month:a+1,rx:e.rx[a],tx:e.tx[a],total:e.total[a]}),a++}}catch(o){n.e(o)}finally{n.f()}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-freezone-traffic"]],decls:28,vars:10,consts:[[1,"card"],[1,"card-body"],[1,"row"],[1,"col-md-auto","ml-auto","table-toolbar"],[1,"form-group","pull-right"],[1,"input-group"],["name","type",1,"form-control",2,"width","200px",3,"ngModel","ngModelChange","change"],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["name","type",1,"form-control",3,"ngModel","ngModelChange","change"],["value","daily"],["value","monthly"],["name","month",1,"form-control",3,"ngModel","hidden","ngModelChange","change"],["name","year",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-sync"],[1,"col"],["id","chart_container_fzt"],["class","row",4,"ngIf"],[3,"value"],[1,"table","table-bordered","table-hover","table-sm"],[4,"ngFor","ngForOf"],[1,"font-weight-light"],[4,"ngIf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c.TgZ(6,"select",6),c.NdJ("ngModelChange",function(e){return t.filter.zone_id=e})("change",function(){return t.load()}),c.TgZ(7,"option",7),c._uU(8,"\xa0All Zones\xa0"),c.qZA(),c.YNc(9,ur,2,2,"option",8),c.qZA(),c.TgZ(10,"select",9),c.NdJ("ngModelChange",function(e){return t.filter.report_type=e})("change",function(){return t.load()}),c.TgZ(11,"option",10),c._uU(12,"\xa0Daily\xa0"),c.qZA(),c.TgZ(13,"option",11),c._uU(14,"\xa0Monthly\xa0"),c.qZA(),c.qZA(),c.TgZ(15,"select",12),c.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),c.YNc(16,dr,2,2,"option",8),c.qZA(),c.TgZ(17,"select",13),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),c.YNc(18,fr,2,2,"option",8),c.qZA(),c.TgZ(19,"a",14),c.NdJ("click",function(){return t.load()}),c._UZ(20,"i",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",2),c.TgZ(22,"div",16),c.TgZ(23,"div",17),c._uU(24," Chart is loading... "),c.qZA(),c.qZA(),c.qZA(),c._UZ(25,"br"),c.YNc(26,_r,15,1,"div",18),c.YNc(27,wr,15,1,"div",18),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Q6J("ngModel",t.filter.zone_id),c.xp6(3),c.Q6J("ngForOf",t.zones),c.xp6(1),c.Q6J("ngModel",t.filter.report_type),c.xp6(5),c.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.report_type),c.xp6(1),c.Q6J("ngForOf",t.months),c.xp6(1),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.years),c.xp6(8),c.Q6J("ngIf","daily"==t.filter.report_type),c.xp6(1),c.Q6J("ngIf","monthly"==t.filter.report_type))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Q.O5],pipes:[Kt],styles:[""]}),e}();function Ar(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",6),c._uU(2),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.hij(" ",a.tr.translate("users_tab_overview"),"")}}function qr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",8),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_edit"),"")}}function Tr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,qr,3,1,"ng-template",3),c._UZ(2,"user-form",7),c.qZA()),2&e&&(c.xp6(2),c.Q6J("hasHeader",!1))}function kr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",9),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_traffic"),"")}}function Cr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,kr,3,1,"ng-template",3),c._UZ(2,"app-user-traffic-data"),c.qZA())}function Ur(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",10),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_sessions"),"")}}function Mr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Ur,3,1,"ng-template",3),c._UZ(2,"app-user-sessions"),c.qZA())}function Fr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",11),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_invoices"),"")}}function Jr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Fr,3,1,"ng-template",3),c._UZ(2,"app-user-invoices"),c.qZA())}function Or(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",12),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_payments"),"")}}function Nr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Or,3,1,"ng-template",3),c._UZ(2,"app-user-receipts"),c.qZA())}function Ir(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",13),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_history"),"")}}function Yr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Ir,3,1,"ng-template",3),c._UZ(2,"app-user-history"),c.qZA())}function Qr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",14),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_documents"),"")}}function Sr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Qr,3,1,"ng-template",3),c._UZ(2,"app-user-documents"),c.qZA())}function Pr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",15),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_radius"),"")}}function Dr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Pr,3,1,"ng-template",3),c._UZ(2,"app-custom-radius-attributes"),c.qZA())}function Hr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",11),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_journal"),"")}}function Rr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Hr,3,1,"ng-template",3),c._UZ(2,"app-user-journal"),c.qZA())}function Vr(e,t){if(1&e&&(c.TgZ(0,"span",5),c._UZ(1,"i",9),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" ",a.tr.translate("users_tab_freezone_traffic"),"")}}function Lr(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Vr,3,1,"ng-template",3),c._UZ(2,"app-user-freezone-traffic"),c.qZA())}var Er=function(){var e=l(function e(t,a){o(this,e),this.auth=t,this.tr=a});return e.\u0275fac=function(t){return new(t||e)(c.Y36(w),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:16,vars:11,consts:[[1,"row"],[1,"col-md-12","mb-4"],[3,"justified"],["tabHeading",""],[4,"ngIf"],[1,"superform-tab-header"],[1,"fa","fa-user"],[3,"hasHeader"],[1,"fa","fa-edit"],[1,"fa","fa-chart-line"],[1,"fa","fa-list"],[1,"fa","fa-book"],[1,"fa","fa-money-bill-alt"],[1,"fa","fa-calendar-alt"],[1,"fa","fa-id-card"],[1,"fa","fa-cogs"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"tabset",2),c.TgZ(3,"tab"),c.YNc(4,Ar,3,1,"ng-template",3),c._UZ(5,"app-user-overview"),c.qZA(),c.YNc(6,Tr,3,1,"tab",4),c.YNc(7,Cr,3,0,"tab",4),c.YNc(8,Mr,3,0,"tab",4),c.YNc(9,Jr,3,0,"tab",4),c.YNc(10,Nr,3,0,"tab",4),c.YNc(11,Yr,3,0,"tab",4),c.YNc(12,Sr,3,0,"tab",4),c.YNc(13,Dr,3,0,"tab",4),c.YNc(14,Rr,3,0,"tab",4),c.YNc(15,Lr,3,0,"tab",4),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("justified",!1),c.xp6(4),c.Q6J("ngIf",t.auth.has("prm_users_update")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_any")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_sessions_index")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_invoice")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_invoice")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_history")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_update")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_journal")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_users_freezone_traffic")))},directives:[N.AH,N.wW,N.y3,Mo,Q.O5,In,Eo,Bo,zo,Wo,Xo,ir,lr,cr,xr],styles:[".superform-tab-header[_ngcontent-%COMP%]{font-size:small}"]}),e}(),Kr=["activationForm"];function Br(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",16,17),c.NdJ("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)})("submit",function(e){return c.CHM(a),c.oxw().prompConfirmActivation(e)})("cancel",function(){return c.CHM(a),c.oxw().cancel()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var jr=function(){return{width:"500px"}},zr=function(){function e(t,a,i,n,r,l,s,c,u,d){o(this,e),this.api=t,this.formLoader=a,this.auth=i,this.route=n,this.config=r,this.toastr=l,this.tr=s,this.location=c,this.ch=u,this.router=d,this.form_config={layout:"horizontal",cancelText:this.tr.translate("global_button_dismiss"),submitText:this.tr.translate("global_button_activate"),fields:this.formLoader.getForm("user_activate_form"),helpBlock:"hidden"},this.options=[],this.user_id=null,this.activation_data={},this.confirmation_dialog_visible=!1,this.issue_invoice=0,this.uuid=null,this.transaction_id=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.options.method=[],this.auth.has("prm_users_activate_credit")&&this.options.method.push({value:"credit",label:this.tr.translate("user_activate_option_manager_balance")}),this.auth.has("prm_users_activate_card")&&this.options.method.push({value:"card",label:this.tr.translate("user_activate_option_user_card")}),this.auth.has("prm_users_activate_user_balance")&&this.options.method.push({value:"user_balance",label:this.tr.translate("user_activate_option_user_balance")}),this.auth.has("prm_users_reward_points")&&this.options.method.push({value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")}),this.transaction_id=this.ch.guid(),this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.getActivationData(e.user_id))})}},{key:"getActivationData",value:function(e){var t=this;this.api.get("user/activationData/"+e).subscribe(function(e){var a;t.activation_data=e.data,t.formView.setFormValue(t.activation_data),t.onFormChange(t.activation_data),t.auth.has("prm_users_reward_points")&&(t.formView.showField("separator2"),t.formView.showField("reward_points"),t.formView.showField("required_points"),t.formView.showField("reward_points_balance")),"0 B"===t.activation_data.profile_dl_traffic&&t.formView.hideField("profile_dl_traffic"),"0 B"===t.activation_data.profile_ul_traffic&&t.formView.hideField("profile_ul_traffic"),"0 B"===t.activation_data.profile_traffic&&t.formView.hideField("profile_traffic"),(null===t.activation_data.profile_description||(null===(a=t.activation_data.profile_description)||void 0===a?void 0:a.length)<3)&&t.formView.hideField("profile_description");var i=t.tr.translate(t.formView.getLabel("user_price"));i=i+" ("+t.config.siteConfig.site_currency+")",t.formView.setLabel("user_price",i)})}},{key:"onFormChange",value:function(e){if(this.transaction_id=this.ch.guid(),this.formView.setFieldValue("required_amount",this.activation_data.required_amount),"card"===e.method?(this.formView.showField("card_number"),this.formView.hideField("activation_units"),this.formView.showField("card_number")):(this.formView.hideField("card_number"),this.formView.hideField("card_number")),"credit"===e.method){this.formView.showField("activation_units");var t=e.activation_units;if(t){var a=this.activation_data.n_required_amount*parseInt(t);this.formView.setFieldValue("required_amount",this.config.siteConfig.site_currency+" "+a)}}}},{key:"activate",value:function(e){var t=this,a=this.formView.form.value.method,i="";"card"===a&&(i=this.formView.form.value.card_number),this.blockUI.start(this.tr.translate("msg_wait")),this.api.post("user/activate",{method:a,pin:i,user_id:this.user_id,units:e.units,money_collected:this.formView.form.value.money_collected,comments:this.formView.form.value.comment,user_price:this.formView.form.value.user_price,issue_invoice:this.issue_invoice,transaction_id:this.transaction_id,activation_units:this.formView.form.value.activation_units}).subscribe(function(e){if(t.blockUI.stop(),200===e.status){if(t.toastr.success(t.tr.translate("msg_user_activate_success")),"credit"===a&&t.auth.has("prm_billing")){var i=null==e?void 0:e.invoice_id;i>0&&t.api.downloadFile("userInvoice/download/"+i,"invoice_"+i)}t.location.back()}else t.toastr.warning(t.tr.translate(e.message))})}},{key:"cancel",value:function(){this.location.back()}},{key:"prompConfirmActivation",value:function(e){this.confirmation_data=e,"credit"===this.formView.form.value.method&&this.auth.has("prm_billing")?this.confirmation_dialog_visible=!0:this.activate(e)}},{key:"confirmActivation",value:function(){this.confirmation_dialog_visible=!1,this.activate(this.confirmation_data)}}]),e}();zr.\u0275fac=function(e){return new(e||zr)(c.Y36(Z),c.Y36(ki),c.Y36(w),c.Y36(_.gz),c.Y36(p),c.Y36(v._W),c.Y36(I),c.Y36(Q.Ye),c.Y36(y),c.Y36(_.F0))},zr.\u0275cmp=c.Xpm({type:zr,selectors:[["ng-component"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Kr,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:20,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],["name","activationForm",3,"formConfig","options","formChanged","submit","cancel",4,"ngIf"],[3,"header","visible","modal","draggable","visibleChange"],["confirmation_dialog",""],[2,"with","100%","padding","10px"],["value","1",3,"ngModel","label","binary","ngModelChange"],[2,"font-size","small","margin-top","10px"],[1,"fa","fa-info-circle"],[1,"modal-footer"],[1,"btn","btn-primary","float-right",3,"click"],[1,"btn","btn-secondary","float-right",3,"click"],["name","activationForm",3,"formConfig","options","formChanged","submit","cancel"],["activationForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Br,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"p-dialog",7,8),c.NdJ("visibleChange",function(e){return t.confirmation_dialog_visible=e}),c.TgZ(10,"div",9),c.TgZ(11,"p-checkbox",10),c.NdJ("ngModelChange",function(e){return t.issue_invoice=e}),c.qZA(),c.TgZ(12,"div",11),c._UZ(13,"i",12),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"div",13),c.TgZ(16,"button",14),c.NdJ("click",function(){return t.confirmActivation()}),c._uU(17),c.qZA(),c.TgZ(18,"button",15),c.NdJ("click",function(){return t.confirmation_dialog_visible=!1}),c._uU(19),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.hij(" ",t.tr.translate("user_activate_form_title")," "),c.xp6(4),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(1),c.Akn(c.DdM(14,jr)),c.Q6J("header",t.tr.translate("user_activation_confirm_title"))("visible",t.confirmation_dialog_visible)("modal",!0)("draggable",!0),c.xp6(3),c.Q6J("ngModel",t.issue_invoice)("label"," "+t.tr.translate("user_activation_issue_invoice_confirm")+" ")("binary",!0),c.xp6(3),c.hij("\xa0",t.tr.translate("user_activation_issue_invoice_note")," "),c.xp6(3),c.Oqu(t.tr.translate("global_button_activate")),c.xp6(2),c.Oqu(t.tr.translate("global_button_cancel")))},directives:[Q.O5,Oi.V,wa.XZ,A.JJ,A.On,qi],styles:[".modal-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}"]}),(0,g.gn)([(0,m.bH)()],zr.prototype,"blockUI",void 0);var Gr=function(e){return{"custom-price":e}};function Wr(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",10),c._uU(4),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"input",13),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.price=e}),c.qZA(),c.qZA(),c.TgZ(7,"td"),c.TgZ(8,"input",14),c.NdJ("ngModelChange",function(e){return c.CHM(a).$implicit.user_price=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(2),c.hij(" ",i.profile_name," "),c.xp6(1),c.Q6J("hidden",n.manager_id===n.auth.client.id&&!n.auth.has("prm_managers_sysadmin")),c.xp6(1),c.hij(" ",i.cost," "),c.xp6(2),c.Q6J("ngClass",c.VKq(7,Gr,-1!=i.price&&i.price!=i.cost))("readOnly",n.manager_id===n.auth.client.id)("ngModel",i.price),c.xp6(2),c.Q6J("ngModel",i.user_price)}}function $r(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",15),c.TgZ(1,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().save()}),c._uU(2),c.qZA(),c.TgZ(3,"button",17),c.NdJ("click",function(){return c.CHM(a),c.oxw().confirmReset()}),c._uU(4),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.tr.translate("global_button_submit")),c.xp6(2),c.Oqu(i.tr.translate("global_reset"))}}var Xr=function(){return{width:"40vw"}},el=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.toastr=a,this.tr=i,this.confirmationService=n,this.auth=r,this.treeNodes=[],this.priceList=[],this.manager_id=null}return l(e,[{key:"manager_selected",value:function(e){var t=this;this.priceList=[],this.manager_id=parseInt(e.id),this.blockUI.start(),this.api.get("priceList/"+this.manager_id).subscribe(function(e){t.blockUI.stop();var a,n=i(e.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;t.priceList.push({profile_id:o.id,profile_name:o.name,price:o.price,cost:o.cost,user_price:o.user_price})}}catch(r){n.e(r)}finally{n.f()}})}},{key:"save",value:function(){var e=this,t={manager_id:this.manager_id,priceList:this.priceList};this.blockUI.start(),this.api.post("priceList",t).subscribe(function(t){e.blockUI.stop(),e.toastr.success("Price Updated"),e.manager_selected({id:e.manager_id})})}},{key:"confirmReset",value:function(){var e=this;this.confirmationService.confirm({message:this.tr.translate("profile_pricing_confirm_reset_message"),header:this.tr.translate("global_confirmation"),icon:"pi pi-exclamation-triangle",accept:function(){e.reset()}})}},{key:"reset",value:function(){var e=this;this.blockUI.start(),this.api.get("priceList/reset/"+this.manager_id).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.toastr.success("Price Reset"),e.manager_selected({id:e.manager_id}))})}}]),e}();el.\u0275fac=function(e){return new(e||el)(c.Y36(Z),c.Y36(v._W),c.Y36(I),c.Y36(Ci.YP),c.Y36(w))},el.\u0275cmp=c.Xpm({type:el,selectors:[["ng-component"]],decls:29,vars:7,consts:[[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-user-secret"],[1,"card-body"],[2,"width","100%","height","100%",3,"showSearch","onManagerSelected"],[1,"col"],[1,"fa","fa-puzzle-piece"],[1,"table","table-hover"],[3,"hidden"],[4,"ngFor","ngForOf"],["class","form-actions right",4,"ngIf"],["type","number",1,"form-control",3,"ngClass","readOnly","ngModel","ngModelChange"],["type","number",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-actions","right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"]],template:function(e,t){1&e&&(c._UZ(0,"p-confirmDialog"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c._UZ(5,"i",4),c._uU(6," Managers Tree "),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"app-managers-tree",6),c.NdJ("onManagerSelected",function(e){return t.manager_selected(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"div",2),c.TgZ(11,"div",3),c._UZ(12,"i",8),c._uU(13," Price List "),c.qZA(),c.TgZ(14,"div",5),c.TgZ(15,"table",9),c.TgZ(16,"thead"),c.TgZ(17,"th"),c._uU(18,"Profile"),c.qZA(),c.TgZ(19,"th",10),c._uU(20,"Cost"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"Price"),c.qZA(),c.TgZ(23,"th"),c._uU(24,"End User Price"),c.qZA(),c.qZA(),c.TgZ(25,"tbody"),c.YNc(26,Wr,9,9,"tr",11),c.qZA(),c.qZA(),c._UZ(27,"hr"),c.YNc(28,$r,5,2,"div",12),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Akn(c.DdM(6,Xr)),c.xp6(8),c.Q6J("showSearch",!0),c.xp6(11),c.Q6J("hidden",t.manager_id===t.auth.client.id&&!t.auth.has("prm_managers_sysadmin")),c.xp6(7),c.Q6J("ngForOf",t.priceList),c.xp6(2),c.Q6J("ngIf",t.priceList&&t.priceList.length>0))},styles:[".inherited-price[_ngcontent-%COMP%]{font-weight:normal}.custom-price[_ngcontent-%COMP%]{font-weight:bold;color:#0e2231}"]}),(0,g.gn)([(0,m.bH)()],el.prototype,"blockUI",void 0);var tl=["profileChangeForm"];function al(e,t){if(1&e&&(c.TgZ(0,"div",4),c.TgZ(1,"div",7),c._UZ(2,"i",8),c._uU(3),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(3),c.hij(" ",a.tr.translate("user_change_warning1")," ")}}function il(e,t){if(1&e&&(c.TgZ(0,"div",4),c.TgZ(1,"div",7),c._UZ(2,"i",8),c._uU(3),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(3),c.hij(" ",a.tr.translate("user_change_warning2")," ")}}function nl(e,t){if(1&e&&(c.TgZ(0,"div",4),c.TgZ(1,"div",7),c._UZ(2,"i",8),c._uU(3," User profile is already scheduled for change on "),c.TgZ(4,"b"),c._uU(5),c.qZA(),c._uU(6," to: "),c.TgZ(7,"b"),c._uU(8),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(5),c.Oqu(a.user_data.profileChange.due_date),c.xp6(3),c.Oqu(a.user_data.profileChange.profile_name)}}function ol(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",9,10),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().changeProfile(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var rl=function(){function e(t,a,i,n,r,l,s,c,u,d){o(this,e),this.api=t,this.formLoader=a,this.auth=i,this.route=n,this.swal=r,this.config=l,this.toastr=s,this.router=c,this.location=u,this.tr=d,this.form_config={layout:"horizontal",submitText:this.tr.translate("global_button_submit"),fields:this.formLoader.getForm("user_profile_change_form"),helpBlock:"hidden",showDiscardButton:!1},this.options=[],this.user_id=null,this.profiles_list=[]}return l(e,[{key:"loadResources",value:function(){var e=this;this.api.get("list/profile/0").subscribe(function(t){e.profiles_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;o.id!=e.user_data.profile_id&&e.profiles_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.new_profile_id=e.profiles_list})}},{key:"changeProfile",value:function(e){var t=this,a=e.value;this.swal.confirm({title:"Change Profile",type:"warning",text:"Change User Profile ?",confirmButtonText:"Yes"}).subscribe(function(){t.api.post("user/changeProfile",{user_id:t.user_id,profile_id:a.new_profile_id,change_type:a.change_type}).subscribe(function(e){200===e.status?(t.toastr.success(t.tr.translate(e.message)),t.router.navigate(["user",t.user_id])):t.toastr.warning(t.tr.translate(e.message))})})}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.api.get("user/"+e.user_id).subscribe(function(t){e.user_data=t.data,e.formView.setFormValue(e.user_data),e.loadResources(),!1===e.user_data.status.expiration?(e.options.change_type=[{label:e.tr.translate("user_change_option_immediate"),value:"immediate"}],e.formView.setFieldValue("change_type","immediate")):(e.auth.has("prm_users_change_profile_active")||(e.toastr.warning(e.tr.translate("msg_user_already_active")),e.location.back()),e.options.change_type=[{label:e.tr.translate("user_change_option_immediate"),value:"immediate"},{label:e.tr.translate("user_change_option_schedule"),value:"schedule"}],e.formView.setFieldValue("change_type","schedule")),e.formView.regenerate()}))})}}]),e}();rl.\u0275fac=function(e){return new(e||rl)(c.Y36(Z),c.Y36(ki),c.Y36(w),c.Y36(_.gz),c.Y36(tt),c.Y36(p),c.Y36(v._W),c.Y36(_.F0),c.Y36(Q.Ye),c.Y36(I))},rl.\u0275cmp=c.Xpm({type:rl,selectors:[["app-profile-change"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(tl,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:10,vars:4,consts:[["class","row",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col"],["name","profileChangeForm",3,"formConfig","options","submit",4,"ngIf"],["role","alert",1,"col","alert","alert-warning"],[1,"fad","fa-exclamation-triangle"],["name","profileChangeForm",3,"formConfig","options","submit"],["profileChangeForm",""]],template:function(e,t){1&e&&(c.YNc(0,al,4,1,"div",0),c.YNc(1,il,4,1,"div",0),c.YNc(2,nl,9,2,"div",0),c.TgZ(3,"div",1),c.TgZ(4,"div",2),c._uU(5," Change User Profile "),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"div",4),c.TgZ(8,"div",5),c.YNc(9,ol,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.user_data&&t.user_data.status&&1==t.user_data.status.expiration&&"schedule"==t.formView.form.value.change_type),c.xp6(1),c.Q6J("ngIf",t.user_data&&t.user_data.status&&1==t.user_data.status.expiration&&"immediate"==t.formView.form.value.change_type),c.xp6(1),c.Q6J("ngIf",t.user_data&&t.user_data.profileChange),c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[""]}),(0,g.gn)([(0,m.bH)()],rl.prototype,"blockUI",void 0);var ll=["user_model_view"],sl=["rename_modal"];function cl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().showDepositForm()}),c._UZ(1,"i",22),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_deposit")," ")}}function ul(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().showWithdrawalForm()}),c._UZ(1,"i",22),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_withdrawal")," ")}}function dl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().showPayDebtForm()}),c._UZ(1,"i",22),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_pay_debt")," ")}}function fl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().showRenameForm()}),c._UZ(1,"i",23),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_rename")," ")}}function pl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",21),c.NdJ("click",function(){return c.CHM(a),c.oxw().destroy()}),c._UZ(1,"i",24),c._UZ(2,"br"),c._uU(3),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.hij(" ",i.tr.translate("global_actions_delete")," ")}}function gl(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td",29),c._uU(4),c.ALo(5,"currency"),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw(2);c.xp6(2),c.Oqu(a.manager_username),c.xp6(2),c.Oqu(c.xi3(5,2,a.amount,i.config.siteConfig.site_currency))}}function hl(e,t){if(1&e&&(c.TgZ(0,"div",25),c.TgZ(1,"h5",26),c._uU(2),c.qZA(),c.TgZ(3,"table",27),c.YNc(4,gl,6,5,"tr",28),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.Oqu(a.tr.translate("manager_overview_outstanding_debts")),c.xp6(2),c.Q6J("ngForOf",a.overview.debts_per_manager)}}function ml(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"h4",31),c._uU(2,"Rename Manager"),c.qZA(),c.TgZ(3,"button",32),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",33),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",34),c.TgZ(7,"form",35),c.TgZ(8,"div",36),c.TgZ(9,"label"),c._uU(10,"Manager"),c.qZA(),c._UZ(11,"input",37),c.TgZ(12,"small",38),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.TgZ(14,"div",36),c.TgZ(15,"label"),c._uU(16,"New Username"),c.qZA(),c.TgZ(17,"input",39,40),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().renameForm.new_username=e})("keydown.enter",function(){return c.CHM(a),c.oxw().rename()}),c.qZA(),c.TgZ(19,"small",38),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",41),c.TgZ(22,"button",42),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(23,"Close"),c.qZA(),c.TgZ(24,"button",43),c.NdJ("click",function(){return c.CHM(a),c.oxw().rename()}),c._uU(25,"Submit"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(11),c.s9C("value",i.renameForm.username),c.xp6(6),c.Q6J("ngModel",i.renameForm.new_username),c.xp6(7),c.Q6J("disabled",!i.renameForm.new_username||i.renameForm.new_username.length<1)}}var _l=function(){function e(t,a,i,n,r,l,s,c,u,d,f){var p=this;o(this,e),this.api=t,this.route=a,this.modalService=i,this.toastr=n,this.router=r,this.swal=l,this.ch=s,this.auth=c,this.config=u,this.dialogService=d,this.tr=f,this.depositForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,is_loan:!1,balance:0},this.withdrawalForm={manager_id:null,manager_username:"",amount:null,comment:"",transaction_id:null,balance:0},this.renameForm={user_id:null,username:"",new_username:""},this.modelViewConfig=null,this.loading=!1,this.manager_id=null,this.overview={},this.route.params.subscribe(function(e){e.id&&(p.manager_id=e.id,p.load())})}return l(e,[{key:"load",value:function(){var e=this;this.api.get("manager/overview/"+this.manager_id).subscribe(function(t){e.overview=t.data,e.overview.status=1==t.data.status?"enabled":"disabled"})}},{key:"ngOnInit",value:function(){}},{key:"showDepositForm",value:function(){this.dialogService.open(Ta,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:this.manager_id}})}},{key:"showWithdrawalForm",value:function(){this.dialogService.open(Ca,{header:this.tr.translate("manager_depodrawal_form_title_deposit"),width:"500px",data:{manager_id:this.manager_id}})}},{key:"showRenameForm",value:function(){this.renameForm.manager_id=this.manager_id,this.renameForm.username=this.overview.username,this.renameForm.new_username=null,this.activeModal=this.modalService.show(this.renameModal)}},{key:"rename",value:function(){var e=this,t=this.renameForm.manager_id,a={username:this.renameForm.new_username};this.blockUI.start("please wait..."),this.api.put("manager/"+t,a).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.toastr.success(t.message),e.load()):e.toastr.error("Unable to rename manager"),e.activeModal.hide()},function(t){e.toastr.error("Error Occurred !"),e.activeModal.hide()})}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete Manager",type:"warning",text:"Delete Selected Manager ?",confirmButtonText:"Yes"}).subscribe(function(){e.blockUI.start("loading..."),e.api.delete("manager/"+e.manager_id).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.router.navigate(["managers/index"]),e.toastr.success(t.message,"")):e.toastr.warning(t.error)})})}},{key:"showPayDebtForm",value:function(){var e=this;this.dialogService.open(Za,{header:this.tr.translate("global_actions_pay_debt"),data:{manager_id:this.manager_id}}).onClose.subscribe(function(){e.load()})}}]),e}();function vl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}_l.\u0275fac=function(e){return new(e||_l)(c.Y36(Z),c.Y36(_.gz),c.Y36(at.tT),c.Y36(v._W),c.Y36(_.F0),c.Y36(tt),c.Y36(y),c.Y36(w),c.Y36(p),c.Y36(ba.xA),c.Y36(I))},_l.\u0275cmp=c.Xpm({type:_l,selectors:[["app-manager-overview"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(ll,5),c.Gf(sl,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.renameModal=a.first))},features:[c._Bn([ba.xA])],decls:100,vars:44,consts:[[1,"row"],[1,"col-md","col-sm-12","order-2","order-md-1"],[1,"col","col-md-4","text-center"],[1,"user-photo-frame",2,"background-image","url(./assets/img/avatars/user-placeholder.png)"],[1,"image-cover"],[1,"btn","btn-primary","btn-sm",2,"position","absolute","top","50%","left","50%","transform","translate(-50%,-50%)"],[1,"col","col-md-8"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"row",2,"margin-top","10px","margin-left","5px"],["class","col overview-button",3,"click",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"col-md","col-sm-12","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item"],[1,"label"],[1,"value"],["rename_modal",""],[1,"col","overview-button",3,"click"],[1,"fa","fa-2x","fa-money-bill-alt"],[1,"fa","fa-2x","fa-edit"],[1,"fa","fa-2x","fa-trash"],[1,"mt-4"],[1,"font-weight-light"],[1,"table",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"text-danger"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form"],[1,"from-group"],["type","text","readonly","","id","manager_username2",1,"form-control","form-control-plaintext",3,"value"],[1,"form-text","text-muted"],["type","text","name","new_username","placeholder","Enter new username","autofocus","","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["new_username","ngModel"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",0),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"button",5),c._uU(7,"Change"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",6),c.TgZ(9,"ul",7),c.TgZ(10,"li"),c._UZ(11,"i",8),c._uU(12),c.qZA(),c.TgZ(13,"li"),c._UZ(14,"i",9),c._uU(15),c.qZA(),c.TgZ(16,"li"),c._UZ(17,"i",10),c._uU(18),c.qZA(),c.TgZ(19,"li"),c._UZ(20,"i",11),c._uU(21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(22,"div",12),c.YNc(23,cl,4,1,"div",13),c.YNc(24,ul,4,1,"div",13),c.YNc(25,dl,4,1,"div",13),c.YNc(26,fl,4,1,"div",13),c.YNc(27,pl,4,1,"div",13),c.qZA(),c.YNc(28,hl,5,2,"div",14),c.qZA(),c.TgZ(29,"div",15),c.TgZ(30,"div",16),c.TgZ(31,"li",17),c.TgZ(32,"span",18),c._uU(33),c.qZA(),c.TgZ(34,"span",19),c._uU(35),c.qZA(),c.qZA(),c.TgZ(36,"li",17),c.TgZ(37,"span",18),c._uU(38),c.qZA(),c.TgZ(39,"span",19),c._uU(40),c.ALo(41,"currency"),c.qZA(),c.qZA(),c.TgZ(42,"li",17),c.TgZ(43,"span",18),c._uU(44),c.qZA(),c.TgZ(45,"span",19),c._uU(46),c.ALo(47,"currency"),c.qZA(),c.qZA(),c.TgZ(48,"li",17),c.TgZ(49,"span",18),c._uU(50),c.qZA(),c.TgZ(51,"span",19),c._uU(52),c.qZA(),c.qZA(),c.TgZ(53,"li",17),c.TgZ(54,"span",18),c._uU(55),c.qZA(),c.TgZ(56,"span",19),c._uU(57),c.qZA(),c.qZA(),c.TgZ(58,"li",17),c.TgZ(59,"span",18),c._uU(60),c.qZA(),c.TgZ(61,"span",19),c._uU(62),c.qZA(),c.qZA(),c.TgZ(63,"li",17),c.TgZ(64,"span",18),c._uU(65),c.qZA(),c.TgZ(66,"span",19),c._uU(67),c.qZA(),c.qZA(),c.TgZ(68,"li",17),c.TgZ(69,"span",18),c._uU(70),c.qZA(),c.TgZ(71,"span",19),c._uU(72),c.qZA(),c.qZA(),c.TgZ(73,"li",17),c.TgZ(74,"span",18),c._uU(75),c.qZA(),c.TgZ(76,"span",19),c._uU(77),c.qZA(),c.qZA(),c.TgZ(78,"li",17),c.TgZ(79,"span",18),c._uU(80),c.qZA(),c.TgZ(81,"span",19),c._uU(82),c.qZA(),c.qZA(),c.TgZ(83,"li",17),c.TgZ(84,"span",18),c._uU(85),c.qZA(),c.TgZ(86,"span",19),c._uU(87),c.qZA(),c.qZA(),c.TgZ(88,"li",17),c.TgZ(89,"span",18),c._uU(90),c.qZA(),c.TgZ(91,"span",19),c._uU(92),c.qZA(),c.qZA(),c.TgZ(93,"li",17),c.TgZ(94,"span",18),c._uU(95),c.qZA(),c.TgZ(96,"span",19),c._uU(97),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(98,ml,26,3,"ng-template",null,20,c.W1O)),2&e&&(c.xp6(12),c.AsE(" ",t.overview.firstname," ",t.overview.lastname,""),c.xp6(3),c.hij(" ",t.overview.phone,""),c.xp6(3),c.AsE(" ",t.overview.address,", ",t.overview.city,""),c.xp6(3),c.hij(" ",t.overview.email,""),c.xp6(2),c.Q6J("ngIf",t.auth.has("prm_managers_deposit")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_withdrawal")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_deposit")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_rename")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_delete")),c.xp6(1),c.Q6J("ngIf",(null==t.overview||null==t.overview.debts_per_manager?null:t.overview.debts_per_manager.length)>0),c.xp6(5),c.Oqu(t.tr.translate("global_username")),c.xp6(2),c.Oqu(t.overview.username),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_balance")),c.xp6(2),c.Oqu(c.xi3(41,38,t.overview.balance,t.config.siteConfig.site_currency)),c.xp6(4),c.Oqu(t.tr.translate("manager_overview_outstanding_debts")),c.xp6(2),c.Oqu(c.xi3(47,41,t.overview.debts,t.config.siteConfig.site_currency)),c.xp6(4),c.Oqu(t.tr.translate("managers_table_reward_points")),c.xp6(2),c.Oqu(t.overview.reward_points),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_owner")),c.xp6(2),c.Oqu(t.overview.parent_username),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_acl_group")),c.xp6(2),c.Oqu(t.overview.acl_group_name),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_status")),c.xp6(2),c.Oqu(t.overview.status),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_total_users")),c.xp6(2),c.Oqu(t.overview.users),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_active_users")),c.xp6(2),c.Oqu(t.overview.active_users),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_expired_users")),c.xp6(2),c.Oqu(t.overview.expired_users),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_submanagers")),c.xp6(2),c.Oqu(t.overview.submanagers),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_created_on")),c.xp6(2),c.Oqu(t.overview.created_at),c.xp6(3),c.Oqu(t.tr.translate("manager_overview_created_by")),c.xp6(2),c.Oqu(t.overview.created_by))},directives:[Q.O5,Q.sg,A._Y,A.JL,A.F,A.Fj,A.JJ,A.On],pipes:[Q.H9],styles:[".list-group-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;font-weight:normal}.list-group-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;float:right;direction:ltr}.user-photo-frame[_ngcontent-%COMP%]{width:100%;height:100%;border:1px solid #eee;background-size:contain;background-repeat:no-repeat;background-position:center}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.overview-button[_ngcontent-%COMP%]{width:150px;height:100px;font-size:14px;color:#fff;text-align:center;background:#6e84a7;cursor:pointer;border:1px solid #b4bcbf;padding-top:25px;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-width:150px;max-width:150px}.overview-button[_ngcontent-%COMP%]:hover{background:#1f64a7}.overview-button[_ngcontent-%COMP%]:active{background:#6e84a7}.image-cover[_ngcontent-%COMP%]{display:none;position:absolute;x:0;y:0;padding:0;maring:0px;width:100%;height:100%;background:rgba(255,255,255,.5);text-align:center}.user-photo-frame[_ngcontent-%COMP%]:hover   .image-cover[_ngcontent-%COMP%]{display:block}"]}),(0,g.gn)([(0,m.bH)()],_l.prototype,"blockUI",void 0);var bl=function(){var e=function(){function e(t,a){var i=this;o(this,e),this.route=t,this.tr=a,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("manager_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("manager_invoice_table_date")},{dataKey:"type",label:this.tr.translate("manager_invoice_table_type")},{dataKey:"amount",label:this.tr.translate("manager_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("manager_invoice_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_invoice_table_created_by")},{dataKey:"payment_method",label:this.tr.translate("manager_invoice_table_method")},{dataKey:"paid",label:this.tr.translate("manager_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(i.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerInvoices/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:i.tableColumns,useUrlFilter:!1})})}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-invoices"]],decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&c.YNc(0,vl,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function Zl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var yl=function(){var e=function(){function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("manager_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("manager_receipt_table_date")},{dataKey:"type",label:this.tr.translate("manager_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("manager_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("manager_receipt_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_receipt_table_created_by")}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerReceipts/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-receipts"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","onAction",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","onAction"],["receipts_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Zl,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function wl(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)}}var xl=function(){var e=function(){function e(t,a,i){var n=this;o(this,e),this.api=t,this.route=a,this.tr=i,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("manager_journal_table_date")},{dataKey:"cr",label:this.tr.translate("manager_journal_table_cr")},{dataKey:"dr",label:this.tr.translate("manager_journal_table_dr")},{dataKey:"amount",label:this.tr.translate("manager_journal_table_amount")},{dataKey:"balance",label:this.tr.translate("manager_journal_table_balance")},{dataKey:"operation",label:this.tr.translate("manager_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("manager_journal_table_description")}],this.modelViewConfig=null,this.route.params.subscribe(function(e){e.id&&(n.modelViewConfig={hasHeader:!1,dataUrl:"index/ManagerJournal/"+e.id,primaryKey:"id",sortBy:"created_at",direction:"desc",columns:n.tableColumns,useUrlFilter:!1})})}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-journal"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig"],["journal_model_view",""]],template:function(e,t){1&e&&c.YNc(0,wl,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function Al(e,t){if(1&e&&(c._UZ(0,"i",4),c._uU(1)),2&e){var a=c.oxw();c.xp6(1),c.hij(" ",a.tr.translate("managers_tab_overview"),"")}}function ql(e,t){if(1&e&&(c._UZ(0,"i",6),c._uU(1)),2&e){var a=c.oxw(2);c.xp6(1),c.hij(" ",a.tr.translate("managers_tab_edit"),"")}}function Tl(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,ql,2,1,"ng-template",2),c._UZ(2,"app-manager-form",5),c.qZA()),2&e&&(c.xp6(2),c.Q6J("hasHeader",!1))}function kl(e,t){if(1&e&&(c._UZ(0,"i",7),c._uU(1)),2&e){var a=c.oxw(2);c.xp6(1),c.hij(" ",a.tr.translate("managers_tab_invoices"),"")}}function Cl(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,kl,2,1,"ng-template",2),c._UZ(2,"app-manager-invoices"),c.qZA())}function Ul(e,t){if(1&e&&(c._UZ(0,"i",7),c._uU(1)),2&e){var a=c.oxw(2);c.xp6(1),c.hij(" ",a.tr.translate("managers_tab_payments"),"")}}function Ml(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Ul,2,1,"ng-template",2),c._UZ(2,"app-manager-receipts"),c.qZA())}function Fl(e,t){if(1&e&&(c._UZ(0,"i",7),c._uU(1)),2&e){var a=c.oxw(2);c.xp6(1),c.hij(" ",a.tr.translate("managers_tab_journal"),"")}}function Jl(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Fl,2,1,"ng-template",2),c._UZ(2,"app-manager-journal"),c.qZA())}var Ol=function(){var e=function(){function e(t,a){o(this,e),this.tr=t,this.auth=a}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-super-form"]],decls:10,vars:4,consts:[[1,"row"],[1,"col-md-12","mb-4"],["tabHeading",""],[4,"ngIf"],[1,"fa","fa-user"],[3,"hasHeader"],[1,"fa","fa-edit"],[1,"fa","fa-book"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"tabset"),c.TgZ(3,"tab"),c.YNc(4,Al,2,1,"ng-template",2),c._UZ(5,"app-manager-overview"),c.qZA(),c.YNc(6,Tl,3,1,"tab",3),c.YNc(7,Cl,3,0,"tab",3),c.YNc(8,Ml,3,0,"tab",3),c.YNc(9,Jl,3,0,"tab",3),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Q6J("ngIf",t.auth.has("prm_managers_update")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_invoice")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_receipt")),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_journal")))},directives:[N.AH,N.wW,N.y3,_l,Q.O5,Di,bl,yl,xl],styles:[""]}),e}(),Nl=n(70705),Il=["cards_model_view"];function Yl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",18,19),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}function Ql(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",20),c.TgZ(1,"div",13),c.TgZ(2,"span",14),c.TgZ(3,"p-inputNumber",21),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().change_owner_range_form.from_id=e}),c.qZA(),c.TgZ(4,"label",22),c._uU(5,"From Id"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Q6J("ngModel",i.change_owner_range_form.from_id)("min",i.range_info.range_start)("max",i.range_info.range_end-1)}}function Sl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",12),c.TgZ(1,"div",13),c.TgZ(2,"span",14),c.TgZ(3,"p-inputNumber",23),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().change_owner_range_form.to_id=e})("ngModelChange",function(){return c.CHM(a),c.oxw().rangeChanged()}),c.qZA(),c.TgZ(4,"label",24),c._uU(5,"To Id"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Q6J("ngModel",i.change_owner_range_form.to_id)("min",i.change_owner_range_form.from_id+1)("max",i.range_info.range_end)("disabled",i.change_owner_range_form.from_id<1)}}function Pl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",25),c.NdJ("click",function(){return c.CHM(a),c.oxw().change_owner_mode_advanced=!0}),c._uU(1,"[advanced]"),c.qZA()}}function Dl(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",25),c.NdJ("click",function(){return c.CHM(a),c.oxw().change_owner_mode_advanced=!1}),c._uU(1,"[simple]"),c.qZA()}}var Hl=function(){return{width:"40vw"}},Rl=function(){function e(t,a,i,n,r){o(this,e),this.router=t,this.toastr=a,this.api=i,this.swal=n,this.tr=r,this.change_owner_dialog_visible=!1,this.change_owner_range_dialog_visible=!1,this.selected_owner=null,this.change_owner_range_form={selected_owner:null,from_id:null,to_id:null},this.range_info={series:null,start:null,end:null,count:null},this.change_owner_mode_advanced=!1,this.columns=[{dataKey:"series_date",label:"Date Added",hidden:!0},{dataKey:"series",label:"Series",class:"href",classFn:function(e){return 1==e.suspended?"href series-suspended":"href"}},{dataKey:"type",label:"Type",dataResolver:function(e){return"1"==e?"Prepaid User":"Refill Card"}},{dataKey:"value",label:"Value"},{dataKey:"qty",label:"Quantity"},{dataKey:"used",label:"Used"},{dataKey:"username",label:"Owner",parentKey:"owner_details",sortBy:"owner"},{dataKey:"name",label:"Profile",parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"expiration",label:"Expiration"}],this.actions=[{name:"generate",label:"Generate",icon:"fa fa-plus",acl:"prm_cards_generate_refill"},{name:"verify",label:"Verify",icon:"fa fa-search"},{name:"queue",label:"Jobs Queue",icon:"fa fa-boxes",acl:"prm_cards_generate_refill"},{name:"",label:"",type:"separator"},{name:"list",label:"List",icon:"fa fa-list",requiresRow:!0,inline:!0,acl:"prm_cards_download"},{name:"download_csv",label:"Download (CSV)",icon:"fa fa-download",requiresRow:!0,inline:!0,acl:"prm_cards_download"},{name:"download_pdf",label:"Download (PDF)",icon:"fa fa-file",inline:!0,requiresRow:!0,acl:"prm_cards_download"},{name:"",label:"",type:"separator"},{name:"suspend",label:"Suspend",icon:"fa fa-pause",inline:!0,requiresRow:!0,acl:"prm_cards_suspend_release"},{name:"release",label:"Release",icon:"fa fa-play",inline:!0,requiresRow:!0,acl:"prm_cards_suspend_release"},{name:"",label:"",type:"separator"},{name:"change_owner",label:"Change Owner",icon:"fa fa-user",inline:!0,requiresRow:!0,acl:"prm_cards_change_owner"},{name:"change_owner_range",label:"Change Owner (Range)",icon:"fa fa-user",inline:!0,requiresRow:!0,acl:"prm_cards_change_owner_range"},{name:"delete",label:"Delete",icon:"fa fa-trash",inline:!0,requiresRow:!0,acl:"prm_cards_delete"},{name:"",label:"",type:"separator"},{name:"designer",label:"Card Designer",icon:"fa fa-pencil",inline:!1,requiresRow:!1,acl:"prm_cards_designer"}],this.filterFields=[{key:"parent_id",label:this.tr.translate("global_owner"),type:"select2",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")}]},{key:"type",label:this.tr.translate("global_type"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:0,label:"Refill Card"},{value:1,label:"Prepaid User"}]},{key:"profile_id",label:this.tr.translate("global_profile"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")}]}],this.filterOptions={parent_id:[],profile_id:[]},this.modelViewConfig=null,this.managers_list=[]}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Cards Systems",icon:"fa fa-credit-card",columns:this.columns,dataUrl:"index/series",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"series",allowSelect:!0,allowMultipleSelect:!0,modelName:"card",hasAdvancedFilter:!0,hasInlineActions:!0,sortBy:"series_date",direction:"desc",showRowsCount:!0},this.loadResources()}},{key:"onAction",value:function(e){var t=null;switch(e.row&&(t=e.row.series),e.action){case"generate":this.router.navigate(["cards/generate"]);break;case"queue":this.router.navigate(["cards/job/index"]);break;case"list":this.router.navigate(["cards/list/",t]);break;case"suspend":this.suspend(t);break;case"release":this.release(t);break;case"download_csv":this.download_csv(t);break;case"download_pdf":this.router.navigate(["cards/print",t]);break;case"delete":this.destroy();break;case"designer":this.router.navigate(["cards/designer"]);break;case"verify":this.router.navigate(["cards/verify"]);break;case"change_owner":this.showChangeOwner();break;case"change_owner_range":this.showChangeOnwerRnage(t)}}},{key:"onCellClicked",value:function(e){"series"==e.column&&this.router.navigate(["cards/list/",e.row.series])}},{key:"suspend",value:function(e){var t=this;this.blockUI.start("loading..."),this.api.get("series/suspend/"+e).subscribe(function(e){t.blockUI.stop(),200==e.status&&(t.toastr.success(e.message),t.modelView.reload())})}},{key:"release",value:function(e){var t=this;this.blockUI.start("loading..."),this.api.get("series/release/"+e).subscribe(function(e){t.blockUI.stop(),200==e.status&&(t.toastr.success(e.message),t.modelView.reload())})}},{key:"download_csv",value:function(e){var t=this;this.blockUI.start("loading..."),this.api.get("series/prepareDownload/"+e).subscribe(function(a){t.blockUI.stop(),200===a.status&&t.api.goto("series/download/"+a.data+"/"+e+".xlsx")})}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete Card Series",type:"warning",text:"Delete Selected Series ?",confirmButtonText:"Yes"}).subscribe(function(){var t=null;if(e.modelView.currentRow&&(t=e.modelView.currentRow.series),e.blockUI.start("loading..."),e.modelView.selectedRows().length>1){var a,n=[],o=i(e.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.series)}}catch(l){o.e(l)}finally{o.f()}e.api.post("series/bulkDelete",n).subscribe(function(t){e.blockUI.stop(),e.toastr.success("Card Series deleted"),e.modelView.reload()})}else e.api.get("series/delete/"+t).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.modelView.reload(),e.toastr.success("Card Series Deleted",""))})})}},{key:"showChangeOwner",value:function(){var e=this;this.selected_owner=null,this.blockUI.start(),this.api.get("index/manager").subscribe(function(t){e.blockUI.stop();var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.managers_list=n,e.change_owner_dialog_visible=!0})}},{key:"changeOwner",value:function(){var e=this;this.api.post("series/changeOwner",{series:this.modelView.currentRow.series,owner:this.selected_owner}).subscribe(function(t){e.change_owner_dialog_visible=!1,200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.error(e.tr.translate("msg_unknown_error"))})}},{key:"showChangeOnwerRnage",value:function(e){var t=this;this.change_owner_range_form.selected_owner=null,this.change_owner_range_form.series=e,this.change_owner_range_form.count=null,this.blockUI.start(),this.api.get("index/manager").subscribe(function(a){t.blockUI.stop();var n,o=[],r=i(a.data);try{for(r.s();!(n=r.n()).done;){var l=n.value;o.push({value:l.id,label:l.username})}}catch(s){r.e(s)}finally{r.f()}t.managers_list=o,t.api.get("series/rangeInfo/"+e).subscribe(function(e){200===e.status&&(t.range_info=e.data,t.change_owner_range_dialog_visible=!0)})})}},{key:"changeOwnerRange",value:function(){var e=this;this.api.post("series/changeOwnerRange",this.change_owner_range_form).subscribe(function(t){e.change_owner_range_dialog_visible=!1,200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()):e.toastr.error(e.tr.translate("msg_unknown_error"))})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")});var n,o=i(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.parent_id=a}),this.api.get("list/profile/0").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")}),200===t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filterOptions.profile_id=a)})}},{key:"rangeChanged",value:function(){this.change_owner_range_form.count=this.change_owner_range_form.to_id-this.change_owner_range_form.from_id,this.change_owner_range_form.count<0&&(this.change_owner_range_form.count=0)}},{key:"rangeCountChanged",value:function(){this.change_owner_range_form.from_id=this.range_info.range_start,this.change_owner_range_form.to_id=this.range_info.range_start+this.change_owner_range_form.count-1,console.log(this.change_owner_range_form)}}]),e}();Rl.\u0275fac=function(e){return new(e||Rl)(c.Y36(_.F0),c.Y36(v._W),c.Y36(Z),c.Y36(tt),c.Y36(I))},Rl.\u0275cmp=c.Xpm({type:Rl,selectors:[["app-cards-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Il,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:31,vars:36,consts:[["name","cards_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["header","Change Cards Owner",3,"visible","modal","visibleChange"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["appendTo","body",3,"options","autoDisplayFirst","placeholder","filter","ngModel","ngModelChange"],[1,"btn","btn-primary","float-right",3,"disabled","click"],[1,"btn","btn-secondary","float-right",3,"click"],["header","Change Cards Owner (Range)",3,"visible","modal","visibleChange"],[1,"mt-1","mb-1"],[1,"ui-g","ui-fluid","w-100","mt-2"],["class","ui-g ui-fluid w-100 mt-4",4,"ngIf"],["class","ui-g ui-fluid w-100 mt-4 w-100",4,"ngIf"],[1,"ui-g","ui-fluid","w-100","mt-4","w-100"],[1,"field"],[1,"p-float-label"],["id","count",3,"ngModel","max","disabled","ngModelChange"],["for","count"],["class","advanced-button btn float-left",3,"click",4,"ngIf"],["name","cards_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["cards_model_view",""],[1,"ui-g","ui-fluid","w-100","mt-4"],["id","range_start",3,"ngModel","min","max","ngModelChange"],["for","range_start"],["id","range_end",3,"ngModel","min","max","disabled","ngModelChange"],["for","range_end"],[1,"advanced-button","btn","float-left",3,"click"]],template:function(e,t){1&e&&(c.YNc(0,Yl,2,3,"model-table-view",0),c.TgZ(1,"p-dialog",1),c.NdJ("visibleChange",function(e){return t.change_owner_dialog_visible=e}),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"p-dropdown",4),c.NdJ("ngModelChange",function(e){return t.selected_owner=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"p-footer"),c.TgZ(6,"button",5),c.NdJ("click",function(){return t.changeOwner()}),c._uU(7),c.qZA(),c.TgZ(8,"button",6),c.NdJ("click",function(){return t.change_owner_dialog_visible=!1}),c._uU(9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"p-dialog",7),c.NdJ("visibleChange",function(e){return t.change_owner_range_dialog_visible=e}),c.TgZ(11,"h5",8),c._uU(12),c.qZA(),c.TgZ(13,"div",9),c.TgZ(14,"div",3),c.TgZ(15,"p-dropdown",4),c.NdJ("ngModelChange",function(e){return t.change_owner_range_form.selected_owner=e}),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,Ql,6,3,"div",10),c.YNc(17,Sl,6,4,"div",11),c.TgZ(18,"div",12),c.TgZ(19,"div",13),c.TgZ(20,"span",14),c.TgZ(21,"p-inputNumber",15),c.NdJ("ngModelChange",function(e){return t.change_owner_range_form.count=e})("ngModelChange",function(){return t.rangeCountChanged()}),c.qZA(),c.TgZ(22,"label",16),c._uU(23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"p-footer"),c.YNc(25,Pl,2,0,"a",17),c.YNc(26,Dl,2,0,"a",17),c.TgZ(27,"button",5),c.NdJ("click",function(){return t.changeOwnerRange()}),c._uU(28),c.qZA(),c.TgZ(29,"button",6),c.NdJ("click",function(){return t.change_owner_range_dialog_visible=!1}),c._uU(30),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Akn(c.DdM(34,Hl)),c.Q6J("visible",t.change_owner_dialog_visible)("modal",!1),c.xp6(3),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("placeholder","Select Manager")("filter",!0)("ngModel",t.selected_owner),c.xp6(2),c.Q6J("disabled",!t.selected_owner||t.selected_owner<1),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")),c.xp6(2),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(1),c.Akn(c.DdM(35,Hl)),c.Q6J("visible",t.change_owner_range_dialog_visible)("modal",!1),c.xp6(2),c.hij("Series: [",t.change_owner_range_form.series,"]"),c.xp6(3),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("placeholder","Select Manager")("filter",!0)("ngModel",t.change_owner_range_form.selected_owner),c.xp6(1),c.Q6J("ngIf",1==t.change_owner_mode_advanced),c.xp6(1),c.Q6J("ngIf",1==t.change_owner_mode_advanced),c.xp6(4),c.Q6J("ngModel",t.change_owner_range_form.count)("max",t.range_info.range_length)("disabled",!0===t.change_owner_mode_advanced),c.xp6(2),c.hij("Count (max : ",t.range_info.range_length,")"),c.xp6(2),c.Q6J("ngIf",!t.change_owner_mode_advanced),c.xp6(1),c.Q6J("ngIf",t.change_owner_mode_advanced),c.xp6(1),c.Q6J("disabled",!t.change_owner_range_form.selected_owner||t.change_owner_range_form.selected_owner<1||t.change_owner_range_form.count<1||t.change_owner_range_form.count>t.range_info.range_length),c.xp6(1),c.Oqu(t.tr.translate("global_button_submit")),c.xp6(2),c.Oqu(t.tr.translate("global_button_dismiss")))},directives:[Q.O5,Oi.V,ya.Lt,A.JJ,A.On,Ci.$_,Nl.Rn,Tt],styles:[".series-suspended{background:#ffa2a3!important}p-inputNumber{width:100%}.p-inputnumber{width:100%}.advanced-button{color:#00f!important;text-decoration:underline!important;cursor:pointer}\n"],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Rl.prototype,"blockUI",void 0);var Vl=["generatorForm"];function Ll(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)})("submit",function(e){return c.CHM(a),c.oxw().generate(e)})("cancel",function(){return c.CHM(a),c.oxw().cancel()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var El=function(){function e(t,a,i,n,r,l,s){o(this,e),this.formLoader=t,this.api=a,this.toastr=i,this.router=n,this.auth=r,this.config=l,this.tr=s,this.formType=0,this.form_config_refill={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config_user={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config_service={layout:"horizontal",submitText:"Generate",fields:[],helpBlock:"hidden"},this.form_config=this.form_config_refill,this.options=[];var c=this.formLoader.getForm("cards_generator_refill_form"),u=this.formLoader.getForm("cards_generator_user_form"),d=this.formLoader.getForm("cards_generator_service_form");c[2].placeholder=this.config.siteConfig.site_currency,c[8].value=this.auth.client.id,u[10].value=this.auth.client.id,this.form_config_refill.fields=c,this.form_config_user.fields=u,this.form_config_service.fields=d,this.loadResources()}return l(e,[{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.owner=e.managers_list}),this.api.get("list/profile/4").subscribe(function(t){e.profiles_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.profiles_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.options.profile_id=e.profiles_list,e.options.refill_profile_id=[{value:null,label:"Any"}].concat(e.profiles_list)})}},{key:"ngOnInit",value:function(){}},{key:"onFormChange",value:function(e){this.formView.setFieldValue("type",this.formType),1==e.type&&(this.form_config=this.form_config_user),0==e.type&&(this.form_config=this.form_config_refill),2==e.type&&(this.form_config=this.form_config_service),0==e.type&&e.auto_activate&&1==e.auto_activate&&this.formView.showField("profile_id"),0==e.type&&!e.auto_activate&&this.formView.hideField("profile_id"),1==e.type&&1==e.password_username&&this.formView.hideField("password_size"),1==e.type&&0==e.password_username&&this.formView.showField("password_size"),1==e.type&&1==e.use_fixed_password&&this.formView.showField("fixed_password"),1==e.type&&0==e.use_fixed_password&&this.formView.hideField("fixed_password"),1==e.type&&this.formView.showField("profile_id"),this.formType=e.type}},{key:"generate",value:function(e){var t=this;this.blockUI.start("Loading..."),this.api.post("card/generate",e.value).subscribe(function(e){t.blockUI.stop(),200===e.status?(t.toastr.success(t.tr.translate(e.message)),t.router.navigate(["cards/job/index"])):t.toastr.warning(t.tr.translate(e.message))})}}]),e}();El.\u0275fac=function(e){return new(e||El)(c.Y36(ki),c.Y36(Z),c.Y36(v._W),c.Y36(_.F0),c.Y36(w),c.Y36(p),c.Y36(I))},El.\u0275cmp=c.Xpm({type:El,selectors:[["app-cards-generator"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Vl,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"row"],[1,"col"],["name","generatorForm",3,"formConfig","options","formChanged","submit","cancel",4,"ngIf"],["name","generatorForm",3,"formConfig","options","formChanged","submit","cancel"],["generatorForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Cards Generator "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Ll,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[""]}),(0,g.gn)([(0,m.bH)()],El.prototype,"blockUI",void 0);var Kl=["cards_list_model_view"];function Bl(e,t){if(1&e&&c._UZ(0,"model-table-view",7,8),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)}}var jl=function(){var e=function(){function e(t,a,i,n){o(this,e),this.route=t,this.routers=a,this.api=i,this.config=n,this.columns=[{dataKey:"id",label:"ID"},{dataKey:"serialnumber",label:"Serial Number"},{dataKey:"pin",label:"PIN"},{dataKey:"username",label:"Username"},{dataKey:"password",label:"Password"},{dataKey:"used_at",label:"Used At"},{dataKey:"username",label:"Used By (User)",parentKey:"user_details"},{dataKey:"username",label:"Used By (Manager)",parentKey:"manager_details"}],this.modelViewConfig=null,this.seriesData={expiration:"",series:"",created_by:"",created_at:"",value:"",owner:""}}return l(e,[{key:"initTable",value:function(e){this.modelViewConfig={title:"Cards List",icon:"fa fa-credit-card",columns:this.columns,dataUrl:"index/card/"+e,page:1,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!1,allowMultipleSelect:!1,modelName:"card",hasAdvancedFilter:!1,hasInlineActions:!1,sortBy:"id",direction:"asc"}}},{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.series&&(e.loadSeriesData(t.series),e.initTable(t.series))})}},{key:"loadSeriesData",value:function(e){var t=this;this.api.get("cards/series/"+e).subscribe(function(e){t.seriesData=e.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.gz),c.Y36(_.F0),c.Y36(Z),c.Y36(p))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-cards-list"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Kl,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:34,vars:8,consts:[[1,"card"],[1,"card-body","py-0","px-4","b-t-l"],[1,"row"],[1,"col","b-r-1","py-3"],[1,"text-muted"],[1,"font-weight-bold"],["name","card_list_model_view",3,"modelViewConfig",4,"ngIf"],["name","card_list_model_view",3,"modelViewConfig"],["card_list_model_view",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c._uU(5,"Series"),c.qZA(),c.TgZ(6,"div",5),c._uU(7),c.qZA(),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"div",4),c._uU(10,"Expiration"),c.qZA(),c.TgZ(11,"div",5),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"div",3),c.TgZ(14,"div",4),c._uU(15,"Value"),c.qZA(),c.TgZ(16,"div",5),c._uU(17),c.qZA(),c.qZA(),c.TgZ(18,"div",3),c.TgZ(19,"div",4),c._uU(20,"Owner"),c.qZA(),c.TgZ(21,"div",5),c._uU(22),c.qZA(),c.qZA(),c.TgZ(23,"div",3),c.TgZ(24,"div",4),c._uU(25,"Created By"),c.qZA(),c.TgZ(26,"div",5),c._uU(27),c.qZA(),c.qZA(),c.TgZ(28,"div",3),c.TgZ(29,"div",4),c._uU(30,"Created At"),c.qZA(),c.TgZ(31,"div",5),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(33,Bl,2,1,"model-table-view",6)),2&e&&(c.xp6(7),c.Oqu(t.seriesData.series),c.xp6(5),c.Oqu(t.seriesData.expiration),c.xp6(5),c.AsE("",t.config.siteConfig.site_currency," ",t.seriesData.value,""),c.xp6(5),c.Oqu(t.seriesData.owner),c.xp6(5),c.Oqu(t.seriesData.created_by),c.xp6(5),c.Oqu(t.seriesData.created_at),c.xp6(1),c.Q6J("ngIf",t.modelViewConfig))},directives:[Q.O5,Tt],styles:[""]}),e}(),zl=n(70529),Gl=function(e,t,a){return{"font-size":e,"font-family":t,color:a}},Wl=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-card-designer-item"]],inputs:{uuid:"uuid",itemData:"itemData",fontWeight:"fontWeight"},decls:2,vars:6,consts:[[3,"ngStyle"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1),c.qZA()),2&e&&(c.Q6J("ngStyle",c.kEZ(2,Gl,t.itemData.fontSize+"px",t.itemData.fontFamily,t.itemData.fontColor)),c.xp6(1),c.hij(" ",t.itemData.sampleValue,"\n"))},directives:[Q.PC],styles:[""]}),e}();function $l(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",28),c.NdJ("onDragStart",function(e){var t=c.CHM(a).$implicit;return c.oxw().dragStarted(e,t)}),c._UZ(1,"i",29),c._uU(2),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.hij(" ",i.label," ")}}var Xl=function(e){return{"sas-card-dropped-item-selected":e}};function es(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"app-card-designer-item",30),c.NdJ("click",function(e){var t=c.CHM(a).$implicit;return c.oxw().selectObject(t,e)})("onDragStart",function(e){var t=c.CHM(a).$implicit;return c.oxw().dragStarted(e,t)})("onDragEnd",function(e){var t=c.CHM(a).$implicit;return c.oxw().dragEnded(e,t)}),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.Udp("left",i.X,"px")("top",i.Y,"px"),c.s9C("id",i.uuid),c.Q6J("itemData",i)("ngClass",c.VKq(7,Xl,n.selectedObject.uuid==i.uuid))}}function ts(e,t){if(1&e&&(c.TgZ(0,"option",31),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function as(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",32),c.NdJ("click",function(){return c.CHM(a),c.oxw().save()}),c._uU(1,"Save"),c.qZA()}}function is(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",33),c.NdJ("click",function(){return c.CHM(a),c.oxw().destroy()}),c._uU(1,"Delete"),c.qZA()}}function ns(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div"),c.TgZ(1,"div",14),c.TgZ(2,"h4"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",14),c.TgZ(5,"label"),c._uU(6,"Sample Text"),c.qZA(),c.TgZ(7,"input",34,35),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(8),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"sampleValue",e.value)}),c.qZA(),c.qZA(),c.TgZ(9,"div",14),c.TgZ(10,"label"),c._uU(11,"Font Size"),c.qZA(),c.TgZ(12,"input",36,37),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(13),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"fontSize",e.value)}),c.qZA(),c.qZA(),c.TgZ(14,"div",14),c.TgZ(15,"label"),c._uU(16,"Font Family"),c.qZA(),c.TgZ(17,"select",38,39),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(18),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"fontFamily",e.value)}),c.TgZ(19,"option",40),c._uU(20,"Arial"),c.qZA(),c.TgZ(21,"option",41),c._uU(22,"Sans Serif"),c.qZA(),c.TgZ(23,"option",42),c._uU(24,"Monospace"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",14),c.TgZ(26,"label"),c._uU(27,"Font Color"),c.qZA(),c.TgZ(28,"input",43,44),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(29),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"fontColor",e.value)}),c.qZA(),c.qZA(),c.TgZ(30,"div",14),c.TgZ(31,"label"),c._uU(32,"X"),c.qZA(),c.TgZ(33,"input",36,45),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(34),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"X",e.value)}),c.qZA(),c.qZA(),c.TgZ(35,"div",14),c.TgZ(36,"label"),c._uU(37,"Y"),c.qZA(),c.TgZ(38,"input",36,46),c.NdJ("change",function(){c.CHM(a);var e=c.MAs(39),t=c.oxw();return t.updateObject(t.selectedObject.uuid,"Y",e.value)}),c.qZA(),c.qZA(),c.TgZ(40,"div",0),c.TgZ(41,"div",47),c._uU(42,"Apply"),c.qZA(),c.TgZ(43,"div",48),c.NdJ("click",function(){c.CHM(a);var e=c.oxw();return e.deleteItem(e.selectedObject.uuid)}),c._uU(44,"Delete"),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Oqu(i.selectedObject.label),c.xp6(4),c.Q6J("value",i.selectedObject.sampleValue),c.xp6(5),c.Q6J("value",i.selectedObject.fontSize),c.xp6(5),c.Q6J("value",i.selectedObject.fontFamily),c.xp6(11),c.Udp("height",35,"px"),c.Q6J("value",i.selectedObject.fontColor),c.xp6(5),c.Q6J("value",i.selectedObject.X),c.xp6(5),c.Q6J("value",i.selectedObject.Y)}}var os=function(e){return{"sas-card-object-selected":e}},rs=n(91704),ls=function(){var e=function(){function e(t,a,i,n){o(this,e),this.helper=t,this.swal=a,this.api=i,this.toastr=n,this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.designList=[],this.availableItems=[{name:"pin",label:"PIN Code",sampleValue:"X8918JKAJS721",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"expiration",label:"Expiration",sampleValue:"2020-12-31",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"serialnumber",label:"Serial Number",sampleValue:"20180121",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"username",label:"Username",sampleValue:"9187198",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"password",label:"Password",sampleValue:"8891723",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"value",label:"Card Value",sampleValue:"150",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"series",label:"Series",sampleValue:"2018-0-1",fontSize:14,fontFamily:"arial",fontColor:"#000000"},{name:"label",label:"Label",sampleValue:"static text",fontSize:14,fontFamily:"arial",fontColor:"#000000"}],this.addedItems=[{uuid:"0",name:"canvas",width:400,height:300,backgroundImage:""}],this.properties_canvas={width:this.getCanvasWidth(),height:this.getCanvasHeight(),backgroundImage:""},this.selectedObject={},this.index()}return l(e,[{key:"selectObject",value:function(e,t){t.stopPropagation(),this.selectedObject=e}},{key:"getCanvasWidth",value:function(){var e,t=i(this.addedItems);try{for(t.s();!(e=t.n()).done;){var a=e.value;if("0"==a.uuid)return a.width}}catch(n){t.e(n)}finally{t.f()}}},{key:"getCanvasHeight",value:function(){var e,t=i(this.addedItems);try{for(t.s();!(e=t.n()).done;){var a=e.value;if("0"==a.uuid)return a.height}}catch(n){t.e(n)}finally{t.f()}}},{key:"updateObject",value:function(e,t,a){for(var i=0;i<this.addedItems.length;i++)if(this.addedItems[i].uuid==e){var n=this.addedItems[i];n[t]=a,this.addedItems[i]=n}}},{key:"trigerFileUpload",value:function(){rs("#file_chooser").trigger("click")}},{key:"backgroundChanged",value:function(e){var t=this;if(!(e[0].type.indexOf("image/")<0)){var a=new FileReader;a.readAsDataURL(e[0]),a.onload=function(e){t.properties_canvas.backgroundImage=a.result.toString(),t.updateObject("0","backgroundImage",a.result)}}}},{key:"itemDropped",value:function(e){if(!(rs(e.srcElement)[0].className.indexOf("sas-card-container")<0)){var t=this.draggedItem,a=e.offsetX,i=e.offsetY,n=this.helper.guid();t.uuid&&t.uuid.length>2&&(n=t.uuid,this.deleteItem(t.uuid)),t.uuid=n,t.X=a,t.Y=i,this.addedItems.push(this.draggedItem)}}},{key:"deleteItem",value:function(e){var t,a=0,n=-1,o=i(this.addedItems);try{for(o.s();!(t=o.n()).done;){t.value.uuid==e?n=a:a++}}catch(r){o.e(r)}finally{o.f()}n>-1&&this.addedItems.splice(n,1),this.selectedObject.uuid==e&&(this.selectedObject={uuid:"0"})}},{key:"dragStarted",value:function(e,t){console.log(e),console.log(t),this.draggedItem=t,t.uuid&&rs("#"+t.uuid).css("opacity","0.3")}},{key:"dragEnded",value:function(e,t){t.uuid&&rs("#"+t.uuid).css("opacity","1.0")}},{key:"save",value:function(){var e=this;-1==this.cardDesign.id?this.swal.prompt("Enter Template Name").subscribe(function(t){e.cardDesign.name=t,e.cardDesign.items=e.addedItems,e.api.post("cardDesign",e.cardDesign).subscribe(function(t){if(200==t.status){var a=t.id;e.toastr.success(t.message),e.designList.push({id:a,name:e.cardDesign.name}),e.cardDesign.id=a}})}):this.api.put("cardDesign/"+this.cardDesign.id.toString(),this.cardDesign).subscribe(function(e){})}},{key:"index",value:function(){var e=this;this.api.get("cardDesign").subscribe(function(t){e.designList=t.data})}},{key:"load",value:function(e){var t=this;-1==e?this.clear():this.api.get("cardDesign/"+e.toString()).subscribe(function(e){e=e.data,t.clear(),t.cardDesign.id=e.id,t.cardDesign.name=e.name,t.cardDesign.is_public=e.public,t.cardDesign.items=e.design_data,t.addedItems=e.design_data,t.properties_canvas.backgroundImage=e.design_data[0].backgroundImage,t.properties_canvas.width=e.design_data[0].width,t.properties_canvas.height=e.design_data[0].height})}},{key:"clear",value:function(){this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.addedItems=[{uuid:"0",name:"canvas",width:400,height:300,backgroundImage:""}],this.selectedObject={},rs(".sas-card-container").css("background","")}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete Card Design",type:"warning",text:"Delete Selected Design ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.delete("cardDesign/"+e.cardDesign.id.toString()).subscribe(function(t){200===t.status&&(e.clear(),e.index())})})}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(y),c.Y36(tt),c.Y36(Z),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-cards-designer"]],decls:58,vars:20,consts:[[1,"row"],[1,"col","col-md-3","col-lg-2"],[1,"card"],[1,"card-header"],[1,"fa","fa-wrench"],[1,"card-body"],[1,"sas-card-item-list"],["class","sas-card-item","pDraggable","card",3,"onDragStart",4,"ngFor","ngForOf"],[1,"col"],[1,"fa","fa-pencil"],[1,"sas-card-container-background"],["pDroppable","card",1,"sas-card-container",3,"ngClass","onDrop","click"],["class","sas-card-dropped_item","pDraggable","card",3,"left","top","itemData","id","ngClass","click","onDragStart","onDragEnd",4,"ngFor","ngForOf"],[1,"col","col-md-3"],[1,"form-group"],["name","designId",1,"form-control",3,"ngModel","ngModelChange","change"],["designId",""],["value","-1"],[3,"value",4,"ngFor","ngForOf"],["class","col btn btn-sm btn-primary",3,"click",4,"ngIf"],["class","col btn btn-sm btn-danger",3,"click",4,"ngIf"],["id","canvas",3,"hidden"],["type","number",1,"form-control",3,"ngModel","ngModelChange","change"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-image"],["type","file","id","file_chooser",1,"form-control",2,"display","none",3,"change"],[3,"ngModel","ngModelChange"],[4,"ngIf"],["pDraggable","card",1,"sas-card-item",3,"onDragStart"],[1,"fa","fa-thumb-tack"],["pDraggable","card",1,"sas-card-dropped_item",3,"itemData","id","ngClass","click","onDragStart","onDragEnd"],[3,"value"],[1,"col","btn","btn-sm","btn-primary",3,"click"],[1,"col","btn","btn-sm","btn-danger",3,"click"],["type","text",1,"form-control",3,"value","change"],["sampleValue",""],["type","number",1,"form-control",3,"value","change"],["fontSize",""],[1,"form-control",3,"value","change"],["fontFamily",""],["value","arial"],["value","sans-serif"],["value","monospace"],["type","color",1,"form-control",3,"value","change"],["fontColor",""],["labelX",""],["labelY",""],[1,"col","btn","btn-primary"],[1,"col","btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5," Tools "),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.YNc(8,$l,3,1,"div",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"div",2),c.TgZ(11,"div",3),c._UZ(12,"i",9),c._uU(13," Card Designer "),c.qZA(),c.TgZ(14,"div",10),c.TgZ(15,"div",0),c.TgZ(16,"div",8),c.TgZ(17,"div",11),c.NdJ("onDrop",function(e){return t.itemDropped(e)})("click",function(e){return t.selectObject({uuid:"0"},e)}),c.YNc(18,es,1,9,"app-card-designer-item",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",13),c.TgZ(20,"div",2),c.TgZ(21,"div",3),c._UZ(22,"i",4),c._uU(23," Properties "),c.qZA(),c.TgZ(24,"div",5),c.TgZ(25,"div",14),c.TgZ(26,"label"),c._uU(27,"Template Name"),c.qZA(),c.TgZ(28,"select",15,16),c.NdJ("ngModelChange",function(e){return t.cardDesign.id=e})("change",function(){return t.load(t.cardDesign.id)}),c.TgZ(30,"option",17),c._uU(31,"New Design"),c.qZA(),c.YNc(32,ts,2,2,"option",18),c.qZA(),c.qZA(),c.TgZ(33,"div",0),c.YNc(34,as,2,0,"div",19),c.YNc(35,is,2,0,"div",20),c.qZA(),c._UZ(36,"hr"),c.TgZ(37,"div",21),c.TgZ(38,"div",14),c.TgZ(39,"label"),c._uU(40,"Width (px)"),c.qZA(),c.TgZ(41,"input",22),c.NdJ("ngModelChange",function(e){return t.properties_canvas.width=e})("change",function(){return t.updateObject("0","width",t.properties_canvas.width)}),c.qZA(),c.qZA(),c.TgZ(42,"div",14),c.TgZ(43,"label"),c._uU(44,"Height (px)"),c.qZA(),c.TgZ(45,"input",22),c.NdJ("ngModelChange",function(e){return t.properties_canvas.height=e})("change",function(){return t.updateObject("0","height",t.properties_canvas.height)}),c.qZA(),c.qZA(),c.TgZ(46,"div",14),c.TgZ(47,"label"),c._uU(48,"Background Image"),c.qZA(),c.TgZ(49,"button",23),c.NdJ("click",function(){return t.trigerFileUpload()}),c._UZ(50,"i",24),c._uU(51," Select File"),c.qZA(),c.TgZ(52,"input",25),c.NdJ("change",function(e){return t.backgroundChanged(e.target.files)}),c.qZA(),c.qZA(),c.TgZ(53,"div",14),c.TgZ(54,"label"),c._uU(55,"Public Design"),c.qZA(),c.TgZ(56,"p-inputSwitch",26),c.NdJ("ngModelChange",function(e){return t.cardDesign.is_public=e}),c.qZA(),c.qZA(),c.qZA(),c.YNc(57,ns,45,9,"div",27),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngForOf",t.availableItems),c.xp6(9),c.Udp("width",t.getCanvasWidth(),"px")("height",t.getCanvasHeight(),"px")("background","url("+t.properties_canvas.backgroundImage+")"),c.Q6J("ngClass",c.VKq(18,os,"canvas"==t.selectedObject)),c.xp6(1),c.Q6J("ngForOf",t.addedItems),c.xp6(10),c.Q6J("ngModel",t.cardDesign.id),c.xp6(4),c.Q6J("ngForOf",t.designList),c.xp6(2),c.Q6J("ngIf",t.addedItems.length>1),c.xp6(1),c.Q6J("ngIf",-1!=t.cardDesign.id),c.xp6(2),c.Q6J("hidden","0"!=t.selectedObject.uuid),c.xp6(4),c.Q6J("ngModel",t.properties_canvas.width),c.xp6(4),c.Q6J("ngModel",t.properties_canvas.height),c.xp6(11),c.Q6J("ngModel",t.cardDesign.is_public),c.xp6(1),c.Q6J("ngIf",t.selectedObject.uuid&&t.selectedObject.uuid.length>5))},directives:[Q.sg,zl.bK,Q.mk,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.O5,A.wV,A.Fj,Da.Ql,zl._l,Wl],styles:[".sas-card-container-background{padding:20px;box-sizing:border-box;background-color:#dfdbe5;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")}.sas-card-container{margin:auto;border:1px solid grey;background-color:#fff;background-repeat:no-repeat!important;position:relative;box-sizing:border-box;background-size:100% 100%!important}.sas-card-object-selected{border:1px dashed #ea4c89}.sas-card-item{border:1px solid #979097;border-radius:5px;padding:5px;margin-top:5px;margin-left:5px;font-size:12px;box-sizing:border-box}.sas-card-item:hover{border:2px solid #ea4c89}.sas-card-dropped_item{position:absolute}.sas-card-dropped-item-selected{border:1px solid #ea4c89!important}.sas-card-dropped_item:hover{border:1px dashed #e89ebc;box-sizing:border-box}\n"],encapsulation:2}),e}(),ss=n(92159),cs=n(60056);function us(e,t){if(1&e&&c._UZ(0,"img",20),2&e){var a=c.oxw();c.Q6J("src",a.previewPageImage,c.LSH)}}function ds(e,t){1&e&&(c.TgZ(0,"option",21),c._uU(1,"New Design"),c.qZA())}function fs(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function ps(e,t){if(1&e&&(c.TgZ(0,"option",22),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a),c.xp6(1),c.Oqu(a)}}function gs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"label"),c._uU(2,"Show Cutting Marks"),c.qZA(),c.TgZ(3,"p-inputSwitch",23),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().pageConfig.showCuttingMarks=e})("change",function(){return c.CHM(a),c.oxw().renderSamplePage()}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.Q6J("ngModel",i.pageConfig.showCuttingMarks)}}function hs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"label"),c._uU(2),c.qZA(),c.TgZ(3,"input",24,25),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().pageConfig.sizeRatio=e})("change",function(){return c.CHM(a),c.oxw().renderSamplePage()}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.hij("Size Ratio (",i.pageConfig.sizeRatio,"%)"),c.xp6(1),c.Q6J("ngModel",i.pageConfig.sizeRatio)}}function ms(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",0),c.TgZ(1,"div",26),c.NdJ("click",function(){return c.CHM(a),c.oxw().generatePDF()}),c._uU(2,"Download"),c.qZA(),c.qZA()}}var _s=function(){function e(t,a,i,n){o(this,e),this.api=t,this.router=a,this.route=i,this.auth=n,this.series="",this.pageFormats=["a4","letter"],this.designList=[],this.cardDesign={id:-1,name:"",items:[],is_public:!1},this.cardWidth=400,this.cardHeight=300,this.backgroundImage="",this.cardList=[],this.pageSize=[],this.pageConfig={size:"a4",orientation:"portrait",design_id:-2,sizeRatio:100,showCuttingMarks:!0},this.previewPage={width:100,height:100},this.pageSize.a4={width:595.28,height:841.89},this.pageSize.letter={width:612,height:1008}}return l(e,[{key:"updatePreviewPage",value:function(){var e=this.pageConfig.size;this.previewPage.width=1.25*this.pageSize[e].width,this.previewPage.height=1.25*this.pageSize[e].height}},{key:"ngOnInit",value:function(){var e=this;this.loadDesignList(),this.route.params.subscribe(function(t){t.series&&(e.loadSeries(t.series),e.series=t.series)}),this.updatePreviewPage()}},{key:"loadDesignList",value:function(){var e=this;this.api.get("cardDesign").subscribe(function(t){e.designList=t.data})}},{key:"loadDesign",value:function(e){var t=this;-1==e?this.router.navigate(["cards/designer"]):(this.blockUI.start("loading..."),this.api.get("cardDesign/"+e.toString()).subscribe(function(e){t.blockUI.stop(),t.cardDesign.id=(e=e.data).id,t.cardDesign.name=e.name,t.cardDesign.items=e.design_data,t.backgroundImage=e.design_data[0].backgroundImage,t.cardWidth=e.design_data[0].width,t.cardHeight=e.design_data[0].height,t.renderSamplePage()}))}},{key:"loadSeries",value:function(e){var t=this;this.cardList=[],this.api.get("series/all/"+e).subscribe(function(e){200==e.status&&(t.cardList=e.data)})}},{key:"addCardToPdf",value:function(e,t,a,i){var n=this;this.renderCard(this.cardList[t]).subscribe(function(o){var r=n.pageConfig.sizeRatio/100,l=.75*n.cardWidth*r,s=.75*n.cardHeight*r;e.addImage(o,"JPEG",a,i,l,s),n.pageConfig.showCuttingMarks&&(n.jsPdfDottedLine(e,a+l+7.5,i-7.5,a+l+7.5,i+s+15,5),n.jsPdfDottedLine(e,a-7.5,i+s+7.5,a+l+15,i+s+7.5,5)),t++,(a=a+l+15)+l>=595.28&&(a=15,(i=i+15+s)+s>=841.89&&t<n.cardList.length&&(e.addPage(),a=15,i=15)),t==n.cardList.length?(n.blockUI.stop(),e.save(n.series+".pdf")):n.addCardToPdf(e,t,a,i)})}},{key:"generatePDF",value:function(){this.blockUI.start("Generating PDF...");var e=new ss.kH("p","pt",this.pageConfig.size);e.setFillColor(180,180,180),this.addCardToPdf(e,0,15,15)}},{key:"renderCard",value:function(e){var t=this;return new cs.Observable(function(a){var n=document.createElement("canvas");n.width=t.cardWidth,n.height=t.cardHeight;var o=n.getContext("2d"),r=document.createElement("img");r.setAttribute("id","cardImage"),r.src=t.backgroundImage;var l=t;r.onload=function(t){o.drawImage(r,0,0,r.width,r.height,0,0,n.width,n.height),o.textBaseline="top";var s,c=i(l.cardDesign.items);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(0!=u.uuid){o.font=u.fontSize.toString()+"px "+u.fontFamily,o.fillStyle=u.fontColor;var d,f=u.name;d="label"===u.name?u.sampleValue:e[f],o.fillText(d,parseInt(u.X),parseInt(u.Y)+1)}}}catch(g){c.e(g)}finally{c.f()}var p=n.toDataURL("image/jpeg");a.next(p)}})}},{key:"renderSamplePage",value:function(){var e=this,t=this.pageConfig.size,a=document.createElement("img");a.setAttribute("id","previewImage");var i=document.createElement("canvas");i.setAttribute("id","previewCanvas"),i.width=1.3333333*this.pageSize[t].width,i.height=1.3333333*this.pageSize[t].height;var n=i.getContext("2d");this.renderCard(this.cardList[0]).subscribe(function(t){a.src=t;var o=e;a.onload=function(){a.width=a.width*(o.pageConfig.sizeRatio/100),a.height=a.height*(o.pageConfig.sizeRatio/100);var e=!1,t=20,r=20;for(n.fillStyle="#aaaaaa",n.setLineDash([5,20]);!e;)n.drawImage(a,t,r,a.width,a.height),o.pageConfig.showCuttingMarks&&(n.beginPath(),n.moveTo(t+10+a.width,r-10),n.lineTo(t+10+a.width,r+a.height+20),n.stroke(),n.beginPath(),n.moveTo(t-10,r+a.height+10),n.lineTo(t+a.width+20,r+a.height+10),n.stroke()),(t+=20+a.width)+a.width>=i.width&&(t=20,(r+=20+a.height)+a.height>=i.height&&(e=!0));o.previewPageImage=i.toDataURL()}})}},{key:"jsPdfDottedLine",value:function(e,t,a,i,n,o){for(var r=Math.abs(i-t),l=Math.abs(n-a),s=Math.sqrt(Math.pow(r,2)+Math.pow(l,2)),c=s/o,u=Math.floor(c)%2==0?s/Math.ceil(c):s/Math.floor(c),d=u*(r/s),f=u*(l/s),p=t,g=a;p<=i&&g<=n;)e.line(p,g,p+d,g+f),p+=2*d,g+=2*f}}]),e}();_s.\u0275fac=function(e){return new(e||_s)(c.Y36(Z),c.Y36(_.F0),c.Y36(_.gz),c.Y36(w))},_s.\u0275cmp=c.Xpm({type:_s,selectors:[["app-cards-printer"]],decls:32,vars:9,consts:[[1,"row"],[1,"col-md-9"],[1,"card"],[1,"card-header"],[1,"fa","fa-eye"],[1,"card-body","sas-card-preview-page"],[2,"margin-left","auto","margin-right","auto","background","white"],["style","width:100%",3,"src",4,"ngIf"],[1,"col-md-3"],[1,"fa","fa-wrench"],[1,"card-body"],[1,"form-group"],["name","design_id",1,"form-control",3,"ngModel","ngModelChange","change"],["design_id",""],["value","-1",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["name","pageSize",1,"form-control",3,"ngModel","ngModelChange","change"],["pageSize",""],["class","form-group",4,"ngIf"],["class","row",4,"ngIf"],[2,"width","100%",3,"src"],["value","-1"],[3,"value"],[3,"ngModel","ngModelChange","change"],["type","range","min","1","max","100","name","sizeRatio",1,"form-control",3,"ngModel","ngModelChange","change"],["sizeRatio",""],[1,"col","btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5," Preview "),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.YNc(8,us,1,1,"img",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"div",2),c.TgZ(11,"div",3),c._UZ(12,"i",9),c._uU(13," Properties "),c.qZA(),c.TgZ(14,"div",10),c.TgZ(15,"div"),c.TgZ(16,"div",11),c.TgZ(17,"label"),c._uU(18,"Design Template"),c.qZA(),c.TgZ(19,"select",12,13),c.NdJ("ngModelChange",function(e){return t.pageConfig.design_id=e})("change",function(){return t.loadDesign(t.pageConfig.design_id)}),c.YNc(21,ds,2,0,"option",14),c.YNc(22,fs,2,2,"option",15),c.qZA(),c.qZA(),c.TgZ(23,"div",11),c.TgZ(24,"label"),c._uU(25,"Page Size"),c.qZA(),c.TgZ(26,"select",16,17),c.NdJ("ngModelChange",function(e){return t.pageConfig.size=e})("change",function(){return t.updatePreviewPage()}),c.YNc(28,ps,2,2,"option",15),c.qZA(),c.qZA(),c.YNc(29,gs,4,1,"div",18),c.YNc(30,hs,5,2,"div",18),c.YNc(31,ms,3,0,"div",19),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngIf",t.previewPageImage&&t.previewPageImage.length>100),c.xp6(11),c.Q6J("ngModel",t.pageConfig.design_id),c.xp6(2),c.Q6J("ngIf",t.auth.has("prm_cards_designer")),c.xp6(1),c.Q6J("ngForOf",t.designList),c.xp6(4),c.Q6J("ngModel",t.pageConfig.size),c.xp6(2),c.Q6J("ngForOf",t.pageFormats),c.xp6(1),c.Q6J("ngIf",t.pageConfig.design_id>-1&&t.cardList.length>0),c.xp6(1),c.Q6J("ngIf",t.pageConfig.design_id>-1&&t.cardList.length>0),c.xp6(1),c.Q6J("ngIf",t.cardList.length>0))},directives:[Q.O5,A.EJ,A.JJ,A.On,Q.sg,A.YN,A.Kr,Da.Ql,A.eT,A.Fj],styles:[".sas-card-container{margin:auto;border:1px solid grey;background-color:#fff;background-position:center!important;background-repeat:no-repeat!important;position:relative;background-size:100% 100%!important}.sas-card-dropped_item{position:absolute}.sas-card-preview-page{padding:20px;box-sizing:border-box;background-color:#dfdbe5;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4' viewBox='0 0 4 4'%3E%3Cpath fill='%239C92AC' fill-opacity='0.4' d='M1 3h1v1H1V3zm2-2h1v1H3V1z'%3E%3C/path%3E%3C/svg%3E\")}\n"],encapsulation:2}),(0,g.gn)([(0,m.bH)()],_s.prototype,"blockUI",void 0);var vs=["site_form"];function bs(e,t){if(1&e&&(c.TgZ(0,"option",28),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}var Zs=function(){return[]};function ys(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",29,30),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("cancel",function(){return c.CHM(a),c.oxw().destroy()})("formAction",function(e){return c.CHM(a),c.oxw().onFormAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",c.DdM(2,Zs))}}function ws(e,t){1&e&&(c.TgZ(0,"div",31),c._uU(1," No Records Found "),c.qZA())}function xs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"li",34),c._uU(1),c.TgZ(2,"span"),c.TgZ(3,"a",35),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).deletePPP(e.id)}),c._UZ(4,"i",36),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(1),c.hij(" ",i.service_name," ")}}function As(e,t){if(1&e&&(c.TgZ(0,"ul",32),c.YNc(1,xs,5,1,"li",33),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngForOf",a.allowed_ppp_list)}}var qs=function(){return{width:"400px"}},Ts=function(){function e(t,a,i,n,r,l,s,c){o(this,e),this.api=t,this.route=a,this.auth=i,this.swal=n,this.toastr=r,this.formLoader=l,this.confirmationService=s,this.tr=c,this.site_data={},this.site_list=[],this.selected_site_id=0,this.ppp_dialog_visible=!1,this.allowed_ppp_list=[],this.ppp_user_input="",this.form_config={layout:"vertical",submitText:"Save",cancelText:"Delete",fields:[],helpBlock:"hidden"},this.index(),this.form_config.fields=this.formLoader.getForm("settings_site_form")}return l(e,[{key:"ngOnInit",value:function(){this.load(this.selected_site_id),this.loadAllowedPPP(),this.auth.checkRoutePermission(this.route)}},{key:"index",value:function(){var e=this;this.blockUI.start("loading..."),this.api.get("site").subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.site_list=t.data)})}},{key:"onFormAction",value:function(e){var t=this;"ppp_service_editor"===e&&(this.ppp_dialog_visible=!0,this.ppp_user_input=""),"site_reset_background_image"===e&&this.api.get("site/resetBackgroundImage/"+this.selected_site_id).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}},{key:"create",value:function(){var e=this;this.swal.prompt("Site Name").subscribe(function(t){e.blockUI.start("loading..."),e.api.post("site",{name:t}).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.toastr.success(t.message),e.index()):e.toastr.error(t.message)})})}},{key:"load",value:function(e){var t=this;this.blockUI.start("loading..."),this.api.get("site/"+e.toString()).subscribe(function(a){t.blockUI.stop(),200===a.status&&(t.site_data=a.data,t.dynamicForm.setFormValue(t.site_data),t.selected_site_id=e,t.loadAllowedPPP())})}},{key:"save",value:function(e){var t=this,a=e.value;void 0!==a.login_background&&delete a.login_background,this.blockUI.start("loading..."),this.api.put("site/"+this.selected_site_id,a).subscribe(function(e){t.blockUI.stop(),200===e.status&&t.toastr.success(e.message)})}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete Site",type:"warning",text:"Delete Selected Site ?",confirmButtonText:"Yes"}).subscribe(function(){e.blockUI.start("loading..."),e.api.delete("site/"+e.selected_site_id).subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.index(),e.selected_site_id=null,e.toastr.success("Site Deleted",""))})})}},{key:"addPPP",value:function(){var e=this;this.ppp_user_input.length<1||this.api.post("site/ppp",{site_id:this.selected_site_id,service_name:this.ppp_user_input}).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.loadAllowedPPP(),e.ppp_user_input="")})}},{key:"deletePPP",value:function(e){var t=this;this.confirmationService.confirm({message:"Delete selected service?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){t.api.delete("site/ppp/"+e).subscribe(function(e){t.toastr.success(t.tr.translate(e.message)),t.loadAllowedPPP()})}})}},{key:"loadAllowedPPP",value:function(){var e=this;this.api.get("site/ppp/"+this.selected_site_id).subscribe(function(t){200===t.status&&(e.allowed_ppp_list=t.data)})}}]),e}();Ts.\u0275fac=function(e){return new(e||Ts)(c.Y36(Z),c.Y36(_.gz),c.Y36(w),c.Y36(tt),c.Y36(v._W),c.Y36(ki),c.Y36(Ci.YP),c.Y36(I))},Ts.\u0275cmp=c.Xpm({type:Ts,selectors:[["app-site-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(vs,5),2&e)&&(c.iGM(a=c.CRH())&&(t.dynamicForm=a.first))},decls:39,vars:17,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"btn",3,"disabled","click"],[1,"fa","fa-trash"],[1,"col"],[1,"card",3,"hidden"],[1,"card-header"],[1,"fa","fa-building"],[1,"card-body"],["name","site_form",3,"formConfig","options","submit","cancel","formAction",4,"ngIf"],[3,"visible","modal","responsive","resizable","visibleChange"],[2,"width","100%"],[1,"input-group","mb-3"],["type","text","aria-describedby","button-addon2","placeholder","PPP service name","name","user_mac",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-secondary",3,"click"],[2,"width","100%","padding-bottom","1rem"],["style","padding:10px; text-align: center",4,"ngIf"],["class","list-group","style","width:100%;",4,"ngIf"],[3,"value"],["name","site_form",3,"formConfig","options","submit","cancel","formAction"],["site_form",""],[2,"padding","10px","text-align","center"],[1,"list-group",2,"width","100%"],["class","list-group-item d-flex list-group-item-action justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"list-group-item","d-flex","list-group-item-action","justify-content-between","align-items-center"],[3,"click"],[1,"fa","fa-times-circle","float-right","text-right"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.selected_site_id=e})("change",function(){return t.load(t.selected_site_id)}),c.TgZ(3,"option",3),c._uU(4,"Select Site"),c.qZA(),c.YNc(5,bs,2,2,"option",4),c.qZA(),c.qZA(),c.TgZ(6,"div",1),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"button",7),c.NdJ("click",function(){return t.create()}),c._UZ(10,"i",8),c.qZA(),c.TgZ(11,"button",9),c.NdJ("click",function(){return t.save(t.site_data)}),c._UZ(12,"i",10),c.qZA(),c.TgZ(13,"button",11),c.NdJ("click",function(){return t.destroy()}),c._UZ(14,"i",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(15,"hr"),c.TgZ(16,"div",0),c.TgZ(17,"div",13),c.TgZ(18,"div",14),c.TgZ(19,"div",15),c._UZ(20,"i",16),c._uU(21," Site Settings "),c.qZA(),c.TgZ(22,"div",17),c.TgZ(23,"div",0),c.TgZ(24,"div",13),c.YNc(25,ys,2,3,"dynamic-form",18),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"p-dialog",19),c.NdJ("visibleChange",function(e){return t.ppp_dialog_visible=e}),c.TgZ(27,"p-header"),c._uU(28),c.qZA(),c.TgZ(29,"div",20),c.TgZ(30,"div",21),c.TgZ(31,"input",22),c.NdJ("ngModelChange",function(e){return t.ppp_user_input=e}),c.qZA(),c.TgZ(32,"div",23),c.TgZ(33,"button",24),c.NdJ("click",function(){return t.addPPP()}),c._UZ(34,"i",8),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"div",25),c.YNc(36,ws,2,0,"div",26),c.YNc(37,As,2,1,"ul",27),c.qZA(),c.qZA(),c._UZ(38,"p-confirmDialog")),2&e&&(c.xp6(2),c.Q6J("ngModel",t.selected_site_id),c.xp6(3),c.Q6J("ngForOf",t.site_list),c.xp6(6),c.Q6J("hidden",t.selected_site_id<0),c.xp6(2),c.Q6J("disabled",0===t.selected_site_id),c.xp6(5),c.Q6J("hidden",t.selected_site_id<0),c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(1),c.Akn(c.DdM(16,qs)),c.Q6J("visible",t.ppp_dialog_visible)("modal",!0)("responsive",!0)("resizable",!0),c.xp6(2),c.hij(" ",t.tr.translate("manager_ppp_dialog_title")," "),c.xp6(3),c.Q6J("ngModel",t.ppp_user_input),c.xp6(5),c.Q6J("ngIf",0===t.allowed_ppp_list.length),c.xp6(1),c.Q6J("ngIf",t.allowed_ppp_list.length>0))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Q.O5,Oi.V,Ci.h4,A.Fj,F.Q,qi],styles:[".actions-button[_ngcontent-%COMP%]{min-width:120px}.card-actions[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{cursor:pointer}@media (max-width:800px){.actions-button[_ngcontent-%COMP%]{display:none}}@media (max-width: 500px){.toolbar-row[_ngcontent-%COMP%]{display:none}}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],Ts.prototype,"blockUI",void 0);var ks=["syslog_model_view"];function Cs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterOptions",i.filterOptions)("advancedFilterFields",i.filterFields)}}var Us=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"event",label:this.tr.translate("report_syslog_event")},{dataKey:"username",label:this.tr.translate("global_manager"),parentKey:"manager_details",sortBy:"created_by"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"ip",label:this.tr.translate("global_ip")}],this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"event",label:this.tr.translate("report_syslog_event"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]}],this.filterOptions={manager_id:[],event:[]},this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("report_syslog_title"),icon:"fas fa-user-secret",columns:this.columns,dataUrl:"index/syslog",page:1,showSearchBox:!0,allowExport:!0,rowsPerPage:10,sortBy:"created_at",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"syslog",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:"All Managers"}),e.filterOptions.manager_id=n}),this.api.get("syslog/events").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.event,label:r.event})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:"All Events"}),e.filterOptions.event=n})}}]),e}();Us.\u0275fac=function(e){return new(e||Us)(c.Y36(Z),c.Y36(I))},Us.\u0275cmp=c.Xpm({type:Us,selectors:[["app-system-log"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(ks,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","syslog_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onDataLoading","onDataLoaded",4,"ngIf"],["name","syslog_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onDataLoading","onDataLoaded"],["syslog_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Cs,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Us.prototype,"blockUI",void 0);var Ms=["widgetForm"];function Fs(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function Js(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",20,21),c.NdJ("formChanged",function(e){return c.CHM(a),c.oxw().formChanged(e)})("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Os=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.formLoader=t,this.swal=a,this.api=i,this.toastr=n,this.tr=r,this.selectedItem=null,this.widgetList=[],this.widgetData={},this.form_config={layout:"vertical",submitText:"Save",fields:this.formLoader.getForm("widget_form"),helpBlock:"hidden"},this.options=[],this.iconsList=[{value:"fa fa-500px",label:"500px"},{value:"fa fa-accessible-icon",label:"accessible-icon"},{value:"fa fa-accusoft",label:"accusoft"},{value:"fa fa-address-book",label:"address-book"},{value:"fa fa-address-card",label:"address-card"},{value:"fa fa-adjust",label:"adjust"},{value:"fa fa-adn",label:"adn"},{value:"fa fa-adversal",label:"adversal"},{value:"fa fa-affiliatetheme",label:"affiliatetheme"},{value:"fa fa-algolia",label:"algolia"},{value:"fa fa-align-center",label:"align-center"},{value:"fa fa-align-justify",label:"align-justify"},{value:"fa fa-align-left",label:"align-left"},{value:"fa fa-align-right",label:"align-right"},{value:"fa fa-allergies",label:"allergies"},{value:"fa fa-amazon",label:"amazon"},{value:"fa fa-amazon-pay",label:"amazon-pay"},{value:"fa fa-ambulance",label:"ambulance"},{value:"fa fa-american-sign-language-interpreting",label:"american-sign-language-interpreting"},{value:"fa fa-amilia",label:"amilia"},{value:"fa fa-anchor",label:"anchor"},{value:"fa fa-android",label:"android"},{value:"fa fa-angellist",label:"angellist"},{value:"fa fa-angle-double-down",label:"angle-double-down"},{value:"fa fa-angle-double-left",label:"angle-double-left"},{value:"fa fa-angle-double-right",label:"angle-double-right"},{value:"fa fa-angle-double-up",label:"angle-double-up"},{value:"fa fa-angle-down",label:"angle-down"},{value:"fa fa-angle-left",label:"angle-left"},{value:"fa fa-angle-right",label:"angle-right"},{value:"fa fa-angle-up",label:"angle-up"},{value:"fa fa-angrycreative",label:"angrycreative"},{value:"fa fa-angular",label:"angular"},{value:"fa fa-app-store",label:"app-store"},{value:"fa fa-app-store-ios",label:"app-store-ios"},{value:"fa fa-apper",label:"apper"},{value:"fa fa-apple",label:"apple"},{value:"fa fa-apple-pay",label:"apple-pay"},{value:"fa fa-archive",label:"archive"},{value:"fa fa-arrow-alt-circle-down",label:"arrow-alt-circle-down"},{value:"fa fa-arrow-alt-circle-left",label:"arrow-alt-circle-left"},{value:"fa fa-arrow-alt-circle-right",label:"arrow-alt-circle-right"},{value:"fa fa-arrow-alt-circle-up",label:"arrow-alt-circle-up"},{value:"fa fa-arrow-circle-down",label:"arrow-circle-down"},{value:"fa fa-arrow-circle-left",label:"arrow-circle-left"},{value:"fa fa-arrow-circle-right",label:"arrow-circle-right"},{value:"fa fa-arrow-circle-up",label:"arrow-circle-up"},{value:"fa fa-arrow-down",label:"arrow-down"},{value:"fa fa-arrow-left",label:"arrow-left"},{value:"fa fa-arrow-right",label:"arrow-right"},{value:"fa fa-arrow-up",label:"arrow-up"},{value:"fa fa-arrows-alt",label:"arrows-alt"},{value:"fa fa-arrows-alt-h",label:"arrows-alt-h"},{value:"fa fa-arrows-alt-v",label:"arrows-alt-v"},{value:"fa fa-assistive-listening-systems",label:"assistive-listening-systems"},{value:"fa fa-asterisk",label:"asterisk"},{value:"fa fa-asymmetrik",label:"asymmetrik"},{value:"fa fa-at",label:"at"},{value:"fa fa-audible",label:"audible"},{value:"fa fa-audio-description",label:"audio-description"},{value:"fa fa-autoprefixer",label:"autoprefixer"},{value:"fa fa-avianex",label:"avianex"},{value:"fa fa-aviato",label:"aviato"},{value:"fa fa-aws",label:"aws"},{value:"fa fa-backward",label:"backward"},{value:"fa fa-balance-scale",label:"balance-scale"},{value:"fa fa-ban",label:"ban"},{value:"fa fa-band-aid",label:"band-aid"},{value:"fa fa-bandcamp",label:"bandcamp"},{value:"fa fa-barcode",label:"barcode"},{value:"fa fa-bars",label:"bars"},{value:"fa fa-baseball-ball",label:"baseball-ball"},{value:"fa fa-basketball-ball",label:"basketball-ball"},{value:"fa fa-bath",label:"bath"},{value:"fa fa-battery-empty",label:"battery-empty"},{value:"fa fa-battery-full",label:"battery-full"},{value:"fa fa-battery-half",label:"battery-half"},{value:"fa fa-battery-quarter",label:"battery-quarter"},{value:"fa fa-battery-three-quarters",label:"battery-three-quarters"},{value:"fa fa-bed",label:"bed"},{value:"fa fa-beer",label:"beer"},{value:"fa fa-behance",label:"behance"},{value:"fa fa-behance-square",label:"behance-square"},{value:"fa fa-bell",label:"bell"},{value:"fa fa-bell-slash",label:"bell-slash"},{value:"fa fa-bicycle",label:"bicycle"},{value:"fa fa-bimobject",label:"bimobject"},{value:"fa fa-binoculars",label:"binoculars"},{value:"fa fa-birthday-cake",label:"birthday-cake"},{value:"fa fa-bitbucket",label:"bitbucket"},{value:"fa fa-bitcoin",label:"bitcoin"},{value:"fa fa-bity",label:"bity"},{value:"fa fa-black-tie",label:"black-tie"},{value:"fa fa-blackberry",label:"blackberry"},{value:"fa fa-blind",label:"blind"},{value:"fa fa-blogger",label:"blogger"},{value:"fa fa-blogger-b",label:"blogger-b"},{value:"fa fa-bluetooth",label:"bluetooth"},{value:"fa fa-bluetooth-b",label:"bluetooth-b"},{value:"fa fa-bold",label:"bold"},{value:"fa fa-bolt",label:"bolt"},{value:"fa fa-bomb",label:"bomb"},{value:"fa fa-book",label:"book"},{value:"fa fa-bookmark",label:"bookmark"},{value:"fa fa-bowling-ball",label:"bowling-ball"},{value:"fa fa-box",label:"box"},{value:"fa fa-box-open",label:"box-open"},{value:"fa fa-boxes",label:"boxes"},{value:"fa fa-braille",label:"braille"},{value:"fa fa-briefcase",label:"briefcase"},{value:"fa fa-briefcase-medical",label:"briefcase-medical"},{value:"fa fa-btc",label:"btc"},{value:"fa fa-bug",label:"bug"},{value:"fa fa-building",label:"building"},{value:"fa fa-bullhorn",label:"bullhorn"},{value:"fa fa-bullseye",label:"bullseye"},{value:"fa fa-burn",label:"burn"},{value:"fa fa-buromobelexperte",label:"buromobelexperte"},{value:"fa fa-bus",label:"bus"},{value:"fa fa-buysellads",label:"buysellads"},{value:"fa fa-calculator",label:"calculator"},{value:"fa fa-calendar",label:"calendar"},{value:"fa fa-calendar-alt",label:"calendar-alt"},{value:"fa fa-calendar-check",label:"calendar-check"},{value:"fa fa-calendar-minus",label:"calendar-minus"},{value:"fa fa-calendar-plus",label:"calendar-plus"},{value:"fa fa-calendar-times",label:"calendar-times"},{value:"fa fa-camera",label:"camera"},{value:"fa fa-camera-retro",label:"camera-retro"},{value:"fa fa-capsules",label:"capsules"},{value:"fa fa-car",label:"car"},{value:"fa fa-caret-down",label:"caret-down"},{value:"fa fa-caret-left",label:"caret-left"},{value:"fa fa-caret-right",label:"caret-right"},{value:"fa fa-caret-square-down",label:"caret-square-down"},{value:"fa fa-caret-square-left",label:"caret-square-left"},{value:"fa fa-caret-square-right",label:"caret-square-right"},{value:"fa fa-caret-square-up",label:"caret-square-up"},{value:"fa fa-caret-up",label:"caret-up"},{value:"fa fa-cart-arrow-down",label:"cart-arrow-down"},{value:"fa fa-cart-plus",label:"cart-plus"},{value:"fa fa-cc-amazon-pay",label:"cc-amazon-pay"},{value:"fa fa-cc-amex",label:"cc-amex"},{value:"fa fa-cc-apple-pay",label:"cc-apple-pay"},{value:"fa fa-cc-diners-club",label:"cc-diners-club"},{value:"fa fa-cc-discover",label:"cc-discover"},{value:"fa fa-cc-jcb",label:"cc-jcb"},{value:"fa fa-cc-mastercard",label:"cc-mastercard"},{value:"fa fa-cc-paypal",label:"cc-paypal"},{value:"fa fa-cc-stripe",label:"cc-stripe"},{value:"fa fa-cc-visa",label:"cc-visa"},{value:"fa fa-centercode",label:"centercode"},{value:"fa fa-certificate",label:"certificate"},{value:"fa fa-chart-area",label:"chart-area"},{value:"fa fa-chart-bar",label:"chart-bar"},{value:"fa fa-chart-line",label:"chart-line"},{value:"fa fa-chart-pie",label:"chart-pie"},{value:"fa fa-check",label:"check"},{value:"fa fa-check-circle",label:"check-circle"},{value:"fa fa-check-square",label:"check-square"},{value:"fa fa-chess",label:"chess"},{value:"fa fa-chess-bishop",label:"chess-bishop"},{value:"fa fa-chess-board",label:"chess-board"},{value:"fa fa-chess-king",label:"chess-king"},{value:"fa fa-chess-knight",label:"chess-knight"},{value:"fa fa-chess-pawn",label:"chess-pawn"},{value:"fa fa-chess-queen",label:"chess-queen"},{value:"fa fa-chess-rook",label:"chess-rook"},{value:"fa fa-chevron-circle-down",label:"chevron-circle-down"},{value:"fa fa-chevron-circle-left",label:"chevron-circle-left"},{value:"fa fa-chevron-circle-right",label:"chevron-circle-right"},{value:"fa fa-chevron-circle-up",label:"chevron-circle-up"},{value:"fa fa-chevron-down",label:"chevron-down"},{value:"fa fa-chevron-left",label:"chevron-left"},{value:"fa fa-chevron-right",label:"chevron-right"},{value:"fa fa-chevron-up",label:"chevron-up"},{value:"fa fa-child",label:"child"},{value:"fa fa-chrome",label:"chrome"},{value:"fa fa-circle",label:"circle"},{value:"fa fa-circle-notch",label:"circle-notch"},{value:"fa fa-clipboard",label:"clipboard"},{value:"fa fa-clipboard-check",label:"clipboard-check"},{value:"fa fa-clipboard-list",label:"clipboard-list"},{value:"fa fa-clock",label:"clock"},{value:"fa fa-clone",label:"clone"},{value:"fa fa-closed-captioning",label:"closed-captioning"},{value:"fa fa-cloud",label:"cloud"},{value:"fa fa-cloud-download-alt",label:"cloud-download-alt"},{value:"fa fa-cloud-upload-alt",label:"cloud-upload-alt"},{value:"fa fa-cloudscale",label:"cloudscale"},{value:"fa fa-cloudsmith",label:"cloudsmith"},{value:"fa fa-cloudversify",label:"cloudversify"},{value:"fa fa-code",label:"code"},{value:"fa fa-code-branch",label:"code-branch"},{value:"fa fa-codepen",label:"codepen"},{value:"fa fa-codiepie",label:"codiepie"},{value:"fa fa-coffee",label:"coffee"},{value:"fa fa-cog",label:"cog"},{value:"fa fa-cogs",label:"cogs"},{value:"fa fa-columns",label:"columns"},{value:"fa fa-comment",label:"comment"},{value:"fa fa-comment-alt",label:"comment-alt"},{value:"fa fa-comment-dots",label:"comment-dots"},{value:"fa fa-comment-slash",label:"comment-slash"},{value:"fa fa-comments",label:"comments"},{value:"fa fa-compass",label:"compass"},{value:"fa fa-compress",label:"compress"},{value:"fa fa-connectdevelop",label:"connectdevelop"},{value:"fa fa-contao",label:"contao"},{value:"fa fa-copy",label:"copy"},{value:"fa fa-copyright",label:"copyright"},{value:"fa fa-couch",label:"couch"},{value:"fa fa-cpanel",label:"cpanel"},{value:"fa fa-creative-commons",label:"creative-commons"},{value:"fa fa-credit-card",label:"credit-card"},{value:"fa fa-crop",label:"crop"},{value:"fa fa-crosshairs",label:"crosshairs"},{value:"fa fa-css3",label:"css3"},{value:"fa fa-css3-alt",label:"css3-alt"},{value:"fa fa-cube",label:"cube"},{value:"fa fa-cubes",label:"cubes"},{value:"fa fa-cut",label:"cut"},{value:"fa fa-cuttlefish",label:"cuttlefish"},{value:"fa fa-d-and-d",label:"d-and-d"},{value:"fa fa-dashcube",label:"dashcube"},{value:"fa fa-database",label:"database"},{value:"fa fa-deaf",label:"deaf"},{value:"fa fa-delicious",label:"delicious"},{value:"fa fa-deploydog",label:"deploydog"},{value:"fa fa-deskpro",label:"deskpro"},{value:"fa fa-desktop",label:"desktop"},{value:"fa fa-deviantart",label:"deviantart"},{value:"fa fa-diagnoses",label:"diagnoses"},{value:"fa fa-digg",label:"digg"},{value:"fa fa-digital-ocean",label:"digital-ocean"},{value:"fa fa-discord",label:"discord"},{value:"fa fa-discourse",label:"discourse"},{value:"fa fa-dna",label:"dna"},{value:"fa fa-dochub",label:"dochub"},{value:"fa fa-docker",label:"docker"},{value:"fa fa-dollar-sign",label:"dollar-sign"},{value:"fa fa-dolly",label:"dolly"},{value:"fa fa-dolly-flatbed",label:"dolly-flatbed"},{value:"fa fa-donate",label:"donate"},{value:"fa fa-dot-circle",label:"dot-circle"},{value:"fa fa-dove",label:"dove"},{value:"fa fa-download",label:"download"},{value:"fa fa-draft2digital",label:"draft2digital"},{value:"fa fa-dribbble",label:"dribbble"},{value:"fa fa-dribbble-square",label:"dribbble-square"},{value:"fa fa-dropbox",label:"dropbox"},{value:"fa fa-drupal",label:"drupal"},{value:"fa fa-dyalog",label:"dyalog"},{value:"fa fa-earlybirds",label:"earlybirds"},{value:"fa fa-edge",label:"edge"},{value:"fa fa-edit",label:"edit"},{value:"fa fa-eject",label:"eject"},{value:"fa fa-elementor",label:"elementor"},{value:"fa fa-ellipsis-h",label:"ellipsis-h"},{value:"fa fa-ellipsis-v",label:"ellipsis-v"},{value:"fa fa-ember",label:"ember"},{value:"fa fa-empire",label:"empire"},{value:"fa fa-envelope",label:"envelope"},{value:"fa fa-envelope-open",label:"envelope-open"},{value:"fa fa-envelope-square",label:"envelope-square"},{value:"fa fa-envira",label:"envira"},{value:"fa fa-eraser",label:"eraser"},{value:"fa fa-erlang",label:"erlang"},{value:"fa fa-ethereum",label:"ethereum"},{value:"fa fa-etsy",label:"etsy"},{value:"fa fa-euro-sign",label:"euro-sign"},{value:"fa fa-exchange-alt",label:"exchange-alt"},{value:"fa fa-exclamation",label:"exclamation"},{value:"fa fa-exclamation-circle",label:"exclamation-circle"},{value:"fa fa-exclamation-triangle",label:"exclamation-triangle"},{value:"fa fa-expand",label:"expand"},{value:"fa fa-expand-arrows-alt",label:"expand-arrows-alt"},{value:"fa fa-expeditedssl",label:"expeditedssl"},{value:"fa fa-external-link-alt",label:"external-link-alt"},{value:"fa fa-external-link-square-alt",label:"external-link-square-alt"},{value:"fa fa-eye",label:"eye"},{value:"fa fa-eye-dropper",label:"eye-dropper"},{value:"fa fa-eye-slash",label:"eye-slash"},{value:"fa fa-facebook",label:"facebook"},{value:"fa fa-facebook-f",label:"facebook-f"},{value:"fa fa-facebook-messenger",label:"facebook-messenger"},{value:"fa fa-facebook-square",label:"facebook-square"},{value:"fa fa-fast-backward",label:"fast-backward"},{value:"fa fa-fast-forward",label:"fast-forward"},{value:"fa fa-fax",label:"fax"},{value:"fa fa-female",label:"female"},{value:"fa fa-fighter-jet",label:"fighter-jet"},{value:"fa fa-file",label:"file"},{value:"fa fa-file-alt",label:"file-alt"},{value:"fa fa-file-archive",label:"file-archive"},{value:"fa fa-file-audio",label:"file-audio"},{value:"fa fa-file-code",label:"file-code"},{value:"fa fa-file-excel",label:"file-excel"},{value:"fa fa-file-image",label:"file-image"},{value:"fa fa-file-medical",label:"file-medical"},{value:"fa fa-file-medical-alt",label:"file-medical-alt"},{value:"fa fa-file-pdf",label:"file-pdf"},{value:"fa fa-file-powerpoint",label:"file-powerpoint"},{value:"fa fa-file-video",label:"file-video"},{value:"fa fa-file-word",label:"file-word"},{value:"fa fa-film",label:"film"},{value:"fa fa-filter",label:"filter"},{value:"fa fa-fire",label:"fire"},{value:"fa fa-fire-extinguisher",label:"fire-extinguisher"},{value:"fa fa-firefox",label:"firefox"},{value:"fa fa-first-aid",label:"first-aid"},{value:"fa fa-first-order",label:"first-order"},{value:"fa fa-firstdraft",label:"firstdraft"},{value:"fa fa-flag",label:"flag"},{value:"fa fa-flag-checkered",label:"flag-checkered"},{value:"fa fa-flask",label:"flask"},{value:"fa fa-flickr",label:"flickr"},{value:"fa fa-flipboard",label:"flipboard"},{value:"fa fa-fly",label:"fly"},{value:"fa fa-folder",label:"folder"},{value:"fa fa-folder-open",label:"folder-open"},{value:"fa fa-font",label:"font"},{value:"fa fa-font-awesome",label:"font-awesome"},{value:"fa fa-font-awesome-alt",label:"font-awesome-alt"},{value:"fa fa-font-awesome-flag",label:"font-awesome-flag"},{value:"fa fa-fonticons",label:"fonticons"},{value:"fa fa-fonticons-fi",label:"fonticons-fi"},{value:"fa fa-football-ball",label:"football-ball"},{value:"fa fa-fort-awesome",label:"fort-awesome"},{value:"fa fa-fort-awesome-alt",label:"fort-awesome-alt"},{value:"fa fa-forumbee",label:"forumbee"},{value:"fa fa-forward",label:"forward"},{value:"fa fa-foursquare",label:"foursquare"},{value:"fa fa-free-code-camp",label:"free-code-camp"},{value:"fa fa-freebsd",label:"freebsd"},{value:"fa fa-frown",label:"frown"},{value:"fa fa-futbol",label:"futbol"},{value:"fa fa-gamepad",label:"gamepad"},{value:"fa fa-gavel",label:"gavel"},{value:"fa fa-gem",label:"gem"},{value:"fa fa-genderless",label:"genderless"},{value:"fa fa-get-pocket",label:"get-pocket"},{value:"fa fa-gg",label:"gg"},{value:"fa fa-gg-circle",label:"gg-circle"},{value:"fa fa-gift",label:"gift"},{value:"fa fa-git",label:"git"},{value:"fa fa-git-square",label:"git-square"},{value:"fa fa-github",label:"github"},{value:"fa fa-github-alt",label:"github-alt"},{value:"fa fa-github-square",label:"github-square"},{value:"fa fa-gitkraken",label:"gitkraken"},{value:"fa fa-gitlab",label:"gitlab"},{value:"fa fa-gitter",label:"gitter"},{value:"fa fa-glass-martini",label:"glass-martini"},{value:"fa fa-glide",label:"glide"},{value:"fa fa-glide-g",label:"glide-g"},{value:"fa fa-globe",label:"globe"},{value:"fa fa-gofore",label:"gofore"},{value:"fa fa-golf-ball",label:"golf-ball"},{value:"fa fa-goodreads",label:"goodreads"},{value:"fa fa-goodreads-g",label:"goodreads-g"},{value:"fa fa-google",label:"google"},{value:"fa fa-google-drive",label:"google-drive"},{value:"fa fa-google-play",label:"google-play"},{value:"fa fa-google-plus",label:"google-plus"},{value:"fa fa-google-plus-g",label:"google-plus-g"},{value:"fa fa-google-plus-square",label:"google-plus-square"},{value:"fa fa-google-wallet",label:"google-wallet"},{value:"fa fa-graduation-cap",label:"graduation-cap"},{value:"fa fa-gratipay",label:"gratipay"},{value:"fa fa-grav",label:"grav"},{value:"fa fa-gripfire",label:"gripfire"},{value:"fa fa-grunt",label:"grunt"},{value:"fa fa-gulp",label:"gulp"},{value:"fa fa-h-square",label:"h-square"},{value:"fa fa-hacker-news",label:"hacker-news"},{value:"fa fa-hacker-news-square",label:"hacker-news-square"},{value:"fa fa-hand-holding",label:"hand-holding"},{value:"fa fa-hand-holding-heart",label:"hand-holding-heart"},{value:"fa fa-hand-holding-usd",label:"hand-holding-usd"},{value:"fa fa-hand-lizard",label:"hand-lizard"},{value:"fa fa-hand-paper",label:"hand-paper"},{value:"fa fa-hand-peace",label:"hand-peace"},{value:"fa fa-hand-point-down",label:"hand-point-down"},{value:"fa fa-hand-point-left",label:"hand-point-left"},{value:"fa fa-hand-point-right",label:"hand-point-right"},{value:"fa fa-hand-point-up",label:"hand-point-up"},{value:"fa fa-hand-pointer",label:"hand-pointer"},{value:"fa fa-hand-rock",label:"hand-rock"},{value:"fa fa-hand-scissors",label:"hand-scissors"},{value:"fa fa-hand-spock",label:"hand-spock"},{value:"fa fa-hands",label:"hands"},{value:"fa fa-hands-helping",label:"hands-helping"},{value:"fa fa-handshake",label:"handshake"},{value:"fa fa-hashtag",label:"hashtag"},{value:"fa fa-hdd",label:"hdd"},{value:"fa fa-heading",label:"heading"},{value:"fa fa-headphones",label:"headphones"},{value:"fa fa-heart",label:"heart"},{value:"fa fa-heartbeat",label:"heartbeat"},{value:"fa fa-hips",label:"hips"},{value:"fa fa-hire-a-helper",label:"hire-a-helper"},{value:"fa fa-history",label:"history"},{value:"fa fa-hockey-puck",label:"hockey-puck"},{value:"fa fa-home",label:"home"},{value:"fa fa-hooli",label:"hooli"},{value:"fa fa-hospital",label:"hospital"},{value:"fa fa-hospital-alt",label:"hospital-alt"},{value:"fa fa-hospital-symbol",label:"hospital-symbol"},{value:"fa fa-hotjar",label:"hotjar"},{value:"fa fa-hourglass",label:"hourglass"},{value:"fa fa-hourglass-end",label:"hourglass-end"},{value:"fa fa-hourglass-half",label:"hourglass-half"},{value:"fa fa-hourglass-start",label:"hourglass-start"},{value:"fa fa-houzz",label:"houzz"},{value:"fa fa-html5",label:"html5"},{value:"fa fa-hubspot",label:"hubspot"},{value:"fa fa-i-cursor",label:"i-cursor"},{value:"fa fa-id-badge",label:"id-badge"},{value:"fa fa-id-card",label:"id-card"},{value:"fa fa-id-card-alt",label:"id-card-alt"},{value:"fa fa-image",label:"image"},{value:"fa fa-images",label:"images"},{value:"fa fa-imdb",label:"imdb"},{value:"fa fa-inbox",label:"inbox"},{value:"fa fa-indent",label:"indent"},{value:"fa fa-industry",label:"industry"},{value:"fa fa-info",label:"info"},{value:"fa fa-info-circle",label:"info-circle"},{value:"fa fa-instagram",label:"instagram"},{value:"fa fa-internet-explorer",label:"internet-explorer"},{value:"fa fa-ioxhost",label:"ioxhost"},{value:"fa fa-italic",label:"italic"},{value:"fa fa-itunes",label:"itunes"},{value:"fa fa-itunes-note",label:"itunes-note"},{value:"fa fa-java",label:"java"},{value:"fa fa-jenkins",label:"jenkins"},{value:"fa fa-joget",label:"joget"},{value:"fa fa-joomla",label:"joomla"},{value:"fa fa-js",label:"js"},{value:"fa fa-js-square",label:"js-square"},{value:"fa fa-jsfiddle",label:"jsfiddle"},{value:"fa fa-key",label:"key"},{value:"fa fa-keyboard",label:"keyboard"},{value:"fa fa-keycdn",label:"keycdn"},{value:"fa fa-kickstarter",label:"kickstarter"},{value:"fa fa-kickstarter-k",label:"kickstarter-k"},{value:"fa fa-korvue",label:"korvue"},{value:"fa fa-language",label:"language"},{value:"fa fa-laptop",label:"laptop"},{value:"fa fa-laravel",label:"laravel"},{value:"fa fa-lastfm",label:"lastfm"},{value:"fa fa-lastfm-square",label:"lastfm-square"},{value:"fa fa-leaf",label:"leaf"},{value:"fa fa-leanpub",label:"leanpub"},{value:"fa fa-lemon",label:"lemon"},{value:"fa fa-less",label:"less"},{value:"fa fa-level-down-alt",label:"level-down-alt"},{value:"fa fa-level-up-alt",label:"level-up-alt"},{value:"fa fa-life-ring",label:"life-ring"},{value:"fa fa-lightbulb",label:"lightbulb"},{value:"fa fa-line",label:"line"},{value:"fa fa-link",label:"link"},{value:"fa fa-linkedin",label:"linkedin"},{value:"fa fa-linkedin-in",label:"linkedin-in"},{value:"fa fa-linode",label:"linode"},{value:"fa fa-linux",label:"linux"},{value:"fa fa-lira-sign",label:"lira-sign"},{value:"fa fa-list",label:"list"},{value:"fa fa-list-alt",label:"list-alt"},{value:"fa fa-list-ol",label:"list-ol"},{value:"fa fa-list-ul",label:"list-ul"},{value:"fa fa-location-arrow",label:"location-arrow"},{value:"fa fa-lock",label:"lock"},{value:"fa fa-lock-open",label:"lock-open"},{value:"fa fa-long-arrow-alt-down",label:"long-arrow-alt-down"},{value:"fa fa-long-arrow-alt-left",label:"long-arrow-alt-left"},{value:"fa fa-long-arrow-alt-right",label:"long-arrow-alt-right"},{value:"fa fa-long-arrow-alt-up",label:"long-arrow-alt-up"},{value:"fa fa-low-vision",label:"low-vision"},{value:"fa fa-lyft",label:"lyft"},{value:"fa fa-magento",label:"magento"},{value:"fa fa-magic",label:"magic"},{value:"fa fa-magnet",label:"magnet"},{value:"fa fa-male",label:"male"},{value:"fa fa-map",label:"map"},{value:"fa fa-map-marker",label:"map-marker"},{value:"fa fa-map-marker-alt",label:"map-marker-alt"},{value:"fa fa-map-pin",label:"map-pin"},{value:"fa fa-map-signs",label:"map-signs"},{value:"fa fa-mars",label:"mars"},{value:"fa fa-mars-double",label:"mars-double"},{value:"fa fa-mars-stroke",label:"mars-stroke"},{value:"fa fa-mars-stroke-h",label:"mars-stroke-h"},{value:"fa fa-mars-stroke-v",label:"mars-stroke-v"},{value:"fa fa-maxcdn",label:"maxcdn"},{value:"fa fa-medapps",label:"medapps"},{value:"fa fa-medium",label:"medium"},{value:"fa fa-medium-m",label:"medium-m"},{value:"fa fa-medkit",label:"medkit"},{value:"fa fa-medrt",label:"medrt"},{value:"fa fa-meetup",label:"meetup"},{value:"fa fa-meh",label:"meh"},{value:"fa fa-mercury",label:"mercury"},{value:"fa fa-microchip",label:"microchip"},{value:"fa fa-microphone",label:"microphone"},{value:"fa fa-microphone-slash",label:"microphone-slash"},{value:"fa fa-microsoft",label:"microsoft"},{value:"fa fa-minus",label:"minus"},{value:"fa fa-minus-circle",label:"minus-circle"},{value:"fa fa-minus-square",label:"minus-square"},{value:"fa fa-mix",label:"mix"},{value:"fa fa-mixcloud",label:"mixcloud"},{value:"fa fa-mizuni",label:"mizuni"},{value:"fa fa-mobile",label:"mobile"},{value:"fa fa-mobile-alt",label:"mobile-alt"},{value:"fa fa-modx",label:"modx"},{value:"fa fa-monero",label:"monero"},{value:"fa fa-money-bill-alt",label:"money-bill-alt"},{value:"fa fa-moon",label:"moon"},{value:"fa fa-motorcycle",label:"motorcycle"},{value:"fa fa-mouse-pointer",label:"mouse-pointer"},{value:"fa fa-music",label:"music"},{value:"fa fa-napster",label:"napster"},{value:"fa fa-neuter",label:"neuter"},{value:"fa fa-newspaper",label:"newspaper"},{value:"fa fa-nintendo-switch",label:"nintendo-switch"},{value:"fa fa-node",label:"node"},{value:"fa fa-node-js",label:"node-js"},{value:"fa fa-notes-medical",label:"notes-medical"},{value:"fa fa-npm",label:"npm"},{value:"fa fa-ns8",label:"ns8"},{value:"fa fa-nutritionix",label:"nutritionix"},{value:"fa fa-object-group",label:"object-group"},{value:"fa fa-object-ungroup",label:"object-ungroup"},{value:"fa fa-odnoklassniki",label:"odnoklassniki"},{value:"fa fa-odnoklassniki-square",label:"odnoklassniki-square"},{value:"fa fa-opencart",label:"opencart"},{value:"fa fa-openid",label:"openid"},{value:"fa fa-opera",label:"opera"},{value:"fa fa-optin-monster",label:"optin-monster"},{value:"fa fa-osi",label:"osi"},{value:"fa fa-outdent",label:"outdent"},{value:"fa fa-page4",label:"page4"},{value:"fa fa-pagelines",label:"pagelines"},{value:"fa fa-paint-brush",label:"paint-brush"},{value:"fa fa-palfed",label:"palfed"},{value:"fa fa-pallet",label:"pallet"},{value:"fa fa-paper-plane",label:"paper-plane"},{value:"fa fa-paperclip",label:"paperclip"},{value:"fa fa-parachute-box",label:"parachute-box"},{value:"fa fa-paragraph",label:"paragraph"},{value:"fa fa-paste",label:"paste"},{value:"fa fa-patreon",label:"patreon"},{value:"fa fa-pause",label:"pause"},{value:"fa fa-pause-circle",label:"pause-circle"},{value:"fa fa-paw",label:"paw"},{value:"fa fa-paypal",label:"paypal"},{value:"fa fa-pen-square",label:"pen-square"},{value:"fa fa-pencil-alt",label:"pencil-alt"},{value:"fa fa-people-carry",label:"people-carry"},{value:"fa fa-percent",label:"percent"},{value:"fa fa-periscope",label:"periscope"},{value:"fa fa-phabricator",label:"phabricator"},{value:"fa fa-phoenix-framework",label:"phoenix-framework"},{value:"fa fa-phone",label:"phone"},{value:"fa fa-phone-slash",label:"phone-slash"},{value:"fa fa-phone-square",label:"phone-square"},{value:"fa fa-phone-volume",label:"phone-volume"},{value:"fa fa-php",label:"php"},{value:"fa fa-pied-piper",label:"pied-piper"},{value:"fa fa-pied-piper-alt",label:"pied-piper-alt"},{value:"fa fa-pied-piper-hat",label:"pied-piper-hat"},{value:"fa fa-pied-piper-pp",label:"pied-piper-pp"},{value:"fa fa-piggy-bank",label:"piggy-bank"},{value:"fa fa-pills",label:"pills"},{value:"fa fa-pinterest",label:"pinterest"},{value:"fa fa-pinterest-p",label:"pinterest-p"},{value:"fa fa-pinterest-square",label:"pinterest-square"},{value:"fa fa-plane",label:"plane"},{value:"fa fa-play",label:"play"},{value:"fa fa-play-circle",label:"play-circle"},{value:"fa fa-playstation",label:"playstation"},{value:"fa fa-plug",label:"plug"},{value:"fa fa-plus",label:"plus"},{value:"fa fa-plus-circle",label:"plus-circle"},{value:"fa fa-plus-square",label:"plus-square"},{value:"fa fa-podcast",label:"podcast"},{value:"fa fa-poo",label:"poo"},{value:"fa fa-pound-sign",label:"pound-sign"},{value:"fa fa-power-off",label:"power-off"},{value:"fa fa-prescription-bottle",label:"prescription-bottle"},{value:"fa fa-prescription-bottle-alt",label:"prescription-bottle-alt"},{value:"fa fa-print",label:"print"},{value:"fa fa-procedures",label:"procedures"},{value:"fa fa-product-hunt",label:"product-hunt"},{value:"fa fa-pushed",label:"pushed"},{value:"fa fa-puzzle-piece",label:"puzzle-piece"},{value:"fa fa-python",label:"python"},{value:"fa fa-qq",label:"qq"},{value:"fa fa-qrcode",label:"qrcode"},{value:"fa fa-question",label:"question"},{value:"fa fa-question-circle",label:"question-circle"},{value:"fa fa-quidditch",label:"quidditch"},{value:"fa fa-quinscape",label:"quinscape"},{value:"fa fa-quora",label:"quora"},{value:"fa fa-quote-left",label:"quote-left"},{value:"fa fa-quote-right",label:"quote-right"},{value:"fa fa-random",label:"random"},{value:"fa fa-ravelry",label:"ravelry"},{value:"fa fa-react",label:"react"},{value:"fa fa-readme",label:"readme"},{value:"fa fa-rebel",label:"rebel"},{value:"fa fa-recycle",label:"recycle"},{value:"fa fa-red-river",label:"red-river"},{value:"fa fa-reddit",label:"reddit"},{value:"fa fa-reddit-alien",label:"reddit-alien"},{value:"fa fa-reddit-square",label:"reddit-square"},{value:"fa fa-redo",label:"redo"},{value:"fa fa-redo-alt",label:"redo-alt"},{value:"fa fa-registered",label:"registered"},{value:"fa fa-rendact",label:"rendact"},{value:"fa fa-renren",label:"renren"},{value:"fa fa-reply",label:"reply"},{value:"fa fa-reply-all",label:"reply-all"},{value:"fa fa-replyd",label:"replyd"},{value:"fa fa-resolving",label:"resolving"},{value:"fa fa-retweet",label:"retweet"},{value:"fa fa-ribbon",label:"ribbon"},{value:"fa fa-road",label:"road"},{value:"fa fa-rocket",label:"rocket"},{value:"fa fa-rocketchat",label:"rocketchat"},{value:"fa fa-rockrms",label:"rockrms"},{value:"fa fa-rss",label:"rss"},{value:"fa fa-rss-square",label:"rss-square"},{value:"fa fa-ruble-sign",label:"ruble-sign"},{value:"fa fa-rupee-sign",label:"rupee-sign"},{value:"fa fa-safari",label:"safari"},{value:"fa fa-sass",label:"sass"},{value:"fa fa-save",label:"save"},{value:"fa fa-schlix",label:"schlix"},{value:"fa fa-scribd",label:"scribd"},{value:"fa fa-search",label:"search"},{value:"fa fa-search-minus",label:"search-minus"},{value:"fa fa-search-plus",label:"search-plus"},{value:"fa fa-searchengin",label:"searchengin"},{value:"fa fa-seedling",label:"seedling"},{value:"fa fa-sellcast",label:"sellcast"},{value:"fa fa-sellsy",label:"sellsy"},{value:"fa fa-server",label:"server"},{value:"fa fa-servicestack",label:"servicestack"},{value:"fa fa-share",label:"share"},{value:"fa fa-share-alt",label:"share-alt"},{value:"fa fa-share-alt-square",label:"share-alt-square"},{value:"fa fa-share-square",label:"share-square"},{value:"fa fa-shekel-sign",label:"shekel-sign"},{value:"fa fa-shield-alt",label:"shield-alt"},{value:"fa fa-ship",label:"ship"},{value:"fa fa-shipping-fast",label:"shipping-fast"},{value:"fa fa-shirtsinbulk",label:"shirtsinbulk"},{value:"fa fa-shopping-bag",label:"shopping-bag"},{value:"fa fa-shopping-basket",label:"shopping-basket"},{value:"fa fa-shopping-cart",label:"shopping-cart"},{value:"fa fa-shower",label:"shower"},{value:"fa fa-sign",label:"sign"},{value:"fa fa-sign-in-alt",label:"sign-in-alt"},{value:"fa fa-sign-language",label:"sign-language"},{value:"fa fa-sign-out-alt",label:"sign-out-alt"},{value:"fa fa-signal",label:"signal"},{value:"fa fa-simplybuilt",label:"simplybuilt"},{value:"fa fa-sistrix",label:"sistrix"},{value:"fa fa-sitemap",label:"sitemap"},{value:"fa fa-skyatlas",label:"skyatlas"},{value:"fa fa-skype",label:"skype"},{value:"fa fa-slack",label:"slack"},{value:"fa fa-slack-hash",label:"slack-hash"},{value:"fa fa-sliders-h",label:"sliders-h"},{value:"fa fa-slideshare",label:"slideshare"},{value:"fa fa-smile",label:"smile"},{value:"fa fa-smoking",label:"smoking"},{value:"fa fa-snapchat",label:"snapchat"},{value:"fa fa-snapchat-ghost",label:"snapchat-ghost"},{value:"fa fa-snapchat-square",label:"snapchat-square"},{value:"fa fa-snowflake",label:"snowflake"},{value:"fa fa-sort",label:"sort"},{value:"fa fa-sort-alpha-down",label:"sort-alpha-down"},{value:"fa fa-sort-alpha-up",label:"sort-alpha-up"},{value:"fa fa-sort-amount-down",label:"sort-amount-down"},{value:"fa fa-sort-amount-up",label:"sort-amount-up"},{value:"fa fa-sort-down",label:"sort-down"},{value:"fa fa-sort-numeric-down",label:"sort-numeric-down"},{value:"fa fa-sort-numeric-up",label:"sort-numeric-up"},{value:"fa fa-sort-up",label:"sort-up"},{value:"fa fa-soundcloud",label:"soundcloud"},{value:"fa fa-space-shuttle",label:"space-shuttle"},{value:"fa fa-speakap",label:"speakap"},{value:"fa fa-spinner",label:"spinner"},{value:"fa fa-spotify",label:"spotify"},{value:"fa fa-square",label:"square"},{value:"fa fa-square-full",label:"square-full"},{value:"fa fa-stack-exchange",label:"stack-exchange"},{value:"fa fa-stack-overflow",label:"stack-overflow"},{value:"fa fa-star",label:"star"},{value:"fa fa-star-half",label:"star-half"},{value:"fa fa-staylinked",label:"staylinked"},{value:"fa fa-steam",label:"steam"},{value:"fa fa-steam-square",label:"steam-square"},{value:"fa fa-steam-symbol",label:"steam-symbol"},{value:"fa fa-step-backward",label:"step-backward"},{value:"fa fa-step-forward",label:"step-forward"},{value:"fa fa-stethoscope",label:"stethoscope"},{value:"fa fa-sticker-mule",label:"sticker-mule"},{value:"fa fa-sticky-note",label:"sticky-note"},{value:"fa fa-stop",label:"stop"},{value:"fa fa-stop-circle",label:"stop-circle"},{value:"fa fa-stopwatch",label:"stopwatch"},{value:"fa fa-strava",label:"strava"},{value:"fa fa-street-view",label:"street-view"},{value:"fa fa-strikethrough",label:"strikethrough"},{value:"fa fa-stripe",label:"stripe"},{value:"fa fa-stripe-s",label:"stripe-s"},{value:"fa fa-studiovinari",label:"studiovinari"},{value:"fa fa-stumbleupon",label:"stumbleupon"},{value:"fa fa-stumbleupon-circle",label:"stumbleupon-circle"},{value:"fa fa-subscript",label:"subscript"},{value:"fa fa-subway",label:"subway"},{value:"fa fa-suitcase",label:"suitcase"},{value:"fa fa-sun",label:"sun"},{value:"fa fa-superpowers",label:"superpowers"},{value:"fa fa-superscript",label:"superscript"},{value:"fa fa-supple",label:"supple"},{value:"fa fa-sync",label:"sync"},{value:"fa fa-sync-alt",label:"sync-alt"},{value:"fa fa-syringe",label:"syringe"},{value:"fa fa-table",label:"table"},{value:"fa fa-table-tennis",label:"table-tennis"},{value:"fa fa-tablet",label:"tablet"},{value:"fa fa-tablet-alt",label:"tablet-alt"},{value:"fa fa-tablets",label:"tablets"},{value:"fa fa-tachometer-alt",label:"tachometer-alt"},{value:"fa fa-tag",label:"tag"},{value:"fa fa-tags",label:"tags"},{value:"fa fa-tape",label:"tape"},{value:"fa fa-tasks",label:"tasks"},{value:"fa fa-taxi",label:"taxi"},{value:"fa fa-telegram",label:"telegram"},{value:"fa fa-telegram-plane",label:"telegram-plane"},{value:"fa fa-tencent-weibo",label:"tencent-weibo"},{value:"fa fa-terminal",label:"terminal"},{value:"fa fa-text-height",label:"text-height"},{value:"fa fa-text-width",label:"text-width"},{value:"fa fa-th",label:"th"},{value:"fa fa-th-large",label:"th-large"},{value:"fa fa-th-list",label:"th-list"},{value:"fa fa-themeisle",label:"themeisle"},{value:"fa fa-thermometer",label:"thermometer"},{value:"fa fa-thermometer-empty",label:"thermometer-empty"},{value:"fa fa-thermometer-full",label:"thermometer-full"},{value:"fa fa-thermometer-half",label:"thermometer-half"},{value:"fa fa-thermometer-quarter",label:"thermometer-quarter"},{value:"fa fa-thermometer-three-quarters",label:"thermometer-three-quarters"},{value:"fa fa-thumbs-down",label:"thumbs-down"},{value:"fa fa-thumbs-up",label:"thumbs-up"},{value:"fa fa-thumbtack",label:"thumbtack"},{value:"fa fa-ticket-alt",label:"ticket-alt"},{value:"fa fa-times",label:"times"},{value:"fa fa-times-circle",label:"times-circle"},{value:"fa fa-tint",label:"tint"},{value:"fa fa-toggle-off",label:"toggle-off"},{value:"fa fa-toggle-on",label:"toggle-on"},{value:"fa fa-trademark",label:"trademark"},{value:"fa fa-train",label:"train"},{value:"fa fa-transgender",label:"transgender"},{value:"fa fa-transgender-alt",label:"transgender-alt"},{value:"fa fa-trash",label:"trash"},{value:"fa fa-trash-alt",label:"trash-alt"},{value:"fa fa-tree",label:"tree"},{value:"fa fa-trello",label:"trello"},{value:"fa fa-tripadvisor",label:"tripadvisor"},{value:"fa fa-trophy",label:"trophy"},{value:"fa fa-truck",label:"truck"},{value:"fa fa-truck-loading",label:"truck-loading"},{value:"fa fa-truck-moving",label:"truck-moving"},{value:"fa fa-tty",label:"tty"},{value:"fa fa-tumblr",label:"tumblr"},{value:"fa fa-tumblr-square",label:"tumblr-square"},{value:"fa fa-tv",label:"tv"},{value:"fa fa-twitch",label:"twitch"},{value:"fa fa-twitter",label:"twitter"},{value:"fa fa-twitter-square",label:"twitter-square"},{value:"fa fa-typo3",label:"typo3"},{value:"fa fa-uber",label:"uber"},{value:"fa fa-uikit",label:"uikit"},{value:"fa fa-umbrella",label:"umbrella"},{value:"fa fa-underline",label:"underline"},{value:"fa fa-undo",label:"undo"},{value:"fa fa-undo-alt",label:"undo-alt"},{value:"fa fa-uniregistry",label:"uniregistry"},{value:"fa fa-universal-access",label:"universal-access"},{value:"fa fa-university",label:"university"},{value:"fa fa-unlink",label:"unlink"},{value:"fa fa-unlock",label:"unlock"},{value:"fa fa-unlock-alt",label:"unlock-alt"},{value:"fa fa-untappd",label:"untappd"},{value:"fa fa-upload",label:"upload"},{value:"fa fa-usb",label:"usb"},{value:"fa fa-user",label:"user"},{value:"fa fa-user-circle",label:"user-circle"},{value:"fa fa-user-md",label:"user-md"},{value:"fa fa-user-plus",label:"user-plus"},{value:"fa fa-user-secret",label:"user-secret"},{value:"fa fa-user-times",label:"user-times"},{value:"fa fa-users",label:"users"},{value:"fa fa-ussunnah",label:"ussunnah"},{value:"fa fa-utensil-spoon",label:"utensil-spoon"},{value:"fa fa-utensils",label:"utensils"},{value:"fa fa-vaadin",label:"vaadin"},{value:"fa fa-venus",label:"venus"},{value:"fa fa-venus-double",label:"venus-double"},{value:"fa fa-venus-mars",label:"venus-mars"},{value:"fa fa-viacoin",label:"viacoin"},{value:"fa fa-viadeo",label:"viadeo"},{value:"fa fa-viadeo-square",label:"viadeo-square"},{value:"fa fa-vial",label:"vial"},{value:"fa fa-vials",label:"vials"},{value:"fa fa-viber",label:"viber"},{value:"fa fa-video",label:"video"},{value:"fa fa-video-slash",label:"video-slash"},{value:"fa fa-vimeo",label:"vimeo"},{value:"fa fa-vimeo-square",label:"vimeo-square"},{value:"fa fa-vimeo-v",label:"vimeo-v"},{value:"fa fa-vine",label:"vine"},{value:"fa fa-vk",label:"vk"},{value:"fa fa-vnv",label:"vnv"},{value:"fa fa-volleyball-ball",label:"volleyball-ball"},{value:"fa fa-volume-down",label:"volume-down"},{value:"fa fa-volume-off",label:"volume-off"},{value:"fa fa-volume-up",label:"volume-up"},{value:"fa fa-vuejs",label:"vuejs"},{value:"fa fa-warehouse",label:"warehouse"},{value:"fa fa-weibo",label:"weibo"},{value:"fa fa-weight",label:"weight"},{value:"fa fa-weixin",label:"weixin"},{value:"fa fa-whatsapp",label:"whatsapp"},{value:"fa fa-whatsapp-square",label:"whatsapp-square"},{value:"fa fa-wheelchair",label:"wheelchair"},{value:"fa fa-whmcs",label:"whmcs"},{value:"fa fa-wifi",label:"wifi"},{value:"fa fa-wikipedia-w",label:"wikipedia-w"},{value:"fa fa-window-close",label:"window-close"},{value:"fa fa-window-maximize",label:"window-maximize"},{value:"fa fa-window-minimize",label:"window-minimize"},{value:"fa fa-window-restore",label:"window-restore"},{value:"fa fa-windows",label:"windows"},{value:"fa fa-wine-glass",label:"wine-glass"},{value:"fa fa-won-sign",label:"won-sign"},{value:"fa fa-wordpress",label:"wordpress"},{value:"fa fa-wordpress-simple",label:"wordpress-simple"},{value:"fa fa-wpbeginner",label:"wpbeginner"},{value:"fa fa-wpexplorer",label:"wpexplorer"},{value:"fa fa-wpforms",label:"wpforms"},{value:"fa fa-wrench",label:"wrench"},{value:"fa fa-x-ray",label:"x-ray"},{value:"fa fa-xbox",label:"xbox"},{value:"fa fa-xing",label:"xing"},{value:"fa fa-xing-square",label:"xing-square"},{value:"fa fa-y-combinator",label:"y-combinator"},{value:"fa fa-yahoo",label:"yahoo"},{value:"fa fa-yandex",label:"yandex"},{value:"fa fa-yandex-international",label:"yandex-international"},{value:"fa fa-yelp",label:"yelp"},{value:"fa fa-yen-sign",label:"yen-sign"},{value:"fa fa-yoast",label:"yoast"},{value:"fa fa-youtube",label:"youtube"},{value:"fa fa-youtube-square",label:"youtube-square"}],this.dataSources=[]}return l(e,[{key:"ngOnInit",value:function(){this.loadIndex(),this.loadSources()}},{key:"create",value:function(){var e=this;this.swal.prompt("Widget Name").subscribe(function(t){e.api.post("widgetFactory",{name:t}).subscribe(function(a){200===a.status&&(e.widgetList.push({id:a.data,name:t}),e.selectedItem=a.data)},function(e){})})}},{key:"loadIndex",value:function(){var e=this;this.api.get("widgetFactory").subscribe(function(t){e.widgetList=t.data})}},{key:"loadSources",value:function(){var e=this;this.api.get("widgetData/sources").subscribe(function(t){200==t.status&&(t.data.map(function(t){e.dataSources.push({value:t,label:t})}),e.options.internal_data_source=e.dataSources)})}},{key:"loadWidget",value:function(e){var t=this;this.api.get("widgetFactory/"+e).subscribe(function(e){200===e.status&&(t.widgetData=e.data,t.dynamicForm.setFormValue(t.widgetData),t.dynamicForm.options.icon=t.iconsList,t.formChanged(t.widgetData))})}},{key:"formChanged",value:function(e){this.widgetData=e,"external"===e.data_source&&(this.dynamicForm.hideField("internal_data_source"),this.dynamicForm.showField("external_data_source")),"internal"===e.data_source&&(this.dynamicForm.showField("internal_data_source"),this.dynamicForm.hideField("external_data_source"))}},{key:"save",value:function(){var e=this;this.api.put("widgetFactory/"+this.selectedItem,this.widgetData).subscribe(function(t){200===t.status&&e.toastr.success(e.tr.translate(t.message))})}},{key:"destroy",value:function(){var e=this,t=this.selectedItem;!t||t<0||this.swal.confirm({title:"Delete Widget",type:"warning",text:"Delete Selected Widget ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.delete("widgetFactory/"+t).subscribe(function(t){200===t.status&&(e.toastr.success(t.message),e.selectedItem=null,e.loadIndex())})}).bind(this)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(ki),c.Y36(tt),c.Y36(Z),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-widget-factory"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Ms,5),2&e)&&(c.iGM(a=c.CRH())&&(t.dynamicForm=a.first))},decls:28,vars:5,consts:[[1,"row"],[1,"col-6"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"fa","fa-trash"],[1,"row",3,"hidden"],[1,"col"],["name","widgetForm",3,"formConfig","options","formChanged","submit",4,"ngIf"],[1,"fa","fa-eye"],[3,"widget"],[3,"value"],["name","widgetForm",3,"formConfig","options","formChanged","submit"],["widgetForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5," Widget Factory "),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",0),c.TgZ(8,"div",6),c.TgZ(9,"select",7),c.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.loadWidget(t.selectedItem)}),c.YNc(10,Fs,2,2,"option",8),c.qZA(),c.qZA(),c.TgZ(11,"div",6),c.TgZ(12,"div",9),c.TgZ(13,"div",10),c.TgZ(14,"button",11),c.NdJ("click",function(){return t.create()}),c._UZ(15,"i",12),c.qZA(),c.TgZ(16,"button",11),c.NdJ("click",function(){return t.destroy()}),c._UZ(17,"i",13),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"div",14),c.TgZ(19,"div",15),c.YNc(20,Js,2,2,"dynamic-form",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",1),c.TgZ(22,"div",2),c.TgZ(23,"div",3),c._UZ(24,"i",17),c._uU(25," Preview "),c.qZA(),c.TgZ(26,"div",5),c._UZ(27,"app-dashboard-widget",18),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(9),c.Q6J("ngModel",t.selectedItem),c.xp6(1),c.Q6J("ngForOf",t.widgetList),c.xp6(8),c.Q6J("hidden",!t.selectedItem),c.xp6(2),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(7),c.Q6J("widget",t.widgetData))},directives:[A.EJ,A.JJ,A.On,Q.sg,Q.O5,ge,A.YN,A.Kr,qi],styles:[""]}),e}(),Ns=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.tr=a,this.router=i,this.valueData="...",this.valueFontSize=14}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(function(){return e.load()},1e3*this.data.interval))}},{key:"load",value:function(){var e="internal";"external"===this.data.data_source&&(e="external"),this.loadData(e)}},{key:"loadData",value:function(e){var t=this,a="";"internal"===e&&(a="widgetData/internal/"+this.data.internal_data_source),"external"===e&&(a="widgetData/external/"+this.data.id),this.api.get(a).subscribe(function(e){t.valueData=e&&200===e.status?e.data:"N/A";var a=t.valueData.toString();a.length<8&&(t.valueFontSize=20),a.length<5&&(t.valueFontSize=25)},function(){t.valueData="N/A"})}},{key:"loadInternal",value:function(){var e=this;this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(function(t){e.valueData=t&&200==t.status?t.data:"N/A";var a=e.valueData.toString();a.length<8&&(e.valueFontSize=20),a.length<5&&(e.valueFontSize=25)},function(){e.valueData="N/A"})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"onWidgetClicked",value:function(){this.data.url&&this.data.url.length>10&&(window.location.href=this.data.url)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I),c.Y36(_.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-simple-widget"]],inputs:{data:"data"},features:[c.TTD],decls:12,vars:11,consts:[[3,"click"],[1,"card-header"],["data-i18n","dashboard.pageviews",1,"text-white","text-uppercase","h5"],["data-i18n","dashboard.hourlystats",1,"text-white","h7"],[1,"card-body","d-flex","bg-opacity-100"],[2,"opacity","0.2","color","white","position","absolute","right","10px","top","30%"],[2,"font-size","60px"],[1,"my-auto","w-100","text-white"],[1,"counter"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.NdJ("click",function(){return t.onWidgetClicked()}),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"div",4),c.TgZ(7,"div",5),c._UZ(8,"i",6),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"span",8),c._uU(11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Gre("x-card ",t.data.color,""),c.xp6(3),c.Oqu(t.tr.translate(t.data.title)),c.xp6(2),c.hij("",t.tr.translate(t.data.description),"\xa0"),c.xp6(3),c.Tol(t.data.icon),c.xp6(2),c.Udp("font-size",t.valueFontSize,"px"),c.xp6(1),c.Oqu(t.valueData))},styles:[".x-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;box-sizing:border-box;word-wrap:break-word;background-color:#fff;background-clip:border-box;border-radius:.5rem;box-shadow:0 0 1px rgba(80,90,100,.4);min-height:100%!important}.bg-octonary[_ngcontent-%COMP%]{background-color:#4b64a6!important}.bg-quaternary[_ngcontent-%COMP%]{background-color:#ff6b89!important}.bg-quinary[_ngcontent-%COMP%]{background-color:#c774ff!important}.bg-denary[_ngcontent-%COMP%]{background-color:#59b3a6!important}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.bg-opacity-100[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.d-flex[_ngcontent-%COMP%]{display:flex!important}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.5rem}"]}),e}(),Is=function(){var e=function(){function e(t){o(this,e),this.api=t,this.valueData={value:"...",percentage:0}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(function(){return e.load()},1e3*this.data.interval))}},{key:"load",value:function(){"internal"===this.data.data_source&&this.loadInternal()}},{key:"loadInternal",value:function(){var e=this;this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(function(t){e.valueData=200==t.status?t.data:{value:"N/A",percentage:0}},function(){e.valueData={value:"N/A",percentage:0}})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-percentage-widget"]],inputs:{data:"data"},features:[c.TTD],decls:10,vars:10,consts:[[1,"card-body"],[1,"h1","text-muted","text-right","mb-4"],[1,"h4","mb-0"],[1,"text-muted","text-uppercase","font-weight-bold"],[1,"progress","progress-white","progress-xs","mt-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c._UZ(3,"i"),c.qZA(),c.TgZ(4,"div",2),c._uU(5),c.qZA(),c.TgZ(6,"small",3),c._uU(7),c.qZA(),c.TgZ(8,"div",4),c._UZ(9,"div",5),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Gre("card text-white ",t.data.color,""),c.xp6(3),c.Tol(t.data.icon),c.xp6(2),c.Oqu(t.valueData.value||"Incompatible Data"),c.xp6(2),c.Oqu(t.data.title),c.xp6(2),c.Udp("width",t.valueData.percentage||0,"%"))},styles:[""]}),e}(),Ys=n(35415),Qs=function(){var e=function(){function e(t){o(this,e),this.api=t,this.valueData={value:"...",percentage:0};for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i="gauge_",n=0;n<5;n++)i+=a.charAt(Math.floor(Math.random()*a.length));this.element_id=i}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(function(){return e.load()},1e3*this.data.interval))}},{key:"initGauge",value:function(){var e=document.getElementById(this.element_id);this.gauge=new Ys.Gauge(e).setOptions({angle:.15,lineWidth:.44,pointer:{length:.9,strokeWidth:.035},colorStart:"#6FADCF",colorStop:"#8FC0DA",strokeColor:"#E0E0E0"}),this.gauge.maxValue=100,this.gauge.setMinValue(0),this.gauge.set(0)}},{key:"load",value:function(){"internal"===this.data.data_source&&this.loadInternal()}},{key:"loadInternal",value:function(){var e=this;this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(function(t){200==t.status?(e.valueData=t.data,e.gauge.set(e.valueData.percentage)):e.valueData={value:"N/A",percentage:0}},function(){e.valueData={value:"N/A",percentage:0}})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"ngAfterViewInit",value:function(){this.initGauge()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-gauge-widget"]],inputs:{data:"data"},features:[c.TTD],decls:7,vars:5,consts:[[1,"card-header"],["data-i18n","dashboard.pageviews",1,"text-white","text-uppercase","h5"],[1,"card-body","d-flex","bg-opacity-100"],[1,"gaugejs-wrap",2,"width","100%","text-align","center"],["height","60","width","90",1,"gaugejs",3,"id"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",2),c.TgZ(5,"div",3),c._UZ(6,"canvas",4),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Gre("x-card ",t.data.color,""),c.xp6(3),c.hij(" ",t.data.title," "),c.xp6(3),c.Q6J("id",t.element_id))},styles:[".x-card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border-radius:.5rem;box-shadow:0 0 1px rgba(80,90,100,.4);margin-bottom:3rem}.bg-octonary[_ngcontent-%COMP%]{background-color:#4b64a6!important}.bg-quaternary[_ngcontent-%COMP%]{background-color:#ff6b89!important}.bg-quinary[_ngcontent-%COMP%]{background-color:#c774ff!important}.bg-denary[_ngcontent-%COMP%]{background-color:#59b3a6!important}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-header[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin-bottom:0;background-color:rgba(0,0,0,.03);border-bottom:1px solid rgba(0,0,0,.125)}.bg-opacity-100[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.d-flex[_ngcontent-%COMP%]{display:flex!important}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;padding:1.6rem!important}"]}),e}(),Ss=function(){var e=function(){function e(t){o(this,e),this.api=t,this.valueData={value:"...",percentage:0}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(function(){return e.load()},1e3*this.data.interval))}},{key:"load",value:function(){"internal"===this.data.data_source&&this.loadInternal()}},{key:"loadInternal",value:function(){var e=this;this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(function(t){e.valueData=200==t.status?t.data:{value:"N/A",percentage:0}},function(){e.valueData={value:"N/A",percentage:0}})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-data-list-widget"]],inputs:{data:"data"},features:[c.TTD],decls:21,vars:4,consts:[[1,"card-header","font-weight-bold"],[1,"card-body","py-3","pb-0"],[1,"list-unstyled","mb-0"],[1,"py-2"],[1,"font-weight-bold","float-right"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c._uU(2),c.qZA(),c.TgZ(3,"div",1),c.TgZ(4,"ul",2),c.TgZ(5,"li",3),c._uU(6,"Overall "),c.TgZ(7,"span",4),c._uU(8,"987.123"),c.qZA(),c.qZA(),c.TgZ(9,"li",3),c._uU(10,"This week "),c.TgZ(11,"span",4),c._uU(12,"9.873"),c.qZA(),c.qZA(),c.TgZ(13,"li",3),c._uU(14,"Yestarday "),c.TgZ(15,"span",4),c._uU(16,"851"),c.qZA(),c.qZA(),c.TgZ(17,"li",3),c._uU(18,"Today "),c.TgZ(19,"span",4),c._uU(20,"184"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Gre("card text-white ",t.data.color,""),c.xp6(2),c.Oqu(t.data.title))},styles:[""]}),e}();function Ps(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function Ds(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"app-dashboard-widget",28),c.NdJ("click",function(){var e=c.CHM(a).$implicit,t=c.oxw().$implicit;return c.oxw(2).removeWidget(t.id,e.local_id)}),c.qZA()}if(2&e){var i=t.$implicit;c.Gre("col-",i.width," widget-delete-option"),c.Q6J("widget",i)}}function Hs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",25),c.NdJ("onDrop",function(e){var t=c.CHM(a).$implicit;return c.oxw(2).widgetDropped(e,t.id)}),c.TgZ(1,"div",26),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).removeRow(e.id)}),c._UZ(2,"i",11),c._uU(3," Delete Row "),c.qZA(),c.YNc(4,Ds,1,4,"app-dashboard-widget",27),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("id",i.id),c.xp6(1),c.Q6J("hidden",i.widgets.length>0),c.xp6(3),c.Q6J("ngForOf",i.widgets)}}function Rs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",29),c.NdJ("onDragStart",function(e){var t=c.CHM(a).$implicit;return c.oxw(2).dragStarted(e,t)}),c._UZ(1,"i"),c.TgZ(2,"div",30),c._uU(3),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw(2);c.Gre("simple-widget-preview ",i.color,""),c.s9C("id",i.title),c.xp6(1),c.Gre("preview-icon ",i.icon,""),c.xp6(2),c.Oqu(n.tr.translate(i.title))}}function Vs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",15),c._UZ(2,"i",16),c._uU(3," Dashboard Designer "),c.qZA(),c.TgZ(4,"div",17),c.TgZ(5,"div",0),c.TgZ(6,"div",18),c.YNc(7,Hs,5,3,"div",19),c.TgZ(8,"div",20),c.NdJ("click",function(){return c.CHM(a),c.oxw().addRow()}),c.TgZ(9,"div",21),c._UZ(10,"i",22),c._uU(11," Add Row "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",23),c.YNc(13,Rs,4,8,"div",24),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(7),c.Q6J("ngForOf",i.rows),c.xp6(6),c.Q6J("ngForOf",i.widget_list)}}var Ls=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.helper=a,this.toastr=i,this.swal=n,this.tr=r,this.widget_list=[],this.rows=[],this.dashboardList=[],this.selectedItem=-1,this.draggedWidget=null}return l(e,[{key:"ngOnInit",value:function(){this.loadIndex(),this.loadWidgetList(),this.addRow()}},{key:"loadWidgetList",value:function(){var e=this;this.api.get("widgetFactory").subscribe(function(t){200===t.status&&(e.widget_list=t.data)})}},{key:"getWidgetById",value:function(e){var t,a=i(this.widget_list);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.id==e){var o={};return(o=Object.assign(o,n)).local_id=this.helper.guid(),o}}}catch(r){a.e(r)}finally{a.f()}}},{key:"addRow",value:function(){var e={id:this.helper.guid(),order:this.rows.length+1,widgets:[]};this.rows.push(e)}},{key:"_rowWidgetsLength",value:function(e){for(var t=0,a=0;a<this.rows.length;a++)if(this.rows[a].id==e){var n,o=i(this.rows[a].widgets);try{for(o.s();!(n=o.n()).done;){var r=n.value;t+=parseInt(r.width)}}catch(l){o.e(l)}finally{o.f()}}return t}},{key:"widgetDropped",value:function(e,t){if(console.log(e),this._rowWidgetsLength(t)+parseInt(this.draggedWidget.width)>12)this.toastr.warning(this.tr.translate("msg_row_is_full"));else for(var a=0;a<this.rows.length;a++)if(this.rows[a].id==t){var i={};(i=Object.assign(i,this.draggedWidget)).local_id=this.helper.guid(),this.rows[a].widgets.push(i)}}},{key:"removeWidget",value:function(e,t){for(var a=0;a<this.rows.length;a++)if(this.rows[a].id==e)for(var i=0;i<this.rows[a].widgets.length;i++)this.rows[a].widgets[i].local_id==t&&this.rows[a].widgets.splice(i,1)}},{key:"removeRow",value:function(e){for(var t=0;t<this.rows.length;t++)this.rows[t].id==e&&this.rows.splice(t,1)}},{key:"create",value:function(){var e=this;this.swal.prompt("Dashboard Name").subscribe(function(t){e.api.post("dashboardManager",{name:t}).subscribe(function(a){200==a.status&&(e.dashboardList.push({id:a.data,name:t}),e.selectedItem=a.data,e.rows=[])},function(e){})})}},{key:"loadDashboard",value:function(e){var t=this;this.blockUI.start(),this.api.get("dashboardManager/"+e).subscribe(function(e){if(t.blockUI.stop(),200==e.status){t.rows=[];var a,n=i(e.data);try{for(n.s();!(a=n.n()).done;){var o,r=a.value,l={id:r.row_id,order:r.row_order,widgets:[]},s=i(r.widgets);try{for(s.s();!(o=s.n()).done;){var c=o.value;l.widgets.push(t.getWidgetById(c))}}catch(u){s.e(u)}finally{s.f()}t.rows.push(l)}}catch(u){n.e(u)}finally{n.f()}}})}},{key:"loadIndex",value:function(){var e=this;this.api.get("dashboardManager").subscribe(function(t){e.dashboardList=t.data})}},{key:"save",value:function(){var e=this;this.api.put("dashboardManager/"+this.selectedItem,this.rows).subscribe(function(t){200==t.status&&e.toastr.success(e.tr.translate(t.message))})}},{key:"destroy",value:function(){var e=this,t=this.selectedItem;!t||t<0||this.swal.confirm({title:"Delete Dashboard",type:"warning",text:"Delete Selected Dashboard ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.delete("dashboardManager/"+t).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.selectedItem=-1,e.loadIndex())})})}},{key:"dragStarted",value:function(e,t){this.draggedWidget=t}}]),e}();Ls.\u0275fac=function(e){return new(e||Ls)(c.Y36(Z),c.Y36(y),c.Y36(v._W),c.Y36(tt),c.Y36(I))},Ls.\u0275cmp=c.Xpm({type:Ls,selectors:[["app-dashboard-manager"]],decls:17,vars:5,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"fa","fa-trash"],["class","card",4,"ngIf"],[3,"value"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-eye"],[1,"card-body"],[1,"col",2,"zoom","60%"],["class","row widget-row","pDroppable","row",3,"id","onDrop",4,"ngFor","ngForOf"],[1,"row",3,"click"],[1,"col-12","virtual-row"],[1,"fa","fa-plus-circle"],[1,"col-3","widget-list"],["pDraggable","row",3,"class","id","onDragStart",4,"ngFor","ngForOf"],["pDroppable","row",1,"row","widget-row",3,"id","onDrop"],[1,"col-12","delete-row",3,"hidden","click"],[3,"widget","class","click",4,"ngFor","ngForOf"],[3,"widget","click"],["pDraggable","row",3,"id","onDragStart"],[2,"margin-left","10px","margin-top","10px","float","left"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.loadDashboard(t.selectedItem)}),c.TgZ(3,"option",3),c._uU(4,"Select Dashboard"),c.qZA(),c.YNc(5,Ps,2,2,"option",4),c.qZA(),c.qZA(),c.TgZ(6,"div",1),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"button",7),c.NdJ("click",function(){return t.create()}),c._UZ(10,"i",8),c.qZA(),c.TgZ(11,"button",9),c.NdJ("click",function(){return t.save()}),c._UZ(12,"i",10),c.qZA(),c.TgZ(13,"button",7),c.NdJ("click",function(){return t.destroy()}),c._UZ(14,"i",11),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(15,"hr"),c.YNc(16,Vs,14,2,"div",12)),2&e&&(c.xp6(2),c.Q6J("ngModel",t.selectedItem),c.xp6(1),c.Q6J("value",-1),c.xp6(2),c.Q6J("ngForOf",t.dashboardList),c.xp6(6),c.Q6J("hidden",t.selectedItem<0),c.xp6(5),c.Q6J("ngIf",t.selectedItem>=0))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Q.O5,zl.bK,ge,zl._l],styles:[".widget-list[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto;border-left:1px solid grey;color:#fff}.simple-widget-preview[_ngcontent-%COMP%]{border:1px solid grey;height:50px;width:100%;margin-bottom:5px!important;padding:5px;box-sizing:border-box;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.simple-widget-preview[_ngcontent-%COMP%]:hover{filter:brightness(120%)}.preview-icon[_ngcontent-%COMP%]{padding-top:10px;margin-left:10px;font-size:18px;float:left}.virtual-row[_ngcontent-%COMP%]{border:1px dashed #cebfc4;height:100px;text-align:center;vertical-align:middle;line-height:100px;font-size:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#3e515b;cursor:pointer}.delete-row[_ngcontent-%COMP%]{border:1px dashed #00aced;height:100px;text-align:center;vertical-align:middle;background:#f8f8f8;line-height:100px;font-size:20px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:#3e515b;cursor:pointer;opacity:.5}.widget-row[_ngcontent-%COMP%]{min-height:100px;background:#f8f8f8;border:1px dashed #b9dcd5;text-align:center;color:#3e515b;padding-top:20px;box-sizing:border-box}.widget-delete-option[_ngcontent-%COMP%]:hover{opacity:.8;filter:brightness(110%)}"]}),(0,g.gn)([(0,m.bH)()],Ls.prototype,"blockUI",void 0);var Es=["myForm"];function Ks(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Bs=function(){var e=function(){function e(t,a,i,n){o(this,e),this.formsLoader=t,this.api=a,this.toastr=i,this.trs=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.countries_list=[],this.currency_list=[],this.language_list=[],this.loadResources(),this.formFields=this.formsLoader.getForm("settings_general"),this.form_config.fields=this.formFields,this.load()}return l(e,[{key:"loadResources",value:function(){var e=this;this.api.get("resources/countries").subscribe(function(t){t.data.map(function(t){e.countries_list.push({value:t.code,label:t.name})}),e.options.gnrl_country=e.countries_list}),this.api.get("resources/currencies").subscribe(function(t){t.data.map(function(t){e.currency_list.push({value:t.code,label:t.name})}),e.options.gnrl_currency=e.currency_list}),this.api.get("resources/languages").subscribe(function(t){200==t.status&&(t.data.map(function(t){e.language_list.push({value:t.id,label:t.name})}),e.options.gnrl_language=e.language_list)}),this.api.get("resources/timezones").subscribe(function(t){if(200==t.status){var a=[];t.data.map(function(e){a.push({value:e.value,label:e.name})}),e.options.gnrl_timezone=a}})}},{key:"save",value:function(e){var t=this;this.api.post("settings",e.value).subscribe(function(e){200==e.status&&t.toastr.success(t.trs.translate(e.message))})}},{key:"load",value:function(){var e=this;this.api.get("settings/gnrl_").subscribe(function(t){200==t.status&&e.myForm.setFormValue(t.data)})}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(ki),c.Y36(Z),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-general-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Es,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," General Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Ks,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}();function js(e,t){1&e&&c._UZ(0,"i",23)}function zs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"i",24),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit;return c.oxw().toggleNetwork(e.id)}),c.qZA()}}function Gs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"i",25),c.NdJ("click",function(){c.CHM(a);var e=c.oxw().$implicit;return c.oxw().toggleNetwork(e.id)}),c.qZA()}}function Ws(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"td"),c.TgZ(1,"input",26),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).edit_zone.name=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngModel",i.edit_zone.name)}}function $s(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"td"),c.TgZ(1,"input",27),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).edit_zone.network=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngModel",i.edit_zone.network)}}function Xs(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"td"),c.TgZ(1,"input",28),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).edit_zone.netmask=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngModel",i.edit_zone.netmask)}}function ec(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"td",29),c.TgZ(1,"input",30),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).edit_zone.ratio=e}),c.qZA(),c._uU(2),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(1),c.Q6J("ngModel",i.edit_zone.ratio),c.xp6(1),c.hij(" ",i.edit_zone.ratio,"% ")}}function tc(e,t){1&e&&c._UZ(0,"td")}function ac(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"td"),c.TgZ(1,"button",31),c.NdJ("click",function(){c.CHM(a);var e=c.oxw(2);return e.update(e.edit_zone)}),c._UZ(2,"i",32),c._uU(3," Update"),c.qZA(),c.qZA()}}function ic(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",16),c._uU(2),c.qZA(),c.TgZ(3,"td",16),c._uU(4),c.qZA(),c.TgZ(5,"td",16),c._uU(6),c.qZA(),c.TgZ(7,"td",16),c._uU(8),c.qZA(),c.TgZ(9,"td",16),c.YNc(10,js,1,0,"i",17),c.qZA(),c.TgZ(11,"td",16),c.TgZ(12,"i",18),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().edit(e)}),c.qZA(),c._uU(13,"\xa0\xa0 "),c.YNc(14,zs,1,0,"i",19),c.YNc(15,Gs,1,0,"i",20),c._uU(16," \xa0\xa0 "),c.TgZ(17,"i",21),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().destroy(e.id)}),c.qZA(),c.qZA(),c.YNc(18,Ws,2,1,"td",15),c.YNc(19,$s,2,1,"td",15),c.YNc(20,Xs,2,1,"td",15),c.YNc(21,ec,3,2,"td",22),c.YNc(22,tc,1,0,"td",15),c.YNc(23,ac,4,0,"td",15),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(1),c.Oqu(i.name),c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(1),c.Oqu(i.network),c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(1),c.Oqu(i.netmask),c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(1),c.hij("",i.ratio,"%"),c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",1==i.enabled),c.xp6(1),c.Q6J("hidden",n.edit_zone.id==i.id),c.xp6(3),c.Q6J("ngIf",1==i.enabled),c.xp6(1),c.Q6J("ngIf",0==i.enabled),c.xp6(3),c.Q6J("ngIf",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",n.edit_zone.id==i.id),c.xp6(1),c.Q6J("ngIf",n.edit_zone.id==i.id)}}function nc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c.TgZ(2,"input",26),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_zone.name=e}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"input",27),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_zone.network=e}),c.qZA(),c.qZA(),c.TgZ(5,"td"),c.TgZ(6,"input",28),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_zone.netmask=e}),c.qZA(),c.qZA(),c.TgZ(7,"td",29),c.TgZ(8,"input",30),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_zone.ratio=e}),c.qZA(),c._uU(9),c.qZA(),c._UZ(10,"td"),c.TgZ(11,"td"),c.TgZ(12,"button",33),c.NdJ("click",function(){return c.CHM(a),c.oxw().save()}),c._UZ(13,"i",32),c._uU(14," Save"),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("ngModel",i.new_zone.name),c.xp6(2),c.Q6J("ngModel",i.new_zone.network),c.xp6(2),c.Q6J("ngModel",i.new_zone.netmask),c.xp6(2),c.Q6J("ngModel",i.new_zone.ratio),c.xp6(1),c.hij(" ",i.new_zone.ratio,"% ")}}var oc=function(){function e(t,a,i,n){o(this,e),this.api=t,this.toastr=a,this.swal=i,this.trs=n,this.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0},this.zones=[],this.edit_zone={id:null},this.freezone_enabled=!1,this.load(),this.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"load",value:function(){var e=this;this.api.get("settings/freezone_").subscribe(function(t){200===t.status&&(e.freezone_enabled="1"==t.data.freezone_enabled)}),this.api.get("freezone").subscribe(function(t){200==t.status&&(e.zones=t.data)})}},{key:"toggleStatus",value:function(){var e={freezone_enabled:"1"};this.freezone_enabled||(e.freezone_enabled="0"),this.api.post("settings",e).subscribe(function(e){})}},{key:"save",value:function(){var e=this;this.blockUI.start(),this.api.post("freezone",this.new_zone).subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.toastr.success(e.trs.translate(t.message)),e.load(),e.new_zone={name:"",network:"",netmask:"",ratio:100,enabled:!0})})}},{key:"toggleNetwork",value:function(e){var t,a=this,n=null,o={enabled:0},r=i(this.zones);try{for(r.s();!(t=r.n()).done;){var l=t.value;l.id==e&&(n=l)}}catch(s){r.e(s)}finally{r.f()}o.enabled=0==n.enabled?1:0,this.blockUI.start(),this.api.put("freezone/"+n.id.toString(),o).subscribe(function(e){a.blockUI.stop(),200==e.status&&(a.toastr.success(a.trs.translate(e.message)),a.load())})}},{key:"destroy",value:function(e){var t=this;this.swal.confirm({title:"Delete Network",type:"warning",text:"Delete Selected Network ?",confirmButtonText:"Yes"}).subscribe(function(){t.blockUI.start(),t.api.delete("freezone/"+e.toString()).subscribe(function(e){t.blockUI.stop(),200==e.status&&(t.toastr.success(t.trs.translate(e.message)),t.load())})})}},{key:"edit",value:function(e){this.edit_zone=e}},{key:"update",value:function(e){var t=this;this.api.put("freezone/"+e.id.toString(),e).subscribe(function(e){t.edit_zone={id:null},200==e.status&&t.toastr.success(t.trs.translate(e.message)),t.load()})}}]),e}();function rc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",29),c._UZ(1,"input",30),c.TgZ(2,"span",25),c._uU(3,"\xa0=\xa0"),c.qZA(),c._UZ(4,"input",30),c.TgZ(5,"button",27),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw(2).removePostParameter(e.key)}),c._UZ(6,"i",31),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(1),c.Q6J("value",i.key),c.xp6(3),c.Q6J("value",i.value)}}function lc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"label",6),c.TgZ(2,"span"),c._uU(3,"POST Parameters"),c.qZA(),c.qZA(),c.TgZ(4,"div",7),c.TgZ(5,"div"),c.YNc(6,rc,7,2,"div",22),c.TgZ(7,"div",23),c.TgZ(8,"input",24),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_post_params.key=e}),c.qZA(),c.TgZ(9,"span",25),c._uU(10,"\xa0=\xa0"),c.qZA(),c.TgZ(11,"input",26),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_post_params.value=e}),c.qZA(),c.TgZ(12,"button",27),c.NdJ("click",function(){return c.CHM(a),c.oxw().addPostParameter()}),c._UZ(13,"i",28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(6),c.Q6J("ngForOf",i.post_params),c.xp6(2),c.Q6J("ngModel",i.new_post_params.key),c.xp6(3),c.Q6J("ngModel",i.new_post_params.value)}}oc.\u0275fac=function(e){return new(e||oc)(c.Y36(Z),c.Y36(v._W),c.Y36(tt),c.Y36(I))},oc.\u0275cmp=c.Xpm({type:oc,selectors:[["app-freezone-settings"]],decls:35,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-asterisk"],[1,"card-body"],[1,"row"],[1,"col"],[1,"alert","alert-info"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["name","freezone_enabled",3,"id","ngModel","ngModelChange"],[1,"table","table-bordered","table-hover","table-sm"],["width","auto"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"hidden"],["class","fa fa-check",4,"ngIf"],[1,"fa","fa-edit",3,"click"],["class","fa fa-ban","tooltip","Disable",3,"click",4,"ngIf"],["class","fa fa-play-circle","tooltip","Enable",3,"click",4,"ngIf"],["tooltip","Delete",1,"fa","fa-trash",3,"click"],["style","text-align: center",4,"ngIf"],[1,"fa","fa-check"],["tooltip","Disable",1,"fa","fa-ban",3,"click"],["tooltip","Enable",1,"fa","fa-play-circle",3,"click"],["type","text","placeholder","Zone Name","name","zone_name",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","text","placeholder","a.b.c.d","name","zone_network",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["type","text","placeholder","255.255.255.0","name","zone_netmask",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[2,"text-align","center"],["type","range","placeholder","100%","name","zone_ratio",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-save"],[1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Free Zone Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c._uU(8," This feature allows you to exclude some IP ranges from traffic accounting, such as local google traffic or local IPTV service. Enabling it requires enabling Mikrotik IP Accounting service and making it reachable via HTTP. "),c.qZA(),c.TgZ(9,"form",7),c.TgZ(10,"div",8),c.TgZ(11,"label",9),c.TgZ(12,"span"),c._uU(13,"Enable Freezone Traffic"),c.qZA(),c.qZA(),c.TgZ(14,"div",10),c.TgZ(15,"p-inputSwitch",11),c.NdJ("ngModelChange",function(e){return t.freezone_enabled=e})("ngModelChange",function(){return t.toggleStatus()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(16,"br"),c.TgZ(17,"table",12),c.TgZ(18,"thead"),c.TgZ(19,"tr"),c.TgZ(20,"th"),c._uU(21,"Name"),c.qZA(),c.TgZ(22,"th"),c._uU(23,"IP"),c.qZA(),c.TgZ(24,"th"),c._uU(25,"Netmask"),c.qZA(),c.TgZ(26,"th",13),c._uU(27,"Free Ratio(%)"),c.qZA(),c.TgZ(28,"th"),c._uU(29,"Enabled"),c.qZA(),c.TgZ(30,"th"),c._uU(31,"Action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(32,"tbody"),c.YNc(33,ic,24,19,"tr",14),c.YNc(34,nc,15,5,"tr",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(15),c.Q6J("id","freezone_enabled")("ngModel",t.freezone_enabled),c.xp6(18),c.Q6J("ngForOf",t.zones),c.xp6(1),c.Q6J("ngIf",null==t.edit_zone.id))},directives:[A._Y,A.JL,A.F,Da.Ql,A.JJ,A.On,Q.sg,Q.O5,A.Fj,A.eT],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],oc.prototype,"blockUI",void 0);var sc=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.toastr=a,this.trs=i,this.swal=n,this.config={sms_enabled:0,sms_api_url:"",sms_method:0,sms_post_params:null,sms_message_activation:"",sms_message_expiration:""},this.post_params=[],this.new_post_params={key:"",value:""},this.load()}return l(e,[{key:"addPostParameter",value:function(){this.post_params.push({key:this.new_post_params.key,value:this.new_post_params.value}),this.new_post_params={key:"",value:""}}},{key:"removePostParameter",value:function(e){var t,a=0,n=null,o=i(this.post_params);try{for(o.s();!(t=o.n()).done;){t.value.key==e&&(n=a),a++}}catch(r){o.e(r)}finally{o.f()}this.post_params.splice(n,1)}},{key:"ngOnInit",value:function(){}},{key:"save",value:function(){var e=this,t=this.config;t.sms_post_params=JSON.stringify(this.post_params),this.api.post("settings",t).subscribe(function(t){200==t.status&&e.toastr.success(e.trs.translate(t.message))})}},{key:"load",value:function(){var e=this;this.api.get("settings/sms_").subscribe(function(t){var a=t.data;e.post_params=JSON.parse(t.data.sms_post_params),e.config=a})}},{key:"test",value:function(){var e=this;this.swal.prompt("Mobile Number").subscribe(function(t){e.api.post("sms/test",{dst:t}).subscribe(function(t){e.toastr.success(e.trs.translate(t.message))})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(v._W),c.Y36(I),c.Y36(tt))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sms-settings"]],decls:55,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-mobile"],[1,"card-body"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["name","sms_enabled",3,"id","ngModel","trueValue","falseValue","ngModelChange"],["type","text","id","sms_api","name","sms_api_url",1,"form-control",3,"ngModel","ngModelChange"],[1,"help-block"],["name","method",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["class","form-group row",4,"ngIf"],["name","activation_sms",1,"form-control",3,"ngModel","ngModelChange"],["name","expiration_sms",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-actions","float-left"],["type","button",1,"btn","btn-secondary","form-action-button",3,"click"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],["class","col row",4,"ngFor","ngForOf"],[1,"row","col"],["placeholder","parameter name","name","param",1,"form-control","col",3,"ngModel","ngModelChange"],[1,"col-form-label"],["placeholder","value","name","value",1,"form-control","col",3,"ngModel","ngModelChange"],[1,"btn","btn-default",3,"click"],[1,"fa","fa-plus"],[1,"col","row"],["type","text","disabled","",1,"form-control","col",3,"value"],[1,"fa","fa-minus"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," SMS Configuration "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"form",4),c.TgZ(6,"div",5),c.TgZ(7,"label",6),c.TgZ(8,"span"),c._uU(9,"Enable SMS Service"),c.qZA(),c.qZA(),c.TgZ(10,"div",7),c.TgZ(11,"p-inputSwitch",8),c.NdJ("ngModelChange",function(e){return t.config.sms_enabled=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",5),c.TgZ(13,"label",6),c.TgZ(14,"span"),c._uU(15,"SMS API Url"),c.qZA(),c.qZA(),c.TgZ(16,"div",7),c.TgZ(17,"input",9),c.NdJ("ngModelChange",function(e){return t.config.sms_api_url=e}),c.qZA(),c.TgZ(18,"span",10),c._uU(19),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"div",5),c.TgZ(21,"label",6),c.TgZ(22,"span"),c._uU(23,"API Method"),c.qZA(),c.qZA(),c.TgZ(24,"div",7),c.TgZ(25,"select",11),c.NdJ("ngModelChange",function(e){return t.config.sms_method=e}),c.TgZ(26,"option",12),c._uU(27,"GET"),c.qZA(),c.TgZ(28,"option",13),c._uU(29,"POST"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(30,lc,14,3,"div",14),c.TgZ(31,"div",5),c.TgZ(32,"label",6),c.TgZ(33,"span"),c._uU(34,"Activation SMS"),c.qZA(),c.qZA(),c.TgZ(35,"div",7),c.TgZ(36,"textarea",15),c.NdJ("ngModelChange",function(e){return t.config.sms_message_activation=e}),c.qZA(),c.TgZ(37,"span",10),c._uU(38),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",5),c.TgZ(40,"label",6),c.TgZ(41,"span"),c._uU(42,"Expiration Warning SMS"),c.qZA(),c.qZA(),c.TgZ(43,"div",7),c.TgZ(44,"textarea",16),c.NdJ("ngModelChange",function(e){return t.config.sms_message_expiration=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(45,"div"),c._UZ(46,"hr"),c.TgZ(47,"div",17),c.TgZ(48,"button",18),c.NdJ("click",function(){return t.test()}),c._uU(49,"Test"),c.qZA(),c.qZA(),c.TgZ(50,"div",19),c.TgZ(51,"button",20),c.NdJ("click",function(){return t.save()}),c._uU(52,"Save"),c.qZA(),c.TgZ(53,"button",21),c.NdJ("click",function(){return t.load()}),c._uU(54,"Reset"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(11),c.Q6J("id","sms_enabled")("ngModel",t.config.sms_enabled)("trueValue",1)("falseValue",0),c.xp6(6),c.Q6J("ngModel",t.config.sms_api_url),c.xp6(2),c.AsE("Valid Keys : ","{dst}"," = recipient phone number , ","{text}"," = text message"),c.xp6(6),c.Q6J("ngModel",t.config.sms_method),c.xp6(5),c.Q6J("ngIf",1==t.config.sms_method),c.xp6(6),c.Q6J("ngModel",t.config.sms_message_activation),c.xp6(2),c.xDo("Valid Keys : ","{srv}"," = Service Profile , ","{exp}"," = expiration , "," {username} "," = username, "," {firstname} ",", "," {lastname} ",""),c.xp6(6),c.Q6J("ngModel",t.config.sms_message_expiration))},directives:[A._Y,A.JL,A.F,Da.Ql,A.JJ,A.On,A.Fj,A.EJ,A.YN,A.Kr,Q.O5,Q.sg],styles:[".form-action-button[_ngcontent-%COMP%]{min-width:100px}.help-block[_ngcontent-%COMP%]{color:#657079}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}(),cc=n(93104);function uc(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}var dc=function(){return{height:"450px"}};function fc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"div",15),c._UZ(2,"i",16),c._uU(3," Template Editor "),c.qZA(),c.TgZ(4,"div",17),c.TgZ(5,"input",18),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().template.subject=e}),c.qZA(),c.TgZ(6,"p-editor",19),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().template.body=e}),c.qZA(),c._UZ(7,"br"),c.TgZ(8,"div",20),c.TgZ(9,"h5"),c._uU(10,"Email Keywords"),c.qZA(),c.TgZ(11,"b"),c._uU(12),c.qZA(),c._uU(13," = Username, "),c.TgZ(14,"b"),c._uU(15),c.qZA(),c._uU(16,"=User Password, "),c.TgZ(17,"b"),c._uU(18),c.qZA(),c._uU(19," = User Expiration, "),c.TgZ(20,"b"),c._uU(21),c.qZA(),c._uU(22," = Profile Name, "),c.TgZ(23,"b"),c._uU(24),c.qZA(),c._uU(25," = First Name, "),c.TgZ(26,"b"),c._uU(27),c.qZA(),c._uU(28," = Last Name, "),c.TgZ(29,"b"),c._uU(30),c.qZA(),c._uU(31," = Manager's Username, "),c.TgZ(32,"b"),c._uU(33),c.qZA(),c._uU(34," = Manager's First Name, "),c.TgZ(35,"b"),c._uU(36),c.qZA(),c._uU(37," = Manager's Last Name, "),c.TgZ(38,"b"),c._uU(39),c.qZA(),c._uU(40," = Manager's Phone, "),c.TgZ(41,"b"),c._uU(42),c.qZA(),c._uU(43," = Manager's Company Name, "),c.TgZ(44,"b"),c._uU(45),c.qZA(),c._uU(46," = Manager's Address, "),c.TgZ(47,"b"),c._uU(48),c.qZA(),c._uU(49," = Manager's Email, "),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(5),c.Q6J("ngModel",i.template.subject),c.xp6(1),c.Akn(c.DdM(30,dc)),c.Q6J("ngModel",i.template.body),c.xp6(6),c.AsE("","{","username","}",""),c.xp6(3),c.AsE("","{","password","}",""),c.xp6(3),c.AsE("","{","expiration","}",""),c.xp6(3),c.AsE("","{","profile","}",""),c.xp6(3),c.AsE("","{","firstname","}",""),c.xp6(3),c.AsE("","{","lastname","}",""),c.xp6(3),c.AsE("","{","manager_username","}",""),c.xp6(3),c.AsE("","{","manager_firstname","}",""),c.xp6(3),c.AsE("","{","manager_lastname","}",""),c.xp6(3),c.AsE("","{","manager_phone","}",""),c.xp6(3),c.AsE("","{","manager_company","}",""),c.xp6(3),c.AsE("","{","manager_address","}",""),c.xp6(3),c.AsE("","{","manager_email","}","")}}var pc=function(){function e(t,a,i,n){o(this,e),this.swal=t,this.api=a,this.toastr=i,this.trs=n,this.selectedItem=-1,this.template_list=[],this.template={body:"",subject:"",name:""}}return l(e,[{key:"ngOnInit",value:function(){this.loadIndex()}},{key:"create",value:function(){var e=this;this.swal.prompt("Template Name").subscribe(function(t){e.api.post("emailTemplate",{name:t}).subscribe(function(a){200==a.status&&(e.template_list.push({id:a.data,name:t,subject:"",body:""}),e.selectedItem=a.data,e.template={body:"",subject:"",name:t})},function(e){})})}},{key:"save",value:function(){var e=this;this.api.put("emailTemplate/"+this.selectedItem,this.template).subscribe(function(t){200==t.status&&e.toastr.success(e.trs.translate(t.message))})}},{key:"load",value:function(e){var t=this;this.blockUI.start("loading..."),this.api.get("emailTemplate/"+e).subscribe(function(e){t.blockUI.stop(),200==e.status&&(t.template=e.data)})}},{key:"loadIndex",value:function(){var e=this;this.api.get("emailTemplate").subscribe(function(t){e.template_list=t.data})}},{key:"destroy",value:function(){var e=this,t=this.selectedItem;!t||t<0||this.swal.confirm({title:"Delete Template",type:"warning",text:"Delete Selected Template ?",confirmButtonText:"Yes"}).subscribe(function(){e.api.delete("emailTemplate/"+t).subscribe(function(t){200==t.status&&(e.toastr.success(t.message),e.selectedItem=-1,e.loadIndex())})})}}]),e}();pc.\u0275fac=function(e){return new(e||pc)(c.Y36(tt),c.Y36(Z),c.Y36(v._W),c.Y36(I))},pc.\u0275cmp=c.Xpm({type:pc,selectors:[["app-email-templates"]],decls:17,vars:4,consts:[[1,"row"],[1,"col-md-6"],["id","xx",1,"form-control",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],[1,"toolbar"],[1,"btn-group"],[1,"btn",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"hidden","click"],[1,"fa","fa-save"],[1,"fa","fa-trash"],["class","card",4,"ngIf"],[3,"value"],[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-envelop"],[1,"card-body"],["type","text","placeholder","email subject","name","subject",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"alert","alert-secondary"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.selectedItem=e})("change",function(){return t.load(t.selectedItem)}),c.TgZ(3,"option",3),c._uU(4,"Select Template"),c.qZA(),c.YNc(5,uc,2,2,"option",4),c.qZA(),c.qZA(),c.TgZ(6,"div",1),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"button",7),c.NdJ("click",function(){return t.create()}),c._UZ(10,"i",8),c.qZA(),c.TgZ(11,"button",9),c.NdJ("click",function(){return t.save()}),c._UZ(12,"i",10),c.qZA(),c.TgZ(13,"button",7),c.NdJ("click",function(){return t.destroy()}),c._UZ(14,"i",11),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(15,"hr"),c.YNc(16,fc,50,31,"div",12)),2&e&&(c.xp6(2),c.Q6J("ngModel",t.selectedItem),c.xp6(3),c.Q6J("ngForOf",t.template_list),c.xp6(6),c.Q6J("hidden",t.selectedItem<0),c.xp6(5),c.Q6J("ngIf",t.selectedItem>=0))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Q.O5,A.Fj,cc.ML],styles:[".card[_ngcontent-%COMP%], .row[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],pc.prototype,"blockUI",void 0);var gc=["myForm"];function hc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)})("formAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var mc=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.formsLoader=a,this.swal=i,this.toastr=n,this.trs=r,this.actions=[{text:"Test",action:"test",btnClass:"btn-secondary"}],this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden",customActions:this.actions},this.options={},this.formFields=this.formsLoader.getForm("settings_email"),this.form_config.fields=this.formFields}return l(e,[{key:"ngOnInit",value:function(){this.load()}},{key:"onFormChange",value:function(e){this.toggleFormFields(e)}},{key:"load",value:function(){var e=this;this.api.get("settings/email_").subscribe(function(t){200==t.status&&(e.myForm.setFormValue(t.data),e.toggleFormFields(t.data))})}},{key:"toggleFormFields",value:function(e){!0===e.email_server_requires_auth||1==e.email_server_requires_auth?(this.myForm.showField("email_username"),this.myForm.showField("email_password"),this.myForm.showField("email_security")):(this.myForm.hideField("email_username"),this.myForm.hideField("email_password"),this.myForm.hideField("email_security"))}},{key:"save",value:function(e){var t=this;this.api.post("settings",e.value).subscribe(function(e){200==e.status&&t.toastr.success(e.message)})}},{key:"onAction",value:function(e){var t=this;switch(e){case"test":this.swal.prompt("Email Address").subscribe(function(e){t.api.post("email/test",{email:e}).subscribe(function(e){t.toastr.success(t.trs.translate(e.message))})})}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(tt),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-email-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(gc,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-envelope"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Email Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,hc,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}();function _c(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var vc=function(){var e=function(){function e(t){o(this,e),this.api=t,this.columns=[{dataKey:"type",label:"Type",dataResolver:function(e){return 0===e?"Refill":1===e?"Card User":void 0}},{dataKey:"username",label:"Owner",parentKey:"owner_details",sortBy:"owner_id"},{dataKey:"username",label:"Creator",parentKey:"creator_details",sortBy:"created_by"},{dataKey:"created_at",label:"Date Added"},{dataKey:"qty",label:"Quantity"},{dataKey:"value",label:"Card Value",pipe:"currency"},{dataKey:"name",label:"Profile",parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"series",label:"Series"},{dataKey:"status",label:"Status",dataResolver:function(e){switch(e){case 0:return"Pending";case 1:return"Running";case 2:return"Finished";case 3:return"Stopped"}},classFn:function(e){switch(e.status){case 0:return"status-pending";case 1:return"status-running";case 2:case 3:return"status-finished"}}}],this.actions=[{name:"cancel",label:"Cancel",icon:"fa fa-times",inline:!0,requiresRow:!0,acl:"prm_cards_job_cancel"},{name:"continue",label:"Continue",icon:"fa fa-play",inline:!0,requiresRow:!0,acl:"prm_cards_job_cancel"}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Card Jobs Queue",icon:"fa fa-credit-card",columns:this.columns,actions:this.actions,dataUrl:"index/cardJob",page:1,showSearchBox:!1,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"cardJob",hasAdvancedFilter:!1,hasInlineActions:!0,sortBy:"id",direction:"desc"}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-card-jobs"]],decls:1,vars:1,consts:[["name","cards_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded",4,"ngIf"],["name","cards_model_view",3,"modelViewConfig","onAction","onCellClicked","onDataLoading","onDataLoaded"],["cards_model_view",""]],template:function(e,t){1&e&&c.YNc(0,_c,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[".status-pending{color:#d39745}.status-running{color:#b00}.status-finished{color:#5ab738;font-weight:bold}.status-stopped{color:#b00}\n"],encapsulation:2}),e}(),bc=["online_model_view"],Zc=["ping_dialog"],yc=["live_traffic"],wc=["liveTrafficDialog"];function xc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",14,15),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw(2).onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw(2).onCellClicked(e)})("onCellMiddleClicked",function(e){return c.CHM(a),c.oxw(2).onCellMiddleClicked(e)}),c.qZA()}if(2&e){var i=c.oxw(2);c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}function Ac(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,xc,2,3,"model-table-view",13),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.modelViewConfig)}}function qc(e,t){1&e&&c._UZ(0,"i",26)}function Tc(e,t){if(1&e&&(c.TgZ(0,"table",1),c.TgZ(1,"tr"),c.TgZ(2,"td"),c.TgZ(3,"b"),c._uU(4,"Sent"),c.qZA(),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"tr"),c.TgZ(8,"td"),c.TgZ(9,"b"),c._uU(10,"Received"),c.qZA(),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.qZA(),c.TgZ(13,"tr"),c.TgZ(14,"td"),c.TgZ(15,"b"),c._uU(16,"Time"),c.qZA(),c.qZA(),c.TgZ(17,"td"),c._uU(18),c.qZA(),c.qZA(),c.TgZ(19,"tr"),c.TgZ(20,"td"),c.TgZ(21,"b"),c._uU(22,"Average"),c.qZA(),c.qZA(),c.TgZ(23,"td"),c._uU(24),c.qZA(),c.qZA(),c.TgZ(25,"tr"),c.TgZ(26,"td"),c.TgZ(27,"b"),c._uU(28,"Max RTT"),c.qZA(),c.qZA(),c.TgZ(29,"td"),c._uU(30),c.qZA(),c.qZA(),c.TgZ(31,"tr"),c.TgZ(32,"td"),c.TgZ(33,"b"),c._uU(34,"Min RTT"),c.qZA(),c.qZA(),c.TgZ(35,"td"),c._uU(36),c.qZA(),c.qZA(),c.TgZ(37,"tr"),c.TgZ(38,"td"),c.TgZ(39,"b"),c._uU(40,"Packet Loss"),c.qZA(),c.qZA(),c.TgZ(41,"td"),c._uU(42),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw(2);c.xp6(6),c.hij("",a.ping_data.sent," packet(s)"),c.xp6(6),c.hij("",a.ping_data.sent," packet(s)"),c.xp6(6),c.Oqu(a.ping_data.time),c.xp6(6),c.Oqu(a.ping_data.avg),c.xp6(6),c.Oqu(a.ping_data.max),c.xp6(6),c.Oqu(a.ping_data.min),c.xp6(6),c.Oqu(a.ping_data.loss)}}function kc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"h4",17),c._uU(2),c.qZA(),c.TgZ(3,"button",18),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c.TgZ(4,"span",19),c._uU(5,"\xd7"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",20),c.TgZ(7,"div",21),c.YNc(8,qc,1,0,"i",22),c._uU(9),c._UZ(10,"hr"),c.YNc(11,Tc,43,7,"table",23),c.qZA(),c.qZA(),c.TgZ(12,"div",24),c.TgZ(13,"button",25),c.NdJ("click",function(){return c.CHM(a),c.oxw().activeModal.hide()}),c._uU(14),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.tr.translate("user_ping_dialog_title")),c.xp6(6),c.Q6J("ngIf",!0===(null==i.ping_data?null:i.ping_data.running)),c.xp6(1),c.hij(" Pinging ",i.ping_data.username," "),c.xp6(2),c.Q6J("ngIf",!1===i.ping_data.running),c.xp6(3),c.Oqu(i.tr.translate("global_button_dismiss"))}}var Cc=function(){return{width:"750px"}},Uc=function(){function e(t,a,i,n,r,l,s){o(this,e),this.api=t,this.toastr=a,this.swal=i,this.router=n,this.tr=r,this.auth=l,this.modalService=s,this.columns=[{dataKey:"id",label:this.tr.translate("users_table_status"),sortBy:"radacctid",dataResolver:function(e){return"\u2588\u2588"},classFn:function(e){if(1===e.fup)return"user_fup";if(e.status){var t=e.status;return 0===e.enable?"user_disabled":1===e.online_status?"user_online":!1===t.status?"user_expired":"user_active"}}},{dataKey:"username",label:this.tr.translate("users_table_username"),classFn:function(e){return 0===e.enabled?"username user_disabled":"username href"}},{dataKey:"firstname",label:this.tr.translate("users_table_firstname"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.firstname"},{dataKey:"lastname",label:this.tr.translate("users_table_lastname"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.lastname"},{dataKey:"expiration",label:this.tr.translate("users_table_expiration"),parentKey:"user_details",hidden:!0,sortBy:"sas_users.expiration"},{dataKey:"acctoutputoctets",label:this.tr.translate("users_table_dl"),pipe:"bytes"},{dataKey:"acctinputoctets",label:this.tr.translate("users_table_ul"),pipe:"bytes"},{dataKey:"user_profile_name",label:this.tr.translate("users_table_profile"),sortBy:"sas_users.profile_id"},{dataKey:"shortname",label:this.tr.translate("NAS"),parentKey:"nas_details",sortBy:"nasipaddress",hidden:!0},{dataKey:"parent_username",label:this.tr.translate("users_table_parent"),sortBy:"sas_users.parent_id",hidden:!0},{dataKey:"framedipaddress",label:this.tr.translate("IP"),classFn:function(e){return"href"}},{dataKey:"callingstationid",label:this.tr.translate("MAC")},{dataKey:"daily_usage_percentage",type:"progress",label:this.tr.translate("users_table_daily_usage"),sortBy:"none",hidden:!0},{dataKey:"acctsessiontime",label:this.tr.translate("users_table_uptime"),pipe:"duration"},{dataKey:"oui",label:this.tr.translate("users_table_hardware"),sortBy:"callingstationid"},{dataKey:"calledstationid",label:this.tr.translate("users_table_service_name"),sortBy:"calledstationid",hidden:!0}],this.actions=[{name:"show_live_traffic",label:this.tr.translate("users_action_live_traffic"),icon:"fa fa-chart",acl:"prm_users_live_traffic",inline:!0},{name:"view",label:this.tr.translate("users_action_view"),icon:"fa fa-eye",acl:"prm_users_update",inline:!0,requiresRow:!0},{name:"edit_new_tab",label:this.tr.translate("global_actions_edit_new_tab"),icon:"fa fa-edit",requiresRow:!0,acl:"prm_users_update",inline:!0},{name:"",label:"",type:"separator"},{name:"disconnect",label:this.tr.translate("users_action_disconnect"),icon:"fa fa-user-slash",acl:"prm_users_disconnect",inline:!0,requiresRow:!0},{name:"lock_mac",label:this.tr.translate("users_action_lock_mac"),icon:"fa fa-lock",acl:"prm_users_mac_lock",inline:!0,requiresRow:!0},{name:"ping",label:this.tr.translate("users_action_ping"),icon:"fa fa-arrows-alt-h",acl:"prm_users_ping",inline:!0,requiresRow:!0}],this.filterFields=[{key:"status",label:this.tr.translate("users_filter_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("users_status_active")},{value:2,label:this.tr.translate("users_status_expired")},{value:3,label:this.tr.translate("users_status_disabled")}]},{key:"connection",label:this.tr.translate("users_filter_connection"),type:"select",layout:"vertical",acl:"prm_managers_sysadmin",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:"FUP"},{value:2,label:"Non-FUP"}]},{key:"parent_id",label:this.tr.translate("users_filter_parent"),type:"select2",value:-1,options:[],layout:"vertical",cols:12},{key:"sub_users",label:this.tr.translate("users_filter_sub_users"),type:"switch",layout:"vertical",value:1,cols:12},{key:"profile_id",label:this.tr.translate("users_filter_profile"),type:"select2",layout:"vertical",value:-1,cols:12,options:[]},{key:"active_profile_id",label:this.tr.translate("users_filter_profile_active"),type:"select2",layout:"vertical",value:-1,cols:12,acl:"prm_managers_sysadmin",options:[]},{key:"nasname",label:this.tr.translate("users_filter_nas"),type:"select2",acl:"prm_managers_sysadmin",layout:"vertical",value:-1,cols:12,options:[]}],this.filterOptions={parent_id:[],active_profile_id:[]},this.ping_data={username:null,running:!1,avg:null,time:null,loss:null,sent:null,received:null},this.modelViewConfig=null,this.traffic_dialog_visible=!1,this.traffic_dialog_user=""}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("users_table_online_title"),icon:"fa fa-users",columns:this.columns,dataUrl:"index/online",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"radacctid",allowSelect:!0,allowMultipleSelect:!0,modelName:"onlineUsers",hasAdvancedFilter:!0,hasInlineActions:!0,id:"online_index_table",showRowsCount:!0,allowExport:!0},this.loadResources()}},{key:"onAction",value:function(e){var t=this,a=null;switch(this.modelView.currentRow&&(a=this.modelView.currentRow.radacctid),e.action){case"show_live_traffic":this.showLiveTraffic(e);break;case"disconnect":this.disconnect(a),this.modelView.reload();break;case"lock_mac":this.lockMacAddress(a);break;case"view":this.router.navigate(["user",this.modelView.currentRow.user_details.id]);break;case"ping":this.showPingDialog(this.modelView.currentRow);break;case"edit_new_tab":this.router.navigate([]).then(function(e){window.open("#/user/"+t.modelView.currentRow.user_details.id,"_blank")})}}},{key:"onCellClicked",value:function(e){"username"==e.column&&null!==e.row.user_details&&this.router.navigate(["user",e.row.user_details.id]),"framedipaddress"==e.column&&window.open("http://"+e.row.framedipaddress)}},{key:"onCellMiddleClicked",value:function(e){"username"===e.column&&window.open("#/user/"+e.row.user_details.id,"_blank")}},{key:"disconnect",value:function(e){var t=this;this.swal.confirm({title:"",type:"warning",text:this.tr.translate("prompt_disconnect_user"),confirmButtonText:"Yes"}).subscribe(function(){if(t.modelView.selectedRows().length>1){var a,n=[],o=i(t.modelView.selectedRows());try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push(r.username)}}catch(l){o.e(l)}finally{o.f()}t.api.post("user/disconnect",n).subscribe(function(e){200===e.status&&(t.toastr.success(t.tr.translate(e.message)),t.modelView.reload())})}else t.api.get("user/disconnect/acctid/"+e.toString()).subscribe(function(e){200===e.status&&(t.toastr.success(t.tr.translate(e.message)),t.modelView.reload())})})}},{key:"lockMacAddress",value:function(e){var t=this;this.swal.confirm({title:"",type:"warning",text:this.tr.translate("prompt_lock_mac"),confirmButtonText:"Yes"}).subscribe(function(){t.api.get("user/maclock/"+e.toString()).subscribe(function(e){200===e.status&&(t.toastr.success(e.message),t.modelView.reload())})})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")});var n,o=i(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.parent_id=a}),this.api.get("list/profile/-1").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")}),200===t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filterOptions.active_profile_id=a)}),this.api.get("list/profile/0").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")}),200===t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filterOptions.profile_id=a)}),this.auth.has("prm_managers_sysadmin")&&this.api.get("nas").subscribe(function(t){if(200===t.status){var a=[];a.push({value:-1,label:e.tr.translate("global_all")}),t.data.map(function(e){a.push({value:e.nasname,label:e.shortname+" ("+e.nasname+")"})}),e.filterOptions.nasname=a}})}},{key:"showPingDialog",value:function(e){var t=this;this.activeModal=this.modalService.show(this.pingDialogModal);var a={radacctid:e.radacctid,username:e.username};this.ping_data.running=!0,this.ping_data.username=e.username,this.api.post("user/ping",a).subscribe(function(e){if(t.ping_data.running=!1,200!==e.status)return t.activeModal.hide(),void t.toastr.warning("Mikrotik API error, unable to ping");200===e.status&&(t.ping_data.avg=e.data.avg,t.ping_data.loss=e.data["packet-loss"],t.ping_data.received=e.data.received,t.ping_data.sent=e.data.sent,t.ping_data.max=e.data["max-rtt"],t.ping_data.min=e.data["min-rtt"])})}},{key:"showLiveTraffic",value:function(e){this.liveTraffic.setUserId(e.row.user_details.id),this.traffic_dialog_visible=!0,this.traffic_dialog_user=e.row.username}}]),e}();Uc.\u0275fac=function(e){return new(e||Uc)(c.Y36(Z),c.Y36(v._W),c.Y36(tt),c.Y36(_.F0),c.Y36(I),c.Y36(w),c.Y36(O.tTG))},Uc.\u0275cmp=c.Xpm({type:Uc,selectors:[["app-online-users"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(bc,5),c.Gf(Zc,5),c.Gf(yc,5),c.Gf(wc,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.pingDialogModal=a.first),c.iGM(a=c.CRH())&&(t.liveTraffic=a.first),c.iGM(a=c.CRH())&&(t.pDialog=a.first))},decls:25,vars:13,consts:[[1,"legend-box"],[2,"width","100%"],[1,"fa","fa-stop","user_active"],[1,"fa","fa-stop","user_expired"],[1,"fa","fa-stop","user_disabled"],[1,"fa","fa-stop","user_fup"],[1,"fa","fa-stop","user_zombie"],[4,"blockUI"],["ping_dialog",""],[3,"header","visible","modal","draggable","visibleChange","onShow","onHide"],["liveTrafficDialog",""],["id","live_traffic",3,"finished"],["live_traffic",""],["name","online_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onCellMiddleClicked",4,"ngIf"],["name","online_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked","onCellMiddleClicked"],["online_model_view",""],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"ping-console"],["class","fa fa-spinner fa-spin",4,"ngIf"],["style","width:100%",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"table",1),c.TgZ(2,"tr"),c.TgZ(3,"td"),c._UZ(4,"i",2),c._uU(5),c.qZA(),c.TgZ(6,"td"),c._UZ(7,"i",3),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._UZ(10,"i",4),c._uU(11),c.qZA(),c.TgZ(12,"td"),c._UZ(13,"i",5),c._uU(14),c.qZA(),c.TgZ(15,"td"),c._UZ(16,"i",6),c._uU(17),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(18,Ac,2,1,"div",7),c.YNc(19,kc,15,5,"ng-template",null,8,c.W1O),c.TgZ(21,"p-dialog",9,10),c.NdJ("visibleChange",function(e){return t.traffic_dialog_visible=e})("onShow",function(){return t.liveTraffic.start()})("onHide",function(){return t.liveTraffic.stopPolling()}),c.TgZ(23,"app-user-live-traffic",11,12),c.NdJ("finished",function(){return t.traffic_dialog_visible=!1}),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.hij(" ",t.tr.translate("users_status_active"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_expired"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_disabled"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_fup"),""),c.xp6(3),c.hij(" ",t.tr.translate("users_status_zombie"),""),c.xp6(1),c.Q6J("blockUI","model-view"),c.xp6(3),c.Akn(c.DdM(12,Cc)),c.MGl("header","User Traffic - ",t.traffic_dialog_user,""),c.Q6J("visible",t.traffic_dialog_visible)("modal",!0)("draggable",!0))},directives:[m.Z2,Oi.V,Vn,Q.O5,Tt],styles:['.user_disabled{color:#bb3436!important;cursor:pointer}.user_active{color:#9fe22b!important}.user_online{color:#1b9dec}.user_fup{color:#7c40a5}.user_expired{color:#ff9416}.user_zombie{color:#000}.legend-box{font-size:12px;background:white;margin-bottom:5px;padding:5px 15px;box-sizing:border-box}.username{font-weight:bold}.ping-console{background:#495057;min-height:90px;padding:5px;color:#87cc89;font-family:"Courier New","Monospace";font-size:16px}\n'],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Uc.prototype,"blockUI",void 0);var Mc=["myForm"],Fc=function(){return["/settings/googleDrive"]};function Jc(e,t){1&e&&(c.TgZ(0,"div",14),c.TgZ(1,"div",4),c.TgZ(2,"div",5),c.TgZ(3,"div",6),c._UZ(4,"i",15),c._uU(5," You have enabled Google Drive Backup. Make sure you have authorized this server with Google "),c._UZ(6,"i",16),c.TgZ(7,"a",17),c._uU(8," Google Drive Settings"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("routerLink",c.DdM(1,Fc)))}function Oc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",18,19),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)})("formAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}function Nc(e,t){if(1&e&&(c.TgZ(0,"option",20),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.value),c.xp6(1),c.Oqu(a.label)}}var Ic=function(){return{width:"40vw"}},Yc=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.show_disk_init_dialog=!1,this.unused_disks=[],this.selected_disk_to_format="-1",this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={backup_disk:[],backup_partition:[]},this.googleDriveEnabled=!1,this.old_form={},this.formFields=this.formsLoader.getForm("settings_backup"),this.form_config.fields=this.formFields}return l(e,[{key:"ngOnInit",value:function(){this.load(),this.loadDisks()}},{key:"onFormChange",value:function(e){this.toggleFormFields(e),this.old_form=e,1===e.backup_upload_gdrive&&(this.googleDriveEnabled=!0)}},{key:"load",value:function(){var e=this;this.api.get("settings/backup_").subscribe(function(t){200==t.status&&(e.myForm.setFormValue(t.data),e.toggleFormFields(t.data),t.data.backup_upload_gdrive&&1===t.data.backup_upload_gdrive&&(e.googleDriveEnabled=!0))})}},{key:"loadDisks",value:function(){var e=this;this.api.get("disks").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.options.backup_disk.push({value:o.name,label:o.model+",      ["+o.size+"]"})}}catch(r){n.e(r)}finally{n.f()}}}),this.api.get("disks/unused").subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.unused_disks.push({value:o.name,label:o.model+",      ["+o.size+"]"})}}catch(r){n.e(r)}finally{n.f()}}})}},{key:"loadPartitions",value:function(e){var t=this;this.options.backup_partition=[],this.api.get("partitions/"+e).subscribe(function(e){if(200===e.status){var a,n=i(e.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;t.options.backup_partition.push({value:o.uuid,label:o.name+",      ["+o.size+"]"})}}catch(r){n.e(r)}finally{n.f()}}})}},{key:"toggleFormFields",value:function(e){!0===e.backup_email_enabled&&this.myForm.showField("backup_email_address"),!1===e.backup_email_enabled&&this.myForm.hideField("backup_email_address"),!0===e.backup_daily_enabled&&this.myForm.showField("backup_daily_time"),!1===e.backup_daily_enabled&&this.myForm.hideField("backup_daily_time"),this.loadPartitions(e.backup_disk)}},{key:"save",value:function(e){var t=this;this.api.post("settings",e.value).subscribe(function(e){200==e.status&&t.toastr.success(t.tr.translate(t.tr.translate(e.message)))})}},{key:"onAction",value:function(e){"init_disk"===e&&(this.show_disk_init_dialog=!0)}},{key:"initDisk",value:function(){var e=this;this.blockUI.start(),this.api.get("disk/init/"+this.selected_disk_to_format).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.toastr.success("Disk Initialized Successfully"),e.show_disk_init_dialog=!1,e.options.backup_disk=[],e.options.unused_disks=[],e.loadDisks()):e.toastr.error(null==t?void 0:t.message)})}}]),e}();function Qc(e,t){1&e&&(c.TgZ(0,"span",16),c._uU(1,"Active"),c.qZA())}function Sc(e,t){1&e&&(c.TgZ(0,"span",17),c._uU(1,"Disabled"),c.qZA())}Yc.\u0275fac=function(e){return new(e||Yc)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},Yc.\u0275cmp=c.Xpm({type:Yc,selectors:[["app-backup-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Mc,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:19,vars:10,consts:[["class","card bg-info","style","margin-top:25px;",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"fa","fa-hdd"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["header","Initialize Disk",3,"visible","modal","visibleChange"],[1,"form-group"],[1,"form-control","form-control-md",3,"ngModel","ngModelChange"],["disabled","","selected","","value","-1"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"card","bg-info",2,"margin-top","25px"],[1,"fa","fa-info-circle"],[1,"fa","fa-hand-point-right"],[3,"routerLink"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,Jc,9,2,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"i",3),c._uU(4," Backup Settings "),c.qZA(),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.YNc(8,Oc,2,2,"dynamic-form",7),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"p-dialog",8),c.NdJ("visibleChange",function(e){return t.show_disk_init_dialog=e}),c._UZ(10,"br"),c.TgZ(11,"div",9),c.TgZ(12,"select",10),c.NdJ("ngModelChange",function(e){return t.selected_disk_to_format=e}),c.TgZ(13,"option",11),c._uU(14,"PrSelect Disk"),c.qZA(),c.YNc(15,Nc,2,2,"option",12),c.qZA(),c.qZA(),c.TgZ(16,"p-footer"),c.TgZ(17,"button",13),c.NdJ("click",function(){return t.initDisk()}),c._uU(18,"Format"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",!0===t.googleDriveEnabled),c.xp6(8),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(1),c.Akn(c.DdM(9,Ic)),c.Q6J("visible",t.show_disk_init_dialog)("modal",!0),c.xp6(3),c.Q6J("ngModel",t.selected_disk_to_format),c.xp6(3),c.Q6J("ngForOf",t.unused_disks),c.xp6(2),c.Q6J("disabled",-1==t.selected_disk_to_format))},directives:[Q.O5,Oi.V,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,Ci.$_,_.yS,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],Yc.prototype,"blockUI",void 0);var Pc=function(e){return{"addon-active":e}},Dc=function(){function e(t,a){o(this,e),this.api=t,this.auth=a,this.license={hwid:"N/A",id:"N/A",status:"N/A",expiration:"N/A",client_id:"N/A",mu:"N/A",ms:"N/A"}}return l(e,[{key:"load",value:function(){var e=this;this.blockUI.start(),this.api.get("license").subscribe(function(t){e.blockUI.stop(),e.license.hwid=t.data.hwid,e.license.id=t.data.id,e.license.st=t.data.st,e.license.ms=t.data.ms,e.license.expiration=t.data.exp,e.license.mu=t.data.mu}),this.api.get("license/features").subscribe(function(e){})}},{key:"reload",value:function(){var e=this;this.blockUI.start(),this.api.get("license/reload").subscribe(function(t){e.blockUI.stop(),e.load()})}},{key:"ngOnInit",value:function(){this.load()}}]),e}();Dc.\u0275fac=function(e){return new(e||Dc)(c.Y36(Z),c.Y36(w))},Dc.\u0275cmp=c.Xpm({type:Dc,selectors:[["app-license-settings"]],decls:57,vars:23,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-certificate"],[1,"card-body"],[1,"list-group","license-list"],[1,"list-group-item"],[1,"list-value"],["class","list-value text-success",4,"ngIf"],["class","list-value text-danger",4,"ngIf"],[1,"list-group-item","d-none"],[1,"license-addons"],[3,"ngClass"],[1,"card-footer"],[1,"card-actions"],[1,"btn","btn-primary","license-button",3,"click"],[1,"fa","fa-sync"],[1,"list-value","text-success"],[1,"list-value","text-danger"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," System License "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"ul",4),c.TgZ(6,"li",5),c._uU(7," License ID "),c.TgZ(8,"span",6),c._uU(9),c.qZA(),c.qZA(),c.TgZ(10,"li",5),c._uU(11," Hardware ID "),c.TgZ(12,"span",6),c._uU(13),c.qZA(),c.qZA(),c.TgZ(14,"li",5),c._uU(15," Status "),c.YNc(16,Qc,2,0,"span",7),c.YNc(17,Sc,2,0,"span",8),c.qZA(),c.TgZ(18,"li",5),c._uU(19," Expiration "),c.TgZ(20,"span",6),c._uU(21),c.qZA(),c.qZA(),c.TgZ(22,"li",5),c._uU(23," Client ID "),c.TgZ(24,"span",6),c._uU(25),c.qZA(),c.qZA(),c.TgZ(26,"li",5),c._uU(27," Max Users "),c.TgZ(28,"span",6),c._uU(29),c.qZA(),c.qZA(),c.TgZ(30,"li",5),c._uU(31," Max Sites "),c.TgZ(32,"span",6),c._uU(33),c.qZA(),c.qZA(),c.TgZ(34,"li",9),c._uU(35," Add-ons "),c._UZ(36,"br"),c.TgZ(37,"span",10),c.TgZ(38,"span",11),c._uU(39,"SASTrack"),c.qZA(),c._uU(40," \xa0\xa0|\xa0\xa0 "),c.TgZ(41,"span",11),c._uU(42,"FreeZone"),c.qZA(),c._uU(43," \xa0\xa0|\xa0\xa0 "),c.TgZ(44,"span",11),c._uU(45,"Tickets"),c.qZA(),c._uU(46," \xa0\xa0|\xa0\xa0 "),c.TgZ(47,"span",11),c._uU(48,"VPN"),c.qZA(),c._uU(49," \xa0\xa0|\xa0\xa0 "),c.TgZ(50,"span",11),c._uU(51,"Multi Sites"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(52,"div",12),c.TgZ(53,"div",13),c.TgZ(54,"button",14),c.NdJ("click",function(){return t.reload()}),c._UZ(55,"i",15),c._uU(56," Reload License"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(9),c.Oqu(t.license.id),c.xp6(4),c.Oqu(t.license.hwid),c.xp6(3),c.Q6J("ngIf","1"==t.license.st),c.xp6(1),c.Q6J("ngIf","0"==t.license.st),c.xp6(4),c.Oqu(t.license.expiration),c.xp6(4),c.Oqu(t.license.client_id),c.xp6(4),c.Oqu(t.license.mu),c.xp6(4),c.Oqu(t.license.ms),c.xp6(5),c.Q6J("ngClass",c.VKq(13,Pc,t.auth.features.indexOf("sastrack")>=0)),c.xp6(3),c.Q6J("ngClass",c.VKq(15,Pc,t.auth.features.indexOf("freezone")>=0)),c.xp6(3),c.Q6J("ngClass",c.VKq(17,Pc,t.auth.features.indexOf("Tickets")>=0)),c.xp6(3),c.Q6J("ngClass",c.VKq(19,Pc,t.auth.features.indexOf("vpn")>=0)),c.xp6(3),c.Q6J("ngClass",c.VKq(21,Pc,t.auth.features.indexOf("sites")>=0)))},directives:[Q.O5,Q.mk],styles:[".card[_ngcontent-%COMP%]{text-align:left}.license-list[_ngcontent-%COMP%]{width:100%;max-width:600px;margin-left:auto;margin-right:auto}.list-value[_ngcontent-%COMP%]{font-weight:lighter;float:right}.license-addons[_ngcontent-%COMP%]{font-weight:lighter;font-size:small;color:#87847c}.license-button[_ngcontent-%COMP%]{width:180px;font-size:small;margin-left:5px;margin-right:5px}.addon-active[_ngcontent-%COMP%]{font-weight:bolder;color:#5ab738}.addon-inactive[_ngcontent-%COMP%]{font-weight:lighter;color:#5e6e5e}"]}),(0,g.gn)([(0,m.bH)()],Dc.prototype,"blockUI",void 0);var Hc=function(){var e=function(){function e(t){o(this,e),this.api=t,this.valueData="..."}return l(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;""!=this.data.internal_data_source&&this.load(),this.timerHook&&clearInterval(this.timerHook),this.data.interval>0&&(this.timerHook=setInterval(function(){return e.load()},1e3*this.data.interval))}},{key:"load",value:function(){"internal"===this.data.data_source&&this.loadInternal()}},{key:"loadInternal",value:function(){var e=this;this.api.get("widgetData/internal/"+this.data.internal_data_source).subscribe(function(t){e.valueData=200==t.status?t.data:"N/A"},function(){e.valueData="N/A"})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-dashboard-simple-widget2"]],inputs:{data:"data"},features:[c.TTD],decls:6,vars:5,consts:[[1,"card-block","text-white"],[1,"m-t-15"],[1,"m-b-15"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c.TgZ(2,"h5",1),c._uU(3),c.qZA(),c.TgZ(4,"h3",2),c._uU(5),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Gre("card o-hidden ",t.data.color," web-num-card"),c.xp6(3),c.Oqu(t.data.title),c.xp6(2),c.Oqu(t.valueData))},styles:[".bg-c-blue[_ngcontent-%COMP%]{background:#4fc3f7}.o-hidden[_ngcontent-%COMP%]{overflow:hidden}.card[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 12px 5px -10px rgba(0,0,0,.1),0 0 4px rgba(0,0,0,.1);border:0;margin-bottom:30px;transition:all .2s ease-in-out}"]}),e}(),Rc=["myForm"];function Vc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)})("formAction",function(e){return c.CHM(a),c.oxw().onFormAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Lc=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.router=r,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.emailTemplates=[],this.formFields=this.formsLoader.getForm("settings_notifications"),this.form_config.fields=this.formFields}return l(e,[{key:"ngOnInit",value:function(){this.loadResources(),this.load()}},{key:"loadResources",value:function(){var e=this;this.api.get("emailTemplate").subscribe(function(t){t.data.map(function(t){e.emailTemplates.push({value:t.id,label:t.name})}),e.emailTemplates.unshift({value:-1,label:"None"}),e.options.notifications_email_template_activation=e.emailTemplates,e.options.notifications_email_template_registration=e.emailTemplates,e.options.notifications_email_template_termination=e.emailTemplates,e.options.notifications_email_template_expiration=e.emailTemplates,e.options.notifications_email_template_quota_threshold=e.emailTemplates,e.options.notifications_fup_email_template_id=e.emailTemplates})}},{key:"load",value:function(){var e=this;this.api.get("settings/notifications_").subscribe(function(t){200===t.status&&(e.myForm.setFormValue(t.data),e.toggleFormFields(t.data))})}},{key:"onFormChange",value:function(e){this.toggleFormFields(e)}},{key:"toggleFormFields",value:function(e){1==e.notifications_manager_dashboard_enabled&&(this.myForm.showField("notifications_manager_dashboard_type"),this.myForm.showField("notifications_manager_dashboard_text")),(!e.notifications_manager_dashboard_enabled||!1===e.notifications_manager_dashboard_enabled)&&(this.myForm.hideField("notifications_manager_dashboard_type"),this.myForm.hideField("notifications_manager_dashboard_text")),1==e.notifications_email_enabled&&(this.myForm.showField("notifications_email_template_activation"),this.myForm.showField("notifications_email_template_registration"),this.myForm.showField("notifications_email_template_expiration"),this.myForm.showField("notifications_email_template_termination"),this.myForm.showField("notifications_email_template_quota_threshold")),(!e.notifications_email_enabled||!1===e.notifications_email_enabled)&&(this.myForm.hideField("notifications_email_template_activation"),this.myForm.hideField("notifications_email_template_registration"),this.myForm.hideField("notifications_email_template_expiration"),this.myForm.hideField("notifications_email_template_termination"),this.myForm.hideField("notifications_email_template_quota_threshold")),1==e.notifications_sms_expiration&&this.myForm.showField("notifications_sms_expiration_period"),1!=e.notifications_sms_expiration&&this.myForm.hideField("notifications_sms_expiration_period"),1==e.notifications_email_expiration&&this.myForm.showField("notifications_email_expiration_period"),1!=e.notifications_email_expiration&&this.myForm.hideField("notifications_email_expiration_period"),1==e.notifications_show_welcome_screen&&this.myForm.showField("btn_group"),0==e.notifications_show_welcome_screen&&this.myForm.hideField("btn_group"),1==e.notifications_acp_login_enabled&&this.myForm.showField("notifications_acp_login_page_message"),0==e.notifications_fup_sms&&this.myForm.hideField("notifications_fup_sms_text"),1==e.notifications_fup_sms&&this.myForm.showField("notifications_fup_sms_text"),0==e.notifications_fup_email&&this.myForm.hideField("notifications_fup_email_template_id"),1==e.notifications_fup_email&&this.myForm.showField("notifications_fup_email_template_id"),0==e.notifications_fup_portal&&this.myForm.hideField("notifications_fup_portal_text"),1==e.notifications_fup_portal&&this.myForm.showField("notifications_fup_portal_text")}},{key:"save",value:function(e){var t=this;this.api.post("settings",e.value).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}},{key:"onFormAction",value:function(e){"welcome_screen"==e&&this.router.navigate(["/settings/welcomeScreen"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I),c.Y36(_.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-notification-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Rc,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-bell"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged","formAction"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Notification Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Vc,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}();function Ec(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c.TgZ(8,"button",22),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().removeAddress(e)}),c._UZ(9,"i",24),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.interface),c.xp6(2),c.Oqu(i.ip),c.xp6(2),c.Oqu(i.netmask)}}function Kc(e,t){if(1&e&&(c.TgZ(0,"option",32),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a),c.xp6(1),c.Oqu(a)}}function Bc(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c.TgZ(8,"button",22),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().removeRoute(e)}),c._UZ(9,"i",24),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.dst),c.xp6(2),c.Oqu(i.netmask),c.xp6(2),c.Oqu(i.gateway)}}var jc=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.toastr=a,this.trs=i,this.config={hostname:"",nameservers:"",gateway:""},this.rawConfig={},this.interfaceList=[],this.newAddressRecord={visible:!1,ip:"",netmask:"",interface:"-1"},this.newRouteRecord={visible:!1,dst:"",netmask:"",gateway:""},this.addressList=[],this.routeList=[]}return l(e,[{key:"loadResources",value:function(){var e=this;this.api.get("linux/network/interfaces").subscribe(function(t){t.data.map(function(t){e.interfaceList.push(t.name)})}),this.api.get("linux/network").subscribe(function(t){200==t.status&&(e.rawConfig=t.data,e.config.hostname=e.rawConfig.hostname,e.config.gateway=e.rawConfig.gateway,e.config.nameservers=e.rawConfig.nameservers.join(),e.addressList=e.rawConfig.addresses,e.rawConfig.routes.map(function(t){var a={};t.dst.split("/").length>1?(a.dst=t.dst.split("/")[0],a.netmask=t.dst.split("/")[1]):(a.dst=t.dst,a.netmask="255.255.255.255"),a.gateway=t.gateway,e.routeList.push(a)}))})}},{key:"ngOnInit",value:function(){this.loadResources()}},{key:"toggleNewAddressRecord",value:function(e){this.newAddressRecord={visible:e,ip:"",netmask:"",interface:"-1"}}},{key:"toggleNewRouteRecord",value:function(e){this.newRouteRecord={visible:e,dst:"",netmask:"",gateway:""}}},{key:"addNewAddress",value:function(){this.addressList.push({interface:this.newAddressRecord.interface,ip:this.newAddressRecord.ip,netmask:this.newAddressRecord.netmask}),this.toggleNewAddressRecord(!1)}},{key:"removeAddress",value:function(e){for(var t=0;t<this.addressList.length;t++)this.addressList[t].interface==e.interface&&this.addressList[t].ip==e.ip&&this.addressList[t].netmask==e.netmask&&this.addressList.splice(t,1)}},{key:"addNewRoute",value:function(){this.routeList.push({dst:this.newRouteRecord.dst,netmask:this.newRouteRecord.netmask,gateway:this.newRouteRecord.gateway}),this.toggleNewRouteRecord(!1)}},{key:"removeRoute",value:function(e){for(var t=0;t<this.routeList.length;t++)this.routeList[t].dst==e.dst&&this.routeList[t].netmask==e.netmask&&this.routeList[t].gateway==e.gateway&&this.routeList.splice(t,1)}},{key:"save",value:function(){var e=this,t=[];this.routeList.map(function(e){t.push({dst:e.dst+"/"+e.netmask,gateway:e.gateway})});var a={hostname:this.config.hostname,gateway:this.config.gateway,nameservers:this.config.nameservers.split(","),addresses:this.addressList,routes:t};this.api.post("linux/network",a).subscribe(function(t){200==t.status&&e.toastr.success(e.trs.translate(t.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-network-manager"]],decls:103,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-plug"],[1,"card-body"],[1,"form"],[1,"form-group","row"],[1,"col-form-label","col-md-3","form-control-label","text-right"],[1,"col-md-9"],["type","text","name","hostname","placeholder","sas4",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","gateway","placeholder","x.x.x.x",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","nameservers","placeholder","1.1.1.1",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[1,"fa","fa-plus"],[1,"table","table-bordered","table-hover","table-sm",2,"margin-top","10px"],[4,"ngFor","ngForOf"],[3,"hidden"],["name","interface",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","x.x.x.x","name","ip",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","netmask",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"text-center"],["type","button",1,"btn","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"fa","fa-times"],["placeholder","x.x.x.x","name","dst",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","netmask2",1,"form-control","input-sm",3,"ngModel","ngModelChange"],["placeholder","x.x.x.x","name","gateway2",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"card-footer"],[1,"card-actions","right"],[1,"btn","btn-primary",2,"float","right",3,"click"],[1,"fa","fa-save"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Network Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"form",4),c.TgZ(6,"h4"),c._uU(7,"Global Settings"),c.qZA(),c._UZ(8,"hr"),c.TgZ(9,"div",5),c.TgZ(10,"label",6),c.TgZ(11,"span"),c._uU(12,"Hostname"),c.qZA(),c.qZA(),c.TgZ(13,"div",7),c.TgZ(14,"input",8),c.NdJ("ngModelChange",function(e){return t.config.hostname=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",5),c.TgZ(16,"label",6),c.TgZ(17,"span"),c._uU(18,"Default Gateway"),c.qZA(),c.qZA(),c.TgZ(19,"div",7),c.TgZ(20,"input",9),c.NdJ("ngModelChange",function(e){return t.config.gateway=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",5),c.TgZ(22,"label",6),c.TgZ(23,"span"),c._uU(24,"DNS(s)"),c.qZA(),c.qZA(),c.TgZ(25,"div",7),c.TgZ(26,"input",10),c.NdJ("ngModelChange",function(e){return t.config.nameservers=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"h4"),c._uU(28,"\xa0"),c.qZA(),c.TgZ(29,"h4"),c._uU(30,"Network Interfaces"),c.qZA(),c._UZ(31,"hr"),c.TgZ(32,"button",11),c.NdJ("click",function(){return t.toggleNewAddressRecord(!0)}),c._UZ(33,"i",12),c._uU(34," Add Address"),c.qZA(),c.TgZ(35,"table",13),c.TgZ(36,"thead"),c.TgZ(37,"tr"),c.TgZ(38,"th"),c._uU(39,"Interface"),c.qZA(),c.TgZ(40,"th"),c._uU(41,"IP"),c.qZA(),c.TgZ(42,"th"),c._uU(43,"Netmask"),c.qZA(),c.TgZ(44,"th"),c._uU(45,"Action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(46,"tbody"),c.YNc(47,Ec,10,3,"tr",14),c.TgZ(48,"tr",15),c.TgZ(49,"td"),c.TgZ(50,"select",16),c.NdJ("ngModelChange",function(e){return t.newAddressRecord.interface=e}),c.TgZ(51,"option",17),c._uU(52,"Select Interface"),c.qZA(),c.YNc(53,Kc,2,2,"option",18),c.qZA(),c.qZA(),c.TgZ(54,"td"),c.TgZ(55,"input",19),c.NdJ("ngModelChange",function(e){return t.newAddressRecord.ip=e}),c.qZA(),c.qZA(),c.TgZ(56,"td"),c.TgZ(57,"input",20),c.NdJ("ngModelChange",function(e){return t.newAddressRecord.netmask=e}),c.qZA(),c.qZA(),c.TgZ(58,"td",21),c.TgZ(59,"button",22),c.NdJ("click",function(){return t.addNewAddress()}),c._UZ(60,"i",23),c.qZA(),c._uU(61," \xa0 "),c.TgZ(62,"button",22),c.NdJ("click",function(){return t.toggleNewAddressRecord(!1)}),c._UZ(63,"i",24),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(64,"h4"),c._uU(65,"\xa0"),c.qZA(),c.TgZ(66,"h4"),c._uU(67,"Static Routes"),c.qZA(),c._UZ(68,"hr"),c.TgZ(69,"button",11),c.NdJ("click",function(){return t.toggleNewRouteRecord(!0)}),c._UZ(70,"i",12),c._uU(71," Add Route"),c.qZA(),c.TgZ(72,"table",13),c.TgZ(73,"thead"),c.TgZ(74,"tr"),c.TgZ(75,"th"),c._uU(76,"Destination"),c.qZA(),c.TgZ(77,"th"),c._uU(78,"Netmask"),c.qZA(),c.TgZ(79,"th"),c._uU(80,"Gateway"),c.qZA(),c.TgZ(81,"th"),c._uU(82,"Action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(83,"tbody"),c.YNc(84,Bc,10,3,"tr",14),c.TgZ(85,"tr",15),c.TgZ(86,"td"),c.TgZ(87,"input",25),c.NdJ("ngModelChange",function(e){return t.newRouteRecord.dst=e}),c.qZA(),c.qZA(),c.TgZ(88,"td"),c.TgZ(89,"input",26),c.NdJ("ngModelChange",function(e){return t.newRouteRecord.netmask=e}),c.qZA(),c.qZA(),c.TgZ(90,"td"),c.TgZ(91,"input",27),c.NdJ("ngModelChange",function(e){return t.newRouteRecord.gateway=e}),c.qZA(),c.qZA(),c.TgZ(92,"td",21),c.TgZ(93,"button",22),c.NdJ("click",function(){return t.addNewRoute()}),c._UZ(94,"i",23),c.qZA(),c._uU(95," \xa0 "),c.TgZ(96,"button",22),c.NdJ("click",function(){return t.toggleNewRouteRecord(!1)}),c._UZ(97,"i",24),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(98,"div",28),c.TgZ(99,"div",29),c.TgZ(100,"button",30),c.NdJ("click",function(){return t.save()}),c._UZ(101,"i",31),c._uU(102," Save "),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(14),c.Q6J("ngModel",t.config.hostname),c.xp6(6),c.Q6J("ngModel",t.config.gateway),c.xp6(6),c.Q6J("ngModel",t.config.nameservers),c.xp6(6),c.Q6J("disabled",t.newAddressRecord.visible),c.xp6(15),c.Q6J("ngForOf",t.addressList),c.xp6(1),c.Q6J("hidden",!t.newAddressRecord.visible),c.xp6(2),c.Q6J("ngModel",t.newAddressRecord.interface),c.xp6(3),c.Q6J("ngForOf",t.interfaceList),c.xp6(2),c.Q6J("ngModel",t.newAddressRecord.ip),c.xp6(2),c.Q6J("ngModel",t.newAddressRecord.netmask),c.xp6(12),c.Q6J("disabled",t.newRouteRecord.visible),c.xp6(15),c.Q6J("ngForOf",t.routeList),c.xp6(1),c.Q6J("hidden",!t.newRouteRecord.visible),c.xp6(2),c.Q6J("ngModel",t.newRouteRecord.dst),c.xp6(2),c.Q6J("ngModel",t.newRouteRecord.netmask),c.xp6(2),c.Q6J("ngModel",t.newRouteRecord.gateway))},directives:[A._Y,A.JL,A.F,A.Fj,A.JJ,A.On,Q.sg,A.EJ,A.YN,A.Kr],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}(),zc=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.ref=a,this.dialogConfig=i,this.progress=0,this.timerHook=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.timerHook=setInterval(function(){return e.updateProgress()},2e3)}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"updateProgress",value:function(){var e=this;this.api.get("restore/status").subscribe(function(t){200===t.status?(e.progress=t.data,e.progress>=100&&e.ref.close(!0)):e.ref.close(!1)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ba.E7),c.Y36(ba.S))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-database-restore-monitor"]],decls:5,vars:1,consts:[[2,"padding","10px","padding-bottom","20px","width","100%"],[3,"value"],[1,"text-danger","text-center"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"div",0),c._UZ(2,"p-progressBar",1),c.qZA(),c.TgZ(3,"h5",2),c._uU(4,"Do not close this window or reload the page"),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("value",t.progress))},directives:[Vt.k],styles:[""]}),e}(),Gc=["nas_model_view"],Wc=["fileUpload"];function $c(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",3,4),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onDataLoading",function(){return c.CHM(a),c.oxw().loading=!0})("onDataLoaded",function(){return c.CHM(a),c.oxw().loading=!1})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Xc=function(){function e(t,a,i,n,r,l){o(this,e),this.api=t,this.toastr=a,this.swal=i,this.config=n,this.dialogService=r,this.router=l,this.modelViewConfig=null,this.columns=[{dataKey:"filename",label:"FileName",class:"href"},{dataKey:"file_time",label:"Date"},{dataKey:"size",label:"Size",pipe:"bytes"},{dataKey:"version",label:"Version"}],this.actions=[{name:"create",label:"Create Backup",icon:"fa fa-plus",requiresRow:!1,acl:"prm_backup_create"},{name:"download",label:"Download",icon:"fa fa-download",requiresRow:!0,inline:!0,acl:"prm_backup_download"},{name:"upload",label:"Upload",icon:"fa fa-upload",requiresRow:!1,inline:!0,acl:"prm_backup_upload"},{name:"restore",label:"Restore",icon:"fa fa-sync",requiresRow:!0,inline:!0,acl:"prm_backup_restore"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0,inline:!0,acl:"prm_backup_delete"},{name:"",label:"",type:"separator"},{name:"settings",label:"Settings",icon:"fa fa-cogs",requiresRow:!1,acl:"prm_managers_sysadmin"}]}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.modelViewConfig={title:"Backup / Restore",icon:"fa fa-hdd",sortBy:"file_time",direction:"desc",columns:this.columns,dataUrl:"index/backup",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"backup",hasAdvancedFilter:!1,hasInlineActions:!0},this.uploader=new J.bA({url:this.config.getApiUrl()+"backup/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.response.subscribe(function(t){e.toastr.success("file_uploaded_successfully"),e.modelView.reload()})}},{key:"showDatabaseRestoreProgress",value:function(){var e=this;this.dialogService.open(zc,{header:"Restoring Database",width:"500px",closable:!1}).onClose.subscribe(function(t){!0===t&&e.api.get("restore/postRestoreOperations").subscribe(function(t){e.router.navigate(["dashboard"])})})}},{key:"onAction",value:function(e){switch(e.action){case"create":this.createBackup();break;case"delete":this.destroyBackup(e.row.id);break;case"restore":this.restoreBackup(e.row.id);break;case"download":this.download(e.row.id);break;case"upload":this.upload();break;case"settings":this.router.navigate(["settings/backup"])}}},{key:"createBackup",value:function(){var e=this;this.blockUI.start(""),this.api.get("backup/create").subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.toastr.success(t.message),e.modelView.reload())})}},{key:"destroyBackup",value:function(e){var t=this;this.swal.confirm({title:"Delete Backup File ?",type:"warning",text:"Delete Selected Backup File ?",confirmButtonText:"Yes"}).subscribe(function(){t.blockUI.start(),t.api.delete("backup/"+e.toString()).subscribe(function(e){t.blockUI.stop(),200==e.status&&(t.toastr.success(e.message),t.modelView.reload())})})}},{key:"restoreBackup",value:function(e){var t=this;this.swal.confirm({title:"Database Restore",type:"warning",text:"Restore selected backup file ?",confirmButtonText:"Yes"}).subscribe(function(){t.blockUI.start(),t.api.get("restore/"+e.toString()).subscribe(function(e){t.blockUI.stop(),200===e.status&&t.showDatabaseRestoreProgress()})})}},{key:"download",value:function(e){var t=this;this.api.get("backup/prepareDownload/"+e).subscribe(function(e){200===e.status&&t.api.goto("backup/download/"+e.data.real_filename+"/"+e.data.user_filename)})}},{key:"upload",value:function(){this.fileUploadField.nativeElement.click()}},{key:"onCellClicked",value:function(e){"filename"===e.column&&this.download(e.row.id)}}]),e}();Xc.\u0275fac=function(e){return new(e||Xc)(c.Y36(Z),c.Y36(v._W),c.Y36(tt),c.Y36(p),c.Y36(ba.xA),c.Y36(_.F0))},Xc.\u0275cmp=c.Xpm({type:Xc,selectors:[["app-backup-manager"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(Gc,5),c.Gf(Wc,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first),c.iGM(a=c.CRH())&&(t.fileUploadField=a.first))},features:[c._Bn([ba.xA])],decls:3,vars:2,consts:[["name","nas_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onCellClicked",4,"ngIf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],["name","nas_model_view",3,"modelViewConfig","onAction","onDataLoading","onDataLoaded","onCellClicked"],["nas_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,$c,2,1,"model-table-view",0),c.TgZ(1,"input",1,2),c.NdJ("change",function(){return t.uploader.uploadAll()}),c.qZA()),2&e&&(c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Q6J("uploader",t.uploader))},directives:[Q.O5,J.C6,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Xc.prototype,"blockUI",void 0);var eu=function(e){return{editable:e}};function tu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span",2),c.NdJ("click",function(){return c.CHM(a),c.oxw().toggle()}),c._uU(1),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngClass",c.VKq(2,eu,!0===i.enabled)),c.xp6(1),c.Oqu(i.value||" N/A ")}}function au(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"span"),c.TgZ(1,"div",3),c.NdJ("blur",function(){return c.CHM(a),c.oxw().onBlur()}),c.TgZ(2,"div",4),c.TgZ(3,"input",5),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().value=e})("keyup.enter",function(){return c.CHM(a),c.oxw()._submit()})("keyup.cancel",function(){return c.CHM(a),c.oxw()._dismiss()}),c.qZA(),c.TgZ(4,"button",6),c.NdJ("click",function(){return c.CHM(a),c.oxw()._submit()}),c._UZ(5,"i",7),c.qZA(),c.TgZ(6,"button",8),c.NdJ("click",function(){return c.CHM(a),c.oxw()._dismiss()}),c._UZ(7,"i",9),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(3),c.s9C("placeholder",i.placeholder),c.Q6J("ngModel",i.value)}}var iu=function(){},nu={provide:A.JU,useExisting:(0,c.Gpc)(function(){return ou}),multi:!0},ou=function(){var e=function(){function e(){o(this,e),this.submit=new c.vpe,this.enabled=!0,this.placeholder="",this.innerValue="",this.onChangeCallback=iu,this.onTouchedCallback=iu,this.oldValue=null,this.mode=0}return l(e,[{key:"value",get:function(){return this.innerValue},set:function(e){e!==this.innerValue&&(this.innerValue=e,this.onChangeCallback(e))}},{key:"onBlur",value:function(){this.toggle()}},{key:"writeValue",value:function(e){e!==this.innerValue&&(this.innerValue=e,this.oldValue||(this.oldValue=e))}},{key:"registerOnChange",value:function(e){this.onChangeCallback=e}},{key:"registerOnTouched",value:function(e){this.onTouchedCallback=e}},{key:"toggle",value:function(){!this.enabled||(this.mode=1===this.mode?0:1)}},{key:"_submit",value:function(){this.toggle(),this.value&&(this.submit.emit(this.value),this.oldValue=this.value)}},{key:"_dismiss",value:function(){this.toggle(),this.value=this.oldValue}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-inline-editor"]],inputs:{enabled:"enabled",placeholder:"placeholder"},outputs:{submit:"submit"},features:[c._Bn([nu])],decls:2,vars:2,consts:[[3,"ngClass","click",4,"ngIf"],[4,"ngIf"],[3,"ngClass","click"],[1,"ui-g-12",3,"blur"],[1,"p-inputgroup"],["type","text","pInputText","",1,"p-inputtext",3,"ngModel","placeholder","ngModelChange","keyup.enter","keyup.cancel"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-times"]],template:function(e,t){1&e&&(c.YNc(0,tu,2,4,"span",0),c.YNc(1,au,8,2,"span",1)),2&e&&(c.Q6J("ngIf",0===t.mode),c.xp6(1),c.Q6J("ngIf",1===t.mode))},directives:[Q.O5,Q.mk,A.Fj,Ma.o,A.JJ,A.On],styles:[".editable[_ngcontent-%COMP%]{border-bottom:1px dashed #313131}.ui-inputgroup[_ngcontent-%COMP%]{height:2rem}"]}),e}(),ru=["fileUpload"];function lu(e,t){if(1&e&&(c.TgZ(0,"div",25),c._UZ(1,"i",26),c._uU(2),c.TgZ(3,"a",27),c._UZ(4,"i",28),c._uU(5),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.hij(" ",a.tr.translate("2fa_disabled_warning")," "),c.xp6(3),c.hij(" ",a.tr.translate("2fa_setup_button"),"")}}function su(e,t){if(1&e&&(c.TgZ(0,"div",29),c._UZ(1,"i",26),c._uU(2),c.TgZ(3,"a",27),c._UZ(4,"i",28),c._uU(5),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.hij(" ",a.tr.translate("2fa_enabled_info")," "),c.xp6(3),c.hij(" ",a.tr.translate("2fa_setup_button"),"")}}var cu=function(){function e(t,a,i,n,r){o(this,e),this.auth=t,this.toastr=a,this.api=i,this.config=n,this.tr=r,this.newPassword={password:"",confirmPassword:""}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.fullname=this.auth.client.firstname+" "+this.auth.client.lastname,this.uploader=new J.bA({url:this.config.getApiUrl()+"manager/avatar/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName),maxFileSize:612e3}),this.uploader.response.subscribe(function(){e.api.get("auth").subscribe(function(t){200==t.status&&(e.auth.client=t.client)})},function(e){console.log(e),alert("error")})}},{key:"uploadAvatar",value:function(){this.fileUploadField.nativeElement.click()}},{key:"changePassword",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/password",{password:this.newPassword.password}).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.newPassword.password="",e.newPassword.confirmPassword="")})}},{key:"update",value:function(e,t){var a=this;this.api.post("manager/profile",{attribute:e,value:t}).subscribe(function(e){200===e.status?(a.toastr.success(a.tr.translate(e.message)),a.api.get("auth").subscribe(function(e){a.auth.setProfile(e.client)})):a.toastr.error("unknown error occurred")})}}]),e}();function uu(e,t){if(1&e&&(c.TgZ(0,"span"),c._UZ(1,"br"),c._uU(2," HTTP: "),c.TgZ(3,"a",11),c._uU(4),c.qZA(),c._UZ(5,"br"),c._uU(6," HTTPS: "),c.TgZ(7,"a",11),c._uU(8),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(3),c.MGl("href","http://tunnel2.snono.systems:1",a.license_id,"",c.LSH),c.xp6(1),c.hij("http://tunnel2.snono.systems:1",a.license_id,""),c.xp6(3),c.MGl("href","https://tunnel2.snono.systems:2",a.license_id,"",c.LSH),c.xp6(1),c.hij("https://tunnel2.snono.systems:2",a.license_id,"")}}function du(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"ONLINE"),c.qZA())}function fu(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"OFFLINE"),c.qZA())}function pu(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",12),c._uU(2," Connect"),c.qZA())}function gu(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",13),c._uU(2," Disconnect"),c.qZA())}function hu(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"RUNNING"),c.qZA())}function mu(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"STOPPED"),c.qZA())}cu.\u0275fac=function(e){return new(e||cu)(c.Y36(w),c.Y36(v._W),c.Y36(Z),c.Y36(p),c.Y36(I))},cu.\u0275cmp=c.Xpm({type:cu,selectors:[["app-manager-profile"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(ru,5),2&e)&&(c.iGM(a=c.CRH())&&(t.fileUploadField=a.first))},decls:46,vars:19,consts:[["class","alert alert-warning",4,"ngIf"],["class","alert alert-info",4,"ngIf"],[1,"row"],[1,"col"],[1,"card","profile-card"],[1,"card-header","bg-secondary"],[1,"card-body"],[1,"overview-basic-information","font-weight-light"],[1,"fa","fa-user"],[3,"ngModel","ngModelChange","submit"],[1,"fa","fa-phone"],[1,"fa","fa-address-book"],[1,"fa","fa-envelope"],[1,"fa","fa-globe"],["placeholder","country",3,"ngModel","ngModelChange","submit"],["placeholder","city",3,"ngModel","ngModelChange","submit"],["type","password",1,"form-control",3,"placeholder","ngModel","ngModelChange"],[1,"btn","btn-primary",2,"float","right",3,"disabled","click"],["id","avatarCard",1,"card-body"],["id","avatarContainer"],["onerror","this.src='assets/img/avatars/default_user.jpg';","alt","profile image",2,"max-height","290px",3,"src"],["id","imageSizeNote"],["id","changeButton",3,"click"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["fileUpload",""],[1,"alert","alert-warning"],[1,"fa","fa-user-shield"],["href","./#/manager/twofactorsetup",1,"float-right"],[1,"fa","fa-shield-alt"],[1,"alert","alert-info"]],template:function(e,t){1&e&&(c.YNc(0,lu,6,2,"div",0),c.YNc(1,su,6,2,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"div",5),c._uU(6),c.qZA(),c.TgZ(7,"div",6),c.TgZ(8,"ul",7),c.TgZ(9,"li"),c._UZ(10,"i",8),c.TgZ(11,"app-inline-editor",9),c.NdJ("ngModelChange",function(e){return t.fullname=e})("submit",function(e){return t.update("fullname",e)}),c.qZA(),c.qZA(),c.TgZ(12,"li"),c._UZ(13,"i",10),c.TgZ(14,"app-inline-editor",9),c.NdJ("ngModelChange",function(e){return t.auth.client.phone=e})("submit",function(e){return t.update("phone",e)}),c.qZA(),c.qZA(),c.TgZ(15,"li"),c._UZ(16,"i",11),c.TgZ(17,"app-inline-editor",9),c.NdJ("ngModelChange",function(e){return t.auth.client.address=e})("submit",function(e){return t.update("address",e)}),c.qZA(),c.qZA(),c.TgZ(18,"li"),c._UZ(19,"i",12),c.TgZ(20,"app-inline-editor",9),c.NdJ("ngModelChange",function(e){return t.auth.client.email=e})("submit",function(e){return t.update("email",e)}),c.qZA(),c.qZA(),c.TgZ(21,"li"),c._UZ(22,"i",13),c.TgZ(23,"app-inline-editor",14),c.NdJ("ngModelChange",function(e){return t.auth.client.country=e})("submit",function(e){return t.update("country",e)}),c.qZA(),c.qZA(),c.TgZ(24,"li"),c._UZ(25,"i",13),c.TgZ(26,"app-inline-editor",15),c.NdJ("ngModelChange",function(e){return t.auth.client.city=e})("submit",function(e){return t.update("city",e)}),c.qZA(),c.qZA(),c.TgZ(27,"li"),c.TgZ(28,"input",16),c.NdJ("ngModelChange",function(e){return t.newPassword.password=e}),c.qZA(),c.qZA(),c.TgZ(29,"li"),c.TgZ(30,"input",16),c.NdJ("ngModelChange",function(e){return t.newPassword.confirmPassword=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"button",17),c.NdJ("click",function(){return t.changePassword()}),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(33,"div",3),c.TgZ(34,"div",4),c.TgZ(35,"div",5),c._uU(36),c.qZA(),c.TgZ(37,"div",18),c.TgZ(38,"div",19),c._UZ(39,"img",20),c.qZA(),c.TgZ(40,"span",21),c._uU(41,"*500KB Max"),c.qZA(),c.TgZ(42,"span",22),c.NdJ("click",function(){return t.uploadAvatar()}),c._uU(43),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(44,"input",23,24),c.NdJ("change",function(){return t.uploader.uploadAll()}),c.qZA()),2&e&&(c.Q6J("ngIf",0===t.auth.client.requires_2fa&&t.auth.has("prm_managers_2fa")),c.xp6(1),c.Q6J("ngIf",1===t.auth.client.requires_2fa&&t.auth.has("prm_managers_2fa")),c.xp6(5),c.hij(" ",t.tr.translate("manager_profile_label_account")," "),c.xp6(5),c.Q6J("ngModel",t.fullname),c.xp6(3),c.Q6J("ngModel",t.auth.client.phone),c.xp6(3),c.Q6J("ngModel",t.auth.client.address),c.xp6(3),c.Q6J("ngModel",t.auth.client.email),c.xp6(3),c.Q6J("ngModel",t.auth.client.country),c.xp6(3),c.Q6J("ngModel",t.auth.client.city),c.xp6(2),c.s9C("placeholder",t.tr.translate("manager_profile_placeholder_new_password")),c.Q6J("ngModel",t.newPassword.password),c.xp6(2),c.s9C("placeholder",t.tr.translate("manager_profile_placeholder_confirm_password")),c.Q6J("ngModel",t.newPassword.confirmPassword),c.xp6(1),c.Q6J("disabled",t.newPassword.password.length<3||t.newPassword.password!=t.newPassword.confirmPassword),c.xp6(1),c.Oqu(t.tr.translate("manager_profile_btn_password")),c.xp6(4),c.hij(" ",t.tr.translate("manager_profile_label_image")," "),c.xp6(3),c.s9C("src","data:image/jpg;base64,"+t.auth.client.avatar_data,c.LSH),c.xp6(4),c.hij(" [",t.tr.translate("manager_profile_image_change"),"] "),c.xp6(1),c.Q6J("uploader",t.uploader))},directives:[Q.O5,ou,A.JJ,A.On,A.Fj,J.C6],styles:["#avatarCard[_ngcontent-%COMP%]   #changeButton[_ngcontent-%COMP%]{color:#93a1a1;cursor:pointer;float:right}#avatarCard[_ngcontent-%COMP%]   #changeButton[_ngcontent-%COMP%]:active{color:red}#avatarCard[_ngcontent-%COMP%]   #avatarContainer[_ngcontent-%COMP%]{border:1px solid #eee8d5;min-height:300px;width:100%;text-align:center;padding:5px}.overview-basic-information[_ngcontent-%COMP%]{list-style:none;font-size:14px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px;padding-left:10px}.overview-basic-information[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:10px}.profile-card[_ngcontent-%COMP%]{height:100%}#imageSizeNote[_ngcontent-%COMP%]{color:#a16f7a;cursor:pointer;font-weight:lighter;font-size:smaller}"]}),(0,g.gn)([(0,m.bH)()],cu.prototype,"blockUI",void 0);var _u=function(e,t){return{"status-running":e,"status-stopped":t}};function vu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",5),c._uU(2),c._UZ(3,"br"),c.TgZ(4,"span"),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"td",14),c.YNc(7,hu,2,0,"span",6),c.YNc(8,mu,2,0,"span",6),c.qZA(),c.TgZ(9,"td",8),c.TgZ(10,"span",9),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().startService(e.name)}),c._UZ(11,"i",12),c._uU(12," START"),c.qZA(),c.TgZ(13,"span",9),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().stopService(e.name)}),c._UZ(14,"i",13),c._uU(15," STOP"),c.qZA(),c.TgZ(16,"span",9),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().restartService(e.name)}),c._UZ(17,"i",15),c._uU(18," RESTART"),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(2),c.Oqu(i.title),c.xp6(3),c.Oqu(i.description),c.xp6(1),c.Q6J("ngClass",c.WLB(5,_u,!0===n.serviceStatus[i.name],!1===n.serviceStatus[i.name])),c.xp6(1),c.Q6J("ngIf",!0===n.serviceStatus[i.name]),c.xp6(1),c.Q6J("ngIf",!1===n.serviceStatus[i.name])}}var bu=function(){function e(t){o(this,e),this.api=t,this.systemServices=[{name:"freeradius",title:"FreeRadius",description:"RADIUS server",status:-1},{name:"sas_poller",title:"SAS Poller",description:"cleans idle user sessions",status:-1},{name:"sas_systemmanager",title:"System Manager",description:"manages system components",status:-1},{name:"sas_trafficaccounting",title:"Traffic Monitor",description:"monitors users traffic",status:-1},{name:"sas_policymanager",title:"Policy Manager",description:"changes users speed/state based on consumed traffic and/or time of the day",status:-1},{name:"sas_cardsgenerator",title:"Cards Generator",description:"generates all kinds of cards",status:-1},{name:"sas_updatemanager",title:"Update Manager",description:"checks for new updates and install them",status:-1},{name:"sas_mailpoller",title:"Mail Poller",description:"processes mail queue",status:-1},{name:"sas_crontab",title:"Crontab Service",description:"jobs scheduler",status:-1},{name:"sas_dispoller",title:"Users Disconnect Daemon",description:"disconnects users when requested to do so",status:-1},{name:"sas_sms",title:"SMS Service",description:"sends SMS notifications",status:-1}],this.serviceStatus=[],this.tunnel_online=!1,this.license_id=""}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.updateStatus(),this.tunnelStatus(),this.timerHook=setInterval(function(){e.updateStatus(),e.tunnelStatus()},5e3)}},{key:"start",value:function(e){}},{key:"stop",value:function(e){}},{key:"updateStatus",value:function(){var e=this;this.api.get("systemService/status").subscribe(function(t){var a=t.data;Object.keys(a).map(function(t){e.serviceStatus[t]=a[t]})})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"startService",value:function(e){var t=this;this.blockUI.start("Starting Service..."),this.api.post("systemService/start",{name:e}).subscribe(function(e){t.blockUI.stop()})}},{key:"stopService",value:function(e){var t=this;this.blockUI.start("Stopping Service..."),this.api.post("systemService/stop",{name:e}).subscribe(function(e){t.blockUI.stop()})}},{key:"restartService",value:function(e){var t=this;this.blockUI.start("Stopping Service..."),this.api.post("systemService/restart",{name:e}).subscribe(function(e){t.blockUI.stop()})}},{key:"toggleTunnel",value:function(){var e=this;this.blockUI.start(),this.api.get("tunnel/toggle").subscribe(function(t){e.blockUI.stop(),e.tunnelStatus()})}},{key:"tunnelStatus",value:function(){var e=this;this.api.get("tunnel/status").subscribe(function(t){e.tunnel_online=1==t.tunnel,e.license_id=t.port},function(e){console.log(e)})}}]),e}();bu.\u0275fac=function(e){return new(e||bu)(c.Y36(Z))},bu.\u0275cmp=c.Xpm({type:bu,selectors:[["app-system-services"]],decls:21,vars:10,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"services-table","table"],["size","40%",1,"service-name"],[4,"ngIf"],[1,"service-status",3,"ngClass"],["size","30%",1,"buttons"],[1,"service-action",3,"click"],[4,"ngFor","ngForOf"],["target","_blank",3,"href"],[1,"fa","fa-play"],[1,"fa","fa-stop"],["size","30%",1,"service-status",3,"ngClass"],[1,"fa","fa-sync-alt"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," System Services "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"table",4),c.TgZ(6,"tr"),c.TgZ(7,"td",5),c._uU(8,"Remote Access Tunnel"),c._UZ(9,"br"),c.TgZ(10,"span"),c._uU(11,"Allows remote access to the server from outside when server is behind firewall"),c.qZA(),c.YNc(12,uu,9,4,"span",6),c.qZA(),c.TgZ(13,"td",7),c.YNc(14,du,2,0,"span",6),c.YNc(15,fu,2,0,"span",6),c.qZA(),c.TgZ(16,"td",8),c.TgZ(17,"span",9),c.NdJ("click",function(){return t.toggleTunnel()}),c.YNc(18,pu,3,0,"span",6),c.YNc(19,gu,3,0,"span",6),c.qZA(),c.qZA(),c.qZA(),c.YNc(20,vu,19,8,"tr",10),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(12),c.Q6J("ngIf",!0===t.tunnel_online),c.xp6(1),c.Q6J("ngClass",c.WLB(7,_u,!0===t.tunnel_online,!1===t.tunnel_online)),c.xp6(1),c.Q6J("ngIf",1==t.tunnel_online),c.xp6(1),c.Q6J("ngIf",0==t.tunnel_online),c.xp6(3),c.Q6J("ngIf",0==t.tunnel_online),c.xp6(1),c.Q6J("ngIf",1==t.tunnel_online),c.xp6(1),c.Q6J("ngForOf",t.systemServices))},directives:[Q.O5,Q.mk,Q.sg],styles:[".services-table[_ngcontent-%COMP%]{width:100%}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #d2d2d2;padding-bottom:20px;box-sizing:border-box;height:50px}.services-table[_ngcontent-%COMP%]   .service-status[_ngcontent-%COMP%]{text-align:center}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .status-running[_ngcontent-%COMP%]{color:green;font-weight:bolder}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .status-stopped[_ngcontent-%COMP%]{color:red;font-weight:bolder}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]{color:#0e2231}.services-table[_ngcontent-%COMP%]   .service-action[_ngcontent-%COMP%]{cursor:pointer;margin-right:30px}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{text-align:right}.services-table[_ngcontent-%COMP%]   .service-action[_ngcontent-%COMP%]:hover{color:#313fff}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{opacity:.2}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .buttons[_ngcontent-%COMP%]{opacity:1}.services-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   .service-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:smaller;font-weight:lighter}"]}),(0,g.gn)([(0,m.bH)()],bu.prototype,"blockUI",void 0);var Zu=n(96516),yu=function(){function e(t,a,i,n){o(this,e),this.auth=t,this.api=a,this.router=i,this.config=n,this.managerList=[],this.selectedManager=-1,this.suggestions=[]}return l(e,[{key:"ngOnInit",value:function(){}},{key:"loginAs",value:function(){var e=this;this.selectedManager<0||(this.blockUI.start(),this.api.post("manager/loginAs",{manager_id:this.selectedManager}).subscribe(function(t){e.blockUI.stop(),localStorage.removeItem(e.config.tokenName),localStorage.setItem(e.config.tokenName,t.token),e.router.navigate(["dashboard"]).then(function(e){location.reload()})}))}},{key:"search",value:function(e){var t=this,a=e.query;a.length<2||this.api.post("index/manager",{search:a}).subscribe(function(e){t.suggestions=[],e.data.map(function(e){t.suggestions.push({id:e.id,name:e.username})})})}},{key:"onSelected",value:function(e){this.selectedManager=e.id}}]),e}();function wu(e,t){if(1&e&&(c.TgZ(0,"div",9),c.TgZ(1,"div",10),c._UZ(2,"div",11),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.Udp("width",a.status.progress+"%")}}function xu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",12),c._uU(1),c.TgZ(2,"button",13),c.NdJ("click",function(){return c.CHM(a),c.oxw().installNext()}),c._UZ(3,"i",14),c._uU(4," Install Update"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.hij(" New Update Available (",i.remoteVersion,") ")}}function Au(e,t){if(1&e&&(c.TgZ(0,"div",15),c._uU(1," loading changelog... "),c.qZA()),2&e){var a=c.oxw();c.Q6J("innerHtml",a.changelogDetails,c.oJD)}}function qu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",16),c._uU(1," Your system is up to date "),c.TgZ(2,"button",17),c.NdJ("click",function(){return c.CHM(a),c.oxw().check()}),c._UZ(3,"i",2),c._uU(4," Check Now"),c.qZA(),c.qZA()}}function Tu(e,t){if(1&e&&(c.TgZ(0,"div",18),c._uU(1," loading history... "),c.qZA()),2&e){var a=c.oxw();c.Q6J("innerHtml",a.changelogHistory,c.oJD)}}yu.\u0275fac=function(e){return new(e||yu)(c.Y36(w),c.Y36(Z),c.Y36(_.F0),c.Y36(p))},yu.\u0275cmp=c.Xpm({type:yu,selectors:[["app-login-as"]],decls:18,vars:3,consts:[[1,"card","profile-card"],[1,"card-header"],[1,"fa","fa-user-secret"],[1,"card-body"],[1,"row"],[1,"form-group","col-md-6","col-sm-12"],[1,"ui-g","ui-fluid"],[1,"ui-g-12"],["id","acomp","name","user",3,"suggestions","field","placeholder","onSelect","completeMethod"],[1,"form-text","text-muted"],[1,"card-footer"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"fa","fa-box-open"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Login As... "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"label"),c._uU(8,"Manager to login as"),c.qZA(),c.TgZ(9,"div",6),c.TgZ(10,"div",7),c.TgZ(11,"p-autoComplete",8),c.NdJ("onSelect",function(e){return t.onSelected(e)})("completeMethod",function(e){return t.search(e)}),c.qZA(),c.TgZ(12,"small",9),c._uU(13,"Password-less login as any manager."),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",10),c.TgZ(15,"button",11),c.NdJ("click",function(){return t.loginAs()}),c._UZ(16,"i",12),c._uU(17," Login"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(11),c.Q6J("suggestions",t.suggestions)("field","name")("placeholder","select a manager"))},directives:[Zu.Qc],styles:[""]}),(0,g.gn)([(0,m.bH)()],yu.prototype,"blockUI",void 0);var ku=function(){function e(t){o(this,e),this.api=t,this.remoteVersion="4.0.1",this.status={}}return l(e,[{key:"getRemoteVersion",value:function(){var e=this;this.blockUI.start(),this.api.get("systemUpdate/remoteVersion").subscribe(function(t){e.blockUI.stop(),200==t.status&&(e.remoteVersion=t.data),""!=e.remoteVersion&&e.getChangelog(e.remoteVersion)})}},{key:"ngOnDestroy",value:function(){clearInterval(this.timerHook)}},{key:"getChangelog",value:function(e){var t=this;this.blockUI.start(),this.api.get("systemUpdate/changelog/"+e).subscribe(function(e){t.blockUI.stop(),200===e.status&&(t.changelogDetails=e.data)})}},{key:"getChangelogHistory",value:function(){var e=this;this.api.get("systemUpdate/history").subscribe(function(t){200===t.status&&(e.changelogHistory=t.data)})}},{key:"installNext",value:function(){this.blockUI.start(),this.api.get("systemUpdate/install").subscribe(function(e){})}},{key:"check",value:function(){var e=this;this.api.get("systemUpdate/check").subscribe(function(t){e.getRemoteVersion()})}},{key:"getUpdateStatus",value:function(){var e=this;this.api.get("systemUpdate/status").subscribe(function(t){e.status=t.data,"update installed."===e.status.message&&(e.getRemoteVersion(),window.location.reload())})}},{key:"ngOnInit",value:function(){var e=this;this.getChangelogHistory(),this.getRemoteVersion(),this.getUpdateStatus(),this.timerHook=setInterval(function(){return e.getUpdateStatus()},2e3)}}]),e}();ku.\u0275fac=function(e){return new(e||ku)(c.Y36(Z))},ku.\u0275cmp=c.Xpm({type:ku,selectors:[["app-system-update"]],decls:14,vars:5,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-sync-alt"],[1,"card-body"],["class","update-progress",4,"ngIf"],["class","alert-new-update alert-info","role","alert",4,"ngIf"],["class","changelog-container",3,"innerHtml",4,"ngIf"],["class","alert-new-update alert-secondary","role","alert",4,"ngIf"],["class","changelog-history-container",3,"innerHtml",4,"ngIf"],[1,"update-progress"],[1,"progress"],[1,"progress-bar"],["role","alert",1,"alert-new-update","alert-info"],[1,"btn","btn-sm","btn-primary","btn-update",3,"click"],[1,"fa","fa-download"],[1,"changelog-container",3,"innerHtml"],["role","alert",1,"alert-new-update","alert-secondary"],[1,"btn","btn-primary","btn-update","btn-sm",3,"click"],[1,"changelog-history-container",3,"innerHtml"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," System Update "),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,wu,3,2,"div",4),c.YNc(6,xu,5,1,"div",5),c.YNc(7,Au,2,1,"div",6),c.YNc(8,qu,5,0,"div",7),c.qZA(),c.qZA(),c.TgZ(9,"div",0),c.TgZ(10,"div",1),c._uU(11," Updates History "),c.qZA(),c.TgZ(12,"div",3),c.YNc(13,Tu,2,1,"div",8),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("ngIf","downloading"==t.status.status||"installing"==t.status.status),c.xp6(1),c.Q6J("ngIf",""!=t.remoteVersion&&""==t.status.status),c.xp6(1),c.Q6J("ngIf",""!=t.remoteVersion),c.xp6(1),c.Q6J("ngIf",""==t.remoteVersion&&""==t.status.status),c.xp6(5),c.Q6J("ngIf",""==t.remoteVersion&&""==t.status.status))},directives:[Q.O5],styles:[".changelog-container[_ngcontent-%COMP%]{width:100%;border:1px solid #c5c5c5;padding:10px}.btn-update[_ngcontent-%COMP%]{min-width:100px;float:right;margin-right:10px}.alert-new-update[_ngcontent-%COMP%]{padding:10px;width:100%;margin-top:5px;margin-bottom:10px}.changelog-history-container[_ngcontent-%COMP%]{width:100%;border:1px solid #c5c5c5;padding:10px;max-height:400px;overflow:auto}"]}),(0,g.gn)([(0,m.bH)()],ku.prototype,"blockUI",void 0);var Cu=["myForm"];function Uu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChange(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Mu=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.trs=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={},this.formFields=this.formsLoader.getForm("settings_advanced"),this.form_config.fields=this.formFields}return l(e,[{key:"load",value:function(){var e=this;this.api.get("settings/adv_").subscribe(function(t){200===t.status&&(t.data.adv_idle_timeout=parseInt(t.data.adv_idle_timeout),e.myForm.setFormValue(t.data),e.onFormChange(t.data))})}},{key:"ngOnInit",value:function(){this.load()}},{key:"save",value:function(e){var t=this;this.api.post("settings",e.value).subscribe(function(e){200==e.status&&t.toastr.success(t.trs.translate(e.message))})}},{key:"onFormChange",value:function(e){1===e.adv_accept_invalid_users&&this.myForm.showField("adv_map_invalid_username"),1!=e.adv_accept_invalid_users&&this.myForm.hideField("adv_map_invalid_username"),1==e.adv_webhook_notifications&&this.myForm.showField("adv_webhook_notifications_url"),1!=e.adv_webhook_notifications&&this.myForm.hideField("adv_webhook_notifications_url"),1==e.adv_route_guard&&this.myForm.showField("adv_route_guard_url"),1!=e.adv_route_guard&&this.myForm.hideField("adv_route_guard_url")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-advacned-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Cu,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-hdd"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Advanced Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Uu,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}(),Fu=function(){var e=function(){function e(t){o(this,e),this.api=t,this.remoteVersion=""}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.check(),this.timerHook=setInterval(function(){return e.check()},6e4)}},{key:"check",value:function(){var e=this;this.api.get("systemUpdate/check").subscribe(function(t){e.getRemoteVersion()})}},{key:"getRemoteVersion",value:function(){var e=this;this.api.get("systemUpdate/remoteVersion").subscribe(function(t){200==t.status&&(e.remoteVersion=t.data)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-update-notification"]],decls:7,vars:2,consts:[[1,"update-notification-container",3,"hidden"],[1,"fa","fa-cloud-download-alt"],["href","#/tools/systemUpdate"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"i",1),c._uU(2),c.TgZ(3,"a",2),c.TgZ(4,"b"),c._uU(5,"Update"),c.qZA(),c.qZA(),c._uU(6," Your System Now.\n"),c.qZA()),2&e&&(c.Q6J("hidden",""==t.remoteVersion),c.xp6(2),c.hij(" New Software Update Available (",t.remoteVersion,"), "))},styles:[".update-notification-container[_ngcontent-%COMP%]{height:35px;background:#2796ff;color:#fff;font-size:14px;text-align:center;box-sizing:border-box;padding-top:5px;border-bottom:1px solid #69a1b4}.update-notification-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:underline}"]}),e}();function Ju(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterOptions",a.filterOptions)("advancedFilterFields",a.filterFields)}}var Ou=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.auth=i,this.tr=n,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"cr",label:this.tr.translate("report_journal_cr")},{dataKey:"dr",label:this.tr.translate("report_journal_dr")},{dataKey:"amount",label:this.tr.translate("report_journal_amount")},{dataKey:"balance",label:this.tr.translate("report_journal_balance")},{dataKey:"operation",label:this.tr.translate("user_journal_table_operation"),pipe:"translate"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null,this.modelViewConfig={dataUrl:"index/ManagerJournal",primaryKey:"id",title:this.tr.translate("report_journal_manager_title"),icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:this.auth.has("prm_journal_export"),exportPagination:!0}}return l(e,[{key:"ngOnInit",value:function(){this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.manager_id=n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(w),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-journal-report"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["journal_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Ju,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),Nu=n(55396),Iu=function(){return{width:"40vw"}},Yu=function(){function e(t,a,i,n,r,l){o(this,e),this.swal=t,this.api=a,this.toastr=i,this.router=n,this.tr=r,this.confirmationService=l}return l(e,[{key:"ngOnInit",value:function(){}},{key:"confirmShutdown",value:function(){var e=this;this.swal.confirm({title:"Shutdown Server",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(function(t){e.api.get("system/shutdown").subscribe(function(t){e.toastr.success("System going to shutdown")})})}},{key:"confirmReboot",value:function(){var e=this;this.swal.confirm({title:"Reboot Server",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(function(t){e.api.get("system/reboot").subscribe(function(t){e.toastr.success("System going to reboot")})})}},{key:"logoutAllManagers",value:function(){var e=this;this.swal.confirm({title:"Force Logout All Managers ?",type:"warning",text:"",confirmButtonText:"Yes"}).subscribe(function(t){e.api.get("system/logoutAll").subscribe(function(t){e.toastr.success("All managers logged out"),window.location.reload()})})}},{key:"gotoMigration",value:function(){this.router.navigate(["tools/migration"])}},{key:"clearRadacct",value:function(){var e=this;this.swal.confirm({title:"Clear Current Sessions",text:"This will clear current sessions data. Use it only when system becomes very slow or not showing online users ",type:"warning"}).subscribe(function(){e.api.get("system/clear_sessions").subscribe(function(t){200===t.status?e.toastr.success("sessions table cleared"):e.toastr.warning("unable to clear sessions table")})})}},{key:"deleteExpiredUsers",value:function(){var e=this;this.confirmationService.confirm({message:"Delete Expired Users ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.get("system/deleteExpiredUsers").subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message))})}})}},{key:"deleteExpiredCardUsers",value:function(){var e=this;this.confirmationService.confirm({message:"Delete Expired Card Users ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.get("system/deleteExpiredCardUsers").subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message))})}})}},{key:"closeOnlineSessions",value:function(){var e=this;this.confirmationService.confirm({message:"Close Online Sessions ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.get("system/close_sessions").subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message))})}})}},{key:"clearEmailQueue",value:function(){var e=this;this.confirmationService.confirm({message:"Clear Email Queue ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.get("system/clearEmailQueue").subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message))})}})}},{key:"clearSMSQueue",value:function(){var e=this;this.confirmationService.confirm({message:"Clear SMS Queue ?",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.get("system/clearSMSQueue").subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message))})}})}}]),e}();Yu.\u0275fac=function(e){return new(e||Yu)(c.Y36(tt),c.Y36(Z),c.Y36(v._W),c.Y36(_.F0),c.Y36(I),c.Y36(Ci.YP))},Yu.\u0275cmp=c.Xpm({type:Yu,selectors:[["app-system-maintenance"]],decls:92,vars:3,consts:[[2,"direction","ltr","text-align","left"],[1,"text-center"],["src","assets/img/toolbox.png","height","150",1,"p-3",2,"opacity","0.5"],[1,"font-weight-light"],[1,"fa-pull-right","fa","fa-power-off"],[1,"p-3"],["role","toolbar",1,"btn-toolbar","p-1"],["type","button",1,"btn","rounded","btn-secondary","mr-2","btn-100px",3,"click"],["type","button",1,"btn","rounded","btn-secondary","btn-100px",3,"click"],[1,"fa-pull-right","fa","fa-sign-out"],["type","button",1,"btn","rounded","btn-primary","mr-2","btn-100px",3,"click"],[1,"fa-pull-right","fa","fa-database"],[1,"fa-pull-right","fa","fa-empty-set"],[1,"ml-3","mb-3"],[1,"fa-pull-right","fa","fa-window-close"],[1,"fa-pull-right","fa","fa-trash"],[1,"fa-pull-right","fa","fa-envelope-square"],[1,"fa-pull-right","fa","fa-envelope"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"img",2),c.TgZ(3,"h4",3),c._uU(4,"System Maintenance"),c.qZA(),c.qZA(),c.TgZ(5,"p-accordion"),c.TgZ(6,"p-accordionTab"),c.TgZ(7,"p-header"),c._uU(8," Power Control "),c._UZ(9,"i",4),c.qZA(),c.TgZ(10,"p",5),c._uU(11,"Power off or reboot server"),c.qZA(),c.TgZ(12,"div",6),c.TgZ(13,"button",7),c.NdJ("click",function(){return t.confirmShutdown()}),c._uU(14,"Shutdown"),c.qZA(),c.TgZ(15,"button",8),c.NdJ("click",function(){return t.confirmReboot()}),c._uU(16,"Reboot"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"p-accordionTab"),c.TgZ(18,"p-header"),c._uU(19," Logout All Managers "),c._UZ(20,"i",9),c.qZA(),c.TgZ(21,"p",5),c._uU(22,"Force logout of all logged in managers (including admin)."),c.qZA(),c.TgZ(23,"div",6),c.TgZ(24,"button",10),c.NdJ("click",function(){return t.logoutAllManagers()}),c._uU(25,"Logoff Managers"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(26,"p-accordionTab"),c.TgZ(27,"p-header"),c._uU(28," Import SAS3 Database "),c._UZ(29,"i",11),c.qZA(),c.TgZ(30,"p",5),c._uU(31,"Import SAS3 backup file. This operation will erase your current server database and erases everything."),c.qZA(),c.TgZ(32,"div",6),c.TgZ(33,"button",10),c.NdJ("click",function(){return t.gotoMigration()}),c._uU(34,"Import"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"p-accordionTab"),c.TgZ(36,"p-header"),c._uU(37," Clear Sessions Table "),c._UZ(38,"i",12),c.qZA(),c.TgZ(39,"p",5),c._uU(40,"Clears users sessions table (radacct)."),c.qZA(),c.TgZ(41,"p",13),c._uU(42," This is useful to do from time to time to reduce your database size or to force removal of stale sessions. This operation is totally safe and will NOT reset traffic counters for users. SAS4 uses different table to keep track of users traffic usage. "),c.qZA(),c.TgZ(43,"div",6),c.TgZ(44,"button",10),c.NdJ("click",function(){return t.clearRadacct()}),c._uU(45,"Clear"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(46,"p-accordionTab"),c.TgZ(47,"p-header"),c._uU(48," Close Online Sessions "),c._UZ(49,"i",14),c.qZA(),c.TgZ(50,"p",5),c._uU(51," Force all online sessions to get closed immediately. This won't affect real online users as their sessions will get opened on next interim-update. "),c.qZA(),c.TgZ(52,"div",6),c.TgZ(53,"button",10),c.NdJ("click",function(){return t.closeOnlineSessions()}),c._uU(54,"Close Sessions"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(55,"p-accordionTab"),c.TgZ(56,"p-header"),c._uU(57," Delete Expired Users "),c._UZ(58,"i",15),c.qZA(),c.TgZ(59,"p",5),c._uU(60," This operation is useful to maintain users count bellow your license limit. "),c.qZA(),c.TgZ(61,"div",6),c.TgZ(62,"button",10),c.NdJ("click",function(){return t.deleteExpiredUsers()}),c._uU(63,"Delete"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(64,"p-accordionTab"),c.TgZ(65,"p-header"),c._uU(66," Delete Expired Card Users "),c._UZ(67,"i",15),c.qZA(),c.TgZ(68,"p",5),c._uU(69," This will delete only expired card users. "),c.qZA(),c.TgZ(70,"div",6),c.TgZ(71,"button",10),c.NdJ("click",function(){return t.deleteExpiredCardUsers()}),c._uU(72,"Delete"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(73,"p-accordionTab"),c.TgZ(74,"p-header"),c._uU(75," Clear Email Queue "),c._UZ(76,"i",16),c.qZA(),c.TgZ(77,"p",5),c._uU(78," This will clear any pending emails in the queue, blocking new emails from getting sent. "),c.qZA(),c.TgZ(79,"div",6),c.TgZ(80,"button",10),c.NdJ("click",function(){return t.clearEmailQueue()}),c._uU(81,"Clear"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(82,"p-accordionTab"),c.TgZ(83,"p-header"),c._uU(84," Clear SMS Queue "),c._UZ(85,"i",17),c.qZA(),c.TgZ(86,"p",5),c._uU(87," Clear all SMS messages waiting in queue. "),c.qZA(),c.TgZ(88,"div",6),c.TgZ(89,"button",10),c.NdJ("click",function(){return t.clearSMSQueue()}),c._uU(90,"Clear"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(91,"p-confirmDialog")),2&e&&(c.xp6(91),c.Akn(c.DdM(2,Iu)))},directives:[Nu.UQ,Nu.US,Ci.h4,F.Q],styles:[".maintenance-item{width:100%;min-height:100px;background:#ECE9E6;background:linear-gradient(to right,#FFFFFF,#ECE9E6);border:1px solid #cecece;padding:15px;box-sizing:border-box;color:#444;margin-bottom:20px}.maintenance-icon{font-size:3rem}.maintenance-title{font-size:2rem;font-weight:bold;margin-left:20px}.maintenance-actions{float:right}.maintenance-button{width:100%;min-width:150px;text-align:left}.ui-accordion .ui-accordion-header a{padding:1.5em 1em!important;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a{background-color:#2a3238}body .ui-accordion .ui-accordion-header:not(.ui-state-disabled).ui-state-active a:hover{background-color:#1d2327}body .ui-accordion .ui-accordion-header a:focus{box-shadow:0 0 0 .1em #6b6b6b}\n"],encapsulation:2}),(0,g.gn)([(0,m.bH)()],Yu.prototype,"blockUI",void 0);var Qu=["invoices_model_view"];function Su(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}var Pu=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.auth=t,this.api=a,this.tr=i,this.swal=n,this.toastr=r,this.tableColumns=[{dataKey:"invoice_number",label:this.tr.translate("manager_invoice_table_number")},{dataKey:"created_at",label:this.tr.translate("manager_invoice_table_date")},{dataKey:"type",label:this.tr.translate("manager_invoice_table_type"),dataResolver:(function(e,t){return"activate"==e?this.tr.translate("invoice_type_activate"):"deposit"==e?this.tr.translate("invoice_type_deposit"):"withdrawal"==e?this.tr.translate("invoice_type_withdrawal"):"commission"==e?this.tr.translate("invoice_type_commission"):"transfer/deposit"==e?this.tr.translate("invoice_type_transfer_deposit"):"transfer/withdrawal"==e?this.tr.translate("invoice_type_transfer_withdrawal"):e}).bind(this)},{dataKey:"username",parentKey:"owner_details",label:this.tr.translate("global_manager"),sortBy:"manager_id"},{dataKey:"amount",label:this.tr.translate("manager_invoice_table_amount")},{dataKey:"description",label:this.tr.translate("manager_invoice_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_invoice_table_created_by"),sortBy:"created_by"},{dataKey:"payment_method",label:this.tr.translate("manager_invoice_table_method")},{dataKey:"comments",label:this.tr.translate("global_comment")},{dataKey:"paid",label:this.tr.translate("manager_invoice_table_paid"),type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.filterFields=[{key:"status",label:this.tr.translate("manager_invoice_filter_status"),type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:"Paid"},{value:0,label:"Unpaid"}]},{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:this.tr.translate("global_filter_from_date"),type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:this.tr.translate("global_filter_to_date"),type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.actions=[{name:"pay",label:this.tr.translate("manager_invoice_action_pay"),icon:"fa fa-money",acl:"prm_any",inline:!0,requiresRow:!0}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/ManagerInvoices",primaryKey:"id",sortBy:"created_at",title:this.tr.translate("manager_invoice_table_title"),direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!0,icon:"fa fa-file-invoice-dollar",actions:this.actions,hasInlineActions:!0,allowSelect:!0,allowExport:!0},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[{value:null,label:"All Managers"}],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.manager_id=n})}},{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"pay":1!=this.modelView.currentRow.paid?this.payInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_paid"))}}},{key:"payInvoice",value:function(e){var t=this;this.swal.confirm({title:this.tr.translate("prompt_invoices_pay"),text:"",confirmButtonText:"Yes"}).subscribe(function(){t.swal.prompt(t.tr.translate("prompt_invoice_comment")).subscribe(function(a){t.api.post("invoice/pay",{invoice_id:e,comments:a}).subscribe(function(e){200===e.status?t.modelView.reload():t.toastr.warning(t.tr.translate(e.message))})})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(w),c.Y36(Z),c.Y36(I),c.Y36(tt),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-managers-invoices"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Qu,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Su,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),Du=["fileUploader"];function Hu(e,t){1&e&&(c.TgZ(0,"div",7),c.TgZ(1,"div",11),c.TgZ(2,"alert",12),c._UZ(3,"i",13),c._uU(4," This process will erase your current database. Make sure to download a backup file from your current database before proceeding. "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("type","warning"))}function Ru(e,t){1&e&&(c.TgZ(0,"div",7),c.TgZ(1,"div",11),c.TgZ(2,"alert",12),c._UZ(3,"i",14),c._uU(4," Upload gzipped database files from SAS3 backup. "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("type","info"))}function Vu(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",17),c.qZA())}function Lu(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",18),c.qZA())}function Eu(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",13),c.qZA())}var Ku=function(e,t,a){return{"p-running":e,"p-success":t,"p-error":a}};function Bu(e,t){if(1&e&&(c.TgZ(0,"p",15),c.YNc(1,Vu,2,0,"span",16),c.YNc(2,Lu,2,0,"span",16),c.YNc(3,Eu,2,0,"span",16),c._uU(4),c.qZA()),2&e){var a=t.$implicit;c.Q6J("ngClass",c.kEZ(5,Ku,"running"===a.status,"done"===a.status,"error"===a.status)),c.xp6(1),c.Q6J("ngIf","running"==a.status),c.xp6(1),c.Q6J("ngIf","done"==a.status),c.xp6(1),c.Q6J("ngIf","error"==a.status),c.xp6(1),c.hij(" ",a.text," ")}}function ju(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){return c.CHM(a),c.oxw(2).start()}),c._UZ(1,"i",23),c._uU(2," Start"),c.qZA()}}function zu(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",7),c.TgZ(1,"div",11),c.TgZ(2,"button",19),c.NdJ("click",function(){return c.CHM(a),c.oxw().selectFile()}),c._UZ(3,"i",20),c._uU(4," Upload"),c.qZA(),c.YNc(5,ju,3,0,"button",21),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("hidden",i.uploading),c.xp6(3),c.Q6J("ngIf",i.uploaded)}}var Gu=function(){function e(t,a){o(this,e),this.config=t,this.api=a,this.uploading=!1,this.uploaded=!1,this.consoleOperations=[],this.processRunning=!1}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.uploader=new J.bA({url:this.config.getApiUrl()+"migration/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.onAfterAddingFile=function(e){e.withCredentials=!1},this.uploader.response.subscribe(function(t){(t=JSON.parse(t))&&200===t.status&&(e.uploaded=!0,e.filename=t.filename,e.consoleOperations[0].status="done")})}},{key:"selectFile",value:function(){this.fileInput.nativeElement.click()}},{key:"upload",value:function(){this.consoleOperations.push({text:"Uploading File",status:"running"}),this.uploading=!0,this.uploader.uploadAll()}},{key:"start",value:function(){var e=this;this.processRunning=!0,this.blockUI.start(),this.importDB().subscribe(function(){e.verify().subscribe(function(){e.importNAStable().subscribe(function(){e.importManagers().subscribe(function(){e.importProfiles().subscribe(function(){e.importProfilePricings().subscribe(function(){e.importUsers().subscribe(function(){e.importPrepaidCards().subscribe(function(){e.importCardUsers().subscribe(function(){e.blockUI.stop(),e.consoleOperations.push({text:"Migration Completed",status:"done"})})})})})})})})})})}},{key:"importDB",value:function(){var e=this;return this.consoleOperations.push({text:"Importing File",status:"running"}),new h.y(function(t){e.api.get("migration/import/"+e.filename).subscribe(function(a){200==a.status?(e.consoleOperations[1].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[1].status="error",t.error())})})}},{key:"verify",value:function(){var e=this;return this.consoleOperations.push({text:"Verifying Database",status:"running"}),new h.y(function(t){e.api.get("migration/verify").subscribe(function(a){200==a.status?(e.consoleOperations[2].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[2].status="error",t.error())})})}},{key:"importNAStable",value:function(){var e=this;return this.consoleOperations.push({text:"Importing NAS(s)",status:"running"}),new h.y(function(t){e.api.get("migration/import_nas").subscribe(function(a){200==a.status?(e.consoleOperations[3].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[3].status="error",t.error())})})}},{key:"importManagers",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Managers",status:"running"}),new h.y(function(t){e.api.get("migration/import_managers").subscribe(function(a){200==a.status?(e.consoleOperations[4].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[4].status="error",t.error())})})}},{key:"importProfiles",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Profiles",status:"running"}),new h.y(function(t){e.api.get("migration/import_profiles").subscribe(function(a){200==a.status?(e.consoleOperations[5].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[5].status="error",t.error())})})}},{key:"importProfilePricings",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Pricing List",status:"running"}),new h.y(function(t){e.api.get("migration/import_pricing").subscribe(function(a){200==a.status?(e.consoleOperations[6].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[6].status="error",t.error())})})}},{key:"importUsers",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Users - will take a while (~500 user / min)",status:"running"}),new h.y(function(t){e.api.get("migration/import_users").subscribe(function(a){200==a.status?(e.consoleOperations[7].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[7].status="error",t.error())})})}},{key:"importPrepaidCards",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Prepaid Cards",status:"running"}),new h.y(function(t){e.api.get("migration/import_cards").subscribe(function(a){200==a.status?(e.consoleOperations[8].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[8].status="error",t.error())})})}},{key:"importCardUsers",value:function(){var e=this;return this.consoleOperations.push({text:"Importing Card Users",status:"running"}),new h.y(function(t){e.api.get("migration/import_cardUsers").subscribe(function(a){200==a.status?(e.consoleOperations[9].status="done",t.next(a),t.complete()):(e.blockUI.stop(),e.consoleOperations[9].status="error",t.error())})})}}]),e}();Gu.\u0275fac=function(e){return new(e||Gu)(c.Y36(p),c.Y36(Z))},Gu.\u0275cmp=c.Xpm({type:Gu,selectors:[["app-migration"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Du,5),2&e)&&(c.iGM(a=c.CRH())&&(t.fileInput=a.first))},decls:16,vars:5,consts:[["type","file","ng2FileSelect","",2,"display","none",3,"uploader","change"],["fileUploader",""],[1,"card"],[1,"card-header"],[1,"fa","fa-database"],[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col"],[1,"migration-console"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"col-12"],[3,"type"],[1,"fa","fa-exclamation-triangle"],[1,"fa","fa-compress"],[3,"ngClass"],[4,"ngIf"],[1,"fa","fa-circle-notch","fa-spin"],[1,"fa","fa-check-circle"],[1,"btn","btn-success","float-right",3,"hidden","click"],[1,"fa","fa-upload"],["class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"btn","btn-primary","float-right",3,"click"],[1,"fa","fa-angle-right"]],template:function(e,t){1&e&&(c.TgZ(0,"input",0,1),c.NdJ("change",function(){return t.upload()}),c.qZA(),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5," Migration Wizard "),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div"),c.YNc(8,Hu,5,1,"div",6),c.YNc(9,Ru,5,1,"div",6),c.TgZ(10,"div",7),c.TgZ(11,"div",8),c.TgZ(12,"div",9),c.YNc(13,Bu,5,9,"p",10),c.qZA(),c.qZA(),c.qZA(),c._UZ(14,"br"),c.YNc(15,zu,6,2,"div",6),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("uploader",t.uploader),c.xp6(8),c.Q6J("ngIf",t.uploaded),c.xp6(1),c.Q6J("ngIf",!t.uploaded),c.xp6(4),c.Q6J("ngForOf",t.consoleOperations),c.xp6(2),c.Q6J("ngIf",!t.processRunning))},directives:[J.C6,Q.O5,Q.sg,O.wxo,Q.mk],styles:['.migration-console[_ngcontent-%COMP%]{min-height:200px;width:100%;background:#0E2231;font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:1.1rem;padding:15px;box-sizing:border-box}.p-running[_ngcontent-%COMP%]{color:#fff}.p-success[_ngcontent-%COMP%]{color:#72e896}.p-error[_ngcontent-%COMP%]{color:#ff3837}']}),(0,g.gn)([(0,m.bH)()],Gu.prototype,"blockUI",void 0);var Wu=["user_auth_log_model_view"];function $u(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)}}var Xu=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",label:this.tr.translate("global_username")},{dataKey:"reply",label:"Server Reply"},{dataKey:"nas_ip_address",label:"NAS"},{dataKey:"mac",label:"MAC"}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("report_user_auth_log_title"),icon:"fas fa-server",columns:this.columns,dataUrl:"index/userauthlog",page:1,showSearchBox:!0,rowsPerPage:10,sortBy:"created_at",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"userauthlog",hasAdvancedFilter:!1,showAdvancedFilter:!1}}}]),e}();Xu.\u0275fac=function(e){return new(e||Xu)(c.Y36(Z),c.Y36(I))},Xu.\u0275cmp=c.Xpm({type:Xu,selectors:[["app-user-auth-log"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Wu,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","user_auth_log_model_view",3,"modelViewConfig",4,"ngIf"],["name","user_auth_log_model_view",3,"modelViewConfig"],["user_auth_log",""]],template:function(e,t){1&e&&c.YNc(0,$u,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Xu.prototype,"blockUI",void 0);var ed=function(){return{height:"320px"}};function td(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"input",22),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.subject=e}),c.qZA(),c._UZ(2,"br"),c.TgZ(3,"textarea",23),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.text=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngModel",i.announcement.subject),c.xp6(2),c.Akn(c.DdM(4,ed)),c.Q6J("ngModel",i.announcement.text)}}function ad(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"textarea",24),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.text=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Akn(c.DdM(3,ed)),c.Q6J("ngModel",i.announcement.text)}}function id(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"input",25),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.subject=e}),c.qZA(),c._UZ(2,"br"),c.TgZ(3,"p-editor",26),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.text=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("ngModel",i.announcement.subject),c.xp6(2),c.Akn(c.DdM(4,ed)),c.Q6J("ngModel",i.announcement.text)}}function nd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",11),c.TgZ(1,"textarea",24),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().announcement.text=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Akn(c.DdM(3,ed)),c.Q6J("ngModel",i.announcement.text)}}function od(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.hij("",a.count," users selected")}}function rd(e,t){1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",27),c.qZA())}var ld=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.swal=a,this.toastr=i,this.trs=n,this.announcement={text:"",mode:1,user_filter:null,manager_id:-1,subject:""},this.managers_list=[],this.loading=!1,this.count=0}return l(e,[{key:"ngOnInit",value:function(){this.loadResources(),this.getUsersCount()}},{key:"send",value:function(){var e=this;this.swal.confirm({title:"Announcement",type:"warning",text:"Send Announcement To Selected Users ?"}).subscribe(function(){e.api.post("announcement",e.announcement).subscribe(function(t){200===t.status?e.toastr.success(e.trs.translate(t.message)):e.toastr.error(e.trs.translate(t.message))})})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a=[];a.unshift({value:-1,label:"all managers"});var n,o=i(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.managers_list=a})}},{key:"getUsersCount",value:function(){var e=this;this.loading=!0,this.api.post("announcement/count",this.announcement).subscribe(function(t){e.loading=!1,e.count=t.data})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(tt),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-announcements"]],decls:40,vars:13,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-bullhorn"],[1,"card-body"],[1,"row"],[1,"col-md-9"],["class","col",4,"ngIf"],[1,"col-12"],[1,"float-left"],[4,"ngIf"],[1,"btn","btn-primary","float-right",3,"click"],[1,"col"],[1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"row","ui-g","ui-fluid","w-100"],[1,"col","ui-g-12"],["placeholder","Select Manager",3,"options","autoDisplayFirst","ngModel","filter","ngModelChange","onChange"],["name","user_filter","value","active","label","Active Users",3,"ngModel","ngModelChange","onChange"],["name","user_filter","value","expired","label","Expired Users",3,"ngModel","ngModelChange","onChange"],["placeholder","Subject...",1,"form-control",3,"ngModel","ngModelChange"],["pInputTextArea","","placeholder","Enter Your Text Here",1,"form-control",3,"ngModel","ngModelChange"],["pInputTextarea","","placeholder","Enter Your Text Here",1,"form-control",3,"ngModel","ngModelChange"],["placeholder","Email Subject...",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Announcements "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",4),c.YNc(8,td,4,5,"div",6),c.YNc(9,ad,2,4,"div",6),c.YNc(10,id,4,5,"div",6),c.YNc(11,nd,2,4,"div",6),c.qZA(),c._UZ(12,"br"),c.TgZ(13,"div",4),c.TgZ(14,"div",7),c.TgZ(15,"div",8),c.YNc(16,od,2,1,"span",9),c.YNc(17,rd,2,0,"span",9),c.qZA(),c.TgZ(18,"button",10),c.NdJ("click",function(){return t.send()}),c._UZ(19,"i",2),c._uU(20," Send"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",11),c.TgZ(22,"select",12),c.NdJ("ngModelChange",function(e){return t.announcement.mode=e}),c.TgZ(23,"option",13),c._uU(24,"SMS"),c.qZA(),c.TgZ(25,"option",14),c._uU(26,"Email"),c.qZA(),c.TgZ(27,"option",15),c._uU(28,"Telegram"),c.qZA(),c.TgZ(29,"option",16),c._uU(30,"User Portal & App"),c.qZA(),c.qZA(),c._UZ(31,"hr"),c.TgZ(32,"div",17),c.TgZ(33,"div",18),c.TgZ(34,"p-dropdown",19),c.NdJ("ngModelChange",function(e){return t.announcement.manager_id=e})("onChange",function(){return t.getUsersCount()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"div",4),c.TgZ(36,"div",7),c.TgZ(37,"p-checkbox",20),c.NdJ("ngModelChange",function(e){return t.announcement.user_filter=e})("onChange",function(){return t.getUsersCount()}),c.qZA(),c.qZA(),c.TgZ(38,"div",7),c.TgZ(39,"p-checkbox",21),c.NdJ("ngModelChange",function(e){return t.announcement.user_filter=e})("onChange",function(){return t.getUsersCount()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngIf",3==t.announcement.mode),c.xp6(1),c.Q6J("ngIf",2==t.announcement.mode),c.xp6(1),c.Q6J("ngIf",1==t.announcement.mode),c.xp6(1),c.Q6J("ngIf",0==t.announcement.mode),c.xp6(5),c.Q6J("ngIf",!t.loading),c.xp6(1),c.Q6J("ngIf",t.loading),c.xp6(5),c.Q6J("ngModel",t.announcement.mode),c.xp6(12),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("ngModel",t.announcement.manager_id)("filter",!0),c.xp6(3),c.Q6J("ngModel",t.announcement.user_filter),c.xp6(2),c.Q6J("ngModel",t.announcement.user_filter))},directives:[Q.O5,A.EJ,A.JJ,A.On,A.YN,A.Kr,ya.Lt,wa.XZ,A.Fj,cc.ML],styles:[""]}),e}(),sd=function(){var e=function(){function e(){o(this,e)}return l(e,[{key:"transform",value:function(e,t){var a=[];for(var i in e)a.push({key:i,value:e[i]});return a}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Yjl({name:"keyobject",type:e,pure:!0}),e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac}),e}(),cd=n(36592),ud=n(676),dd=n(86025),fd=n(44748),pd=n(87564),gd=n(99287),hd=n(27745),md=n(6639),_d=function(){var e=l(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[Z,I,Je,Lt,Q.H9,Et,ki,y,Kt,Bt,Ci.YP,sd,jt.Ap],imports:[[s.b2,_.Bz,A.u5,A.UX,u.PW,O.mr5.forRoot(),N.P4.forRoot(),O.u3b.forRoot(),Ti.Su,O.nMh.forRoot(),O.zkK.forRoot(),m.uh.forRoot({delayStart:0,delayStop:500}),Y.IJ,Pt.vI.forRoot({useBootstrap4:!0}),J.Ob,ro.su.forRoot({apiKey:"AIzaSyDmdOaYJECiFdVr3G3TqN2Jq4JJDj43FxE"}),ud.d,Ra.SJ,Ma.j,Pa.gz,ya.kW,dd._,kt.q4,Da.Iu,fd.LU,pd.JH,F.D,Ha._8,Vt.q,cc.Z_,wa.nD,Zu.WN,Oi.S,ba.DL,gd.z,Ua.l,zl._t,cd.nm.forRoot(),Nu.fx,hd.d,Aa.Ud,jt.EC,md.U]]}),e}();c.B6R(Tt,[Q.O5,Q.sg,O.TOY,O.Mq7,gd.u,O.HzE,Q.mk,A.Fj,A.JJ,A.On,m.Z2,va,Vi],[]),c.B6R(qi,[Q.O5,A._Y,A.JL,A.sg,Q.sg,bi],[]),c.B6R(el,[F.Q,Ja,Q.sg,A.wV,A.Fj,Q.mk,A.JJ,A.On,Q.O5],[]),c.B6R(ge,[Q.O5,Q.RF,Q.n9,Ns,Is,Ss,Qs,Hc],[]);var vd=["myForm"];function bd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",9,10),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Zd=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("settings_portal"),this.form_config.fields=this.formFields,this.load()}},{key:"load",value:function(){var e=this;this.api.get("settings/portal_").subscribe(function(t){200===t.status&&e.myForm.setFormValue(t.data)})}},{key:"save",value:function(e){var t=this;this.api.post("settings/portal",e.value).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-portal-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(vd,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:11,vars:1,consts:[["role","alert",1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"i",1),c._uU(2,"\xa0 Server reboot is required for some of these changes to take effect. "),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c._UZ(5,"i",4),c._uU(6," Web Portal Settings "),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",6),c.TgZ(9,"div",7),c.YNc(10,bd,2,2,"dynamic-form",8),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(10),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{text-align:left}"]}),e}();function yd(e,t){if(1&e&&(c.TgZ(0,"option",41),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a.value),c.xp6(1),c.Oqu(a.label)}}function wd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr",33),c.TgZ(1,"td",34),c.TgZ(2,"select",35),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_service.profile_id=e})("change",function(){c.CHM(a);var e=c.oxw();return e.getProfile(e.new_service.profile_id)}),c.TgZ(3,"option",36),c._uU(4,"Select Profile"),c.qZA(),c.YNc(5,yd,2,2,"option",37),c.qZA(),c.qZA(),c.TgZ(6,"td"),c.TgZ(7,"input",38),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_service.qty=e})("change",function(){c.CHM(a);var e=c.oxw();return e.new_service.total=e.new_service.qty*e.new_service.unit_price}),c.qZA(),c.qZA(),c.TgZ(8,"td"),c.TgZ(9,"span"),c._uU(10),c.ALo(11,"currency"),c.qZA(),c.qZA(),c.TgZ(12,"td"),c.TgZ(13,"span"),c._uU(14),c.ALo(15,"currency"),c.qZA(),c.qZA(),c.TgZ(16,"td"),c.TgZ(17,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().addService()}),c._UZ(18,"i",39),c.qZA(),c._uU(19,"\xa0 "),c.TgZ(20,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().hideNewServiceRow()}),c._UZ(21,"i",40),c.qZA(),c._uU(22,"\xa0 "),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("ngModel",i.new_service.profile_id),c.xp6(3),c.Q6J("ngForOf",i.profile_list),c.xp6(2),c.Q6J("ngModel",i.new_service.qty),c.xp6(3),c.Oqu(c.xi3(11,5,i.new_service.unit_price," "+i.config.siteConfig.site_currency)),c.xp6(4),c.Oqu(c.xi3(15,8,i.new_service.total," "+i.config.siteConfig.site_currency))}}function xd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr",42),c.TgZ(1,"td",34),c.TgZ(2,"input",43),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_custom_service.name=e}),c.qZA(),c.qZA(),c.TgZ(3,"td"),c.TgZ(4,"input",38),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_custom_service.qty=e})("change",function(){c.CHM(a);var e=c.oxw();return e.new_custom_service.total=e.new_custom_service.qty*e.new_custom_service.unit_price}),c.qZA(),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.TgZ(7,"input",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().new_custom_service.unit_price=e})("change",function(){c.CHM(a);var e=c.oxw();return e.new_custom_service.total=e.new_custom_service.qty*e.new_custom_service.unit_price}),c.qZA(),c.qZA(),c.TgZ(8,"td"),c.TgZ(9,"span"),c._uU(10),c.ALo(11,"currency"),c.qZA(),c.qZA(),c.TgZ(12,"td"),c.TgZ(13,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().addCustomService()}),c._UZ(14,"i",39),c.qZA(),c._uU(15,"\xa0 "),c.TgZ(16,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().hideNewServiceRow()}),c._UZ(17,"i",40),c.qZA(),c._uU(18,"\xa0 "),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("ngModel",i.new_custom_service.name),c.xp6(2),c.Q6J("ngModel",i.new_custom_service.qty),c.xp6(2),c.hij(" ",i.config.siteConfig.site_currency,""),c.xp6(1),c.Q6J("ngModel",i.new_custom_service.unit_price),c.xp6(3),c.Oqu(c.xi3(11,5,i.new_custom_service.total," "+i.config.siteConfig.site_currency))}}function Ad(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c.TgZ(10,"button",16),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().removeInvoiceItem(e.id)}),c._UZ(11,"i",40),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.name),c.xp6(2),c.Oqu(i.qty),c.xp6(2),c.Oqu(i.unit_price),c.xp6(2),c.Oqu(i.total)}}var qd=function(){function e(t,a,i,n,r,l,s){var c=this;o(this,e),this.api=t,this.config=a,this.ch=i,this.route=n,this.auth=r,this.router=l,this.toastr=s,this.selected_user=null,this.suggestions=[],this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!1},this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!1},this.profile_list=[],this.invoice_items=[],this.receipent={},this.invoice={items:[],due_date:"",client_id:null,discount:0,total:0},this.sender=this.auth.client,this.route.params.subscribe(function(e){e.user_id&&(c.selected_user={id:e.user_id},c.getReceipentDetails())})}return l(e,[{key:"search",value:function(e){var t=this,a=e.query;a.length<2||this.api.post("index/user",{search:a}).subscribe(function(e){t.suggestions=[],e.data.map(function(e){t.suggestions.push({id:e.id,name:"<"+e.username+"> "+e.firstname+" "+e.lastname})})})}},{key:"loadResources",value:function(){var e=this;this.api.get("list/profile/0").subscribe(function(t){e.profile_list=[],t.data.map(function(t){e.profile_list.push({value:t.id,label:t.name})})})}},{key:"getProfile",value:function(e){var t=this;this.api.get("profile/price/user/"+e).subscribe(function(e){200==e.status&&(t.new_service.unit_price=e.data,t.new_service.total=t.new_service.unit_price*t.new_service.qty)})}},{key:"getReceipentDetails",value:function(){var e=this;this.api.get("user/"+this.selected_user.id).subscribe(function(t){200==t.status&&(e.receipent=t.data)})}},{key:"showNewServiceRow",value:function(){this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!0}}},{key:"hideNewServiceRow",value:function(){this.new_service={profile_id:-1,qty:1,unit_price:0,total:0,name:"",visible:!1}}},{key:"showNewCustomServiceRow",value:function(){this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!0}}},{key:"hideNewCustomServiceRow",value:function(){this.new_custom_service={qty:1,unit_price:0,total:0,name:"",visible:!1}}},{key:"addService",value:function(){var e=this,t="";this.profile_list.map(function(a){a.value==e.new_service.profile_id&&(t=a.label)}),this.invoice_items.push({profile_id:this.new_service.profile_id,qty:this.new_service.qty,unit_price:this.new_service.unit_price,total:this.new_service.total,name:t,id:this.ch.guid()}),this.hideNewServiceRow(),this.updateTotal()}},{key:"addCustomService",value:function(){this.invoice_items.push({profile_id:this.new_custom_service.profile_id,qty:this.new_custom_service.qty,unit_price:this.new_custom_service.unit_price,total:this.new_custom_service.total,name:this.new_custom_service.name,id:this.ch.guid()}),this.hideNewCustomServiceRow(),this.updateTotal()}},{key:"removeInvoiceItem",value:function(e){var t=this,a=0;this.invoice_items.map(function(i){i.id==e&&t.invoice_items.splice(a,1),a++}),this.updateTotal()}},{key:"ngOnInit",value:function(){this.loadResources()}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.invoice.items=this.invoice_items,this.invoice.client_id=this.selected_user.id,this.blockUI.start(),this.api.post("user/invoice",this.invoice).subscribe(function(a){if(e.blockUI.stop(),200===a.status&&(e.toastr.success(a.message),e.router.navigate(["billing/invoices/index"]),!0===t)){var i=a.data.id;e.api.downloadFile("userInvoice/download/"+i,"invoice_"+i)}})}},{key:"updateTotal",value:function(){var e=this;this.invoice.total=0,this.invoice_items.map(function(t){e.invoice.total+=parseFloat(t.total)}),this.invoice.total=this.invoice.total-this.invoice.discount*(this.invoice.total/100)}}]),e}();qd.\u0275fac=function(e){return new(e||qd)(c.Y36(Z),c.Y36(p),c.Y36(y),c.Y36(_.gz),c.Y36(w),c.Y36(_.F0),c.Y36(v._W))},qd.\u0275cmp=c.Xpm({type:qd,selectors:[["app-user-invoice-form"]],decls:114,vars:37,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-file-invoice-dollar"],[1,"card-body"],[1,"row",3,"hidden"],[1,"col-sm-12","col-md-6"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","user",1,"ui-small",3,"ngModel","suggestions","field","placeholder","ngModelChange","completeMethod","onSelect"],[3,"hidden"],[1,"row"],[1,"col-md-6"],[1,"organization-container"],[1,"col-md-6","label"],[1,"col-md-6","address"],[1,"row","col-md-12"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-plus"],["id","items-container",1,"col-md-12"],[1,"items-table"],["id","new_service_row","class","new-item-row",4,"ngIf"],["id","new_custom_service_row","class","new-item-row",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-12"],[1,"form-group","row","required"],[1,"col-md-3","col-form-label"],[1,"col-9"],["type","date","name","due_date",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"form-group","row"],["type","number","name","discount",1,"form-control","input-small",3,"ngModel","ngModelChange","change"],[1,"form-control-static"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button","btn-sm",3,"disabled","click"],["id","new_service_row",1,"new-item-row"],["width","30%"],["name","profile_id",3,"ngModel","ngModelChange","change"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","qty","type","number","name","qty",3,"ngModel","ngModelChange","change"],[1,"fa","fa-check"],[1,"fa","fa-trash"],[3,"value"],["id","new_custom_service_row",1,"new-item-row"],["placeholder","item name","type","text","name","name","autocomplete","false",3,"ngModel","ngModelChange"],["placeholder","unit_price","type","number","name","unit_price",3,"ngModel","ngModelChange","change"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," User Invoice Form "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"p-autoComplete",8),c.NdJ("ngModelChange",function(e){return t.selected_user=e})("completeMethod",function(e){return t.search(e)})("onSelect",function(){return t.getReceipentDetails()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",9),c._UZ(11,"br"),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c._uU(14," Organization"),c._UZ(15,"br"),c.TgZ(16,"div",12),c.TgZ(17,"div",10),c.TgZ(18,"div",13),c._uU(19," Sender "),c.qZA(),c.TgZ(20,"div",14),c._uU(21),c._UZ(22,"br"),c._uU(23),c._UZ(24,"br"),c._uU(25),c._UZ(26,"br"),c._uU(27),c._UZ(28,"br"),c._uU(29),c._UZ(30,"br"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",11),c._uU(32," Client"),c._UZ(33,"br"),c.TgZ(34,"div",12),c.TgZ(35,"div",10),c.TgZ(36,"div",13),c._uU(37," Recipient "),c.qZA(),c.TgZ(38,"div",14),c._uU(39),c._UZ(40,"br"),c._uU(41),c._UZ(42,"br"),c._uU(43),c._UZ(44,"br"),c._uU(45),c._UZ(46,"br"),c._uU(47),c._UZ(48,"br"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(49,"hr"),c.TgZ(50,"div",15),c.TgZ(51,"button",16),c.NdJ("click",function(){return t.showNewServiceRow()}),c._UZ(52,"i",17),c._uU(53," Add Service"),c.qZA(),c._uU(54,"\xa0 "),c.TgZ(55,"button",16),c.NdJ("click",function(){return t.showNewCustomServiceRow()}),c._UZ(56,"i",17),c._uU(57," Add Custom Item"),c.qZA(),c.qZA(),c._UZ(58,"br"),c.TgZ(59,"div",10),c.TgZ(60,"div",18),c.TgZ(61,"table",19),c.TgZ(62,"thead"),c.TgZ(63,"th"),c._uU(64," Item "),c.qZA(),c.TgZ(65,"th"),c._uU(66,"Qty"),c.qZA(),c.TgZ(67,"th"),c._uU(68),c.qZA(),c.TgZ(69,"th"),c._uU(70),c.qZA(),c._UZ(71,"th"),c.qZA(),c.TgZ(72,"tbody"),c.YNc(73,wd,23,11,"tr",20),c.YNc(74,xd,19,8,"tr",21),c.YNc(75,Ad,12,4,"tr",22),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(76,"br"),c._UZ(77,"hr"),c.TgZ(78,"div",10),c.TgZ(79,"div",23),c.TgZ(80,"div",24),c.TgZ(81,"label",25),c._uU(82," Due Date "),c.qZA(),c.TgZ(83,"div",26),c.TgZ(84,"input",27),c.NdJ("ngModelChange",function(e){return t.invoice.due_date=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(85,"div",23),c.TgZ(86,"div",28),c.TgZ(87,"label",25),c._uU(88," Discount (%) "),c.qZA(),c.TgZ(89,"div",26),c.TgZ(90,"input",29),c.NdJ("ngModelChange",function(e){return t.invoice.discount=e})("change",function(){return t.updateTotal()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(91,"div",23),c.TgZ(92,"div",28),c.TgZ(93,"label",25),c._uU(94," Discount Value "),c.qZA(),c.TgZ(95,"div",26),c.TgZ(96,"label",30),c._uU(97),c.ALo(98,"currency"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(99,"div",23),c.TgZ(100,"div",28),c.TgZ(101,"label",25),c._uU(102," Total "),c.qZA(),c.TgZ(103,"div",26),c.TgZ(104,"label",30),c._uU(105),c.ALo(106,"currency"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(107,"br"),c._UZ(108,"hr"),c.TgZ(109,"div",31),c.TgZ(110,"button",32),c.NdJ("click",function(){return t.save()}),c._uU(111,"Save"),c.qZA(),c.TgZ(112,"button",32),c.NdJ("click",function(){return t.save(!0)}),c._uU(113,"Save & Print"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("hidden",t.selected_user&&t.selected_user.id),c.xp6(4),c.Q6J("ngModel",t.selected_user)("suggestions",t.suggestions)("field","name")("placeholder","select client"),c.xp6(1),c.Q6J("hidden",!t.selected_user||!t.selected_user.id),c.xp6(11),c.AsE(" ",t.sender.firstname," ",t.sender.lastname,"."),c.xp6(2),c.hij(" ",t.sender.company,""),c.xp6(2),c.hij(" ",t.sender.phone,""),c.xp6(2),c.hij(" ",t.sender.address,""),c.xp6(2),c.AsE(" ",t.sender.country," - ",t.sender.city,""),c.xp6(10),c.AsE(" ",t.receipent.firstname," ",t.receipent.lastname,"."),c.xp6(2),c.hij(" ",t.receipent.company,""),c.xp6(2),c.hij(" ",t.receipent.phone,""),c.xp6(2),c.hij(" ",t.receipent.address,""),c.xp6(2),c.AsE(" ",t.receipent.country," - ",t.receipent.city,""),c.xp6(21),c.hij("Unit Price (",t.config.siteConfig.site_currency,")"),c.xp6(2),c.hij("Total (",t.config.siteConfig.site_currency,")"),c.xp6(3),c.Q6J("ngIf",t.new_service.visible),c.xp6(1),c.Q6J("ngIf",t.new_custom_service.visible),c.xp6(1),c.Q6J("ngForOf",t.invoice_items),c.xp6(9),c.Q6J("ngModel",t.invoice.due_date),c.xp6(6),c.Q6J("ngModel",t.invoice.discount),c.xp6(7),c.Oqu(c.xi3(98,31,t.invoice.total*t.invoice.discount/100," "+t.config.siteConfig.site_currency)),c.xp6(8),c.Oqu(c.xi3(106,34,t.invoice.total," "+t.config.siteConfig.site_currency)),c.xp6(5),c.Q6J("disabled",!t.invoice_items||t.invoice_items.length<1),c.xp6(2),c.Q6J("disabled",!t.invoice_items||t.invoice_items.length<1))},directives:[Zu.Qc,A.JJ,A.On,Q.O5,Q.sg,A.Fj,A.wV,A.EJ,A.YN,A.Kr],pipes:[Q.H9],styles:[".organization-container[_ngcontent-%COMP%]{margin-top:.5rem}.organization-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:lighter;font-size:smaller}.organization-container[_ngcontent-%COMP%]   .address[_ngcontent-%COMP%]{font-size:smaller}.items-table[_ngcontent-%COMP%]{width:100%}.items-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-top:1px solid #fffeff}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f4f7f8;font-size:small;padding:7px}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background:transparent}.items-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border:none;background:transparent;width:100%}.new-item-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .new-item-row[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .new-item-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:bold!important}"]}),(0,g.gn)([(0,m.bH)()],qd.prototype,"blockUI",void 0);var Td=["invoices_model_view"];function kd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)}}var Cd=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.tr=a,this.toastr=i,this.swal=n,this.router=r,this.tableColumns=[{dataKey:"invoice_number",label:"Invoice No"},{dataKey:"created_at",label:"Date",hidden:!0},{dataKey:"due_date",label:"Due Date"},{dataKey:"username",parentKey:"user_details",label:"Username",sortBy:"user_id"},{dataKey:"type",label:"Type"},{dataKey:"amount",label:"Amount"},{dataKey:"description",label:"Description"},{dataKey:"username",parentKey:"manager_details",label:"Created By",sortBy:"created_by"},{dataKey:"payment_method",label:"Payment Method"},{dataKey:"paid",label:"Paid",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.filterFields=[{key:"status",label:"Invoice Status",type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:"All"},{value:1,label:"Paid"},{value:0,label:"Unpaid"}]},{key:"username",label:"Username",type:"text",value:null,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.actions=[{name:"pay",label:this.tr.translate("manager_invoice_action_pay"),icon:"fa fa-cash-note",acl:"prm_any",inline:!0,requiresRow:!0},{name:"unpay",label:this.tr.translate("manager_invoice_action_unpay"),icon:"fa fa-cash-note",acl:"prm_any",inline:!0,requiresRow:!0},{name:"download",label:this.tr.translate("global_download"),icon:"fa fa-file-pdf",acl:"prm_any",inline:!0,requiresRow:!0},{name:"",label:"",type:"separator",acl:"prm_managers_sysadmin"},{name:"designer",label:this.tr.translate("user_invoice_title_action"),acl:"prm_managers_sysadmin",inline:!1,requiresRow:!1}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={hasHeader:!0,title:"Users Invoices",icon:"fa fa-file-invoice-dollar",dataUrl:"index/UserInvoices",primaryKey:"id",sortBy:"created_at",allowSelect:!0,direction:"desc",columns:this.tableColumns,actions:this.actions,useUrlFilter:!0,hasAdvancedFilter:!0,hasInlineActions:!0,showSearchBox:!0,allowExport:!0}}},{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),console.log(e),e.action){case"pay":1!=this.modelView.currentRow.paid?this.payInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_paid"));break;case"unpay":console.log(this.modelView.currentRow),1===this.modelView.currentRow.paid?this.unpayInvoice(t):this.toastr.info(this.tr.translate("msg_invoice_already_unpaid"));break;case"download":this.blockUI.start(),this.api.downloadFile("userInvoice/download/"+t,"invoice_"+t),this.blockUI.stop();break;case"designer":this.router.navigate(["settings/userInvoiceDesigner"])}}},{key:"payInvoice",value:function(e){var t=this;this.swal.confirm({title:this.tr.translate("prompt_invoices_pay"),text:"",confirmButtonText:"Yes"}).subscribe(function(){t.api.get("user/invoice/pay/"+e).subscribe(function(e){200===e.status?t.modelView.reload():t.toastr.warning(t.tr.translate(e.message))})})}},{key:"unpayInvoice",value:function(e){var t=this;this.swal.confirm({title:this.tr.translate("prompt_invoices_unpay"),text:"",confirmButtonText:"Yes"}).subscribe(function(){t.api.get("user/invoice/unpay/"+e).subscribe(function(e){200===e.status?t.modelView.reload():t.toastr.warning(t.tr.translate(e.message))})})}}]),e}();function Ud(e,t){if(1&e&&(c.TgZ(0,"tr",3),c.TgZ(1,"td",1),c._uU(2,"Disk"),c.qZA(),c.TgZ(3,"td",2),c._uU(4),c.qZA(),c.qZA()),2&e){var a=t.$implicit;c.xp6(4),c.AsE("",a.name," - ",a.size,"")}}Cd.\u0275fac=function(e){return new(e||Cd)(c.Y36(Z),c.Y36(I),c.Y36(v._W),c.Y36(tt),c.Y36(_.F0))},Cd.\u0275cmp=c.Xpm({type:Cd,selectors:[["app-user-invoice-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Td,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","onAction",4,"ngIf"],["name","invoices_model_view",3,"modelViewConfig","advancedFilterFields","onAction"],["invoices_model_view",""]],template:function(e,t){1&e&&c.YNc(0,kd,2,2,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Cd.prototype,"blockUI",void 0);var Md=function(){var e=function(){function e(t){o(this,e),this.api=t,this.hwinfo={}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.api.get("resources/hardware").subscribe(function(t){200===t.status&&(e.hwinfo=t.data)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-hardware-information"]],decls:26,vars:6,consts:[[1,"info-table"],["width","50%",1,"td-label"],["with","50%",1,"td-value"],[1,"with-separator"],["class","with-separator",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"table",0),c.TgZ(2,"tr"),c.TgZ(3,"td",1),c._uU(4,"Server Type"),c.qZA(),c.TgZ(5,"td",2),c._uU(6),c.qZA(),c.qZA(),c.TgZ(7,"tr"),c._UZ(8,"td",1),c.TgZ(9,"td",2),c._uU(10),c.qZA(),c.qZA(),c.TgZ(11,"tr"),c._UZ(12,"td",1),c.TgZ(13,"td",2),c._uU(14),c.qZA(),c.qZA(),c.TgZ(15,"tr",3),c.TgZ(16,"td",1),c._uU(17,"CPU"),c.qZA(),c.TgZ(18,"td",2),c._uU(19),c.qZA(),c.qZA(),c.TgZ(20,"tr",3),c.TgZ(21,"td",1),c._uU(22,"RAM"),c.qZA(),c.TgZ(23,"td",2),c._uU(24),c.qZA(),c.qZA(),c.YNc(25,Ud,5,2,"tr",4),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.Oqu(t.hwinfo.description),c.xp6(4),c.Oqu(t.hwinfo.product),c.xp6(4),c.Oqu(t.hwinfo.vendor),c.xp6(5),c.Oqu(t.hwinfo.cpu),c.xp6(5),c.Oqu(t.hwinfo.memory_size),c.xp6(1),c.Q6J("ngForOf",t.hwinfo.disks))},directives:[Q.sg],styles:[".info-table[_ngcontent-%COMP%]{width:100%;font-size:1rem}.info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px}.td-label[_ngcontent-%COMP%]{text-align:right;padding-right:20px!important;color:#92959c}.td-value[_ngcontent-%COMP%]{text-align:left;color:#505256;padding-left:20px!important}.with-separator[_ngcontent-%COMP%]{border-top:1px solid #dfdfdf}.with-separator[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:25px!important}"]}),e}();function Fd(e,t){if(1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",17),c._uU(2),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.hij("\xa0\xa0",a.tr.translate("label_about")," ")}}function Jd(e,t){if(1&e&&(c.TgZ(0,"span"),c._UZ(1,"i",18),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij("\xa0\xa0",a.tr.translate("label_about_hardware")," ")}}function Od(e,t){1&e&&(c.TgZ(0,"tab"),c.YNc(1,Jd,3,1,"ng-template",3),c.TgZ(2,"div",0),c.TgZ(3,"div",4),c._UZ(4,"app-hardware-information"),c.qZA(),c.qZA(),c.qZA())}var Nd=function(){var e=function(){function e(t,a,i){o(this,e),this.config=t,this.tr=a,this.auth=i,this.logo_url="",this.logo_url=this.config.getApiUrl()+"resources/logo",console.log(this.config.siteConfig)}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(p),c.Y36(I),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-about"]],decls:30,vars:9,consts:[[1,"row"],[1,"col-md-12","mb-4"],[3,"justified"],["tabHeading",""],[1,"col"],[1,"col","text-center"],[1,"logo_image",3,"src","error"],[1,"row","background-container"],[1,"col-md-6","col-sm-12","text-left","company-details"],[1,"fa","fa-address-card"],[1,"fa","fa-phone"],[1,"fa","fa-envelope"],[1,"fa","fa-globe"],[3,"href"],[1,"col-md-6","text-right"],["src","assets/img/about_netman.png",1,"about-netman"],[4,"ngIf"],[1,"fa","fa-info-circle"],[1,"fa","fa-microchip"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"tabset",2),c.TgZ(3,"tab"),c.YNc(4,Fd,3,1,"ng-template",3),c.TgZ(5,"div",0),c.TgZ(6,"div",4),c.TgZ(7,"div",0),c.TgZ(8,"div",5),c.TgZ(9,"img",6),c.NdJ("error",function(){return t.logo_url="assets/img/sas.png"}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",7),c.TgZ(11,"div",8),c.TgZ(12,"h3"),c._uU(13),c.qZA(),c.TgZ(14,"p"),c._UZ(15,"i",9),c._uU(16),c.qZA(),c.TgZ(17,"p"),c._UZ(18,"i",10),c._uU(19),c.qZA(),c.TgZ(20,"p"),c._UZ(21,"i",11),c._uU(22),c.qZA(),c.TgZ(23,"p"),c._UZ(24,"i",12),c.TgZ(25,"a",13),c._uU(26),c.qZA(),c.qZA(),c.qZA(),c.TgZ(27,"div",14),c._UZ(28,"img",15),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(29,Od,5,0,"tab",16),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("justified",!1),c.xp6(7),c.s9C("src",t.logo_url,c.LSH),c.xp6(4),c.Oqu(t.config.siteConfig.site.company_name),c.xp6(3),c.hij(" ",t.config.siteConfig.site.company_address," "),c.xp6(3),c.hij(" ",t.config.siteConfig.site.company_phone," "),c.xp6(3),c.hij(" ",t.config.siteConfig.site.company_email," "),c.xp6(3),c.s9C("href",t.config.siteConfig.site.company_website,c.LSH),c.xp6(1),c.hij(" ",t.config.siteConfig.site.company_website,""),c.xp6(3),c.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")))},directives:[N.AH,N.wW,N.y3,Q.O5,Md],styles:[".company-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;font-weight:lighter}.background-container[_ngcontent-%COMP%]{background-image:url(/assets/img/about-background.png);background-size:contain;min-height:250px;margin-top:90px}.about-netman[_ngcontent-%COMP%]{width:100%}.html-container[_ngcontent-%COMP%]{padding:5px;border:1px solid #eee8d5;width:100%;min-height:300px}.logo_image[_ngcontent-%COMP%]{max-width:400px;height:auto}"]}),e}(),Id=["activations_model_view"];function Yd(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterOptions",a.filterOptions)("advancedFilterFields",a.filterFields)}}var Qd=function(){function e(t,a,i){o(this,e),this.api=t,this.tr=a,this.auth=i,this.managers_list=[],this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",label:this.tr.translate("global_username"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"firstname",label:this.tr.translate("global_firstname"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"lastname",label:this.tr.translate("global_lastname"),parentKey:"user_details",sortBy:"user_id"},{dataKey:"username",label:this.tr.translate("global_manager"),parentKey:"manager_details",sortBy:"manager_id"},{dataKey:"name",label:this.tr.translate("global_profile"),parentKey:"profile_details",sortBy:"profile_id"},{dataKey:"addon_name",label:"Addon",parentKey:"addon_details",sortBy:"addon_id",hidden:!0},{dataKey:"price",label:this.tr.translate("global_price"),pipe:"currency"},{dataKey:"old_expiration",label:this.tr.translate("report_activations_old_expiration")},{dataKey:"new_expiration",label:this.tr.translate("report_activations_new_expiration")},{dataKey:"activation_method",label:this.tr.translate("user_activate_method"),hidden:!1},{dataKey:"refund_comment",label:this.tr.translate("global_comment")},{dataKey:"pin",label:"PIN",hidden:!0}],this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"sub_managers",label:this.tr.translate("manager_overview_submanagers"),type:"switch",value:1,cols:12,layout:"vertical"},{key:"profile_id",label:this.tr.translate("global_profile"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"group_id",label:this.tr.translate("user_form_label_group"),type:"select2",value:-1,options:[],layout:"vertical",cols:12,acl:"prm_groups_assign"},{key:"activation_method",label:this.tr.translate("user_activate_method"),type:"select2",layout:"vertical",cols:12,value:"any",options:[{value:"any",label:this.tr.translate("global_all")},{value:"credit",label:this.tr.translate("user_activate_option_manager_balance")},{value:"user_credit",label:this.tr.translate("user_activate_option_user_balance")},{value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")},{value:"voucher",label:this.tr.translate("user_activate_option_user_card")},{value:"card_user",label:"Prepaid User"}]},{key:"date_start",label:this.tr.translate("global_filter_from_date"),type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:this.tr.translate("global_filter_to_date"),type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[],user_id:[],profile_id:[]},this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("report_activations_title"),icon:"",columns:this.columns,dataUrl:"index/activations",page:1,showSearchBox:!0,showRowsCount:!0,allowExport:!0,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"activations",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}},{key:"loadResources",value:function(){var e=this;if(this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:e.tr.translate("global_filter_all_managers")}),e.filterOptions.manager_id=n}),this.api.get("list/profile/4").subscribe(function(t){var a=[];a.push({value:-1,label:"All"}),200==t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filterOptions.profile_id=a)}),this.auth.has("prm_groups_assign")){var t=[];this.api.get("group").subscribe(function(a){if(200===a.status){var n,o=i(a.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}t.unshift({value:-1,label:e.tr.translate("global_all")}),e.filterOptions.group_id=t}})}}}]),e}();Qd.\u0275fac=function(e){return new(e||Qd)(c.Y36(Z),c.Y36(I),c.Y36(w))},Qd.\u0275cmp=c.Xpm({type:Qd,selectors:[["app-activations-report"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Id,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","activations_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","activations_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["activations_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Yd,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[".nav-item[_ngcontent-%COMP%]{padding-left:1rem}"]}),(0,g.gn)([(0,m.bH)()],Qd.prototype,"blockUI",void 0);var Sd=["myForm"];function Pd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Dd=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("settings_sastrack"),this.form_config.fields=this.formFields,this.load()}},{key:"load",value:function(){var e=this;this.api.get("settings/sastrack_").subscribe(function(t){200==t.status&&e.myForm.setFormValue(t.data)})}},{key:"save",value:function(e){var t=this;this.api.post("settings/sastrack",e.value).subscribe(function(e){200==e.status&&t.toastr.success(t.tr.translate(e.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sastrack-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Sd,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," SASTrack Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Pd,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}();function Hd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){return c.CHM(a),c.oxw().start()}),c._UZ(1,"i",23),c._uU(2," Import"),c.qZA()}}function Rd(e,t){if(1&e&&(c.TgZ(0,"option",26),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a),c.xp6(1),c.Oqu(a)}}function Vd(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"th"),c.TgZ(1,"select",24),c.NdJ("ngModelChange",function(e){var t=c.CHM(a).index;return c.oxw().tableHeader[t]=e}),c.YNc(2,Rd,2,2,"option",25),c.qZA(),c.qZA()}if(2&e){var i=t.index,n=c.oxw();c.xp6(1),c.Q6J("ngModel",n.tableHeader[i]),c.xp6(1),c.Q6J("ngForOf",n.fields)}}function Ld(e,t){if(1&e&&(c.TgZ(0,"td"),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.xp6(1),c.Oqu(a.value)}}function Ed(e,t){if(1&e&&(c.TgZ(0,"tr"),c.YNc(1,Ld,2,1,"td",17),c.ALo(2,"keyobject"),c.qZA()),2&e){var a=t.$implicit;c.xp6(1),c.Q6J("ngForOf",c.lcZ(2,1,a))}}function Kd(e,t){if(1&e&&(c.TgZ(0,"p"),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Tol(a.class),c.xp6(1),c.hij(" ",a.text," ")}}var Bd=function(){function e(t,a,i,n){o(this,e),this.api=t,this.config=a,this.toastr=i,this.swal=n,this.importStarted=!1,this.tableHeader=[],this.model="user",this.ignore_header=!0,this.remoteFilename=null,this.user_fields=["ignore","username","password","profile","parent","expiration","firstname","lastname","phone","email","company","city","address","contract_id","national_id","static_ip","traffic_balance"],this.manager_fields=["ignore","username","password","firstname","lastname","parent","balance","email","company","address","phone","acl_group"],this.refill_card_fields=["ignore","pin","serialnumber","expiration","value"],this.card_users_fields=["username","password","profile","owner","expiration","value"],this.user_mandatory_fields=["username","password","profile"],this.manager_mandatory_fields=["username","password","acl_group"],this.refill_card_mandatory_fields=["pin","serialnumber","expiration","value"],this.card_users_mandatory_fields=["username","password","profile","expiration"],this.fields=null,this.consoleOutput=[]}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.uploader=new J.bA({url:this.config.getApiUrl()+"import/upload",isHTML5:!0,method:"POST",itemAlias:"file",authTokenHeader:"authorization",authToken:"Bearer "+localStorage.getItem(this.config.tokenName)}),this.uploader.response.subscribe(function(t){e.rows=[],t=JSON.parse(t),e.remoteFilename=t.filename,e.rows=t.data,e.columns=Object.keys(e.rows[0]),e.resetColumnFields()}),this.uploader.onAfterAddingFile=function(e){e.withCredentials=!1},this.fields=this.user_fields}},{key:"hasDuplicateColumns",value:function(){var e=[],t=!1;return this.tableHeader.map(function(a){"ignore"!=a&&(console.log(a),-1==e.indexOf(a)?e.push(a):t=!0)}),console.log(e),t}},{key:"resetColumnFields",value:function(){for(var e=this.columns.length,t=0;t<e;t++)this.tableHeader[t]="ignore"}},{key:"onModelChanged",value:function(){switch(this.resetColumnFields(),this.model){case"user":this.fields=this.user_fields;break;case"manager":this.fields=this.manager_fields;break;case"refill_card":this.fields=this.refill_card_fields;break;case"card_users":this.fields=this.card_users_fields}}},{key:"missingFields",value:function(){var e=this,t=[];if("user"==this.model){var a=0,n=a;this.user_mandatory_fields.map(function(o){n=a;var r,l=i(e.tableHeader);try{for(l.s();!(r=l.n()).done;){r.value==o&&a++}}catch(s){l.e(s)}finally{l.f()}n==a&&t.push(o)})}return t}},{key:"start",value:function(){var e=this;if(this.hasDuplicateColumns())this.toastr.warning("duplicate columns selected");else{var t=this.missingFields();if(t.length>0){var a="These fields are missing: "+t.join(", ");this.toastr.warning(a)}else{this.importStarted=!0;var i={filename:this.remoteFilename,model:this.model,ignore_header:this.ignore_header,columns:this.tableHeader};this.consoleOutput.push({class:"p-info",text:"Verifying Data Integrity..."}),this.api.post("import/check",i).subscribe(function(t){200==t.status?e.importData():t.message.map(function(t){e.consoleOutput.push({class:"p-error",text:t})})})}}}},{key:"importData",value:function(){var e=this,t={filename:this.remoteFilename,model:this.model,ignore_header:this.ignore_header,columns:this.tableHeader};this.consoleOutput.push({class:"p-info",text:"Importing Data..."}),this.api.post("import/import",t).subscribe(function(t){200==t.status?e.consoleOutput.push({class:"p-success",text:t.message}):t.message.map(function(t){e.consoleOutput.push({class:"p-error",text:t})})})}}]),e}();function jd(e,t){if(1&e&&(c.TgZ(0,"option",35),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a),c.xp6(1),c.Oqu(a)}}Bd.\u0275fac=function(e){return new(e||Bd)(c.Y36(Z),c.Y36(p),c.Y36(v._W),c.Y36(tt))},Bd.\u0275cmp=c.Xpm({type:Bd,selectors:[["app-data-import"]],decls:37,vars:10,consts:[[1,"navbar","navbar-light","bg-light","justify-content-between",3,"hidden"],[1,"form-inline"],[1,"form-control-static"],["id","dataImportModel","name","model",1,"form-control",3,"ngModel","ngModelChange","change"],["value","user"],["value","manager"],["value","refill_card"],["value","card_users"],["type","checkbox","name","ignore_header",3,"ngModel","ngModelChange"],[1,"btn-container"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-upload"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"card",3,"hidden"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-outline","table-hover","table-sm","import-table"],[4,"ngFor","ngForOf"],[1,"console"],[3,"class",4,"ngFor","ngForOf"],["type","file","ng2FileSelect","","name","fileUpload",2,"display","none",3,"uploader","change"],["uploadFileInput",""],[1,"btn","btn-success",3,"click"],[1,"fa","fa-file-import"],[1,"",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"nav",0),c.TgZ(1,"form",1),c.TgZ(2,"label",2),c._uU(3,"Import "),c.qZA(),c.TgZ(4,"select",3),c.NdJ("ngModelChange",function(e){return t.model=e})("change",function(){return t.onModelChanged()}),c.TgZ(5,"option",4),c._uU(6,"Users"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Managers"),c.qZA(),c.TgZ(9,"option",6),c._uU(10,"Refill Cards"),c.qZA(),c.TgZ(11,"option",7),c._uU(12,"Card Users"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"div"),c.TgZ(14,"input",8),c.NdJ("ngModelChange",function(e){return t.ignore_header=e}),c.qZA(),c._uU(15," Ignore Header (first row) "),c.qZA(),c.TgZ(16,"div",9),c.TgZ(17,"button",10),c.NdJ("click",function(){return c.CHM(a),c.MAs(36).click()}),c._UZ(18,"i",11),c._uU(19," Upload File"),c.qZA(),c.YNc(20,Hd,3,0,"button",12),c.qZA(),c.qZA(),c._UZ(21,"br"),c.TgZ(22,"div",13),c.TgZ(23,"div",14),c.TgZ(24,"div",15),c.TgZ(25,"table",16),c.TgZ(26,"thead"),c.TgZ(27,"tr"),c.YNc(28,Vd,3,2,"th",17),c.qZA(),c.qZA(),c.TgZ(29,"tbody"),c.YNc(30,Ed,3,3,"tr",17),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"div",13),c.TgZ(32,"div",14),c.TgZ(33,"div",18),c.YNc(34,Kd,2,4,"p",19),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"input",20,21),c.NdJ("change",function(){return t.uploader.uploadAll()}),c.qZA()}2&e&&(c.Q6J("hidden",t.importStarted),c.xp6(4),c.Q6J("ngModel",t.model),c.xp6(10),c.Q6J("ngModel",t.ignore_header),c.xp6(6),c.Q6J("ngIf",t.rows&&t.rows.length>0&&""!=t.model),c.xp6(2),c.Q6J("hidden",t.importStarted),c.xp6(6),c.Q6J("ngForOf",t.columns),c.xp6(2),c.Q6J("ngForOf",t.rows),c.xp6(1),c.Q6J("hidden",!t.importStarted),c.xp6(3),c.Q6J("ngForOf",t.consoleOutput),c.xp6(1),c.Q6J("uploader",t.uploader))},directives:[Y.M2,A._Y,A.JL,A.F,A.EJ,A.JJ,A.On,A.YN,A.Kr,A.Wl,Q.O5,Q.sg,J.C6],pipes:[sd],styles:['.navbar[_ngcontent-%COMP%]{font-weight:lighter}#dataImportModel[_ngcontent-%COMP%]{margin-left:20px;width:150px}.import-table[_ngcontent-%COMP%]{font-size:.7rem}.console[_ngcontent-%COMP%]{min-height:200px;width:100%;background:#0E2231;font-family:Menlo,Monaco,Consolas,"Courier New",monospace;font-size:1.1rem;padding:15px;box-sizing:border-box}.p-info[_ngcontent-%COMP%]{color:#eee}.p-error[_ngcontent-%COMP%]{color:#ff7b6a}.p-success[_ngcontent-%COMP%]{color:#84ff74}.btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;width:120px}']}),(0,g.gn)([(0,m.bH)()],Bd.prototype,"blockUI",void 0);var zd=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.year_list=[],this.date=new Date,this.filter={type:"daily",month:this.date.getMonth()+1,year:this.date.getFullYear(),manager_id:-1,sub_managers:"true",activation_method:"any"},this.managers_list=[]}return l(e,[{key:"ngOnInit",value:function(){for(var e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.load(),this.loadResources()}},{key:"getRandomColor",value:function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},{key:"load",value:function(){var e=this;this.api.post("report/activations",this.filter).subscribe(function(t){"daily"==e.filter.type&&e.drawDailyChart(t),"monthly"==e.filter.type&&e.drawMonthlyChart(t)})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[],e.managers_list.unshift({value:-1,label:e.tr.translate("global_filter_all_managers")});var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}})}},{key:"drawDailyChart",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Activations"}},series:[],title:{text:this.tr.translate("report_activations_chart_title")},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Activations"},currentMin:0}},a=[],i=e.profiles;i.push({id:null,name:null});for(var n=e.data,o=i.length,r=[],l=0;l<o;l++){for(var s=[],c=1;c<32;c++){r=[c,0];for(var u=0;u<n.length;u++)n[u].profile_id==i[l].id&&n[u].day==c&&(r=[c,parseInt(n[u].total)]);s.push(r)}a[l]={name:i[l].name?i[l].name:"Total",type:"spline",data:s,pointInterval:1,color:this.getRandomColor()},"Total"==a[l].name&&(a[l].lineWidth=4),t.series.push(a[l])}this.chart=E.chart("chart_container",t)}},{key:"drawMonthlyChart",value:function(e){var t={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Activations"}},series:[],title:{text:"Activations Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Activations"},currentMin:0}},a=[],i=e.profiles;i.push({id:null,name:null});for(var n=e.data,o=i.length,r=[],l=0;l<o;l++){for(var s=[],c=1;c<13;c++){r=[c,0];for(var u=0;u<n.length;u++)n[u].profile_id==i[l].id&&n[u].month==c&&(r=[c,parseInt(n[u].total)]);s.push(r)}a[l]={name:i[l].name?i[l].name:"Total",type:"spline",data:s,pointInterval:1,color:this.getRandomColor()},"Total"==a[l].name&&(a[l].lineWidth=4),t.series.push(a[l])}this.chart=E.chart("chart_container",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-activations-statistics"]],decls:64,vars:22,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["ngbRadioGroup","","name","type",1,"btn-group","btn-group-toggle"],["ngbButtonLabel","",1,"btn-primary","btn-navbar"],["ngbButton","","type","radio",2,"display","none",3,"value","ngModel","ngModelChange","change"],["name","month",1,"form-control","filter-select",3,"ngModel","hidden","ngModelChange","change"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],[1,"form-control",3,"ngModel","ngModelChange","change"],["value","true"],["value","false"],["value","any"],["value","credit"],["value","user_credit"],["value","reward_points"],["value","voucher"],["value","card_user"],[1,"card"],[1,"card-body"],["id","chart_container"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"label",3),c.TgZ(4,"input",4),c.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),c.qZA(),c._uU(5),c.qZA(),c.TgZ(6,"label",3),c.TgZ(7,"input",4),c.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),c.qZA(),c._uU(8),c.qZA(),c.qZA(),c._uU(9," \xa0 "),c.TgZ(10,"select",5),c.NdJ("ngModelChange",function(e){return t.filter.month=e})("change",function(){return t.load()}),c.TgZ(11,"option",6),c._uU(12,"Jan"),c.qZA(),c.TgZ(13,"option",7),c._uU(14,"Feb"),c.qZA(),c.TgZ(15,"option",8),c._uU(16,"Mar"),c.qZA(),c.TgZ(17,"option",9),c._uU(18,"Apr"),c.qZA(),c.TgZ(19,"option",10),c._uU(20,"May"),c.qZA(),c.TgZ(21,"option",11),c._uU(22,"Jun"),c.qZA(),c.TgZ(23,"option",12),c._uU(24,"Jul"),c.qZA(),c.TgZ(25,"option",13),c._uU(26,"Aug"),c.qZA(),c.TgZ(27,"option",14),c._uU(28,"Spt"),c.qZA(),c.TgZ(29,"option",15),c._uU(30,"Oct"),c.qZA(),c.TgZ(31,"option",16),c._uU(32,"Nov"),c.qZA(),c.TgZ(33,"option",17),c._uU(34,"Dec"),c.qZA(),c.qZA(),c._uU(35," \xa0 "),c.TgZ(36,"select",18),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),c.YNc(37,jd,2,2,"option",19),c.qZA(),c.TgZ(38,"div",20),c.TgZ(39,"div",21),c.TgZ(40,"p-dropdown",22),c.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"select",23),c.NdJ("ngModelChange",function(e){return t.filter.sub_managers=e})("change",function(){return t.load()}),c.TgZ(42,"option",24),c._uU(43,"Count sub-managers"),c.qZA(),c.TgZ(44,"option",25),c._uU(45,"Don't count sub-managers"),c.qZA(),c.qZA(),c.TgZ(46,"select",23),c.NdJ("ngModelChange",function(e){return t.filter.activation_method=e})("change",function(){return t.load()}),c.TgZ(47,"option",26),c._uU(48),c.qZA(),c.TgZ(49,"option",27),c._uU(50),c.qZA(),c.TgZ(51,"option",28),c._uU(52),c.qZA(),c.TgZ(53,"option",29),c._uU(54),c.qZA(),c.TgZ(55,"option",30),c._uU(56),c.qZA(),c.TgZ(57,"option",31),c._uU(58,"Prepaid User"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(59,"br"),c.TgZ(60,"div",32),c.TgZ(61,"div",33),c.TgZ(62,"div",34),c._uU(63," Chart is loading... "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("value","daily")("ngModel",t.filter.type),c.xp6(1),c.hij("",t.tr.translate("global_filter_daily")," "),c.xp6(2),c.Q6J("value","monthly")("ngModel",t.filter.type),c.xp6(1),c.hij("",t.tr.translate("global_filter_monthly")," "),c.xp6(2),c.Q6J("ngModel",t.filter.month)("hidden","monthly"==t.filter.type),c.xp6(26),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.year_list),c.xp6(3),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),c.xp6(1),c.Q6J("ngModel",t.filter.sub_managers),c.xp6(5),c.Q6J("ngModel",t.filter.activation_method),c.xp6(2),c.Oqu(t.tr.translate("global_all")),c.xp6(2),c.Oqu(t.tr.translate("user_activate_option_manager_balance")),c.xp6(2),c.Oqu(t.tr.translate("user_activate_option_user_balance")),c.xp6(2),c.Oqu(t.tr.translate("user_activate_option_reward_points")),c.xp6(2),c.Oqu(t.tr.translate("user_activate_option_user_card")))},directives:[Y.M2,Y.py,Y.mL,A._,A.Fj,Y.aB,A.JJ,A.On,A.EJ,A.YN,A.Kr,Q.sg,ya.Lt],styles:[".btn-navbar[_ngcontent-%COMP%]{width:100px}.filter-select[_ngcontent-%COMP%]{width:100px}"]}),e}(),Gd=function(){function e(t,a,i){o(this,e),this.api=t,this.toastr=a,this.tr=i,this.search={type:"serial",keyword:""},this.card_data={}}return l(e,[{key:"ngOnInit",value:function(){}},{key:"getCardInfo",value:function(){var e=this;this.blockUI.start(),this.card_data={},this.api.post("cards/search",this.search).subscribe(function(t){e.blockUI.stop(),-1==t.status?e.toastr.warning(e.tr.translate(t.message)):e.card_data=t.data})}}]),e}();function Wd(e,t){if(1&e&&(c.TgZ(0,"option",15),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a),c.xp6(1),c.Oqu(a)}}function $d(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().detailed_profits_report_visible=!0}),c._UZ(1,"i",17),c._uU(2," Download Detailed Report"),c.qZA()}}Gd.\u0275fac=function(e){return new(e||Gd)(c.Y36(Z),c.Y36(v._W),c.Y36(I))},Gd.\u0275cmp=c.Xpm({type:Gd,selectors:[["app-card-verification"]],decls:69,vars:14,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-search"],[1,"card-body"],[1,"row"],[1,"col","col-md-8","col-sm-12","col-lg-6"],[1,"input-group","input-group-sm"],[1,"form-control",3,"ngModel","ngModelChange"],["value","serial"],["value","pin"],["value","username"],["type","text","placeholder","search for...",1,"form-control",3,"ngModel","ngModelChange","keydown.enger"],[1,"input-group-append"],[1,"input-group-text",3,"click"],[1,"col-md-6","form-group"],["for","card_pin"],["type","text","id","card_pin","disabled","","name","card_pin",1,"form-control",3,"ngModel"],["type","text","id","card_username","disabled","","name","card_username",1,"form-control",3,"ngModel"],["type","text","id","card_profile","disabled","","name","card_profile",1,"form-control",3,"ngModel"],["for","card_serial"],["type","text","id","card_serial","disabled","","name","card_serial",1,"form-control",3,"ngModel"],["for","card_value"],["type","text","id","card_value","disabled","","name","card_value",1,"form-control",3,"ngModel"],["for","card_owner"],["type","text","id","card_owner","disabled","","name","card_owner",1,"form-control",3,"ngModel"],["type","text","id","card_type","disabled","","name","card_type",1,"form-control",3,"ngModel"],["for","card_series"],["type","text","id","card_series","disabled","","name","card_series",1,"form-control",3,"ngModel"],["for","card_expiration"],["type","text","id","card_expiration","disabled","","name","card_expiration",1,"form-control",3,"ngModel"],["for","card_status"],["type","text","id","card_status","disabled","","name","card_status",1,"form-control",3,"ngModel"],["for","card_used_at"],["type","text","id","card_used_at","disabled","","name","card_used_at",1,"form-control",3,"ngModel"],["for","card_user"],["type","text","id","card_user","disabled","","name","card_used_by",1,"form-control",3,"ngModel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Card Verification "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"select",7),c.NdJ("ngModelChange",function(e){return t.search.type=e}),c.TgZ(9,"option",8),c._uU(10,"Serial Number"),c.qZA(),c.TgZ(11,"option",9),c._uU(12,"PIN"),c.qZA(),c.TgZ(13,"option",10),c._uU(14,"Username"),c.qZA(),c.qZA(),c.TgZ(15,"input",11),c.NdJ("ngModelChange",function(e){return t.search.keyword=e})("keydown.enger",function(){return t.getCardInfo()}),c.qZA(),c.TgZ(16,"div",12),c.TgZ(17,"div",13),c.NdJ("click",function(){return t.getCardInfo()}),c._UZ(18,"i",2),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(19,"hr"),c.TgZ(20,"div",4),c.TgZ(21,"div",14),c.TgZ(22,"label",15),c._uU(23,"PIN"),c.qZA(),c._UZ(24,"input",16),c.qZA(),c.TgZ(25,"div",14),c.TgZ(26,"label",15),c._uU(27,"Username"),c.qZA(),c._UZ(28,"input",17),c.qZA(),c.TgZ(29,"div",14),c.TgZ(30,"label",15),c._uU(31,"Profile"),c.qZA(),c._UZ(32,"input",18),c.qZA(),c.TgZ(33,"div",14),c.TgZ(34,"label",19),c._uU(35,"Serial Number"),c.qZA(),c._UZ(36,"input",20),c.qZA(),c.TgZ(37,"div",14),c.TgZ(38,"label",21),c._uU(39,"Value"),c.qZA(),c._UZ(40,"input",22),c.qZA(),c.TgZ(41,"div",14),c.TgZ(42,"label",23),c._uU(43,"Owner"),c.qZA(),c._UZ(44,"input",24),c.qZA(),c.TgZ(45,"div",14),c.TgZ(46,"label",23),c._uU(47,"Type"),c.qZA(),c._UZ(48,"input",25),c.qZA(),c.TgZ(49,"div",14),c.TgZ(50,"label",26),c._uU(51,"Series"),c.qZA(),c._UZ(52,"input",27),c.qZA(),c.TgZ(53,"div",14),c.TgZ(54,"label",28),c._uU(55,"Expiration"),c.qZA(),c._UZ(56,"input",29),c.qZA(),c.TgZ(57,"div",14),c.TgZ(58,"label",30),c._uU(59,"Status"),c.qZA(),c._UZ(60,"input",31),c.qZA(),c.TgZ(61,"div",14),c.TgZ(62,"label",32),c._uU(63,"Used At"),c.qZA(),c._UZ(64,"input",33),c.qZA(),c.TgZ(65,"div",14),c.TgZ(66,"label",34),c._uU(67,"Used By"),c.qZA(),c._UZ(68,"input",35),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngModel",t.search.type),c.xp6(7),c.Q6J("ngModel",t.search.keyword),c.xp6(9),c.Q6J("ngModel",t.card_data.pin),c.xp6(4),c.Q6J("ngModel",t.card_data.username),c.xp6(4),c.Q6J("ngModel",t.card_data.profile),c.xp6(4),c.Q6J("ngModel",t.card_data.serial),c.xp6(4),c.Q6J("ngModel",t.card_data.value),c.xp6(4),c.Q6J("ngModel",t.card_data.owner),c.xp6(4),c.Q6J("ngModel",t.card_data.type),c.xp6(4),c.Q6J("ngModel",t.card_data.series),c.xp6(4),c.Q6J("ngModel",t.card_data.expiration),c.xp6(4),c.Q6J("ngModel",t.card_data.status),c.xp6(4),c.Q6J("ngModel",t.card_data.used_at),c.xp6(4),c.Q6J("ngModel",t.card_data.used_by))},directives:[A.EJ,A.JJ,A.On,A.YN,A.Kr,A.Fj],styles:[""]}),(0,g.gn)([(0,m.bH)()],Gd.prototype,"blockUI",void 0);var Xd=function(){return{width:"450px"}},ef=function(){function e(t,a,i,n){o(this,e),this.auth=t,this.api=a,this.tr=i,this.config=n,this.year_list=[],this.date=new Date,this.filter={manager_id:this.auth.client.id,year:this.date.getFullYear()},this.managers_list=[]}return l(e,[{key:"ngOnInit",value:function(){this.detailed_profits_report_visible=!1;for(var e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[],e.managers_list.unshift({value:-1,label:e.tr.translate("global_filter_all_managers")});var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}}),this.load()}},{key:"load",value:function(){var e=this;this.api.post("report/profits",this.filter).subscribe(function(t){200==t.status&&e.drawChart(t.data.commissions,t.data.activations)})}},{key:"drawChart",value:function(e,t){var a=Object.assign(this.config).siteConfig.site_currency,i={options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" Income"}},series:[],title:{text:this.tr.translate("report_profits_title")},xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Activations"},currentMin:0,labels:{formatter:(function(e){return this.config.siteConfig.site_currency+" "+e.value}).bind(this)}},tooltip:{formatter:function(){return a+" "+this.y}}},n={name:"Profits from Commissions",type:"spline",data:this.getCommissionsSeries(e),pointInterval:1,color:"#baa0f7"},o={name:"Profits from Activations",type:"spline",data:this.getActivationsSeries(t),pointInterval:1,color:"#abf76a"},r={name:"Total Profits",type:"spline",data:this.getTotalSeries(t,e),pointInterval:1,color:"#f7281e"};i.series.push(n),i.series.push(o),i.series.push(r),this.chart=E.chart("chart_container",i)}},{key:"getCommissionsSeries",value:function(e){for(var t=[],a=[],i=1;i<13;i++){a=[i,0];for(var n=0;n<e.length;n++)e[n].month==i&&e[n].total&&(a=[i,parseInt(e[n].total)]);t.push(a)}return t}},{key:"getActivationsSeries",value:function(e){for(var t=[],a=[],i=1;i<13;i++){a=[i,0];for(var n=0;n<e.length;n++)e[n].month==i&&e[n].total&&(a=[i,parseInt(e[n].total)]);t.push(a)}return t}},{key:"getTotalSeries",value:function(e,t){for(var a=this.getCommissionsSeries(e),i=this.getActivationsSeries(t),n=[],o=0;o<12;o++)n.push([o+1,a[o][1]+i[o][1]]);return n}},{key:"downloadReport",value:function(){var e=this;this.blockUI.start(),this.api.post("report/detailedProfitsReport",{date:this.detailedReportFilter}).subscribe(function(t){200===t.status&&(e.blockUI.stop(),e.api.downloadFile("storage/tmp/"+t.data,"sas4_profits_report.xlsx"))})}}]),e}();ef.\u0275fac=function(e){return new(e||ef)(c.Y36(w),c.Y36(Z),c.Y36(I),c.Y36(p))},ef.\u0275cmp=c.Xpm({type:ef,selectors:[["app-profits-report"]],decls:23,vars:18,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-control btn btn-default bg-white",3,"click",4,"ngIf"],[1,"card"],[1,"card-body"],["id","chart_container"],["header","Detailed Profits Report",3,"visible","modal","draggable","visibleChange"],["detailedReportDialog",""],["view","month","dateFormat","mm/yy","appendTo","body","yearRange","2020:2035",3,"ngModel","showIcon","yearNavigator","ngModelChange"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"form-control","btn","btn-default","bg-white",3,"click"],[1,"fa","fa-file-excel"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"p-dropdown",4),c.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"select",5),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),c.YNc(6,Wd,2,2,"option",6),c.qZA(),c.YNc(7,$d,3,0,"button",7),c.qZA(),c.qZA(),c._UZ(8,"br"),c.TgZ(9,"div",8),c.TgZ(10,"div",9),c.TgZ(11,"div",10),c._uU(12," Chart is loading... "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"p-dialog",11,12),c.NdJ("visibleChange",function(e){return t.detailed_profits_report_visible=e}),c.TgZ(15,"h6"),c._uU(16,"Select Date (Month/Year)"),c.qZA(),c.TgZ(17,"p-calendar",13),c.NdJ("ngModelChange",function(e){return t.detailedReportFilter=e}),c.qZA(),c.TgZ(18,"p"),c._uU(19," This will generate a detailed profits report made by each manager and profile. "),c.qZA(),c.TgZ(20,"p-footer"),c.TgZ(21,"button",14),c.NdJ("click",function(){return t.downloadReport()}),c._uU(22,"Download"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),c.xp6(1),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.year_list),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_index_all")),c.xp6(6),c.Akn(c.DdM(17,Xd)),c.Q6J("visible",t.detailed_profits_report_visible)("modal",!0)("draggable",!0),c.xp6(4),c.Q6J("ngModel",t.detailedReportFilter)("showIcon",!0)("yearNavigator",!0),c.xp6(4),c.Q6J("disabled",!t.detailedReportFilter))},directives:[Y.M2,ya.Lt,A.JJ,A.On,A.EJ,Q.sg,Q.O5,Oi.V,Ha.f,Ci.$_,A.YN,A.Kr],styles:[".form-inline[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-left:10px}"]}),(0,g.gn)([(0,m.bH)()],ef.prototype,"blockUI",void 0);var tf=["dataForm"];function af(e,t){if(1&e&&c._UZ(0,"dynamic-form",19,20),2&e){var a=c.oxw();c.Q6J("formConfig",a.form_config)("options",a.options)}}function nf(e,t){if(1&e&&(c.TgZ(0,"option",21),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function of(e,t){if(1&e&&(c.TgZ(0,"div",7),c._UZ(1,"label",8),c.TgZ(2,"div",14),c._uU(3),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(3),c.hij(" ",a.selected_profile.description," ")}}var rf=function(){function e(t,a,i,n,r,l,s,c,u){o(this,e),this.tr=t,this.api=a,this.formLoader=i,this.route=n,this.config=r,this.toastr=l,this.ch=s,this.router=c,this.auth=u,this.form_config={layout:"horizontal",fields:this.formLoader.getForm("user_extension_form"),helpBlock:"hidden",showDiscardButton:!1,showSubmitButton:!1},this.options=[],this.user_id=null,this.user_data={},this.profile_list=[],this.selected_profile_id=-1,this.selected_profile={},this.transaction_id=null,this.expiration_unit=[this.tr.translate("expiration_unit_day"),this.tr.translate("expiration_unit_month"),this.tr.translate("expiration_unit_hour")]}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.options.method=[],this.auth.has("prm_users_reward_points")&&this.options.method.push({value:"reward_points",label:this.tr.translate("user_activate_option_reward_points")}),this.auth.has("prm_users_activate_credit")&&this.options.method.push({value:"credit",label:this.tr.translate("user_activate_option_manager_balance")}),this.auth.has("prm_users_activate_user_balance")&&this.options.method.push({value:"user_balance",label:this.tr.translate("user_activate_option_user_balance")}),this.transaction_id=this.ch.guid(),this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.api.get("user/extensionData/"+e.user_id).subscribe(function(t){e.user_data=t.data,null==e.user_data.remaining_rxtx&&(e.user_data.remaining_rxtx="N/A"),e.options.method.length>1&&(e.user_data.method="reward_points"),e.formView.setFormValue(e.user_data),e.auth.has("prm_users_reward_points")&&e.formView.showField("reward_points_balance"),e.loadExtensionsList(e.user_data.profile_id)}))})}},{key:"loadExtensionsList",value:function(e){var t=this;this.api.get("allowedExtensions/"+e).subscribe(function(e){200===e.status&&(t.profile_list=e.data)})}},{key:"onProfileSelected",value:function(){var e=this;this.api.get("profile/"+this.selected_profile_id).subscribe(function(t){200===t.status&&(e.selected_profile=t.data,e.selected_profile.cost=parseFloat(e.selected_profile.price)+parseFloat(e.selected_profile.price)*parseFloat(e.selected_profile.vat))})}},{key:"extend",value:function(){var e=this;this.api.post("user/extend",{user_id:this.user_id,profile_id:this.selected_profile_id,method:this.formView.form.value.method,transaction_id:this.transaction_id}).subscribe(function(t){200===(null==t?void 0:t.status)?(e.toastr.success(e.tr.translate(t.message)),e.router.navigate(["user",e.user_id])):(e.transaction_id=e.ch.guid(),e.toastr.error(e.tr.translate(null==t?void 0:t.message)))})}}]),e}();rf.\u0275fac=function(e){return new(e||rf)(c.Y36(I),c.Y36(Z),c.Y36(ki),c.Y36(_.gz),c.Y36(p),c.Y36(v._W),c.Y36(y),c.Y36(_.F0),c.Y36(w))},rf.\u0275cmp=c.Xpm({type:rf,selectors:[["app-service-extension"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(tf,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:50,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","dataForm",3,"formConfig","options",4,"ngIf"],[1,"form-group","row"],[1,"col-form-label","text-right"],[1,"col"],["name","selected_profile_id",1,"form-control",3,"ngModel","change","ngModelChange"],["disabled","","value","-1"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row",4,"ngIf"],[1,"col","form-control-plaintext"],[1,"form-group","row",3,"hidden"],[1,"col","form-control-plaintext",3,"hidden"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"disabled","click"],["name","dataForm",3,"formConfig","options"],["dataForm",""],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,af,2,2,"dynamic-form",6),c.qZA(),c.TgZ(8,"div",5),c.TgZ(9,"div",7),c._UZ(10,"label",8),c.TgZ(11,"div",9),c.TgZ(12,"select",10),c.NdJ("change",function(){return t.onProfileSelected()})("ngModelChange",function(e){return t.selected_profile_id=e}),c.TgZ(13,"option",11),c._uU(14),c.qZA(),c.YNc(15,nf,2,2,"option",12),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,of,4,1,"div",13),c.TgZ(17,"div",7),c._UZ(18,"label",8),c.TgZ(19,"div",14),c._uU(20),c.ALo(21,"currency"),c.qZA(),c.qZA(),c.TgZ(22,"div",15),c._UZ(23,"label",8),c.TgZ(24,"div",14),c._uU(25),c.qZA(),c.qZA(),c.TgZ(26,"div",7),c._UZ(27,"label",8),c.TgZ(28,"div",16),c._uU(29),c.qZA(),c.qZA(),c.TgZ(30,"div",7),c._UZ(31,"label",8),c.TgZ(32,"div",16),c._uU(33),c.qZA(),c.qZA(),c.TgZ(34,"div",7),c._UZ(35,"label",8),c.TgZ(36,"div",16),c._uU(37),c.qZA(),c.qZA(),c.TgZ(38,"div",7),c._UZ(39,"label",8),c.TgZ(40,"div",16),c._uU(41),c.qZA(),c.qZA(),c.TgZ(42,"div",7),c._UZ(43,"label",8),c.TgZ(44,"div",16),c._uU(45),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(46,"hr"),c.TgZ(47,"div",17),c.TgZ(48,"button",18),c.NdJ("click",function(){return t.extend()}),c._uU(49),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.hij(" ",t.tr.translate("user_extend_form_title")," "),c.xp6(4),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(5),c.Q6J("ngModel",t.selected_profile_id),c.xp6(2),c.Oqu(t.tr.translate("user_extend_form_select_extension")),c.xp6(1),c.Q6J("ngForOf",t.profile_list),c.xp6(1),c.Q6J("ngIf",(null==t.selected_profile||null==t.selected_profile.description?null:t.selected_profile.description.length)>4),c.xp6(4),c.hij(" ",c.xi3(21,23,t.selected_profile.cost,t.config.siteConfig.site_currency+" ")," "),c.xp6(2),c.Q6J("hidden",!t.selected_profile.reward_points_required||t.selected_profile.reward_points_required<=0),c.xp6(3),c.hij(" Requires ",t.selected_profile.reward_points_required," points "),c.xp6(3),c.Q6J("hidden",!t.selected_profile.expiration_amount||t.selected_profile.expiration_amount<1),c.xp6(1),c.AsE(" + ",t.selected_profile.expiration_amount," ",t.expiration_unit[t.selected_profile.expiration_unit]," "),c.xp6(3),c.Q6J("hidden",!t.selected_profile.traffic_amount||t.selected_profile.traffic_amount<1),c.xp6(1),c.hij(" + ",t.selected_profile.traffic_amount," MB "),c.xp6(3),c.Q6J("hidden",!t.selected_profile.download_amount||t.selected_profile.download_amount<1),c.xp6(1),c.hij(" + ",t.selected_profile.download_amount," MB Download Traffic "),c.xp6(3),c.Q6J("hidden",!t.selected_profile.upload_amount||t.selected_profile.upload_amount<1),c.xp6(1),c.hij(" + ",t.selected_profile.upload_amount," MB Upload Traffic "),c.xp6(3),c.Q6J("hidden",!t.selected_profile.uptime_amount||t.selected_profile.uptime_amount<1),c.xp6(1),c.AsE(" + ",t.selected_profile.uptime_amount," ",0==t.selected_profile.uptime_unit?"minute(s)":"hour(s)"," "),c.xp6(3),c.Q6J("disabled",t.selected_profile_id<=0),c.xp6(1),c.Oqu(t.tr.translate("users_action_extend")))},directives:[Q.O5,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,qi],pipes:[Q.H9],styles:[""]}),(0,g.gn)([(0,m.bH)()],rf.prototype,"blockUI",void 0);var lf=["myForm"];function sf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)})("formChanged",function(e){return c.CHM(a),c.oxw().onFormChanged(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var cf=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.profiles=[],this.managers_list=[],this.options={}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.formFields=this.formsLoader.getForm("settings_ucp"),this.form_config.fields=this.formFields,this.api.get("list/profile/0").subscribe(function(t){t.data.map(function(t){e.profiles.push({value:t.id,label:t.name})}),e.options.ucp_self_registration_profile=e.profiles}),this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.ucp_self_registration_parent=e.managers_list}),this.load()}},{key:"onFormChanged",value:function(e){1==e.ucp_self_registration&&this.myForm.showField("ucp_self_registration_profile"),0==e.ucp_self_registration&&this.myForm.hideField("ucp_self_registration_profile")}},{key:"load",value:function(){var e=this;this.api.get("settings/ucp_").subscribe(function(t){200==t.status&&(e.myForm.setFormValue(t.data),1==t.data.ucp_self_registration&&e.myForm.showField("ucp_self_registration_profile"),0==t.data.ucp_self_registration&&e.myForm.hideField("ucp_self_registration_profile"))})}},{key:"save",value:function(e){var t=this;this.api.post("settings/ucp",e.value).subscribe(function(e){200==e.status&&t.toastr.success(t.tr.translate(e.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-portal-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(lf,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit","formChanged",4,"ngIf"],["name","myForm",3,"formConfig","options","submit","formChanged"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," User Portal Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,sf,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),e}(),uf=["myForm"];function df(e,t){1&e&&(c.TgZ(0,"div",14),c.TgZ(1,"h2"),c._uU(2,"[ Select Payment Gateway ]"),c.qZA(),c.qZA())}var ff=function(e){return{active:e}},pf=function(e,t){return{"gw-enabled":e,"gw-disabled":t}};function gf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"a",15),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().onPaymentGatewaySelected(e.id)}),c.TgZ(1,"div",16),c.TgZ(2,"h5",17),c._uU(3),c.qZA(),c.TgZ(4,"small"),c._uU(5),c.qZA(),c.qZA(),c.TgZ(6,"small",18),c._uU(7),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.Q6J("ngClass",c.VKq(5,ff,i.id==n.gateway_data.id)),c.xp6(3),c.Oqu(i.name),c.xp6(2),c.Oqu(i.country),c.xp6(1),c.Q6J("ngClass",c.WLB(7,pf,1==i.enabled,0==i.enabled)),c.xp6(1),c.Oqu(1==i.enabled?"enabled":"disabled")}}var hf=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.payment_gateways=[],this.gateway_data={},this.managers_list=[],this.options={account_manager:[]}}return l(e,[{key:"ngOnInit",value:function(){this.loadPaymentGateways(),this.loadResources()}},{key:"onPaymentGatewaySelected",value:function(e){var t=this;this.blockUI.start(),this.api.get("paymentgateway/"+e).subscribe(function(e){t.blockUI.stop(),200===e.status&&(t.gateway_data=e.data,t.gateway_data.form=JSON.parse(e.data.settings),t.formFields=t.formsLoader.getForm(t.gateway_data.form_name),t.form_config.fields=t.formFields,t.myForm.setFormValue(t.gateway_data.form))})}},{key:"loadPaymentGateways",value:function(){var e=this;this.api.get("paymentgateways/list").subscribe(function(t){200===t.status&&(e.payment_gateways=t.data)})}},{key:"onSave",value:function(e){var t=this;this.api.post("paymentgateway/"+this.gateway_data.id,e.value).subscribe(function(e){200===e.status&&(t.toastr.success(t.tr.translate(e.message)),t.loadPaymentGateways())})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}e.options.account_manager=e.managers_list})}}]),e}();function mf(e,t){if(1&e&&(c.TgZ(0,"label",18),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.hij(" ",a.tr.translate("self_deposit_no_payment_method")," ")}}function _f(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}function vf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"label",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c.TgZ(4,"div",8),c.TgZ(5,"input",20),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().deposit_form.amount=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.AsE("",i.tr.translate("self_deposit_amount")," (",i.config.siteConfig.site_currency,")"),c.xp6(3),c.Q6J("ngModel",i.deposit_form.amount)}}function bf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"label",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c.TgZ(4,"div",8),c.TgZ(5,"input",21),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().deposit_form.pin=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.tr.translate("self_deposit_kushok_voucher")),c.xp6(3),c.Q6J("ngModel",i.deposit_form.pin)("autofocus",!0)}}function Zf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"label",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c.TgZ(4,"div",8),c.TgZ(5,"input",22),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().deposit_form.name=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.tr.translate("global_name")),c.xp6(3),c.Q6J("ngModel",i.deposit_form.name)}}function yf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"label",6),c._uU(2),c.qZA(),c.TgZ(3,"div",7),c.TgZ(4,"div",8),c.TgZ(5,"input",22),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().deposit_form.phone=e}),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Oqu(i.tr.translate("global_phone")),c.xp6(3),c.Q6J("ngModel",i.deposit_form.phone)}}hf.\u0275fac=function(e){return new(e||hf)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},hf.\u0275cmp=c.Xpm({type:hf,selectors:[["app-payment-gateways-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(uf,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:19,vars:6,consts:[[1,"row"],[1,"col-md-9","col-sm-12","order-md-1","order-sm-2"],[1,"card",2,"min-height","500px"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"col"],["class","form-placeholder",4,"ngIf"],[3,"hidden"],["name","myForm",3,"formConfig","options","submit"],["myForm",""],[1,"col-md-3","col-sm-12","order-md-2","order-sm-1"],[1,"list-group"],["href","javascript:void(0)","class","list-group-item list-group-item-action flex-column align-items-start","style","cursor: pointer",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"form-placeholder"],["href","javascript:void(0)",1,"list-group-item","list-group-item-action","flex-column","align-items-start",2,"cursor","pointer",3,"ngClass","click"],[1,"d-flex","w-100","justify-content-between"],[1,"mb-1"],[3,"ngClass"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._UZ(4,"i",4),c._uU(5," Payment Gateways Settings "),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",0),c.TgZ(8,"div",6),c.YNc(9,df,3,0,"div",7),c.TgZ(10,"div",8),c.TgZ(11,"h3"),c._uU(12),c.qZA(),c._UZ(13,"hr"),c.TgZ(14,"dynamic-form",9,10),c.NdJ("submit",function(e){return t.onSave(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",11),c.TgZ(17,"div",12),c.YNc(18,gf,8,10,"a",13),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(9),c.Q6J("ngIf",!t.gateway_data.id),c.xp6(1),c.Q6J("hidden",!(null!=t.form_config&&t.form_config.fields)||(null==t.form_config.fields?null:t.form_config.fields.length)<1),c.xp6(2),c.Oqu(t.gateway_data.name),c.xp6(2),c.Q6J("formConfig",t.form_config)("options",t.options),c.xp6(4),c.Q6J("ngForOf",t.payment_gateways))},directives:[Q.O5,qi,Q.sg,Q.mk],styles:[".form-placeholder[_ngcontent-%COMP%]{width:100%;margin-left:auto;margin-right:auto;color:#c3c3c3;text-align:center;margin-top:25%}.gw-enabled[_ngcontent-%COMP%]{color:green}.gw-disabled[_ngcontent-%COMP%]{color:#cc5050}.card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],hf.prototype,"blockUI",void 0);var wf=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.tr=a,this.config=i,this.toastr=n,this.router=r,this.deposit_form={amount:null,method:-1,method_name:"",pin:""},this.payment_gateways=[]}return l(e,[{key:"ngOnInit",value:function(){this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.blockUI.start(),this.api.get("paymentgateway/list/acp").subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.payment_gateways=t.data,1===t.data.length&&(e.deposit_form.method=t.data[0].id,e.onPaymentMethodChanged()))})}},{key:"requestDeposit",value:function(){var e=this;this.payment_gateways.map(function(t){t.id==e.deposit_form.method&&(e.deposit_form.method_name=t.internal_name)}),this.blockUI.start(),this.api.post("paymentgateway/requestSelfDeposit",this.deposit_form).subscribe(function(t){e.blockUI.stop(),"kushok"===e.deposit_form.method_name&&-2===t.status&&e.toastr.warning("Invalid Kushok Voucher"),"voucher"===e.deposit_form.method_name&&200!==t.status&&e.toastr.warning("Invalid SAS Voucher"),200===t.status&&("zaincash"===e.deposit_form.method_name&&(e.blockUI.start(),window.location.href=t.data),"tasdid"===e.deposit_form.method_name&&e.router.navigate(["message"],{queryParams:{title:"\u062a\u0645 \u0627\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629",message:"\u064a\u0631\u062c\u0649 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0641\u064a \u0627\u0642\u0631\u0628 \u0645\u0646\u0641\u0630 \u062d\u0633\u0628 \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0633\u0644\u0629 \u0641\u064a \u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0646\u0635\u064a\u0629"}}),"kushok"===e.deposit_form.method_name&&(e.toastr.success("Voucher Redeemed Successfully"),e.router.navigate(["kushok/process",t.data])),"voucher"===e.deposit_form.method_name&&(e.toastr.success("Voucher Redeemed Successfully"),e.router.navigate(["dashboard"])),"switch"===e.deposit_form.method_name&&e.payWithSwitch(t))})}},{key:"loadSwitchScript",value:function(e){var t=this,a=document.createElement("script");a.src=e.data.script_url,a.async=!1;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(a,i),a.addEventListener("load",function(){t.payWithSwitch(e)})}},{key:"payWithSwitch",value:function(e){this.blockUI.start("Please wait..."),"undefined"!=typeof Checkout?(Checkout.configure({session:{id:e.data.session_id}}),Checkout.showPaymentPage()):this.loadSwitchScript(e)}},{key:"onPaymentMethodChanged",value:function(){var e=this;this.payment_gateways.map(function(t){parseInt(t.id)===parseInt(e.deposit_form.method)&&(e.deposit_form.method_name=t.internal_name)})}}]),e}();function xf(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",3),c._UZ(2,"i",4),c._UZ(3,"br"),c._uU(4," Waiting for ZainCash "),c.qZA(),c.qZA())}function Af(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",3),c._UZ(2,"i",5),c._UZ(3,"br"),c._uU(4," Your request is being processed. "),c.qZA(),c.qZA())}function qf(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",6),c._UZ(2,"i",5),c._UZ(3,"br"),c._uU(4," Your payment was successful. "),c.qZA(),c.qZA())}function Tf(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",7),c._UZ(2,"i",8),c._UZ(3,"br"),c._uU(4," Payment Failed ! "),c.qZA(),c.qZA())}wf.\u0275fac=function(e){return new(e||wf)(c.Y36(Z),c.Y36(I),c.Y36(p),c.Y36(v._W),c.Y36(_.F0))},wf.\u0275cmp=c.Xpm({type:wf,selectors:[["app-self-deposit"]],decls:26,vars:13,consts:[[1,"card","profile-card"],[1,"card-header"],[1,"fa","fa-credit-card"],[1,"card-body"],[1,"row"],[1,"form-group","col-md-6","col-sm-12"],[1,"form-control-plaintext"],[1,"ui-g","ui-fluid"],[1,"ui-g-12"],["class","form-control-static",4,"ngIf"],["name","amount",1,"form-control",3,"ngModel","hidden","ngModelChange"],["value","-1","disabled",""],[3,"value",4,"ngFor","ngForOf"],["class","form-group col-md-6 col-sm-12",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","btn-primary","fa-pull-right",3,"disabled","click"],[1,"fa","fa-arrow-down"],[1,"btn","btn-secondary","fa-pull-right","ml-1","mr-1",3,"click"],[1,"form-control-static"],[3,"value"],["type","number","autofocus","","name","amount","placeholder","0",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Enter your voucher pin here",1,"form-control",3,"ngModel","autofocus","ngModelChange"],["type","text",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Self Deposit "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"label",6),c._uU(8),c.qZA(),c.TgZ(9,"div",7),c.TgZ(10,"div",8),c.YNc(11,mf,2,1,"label",9),c.TgZ(12,"select",10),c.NdJ("ngModelChange",function(e){return t.deposit_form.method=e})("ngModelChange",function(){return t.onPaymentMethodChanged()}),c.TgZ(13,"option",11),c._uU(14),c.qZA(),c.YNc(15,_f,2,2,"option",12),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(16,vf,6,3,"div",13),c.YNc(17,bf,6,3,"div",13),c.YNc(18,Zf,6,2,"div",13),c.YNc(19,yf,6,2,"div",13),c.qZA(),c.qZA(),c.TgZ(20,"div",14),c.TgZ(21,"button",15),c.NdJ("click",function(){return t.requestDeposit()}),c._UZ(22,"i",16),c._uU(23),c.qZA(),c.TgZ(24,"button",17),c.NdJ("click",function(){return t.deposit_form.method=-1,t.deposit_form.method_name=null}),c._uU(25),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(8),c.Oqu(t.tr.translate("self_deposit_method")),c.xp6(3),c.Q6J("ngIf",0==t.payment_gateways.length),c.xp6(1),c.Q6J("ngModel",t.deposit_form.method)("hidden",t.payment_gateways.length<1),c.xp6(2),c.Oqu(t.tr.translate("self_deposit_select_method")),c.xp6(1),c.Q6J("ngForOf",t.payment_gateways),c.xp6(1),c.Q6J("ngIf",t.deposit_form.method>0&&"kushok"!==t.deposit_form.method_name&&"voucher"!==t.deposit_form.method_name),c.xp6(1),c.Q6J("ngIf","kushok"===t.deposit_form.method_name||"voucher"===t.deposit_form.method_name),c.xp6(1),c.Q6J("ngIf","tasdid"===t.deposit_form.method_name),c.xp6(1),c.Q6J("ngIf","tasdid"===t.deposit_form.method_name),c.xp6(2),c.Q6J("disabled",t.deposit_form.method<0),c.xp6(2),c.hij(" ",t.tr.translate("self_deposit_deposit_button"),""),c.xp6(2),c.hij("\xa0",t.tr.translate("global_button_cancel"),"\xa0"))},directives:[Q.O5,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,A.wV,A.Fj],styles:[""]}),(0,g.gn)([(0,m.bH)()],wf.prototype,"blockUI",void 0);var kf=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.route=a,this.paymentStatus="pending"}return l(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.queryParamMap.get("token");"1"==this.route.snapshot.queryParamMap.get("waiting_webhook")?this.paymentStatus="waiting_webhook":this.processToken(e)}},{key:"ngOnChanges",value:function(){}},{key:"processToken",value:function(e){var t=this;this.api.post("paymentgateway/process/zaincash",{gateway:"zaincash",token:e}).subscribe(function(e){t.paymentStatus=200===e.status?"success":"failure"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-zain-cash"]],features:[c.TTD],decls:6,vars:4,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"fa","fa-3x","fa-check-circle"],[1,"payment-success"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,xf,5,0,"div",2),c.YNc(3,Af,5,0,"div",2),c.YNc(4,qf,5,0,"div",2),c.YNc(5,Tf,5,0,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf","pending"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","waiting_webhook"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","success"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","failure"==t.paymentStatus))},directives:[Q.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e}();function Cf(e,t){1&e&&c._UZ(0,"i",14)}function Uf(e,t){1&e&&c._UZ(0,"i",15)}function Mf(e,t){1&e&&c._UZ(0,"i",16)}function Ff(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c.YNc(2,Cf,1,0,"i",11),c.YNc(3,Uf,1,0,"i",12),c.YNc(4,Mf,1,0,"i",13),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.qZA()),2&e){var a=t.$implicit,i=c.oxw();c.xp6(2),c.Q6J("ngIf",i.process_status.current==a.user_id),c.xp6(1),c.Q6J("ngIf",i.process_status.users_activated.indexOf(a.user_id)>=0),c.xp6(1),c.Q6J("ngIf",i.process_status.users_failed.indexOf(a.user_id)>=0),c.xp6(2),c.Oqu(a.username),c.xp6(2),c.Oqu(a.user_expiration),c.xp6(2),c.Oqu(a.profile_name),c.xp6(2),c.Oqu(a.required_amount)}}function Jf(e,t){if(1&e&&(c.TgZ(0,"b"),c._uU(1),c.ALo(2,"currency"),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Oqu(c.xi3(2,1,a.available_balance,a.config.siteConfig.site_currency+" "))}}function Of(e,t){1&e&&c._UZ(0,"i",17)}function Nf(e,t){if(1&e&&(c.TgZ(0,"h5",20),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.AsE("",a.process_status.users_activated.length," ",a.tr.translate("user_activate_success_activation"),"")}}function If(e,t){if(1&e&&(c.TgZ(0,"h5",21),c._uU(1),c.qZA()),2&e){var a=c.oxw(2);c.xp6(1),c.AsE("",a.process_status.users_failed.length," ",a.tr.translate("user_activate_fail_activation"),"")}}function Yf(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,Nf,2,2,"h5",18),c.YNc(2,If,2,2,"h5",19),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.process_status.users_activated.length>0),c.xp6(1),c.Q6J("ngIf",a.process_status.users_failed.length>0)}}var Qf=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.route=a,this.tr=i,this.config=n,this.auth=r,this.users_processed=0,this.activation_data=[],this.total_price=0,this.available_balance=-1,this.process_status={users_activated:[],users_failed:[],current:null},this.hideActivationButton=!1,this.finished=!1,this.msgs=[]}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){if(t.data){var a=atob(t.data);e.user_ids=JSON.parse(a),e.api.post("user/bulkActivationData",{user_ids:e.user_ids}).subscribe(function(t){200===t.status&&(e.activation_data=t.data,e.total_price=0,e.activation_data.map(function(t){e.total_price=e.total_price+t.n_required_amount}))})}}),this.api.get("auth").subscribe(function(t){200===t.status&&(e.available_balance=t.client.balance)})}},{key:"onActivateAll",value:function(){var e=this;if(0===this.users_processed&&this.blockUI.start(),this.hideActivationButton=!0,this.users_processed<this.activation_data.length){var t=this.activation_data[this.users_processed].user_id.toString();this.api.post("user/activate",{method:"credit",user_id:t,units:1,issue_invoice:!0}).subscribe(function(a){200===a.status?(e.process_status.current=null,e.process_status.users_activated.push(t)):(e.process_status.current=null,e.process_status.users_failed.push(t)),e.users_processed++,e.users_processed>=e.activation_data.length?(e.blockUI.stop(),e.finished=!0):e.onActivateAll()})}}}]),e}();function Sf(e,t){1&e&&(c.TgZ(0,"div",12),c._UZ(1,"i",13),c._uU(2," \xa0\xa0\xa0You have not authorized your server to use Google Drive. "),c.qZA())}function Pf(e,t){1&e&&(c.TgZ(0,"div",14),c._UZ(1,"i",15),c._uU(2," \xa0\xa0\xa0Your server is already authorized to use Google Drive. "),c.qZA())}function Df(e,t){if(1&e&&(c.TgZ(0,"p",16),c._UZ(1,"br"),c._uU(2," You are using the drive bellow: "),c._UZ(3,"br"),c.TgZ(4,"a",17),c._uU(5),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(4),c.s9C("href",a.authDriveUrl,c.LSH),c.xp6(1),c.Oqu(a.authDriveUrl)}}function Hf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",18),c.TgZ(1,"input",19),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().auth_code=e}),c.qZA(),c._UZ(2,"br"),c.TgZ(3,"button",20),c.NdJ("click",function(){return c.CHM(a),c.oxw().submitCode()}),c._uU(4,"Confirm"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(1),c.Q6J("name","auth_code")("ngModel",i.auth_code),c.xp6(2),c.Q6J("disabled",!i.auth_code||i.auth_code.length<20)}}Qf.\u0275fac=function(e){return new(e||Qf)(c.Y36(Z),c.Y36(_.gz),c.Y36(I),c.Y36(p),c.Y36(w))},Qf.\u0275cmp=c.Xpm({type:Qf,selectors:[["app-bulk-activation"]],decls:50,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],[1,"table"],[4,"ngFor","ngForOf"],[4,"ngIf"],["class","fa fa-sync fa-spin",4,"ngIf"],[1,"btn","btn-primary","w-100",3,"hidden","click"],["class","fa fa-circle-notch fa-spin",4,"ngIf"],["class","fa fa-check-circle text-success",4,"ngIf"],["class","fa fa-exclamation-circle text-danger",4,"ngIf"],[1,"fa","fa-circle-notch","fa-spin"],[1,"fa","fa-check-circle","text-success"],[1,"fa","fa-exclamation-circle","text-danger"],[1,"fa","fa-sync","fa-spin"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-success"],[1,"text-danger"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"table",6),c.TgZ(8,"thead"),c.TgZ(9,"tr"),c._UZ(10,"th"),c.TgZ(11,"th"),c._uU(12),c.qZA(),c.TgZ(13,"th"),c._uU(14),c.qZA(),c.TgZ(15,"th"),c._uU(16),c.qZA(),c.TgZ(17,"th"),c._uU(18),c.qZA(),c.qZA(),c.qZA(),c.YNc(19,Ff,13,7,"tr",7),c.TgZ(20,"tr"),c._UZ(21,"td"),c.TgZ(22,"td"),c.TgZ(23,"b"),c._uU(24),c.qZA(),c.qZA(),c._UZ(25,"td"),c._UZ(26,"td"),c.TgZ(27,"td"),c.TgZ(28,"b"),c._uU(29),c.ALo(30,"currency"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(31,"tr"),c._UZ(32,"td"),c.TgZ(33,"td"),c.TgZ(34,"b"),c._uU(35),c.qZA(),c.qZA(),c._UZ(36,"td"),c._UZ(37,"td"),c.TgZ(38,"td"),c.YNc(39,Jf,3,4,"b",8),c.YNc(40,Of,1,0,"i",9),c.qZA(),c.qZA(),c.TgZ(41,"tr"),c._UZ(42,"td"),c._UZ(43,"td"),c._UZ(44,"td"),c._UZ(45,"td"),c.TgZ(46,"td"),c.TgZ(47,"button",10),c.NdJ("click",function(){return t.onActivateAll()}),c._uU(48,"Activate All"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(49,Yf,3,2,"div",8),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.hij(" ",t.tr.translate("user_activate_form_title")," "),c.xp6(9),c.hij(" ",t.tr.translate("global_username")," "),c.xp6(2),c.hij(" ",t.tr.translate("global_expiration")," "),c.xp6(2),c.hij(" ",t.tr.translate("global_profile")," "),c.xp6(2),c.hij(" ",t.tr.translate("user_activate_required_amount")," "),c.xp6(1),c.Q6J("ngForOf",t.activation_data),c.xp6(5),c.Oqu(t.tr.translate("user_activate_total_required_amount")),c.xp6(5),c.Oqu(c.xi3(30,13,t.total_price,t.config.siteConfig.site_currency+" ")),c.xp6(6),c.Oqu(t.tr.translate("global_available_balance")),c.xp6(4),c.Q6J("ngIf",-1!=t.available_balance),c.xp6(1),c.Q6J("ngIf",-1==t.available_balance),c.xp6(7),c.Q6J("hidden",t.hideActivationButton),c.xp6(2),c.Q6J("ngIf",t.finished))},directives:[Q.sg,Q.O5],pipes:[Q.H9],styles:[""]}),(0,g.gn)([(0,m.bH)()],Qf.prototype,"blockUI",void 0);var Rf=function(){function e(t){o(this,e),this.api=t,this.auth_link="",this.auth_code=null,this.auth_status=!1,this.hide_auth_button=!1,this.authDriveUrl=""}return l(e,[{key:"ngOnInit",value:function(){this.checkStatus()}},{key:"checkStatus",value:function(){var e=this;this.blockUI.start(),this.api.get("googleDrive/status").subscribe(function(t){e.blockUI.stop(),200===t.status?(e.auth_status=!0,e.authDriveUrl=t.data,e.hide_auth_button=!0):e.auth_status=!1})}},{key:"requestAuthorization",value:function(){var e=this;this.auth_link="",this.blockUI.start(),this.api.get("googleDrive/requestAuthorizationLink").subscribe(function(t){e.hide_auth_button=!0,e.blockUI.stop(),200===t.status&&(e.auth_link=t.data,window.open(e.auth_link,"_blank"))})}},{key:"requestDeauthorization",value:function(){var e=this;this.blockUI.start(),this.api.get("googleDrive/deauthorize").subscribe(function(t){e.blockUI.stop(),e.checkStatus()})}},{key:"submitCode",value:function(){var e=this;this.blockUI.start(),this.api.post("googleDrive/authorize",{code:this.auth_code}).subscribe(function(t){e.blockUI.stop(),e.checkStatus()})}}]),e}();Rf.\u0275fac=function(e){return new(e||Rf)(c.Y36(Z))},Rf.\u0275cmp=c.Xpm({type:Rf,selectors:[["app-google-drive-settings"]],decls:16,vars:6,consts:[[1,"card"],[1,"card-header"],[1,"fab","fa-google-drive"],[1,"card-body"],["class","alert alert-warning",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[2,"text-align","center","margin-bottom","20px"],["src","assets/img/gdrive.png","width","128"],[1,"btn","btn-primary",2,"width","200px","margin-top","10px",3,"hidden","click"],[1,"btn","btn-danger",2,"width","200px","margin-top","10px",3,"hidden","click"],["class","text-muted",4,"ngIf"],["style","margin-top: 20px; text-align: center",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation"],[1,"alert","alert-success"],[1,"fa","fa-check-circle"],[1,"text-muted"],["target","_blank",3,"href"],[2,"margin-top","20px","text-align","center"],["type","text","placeholder","Enter your Google Drive secret key",1,"form-control","input-large",2,"font-size","1.3rem",3,"name","ngModel","ngModelChange"],[1,"btn","btn-primary",2,"width","200px",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Google Drive Setup "),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,Sf,3,0,"div",4),c.YNc(6,Pf,3,0,"div",5),c.TgZ(7,"div",6),c._UZ(8,"img",7),c._UZ(9,"br"),c.TgZ(10,"button",8),c.NdJ("click",function(){return t.requestAuthorization()}),c._uU(11,"Authorize Now"),c.qZA(),c.TgZ(12,"button",9),c.NdJ("click",function(){return t.requestDeauthorization()}),c._uU(13,"Deauthorize"),c.qZA(),c.YNc(14,Df,6,2,"p",10),c.qZA(),c.YNc(15,Hf,5,3,"div",11),c.qZA(),c.qZA()),2&e&&(c.xp6(5),c.Q6J("ngIf",!1===t.auth_status),c.xp6(1),c.Q6J("ngIf",!0===t.auth_status),c.xp6(4),c.Q6J("hidden",t.hide_auth_button||!0===t.auth_status),c.xp6(2),c.Q6J("hidden",!1===t.auth_status),c.xp6(2),c.Q6J("ngIf",!0===t.auth_status),c.xp6(1),c.Q6J("ngIf",t.auth_link.length>10&&!1===t.auth_status))},directives:[Q.O5,A.Fj,A.JJ,A.On],styles:[".card[_ngcontent-%COMP%]{direction:ltr!important;text-align:left!important}"]}),(0,g.gn)([(0,m.bH)()],Rf.prototype,"blockUI",void 0);var Vf=["ippool_model_view"];function Lf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var Ef=function(){function e(t,a,i,n,r){o(this,e),this.router=t,this.toastr=a,this.api=i,this.swal=n,this.auth=r,this.columns=[{dataKey:"name",label:"Pool Name",class:"href"},{dataKey:"start_ip",label:"From IP"},{dataKey:"end_ip",label:"To IP"},{dataKey:"lease_time",label:"Lease Time (hours)"}],this.actions=[{name:"new",label:"New",icon:"fa fa-plus"},{name:"",label:"",type:"separator"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,requiresRow:!0}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"IP Pools",icon:"fal fa-cabinet-filing",columns:this.columns,dataUrl:"index/ippool",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"ippool",hasAdvancedFilter:!1,showRowsCount:!0}}},{key:"onAction",value:function(e){switch(e.action){case"new":this.router.navigate(["ippool/"]);break;case"delete":this.destroy()}}},{key:"onCellClicked",value:function(e){"name"===e.column&&this.router.navigate(["ippool",e.row.id])}},{key:"destroy",value:function(){var e=this;this.swal.confirm({title:"Delete IP Pool",type:"warning",text:"Delete Selected IP Pool ?",confirmButtonText:"Yes"}).subscribe(function(){var t=null;e.modelView.currentRow&&(t=e.modelView.currentRow.id),e.blockUI.start("loading..."),e.api.delete("ippool/"+t).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.modelView.reload(),e.toastr.success("IP Pool Deleted","")):e.toastr.warning("Unable to delete ip pool")})})}}]),e}();Ef.\u0275fac=function(e){return new(e||Ef)(c.Y36(_.F0),c.Y36(v._W),c.Y36(Z),c.Y36(tt),c.Y36(w))},Ef.\u0275cmp=c.Xpm({type:Ef,selectors:[["app-ippool-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Vf,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","ippool_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["name","ippool_model_view",3,"modelViewConfig","onAction","onCellClicked"],["ippool_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Lf,2,1,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Ef.prototype,"blockUI",void 0);var Kf=function(){return[]},Bf=function(){var e=function(){function e(t,a,i,n){o(this,e),this.location=t,this.formsLoader=a,this.auth=i,this.api=n}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("ippool_form")}},{key:"onSubmit",value:function(e){this.location.back()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Q.Ye),c.Y36(ki),c.Y36(w),c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-ippool-form"]],decls:1,vars:6,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0),c.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),c.qZA()),2&e&&c.Q6J("fields",t.formFields)("options",c.DdM(5,Kf))("title","IP Pool Form")("icon","fal fa-cabinet-filing")("resourceRoute","ippool")},directives:[Ji],styles:[""]}),e}();function jf(e,t){1&e&&(c.TgZ(0,"div",33),c._UZ(1,"i",34),c._uU(2," Changes successfully applied\n"),c.qZA())}function zf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",8),c._uU(2),c.qZA(),c.TgZ(3,"td",9),c._uU(4),c.qZA(),c.TgZ(5,"td",8),c._uU(6),c.qZA(),c.TgZ(7,"td",19),c.TgZ(8,"button",35),c.NdJ("click",function(){var e=c.CHM(a).$implicit;return c.oxw().removeFilterRow(e.id)}),c._UZ(9,"i",36),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit;c.xp6(2),c.Oqu(i.key),c.xp6(2),c.Oqu(i.op),c.xp6(2),c.Oqu(i.value_label||i.value)}}function Gf(e,t){if(1&e&&(c.TgZ(0,"option",14),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.name),c.xp6(1),c.hij(" ",a.label," ")}}function Wf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",37),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.filter_input.value)}}function $f(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",38),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.filter_input.value)}}function Xf(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"select",39),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e}),c.TgZ(1,"option",40),c._uU(2,"True"),c.qZA(),c.TgZ(3,"option",41),c._uU(4,"False"),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.filter_input.value)}}function ep(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e})("onChange",function(){c.CHM(a);var e=c.oxw();return e.setProfileLabel(e.filter_input.value)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.profiles_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.filter_input.value)}}function tp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e})("onChange",function(){c.CHM(a);var e=c.oxw();return e.setManagerLabel(e.filter_input.value)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.filter_input.value)}}function ap(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e})("onChange",function(){c.CHM(a);var e=c.oxw();return e.setSiteLabel(e.filter_input.value)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.sites_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.filter_input.value)}}function ip(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",44),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter_input.value=e})("onChange",function(){c.CHM(a);var e=c.oxw();return e.setGroupLabel(e.filter_input.value)}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.groups_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.filter_input.value)}}function np(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",45),c._UZ(1,"i",46),c._uU(2,"\xa0\xa0 Found "),c.TgZ(3,"b"),c._uU(4),c.qZA(),c._uU(5," records matching your filter "),c.TgZ(6,"button",47),c.NdJ("click",function(){return c.CHM(a),c.oxw().previewUsers()}),c._UZ(7,"i",48),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(4),c.Oqu(i.n_records_found)}}function op(e,t){if(1&e&&(c.TgZ(0,"option",14),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.name),c.xp6(1),c.hij(" ",a.label," ")}}function rp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",49),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.action.option)}}function lp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",50),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.action.option)}}function sp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"input",51),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.action.option)}}function cp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",52),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.profiles_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.action.option)}}function up(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",52),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.action.option)}}function dp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",52),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.sites_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.action.option)}}function fp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"div",43),c.TgZ(2,"p-dropdown",52),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().action.option=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("options",i.groups_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",i.action.option)}}var pp=function(){function e(t,a,i,n){o(this,e),this.ch=t,this.api=a,this.toastr=i,this.tr=n,this.fields=[{name:"username",label:"Username",type:"text"},{name:"expiration",label:"Expiration",type:"date"},{name:"enabled",label:"Enabled",type:"bool"},{name:"firstname",label:"First Name",type:"text"},{name:"lastname",label:"Last Name",type:"text"},{name:"profile_id",label:"Profile",type:"profiles"},{name:"parent_id",label:"Parent",type:"managers"},{name:"parent_and_subs",label:"Parent & Subs",type:"managers"},{name:"email",label:"Email",type:"text"},{name:"company",label:"Copmany",type:"text"},{name:"phone",label:"Phone",type:"text"},{name:"city",label:"City",type:"text"},{name:"address",label:"Address",type:"text"},{name:"contract_id",label:"Contract Number",type:"text"},{name:"national_id",label:"National ID",type:"text"},{name:"simultaneous_sessions",label:"Simultaneous Sessions",type:"text"},{name:"user_type",label:"User Type",type:"dropdown"},{name:"static_ip",label:"Static IP",type:"text"},{name:"auto_renew",label:"Auto Renew",type:"bool"},{name:"site_id",label:"Site",type:"sites"},{name:"group_id",label:"Group",type:"groups"}],this.filter_input={key:null,op:"=",value:null,value_label:null},this.filter=[],this.input_type="text",this.profiles_list=[],this.sites_list=[],this.managers_list=[],this.groups_list=[],this.records_found=[],this.n_records_found=0,this.action={name:null,option:null},this.actions=[{name:"set_expiration",label:"Set Expiration",option:"text"},{name:"set_traffic_balance",label:"Set Traffic Balance (MB)",option:"number"},{name:"set_profile",label:"Set Profile",option:"profiles"},{name:"set_site",label:"Set Site",option:"sites"},{name:"set_parent",label:"Set Parent",option:"managers"},{name:"set_group",label:"Set Group",option:"groups"},{name:"add_traffic",label:"Add Traffic (MB)",option:"number"},{name:"add_traffic_dl",label:"Add Download Traffic (MB)",option:"number"},{name:"add_traffic_ul",label:"Add Upload Traffic (MB)",option:"number"},{name:"add_days",label:"Increase Expiration (Days)",option:"number"},{name:"disable",label:"Disable",option:null},{name:"delete",label:"Delete",option:null},{name:"enable",label:"Enable",option:null},{name:"disconnect",label:"Disconnect",option:null},{name:"set_auto_renew",label:"Enable Auto-Renew",option:null},{name:"set_simultaneous_sessions",label:"Set Simultaneous Sessions",option:"number"},{name:"unset_auto_renew",label:"Disable Auto-Renew",option:null},{name:"send_sms",label:"Send SMS",option:"text"},{name:"export",label:"Export (Excel)",option:null}],this.action_input_type=null,this.bulk_changes_applied=!1}return l(e,[{key:"ngOnInit",value:function(){this.loadResources()}},{key:"addFilterRow",value:function(){var e=Object.assign(this.filter_input);e.id=this.ch.guid(),this.filter.push(e),this.filter_input={key:null,op:"=",value:null,value_label:null},this.previewUsers()}},{key:"resetFilterRow",value:function(){this.filter_input={key:null,op:"=",value:null,value_label:null}}},{key:"removeFilterRow",value:function(e){var t=this,a=0;this.filter.map(function(i){i.id===e&&t.filter.splice(a,1),a++}),0===this.filter.length?(this.records_found=[],this.n_records_found=0):this.previewUsers()}},{key:"showProperInput",value:function(){var e=this;this.fields.map(function(t){e.filter_input.key===t.name&&(e.input_type=t.type)})}},{key:"showProperActionInput",value:function(){var e=this;this.action.option=null,this.actions.map(function(t){e.action.name===t.name&&(e.action_input_type=t.option)})}},{key:"loadResources",value:function(){var e=this;this.api.get("list/profile/0").subscribe(function(t){e.profiles_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.profiles_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}}),this.api.get("index/manager").subscribe(function(t){e.managers_list=[];var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}}),this.api.get("site").subscribe(function(t){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.sites_list.push({value:o.id,label:o.name})}}catch(r){n.e(r)}finally{n.f()}e.sites_list.unshift({value:-1,label:"Undefined"})});var t=[];this.api.get("group").subscribe(function(a){if(200===a.status){var n,o=i(a.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;t.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}t.unshift({value:-1,label:e.tr.translate("global_none")}),e.groups_list=t}})}},{key:"setProfileLabel",value:function(e){var t=this;this.profiles_list.map(function(a){a.value===e&&(t.filter_input.value_label=a.label)})}},{key:"setManagerLabel",value:function(e){var t=this;this.managers_list.map(function(a){a.value===e&&(t.filter_input.value_label=a.label)})}},{key:"setSiteLabel",value:function(e){var t=this;this.sites_list.map(function(a){a.value===e&&(t.filter_input.value_label=a.label)})}},{key:"setGroupLabel",value:function(e){var t=this;this.groups_list.map(function(a){a.value===e&&(t.filter_input.value_label=a.label)})}},{key:"previewUsers",value:function(){var e=this;this.bulk_changes_applied=!1,this.blockUI.start(),this.api.post("index/user",{bulk_filter:this.filter}).subscribe(function(t){e.blockUI.stop(),e.records_found=t.data,e.n_records_found=t.total})}},{key:"applyAction",value:function(){var e=this;this.blockUI.start(),this.api.post("bulkChanges/users/apply",{filter:this.filter,action:this.action}).subscribe(function(t){e.blockUI.stop(),200===t.status&&("export"===e.action.name?(e.action={name:null,option:null},e.action_input_type=null,e.api.downloadFile("storage/tmp/"+t.data,t.data)):(e.action={name:null,option:null},e.action_input_type=null,e.toastr.success(e.tr.translate(t.message)),e.bulk_changes_applied=!0))})}}]),e}();pp.\u0275fac=function(e){return new(e||pp)(c.Y36(y),c.Y36(Z),c.Y36(v._W),c.Y36(I))},pp.\u0275cmp=c.Xpm({type:pp,selectors:[["app-bulk-changes"]],decls:66,vars:31,consts:[["class","alert alert-success",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"fal","fa-users-class"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"table-sm","table-striped","filter-table"],["width","40%"],["width","10%"],[4,"ngFor","ngForOf"],["name","key",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","op",1,"form-control",3,"ngModel","hidden","ngModelChange"],[3,"value"],["type","text","class","form-control","name","value",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","class","form-control","name","value",3,"ngModel","ngModelChange",4,"ngIf"],["name","value","class","form-control",3,"ngModel","ngModelChange",4,"ngIf"],["class","ui-g",4,"ngIf"],["width","10%",2,"text-align","center"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-undo"],["class","alert bg-light","style","margin-top: 15px;",4,"ngIf"],[1,"bg-light","action-box","row",3,"hidden"],[1,"col-md-5","col-sm-12"],["name","action",1,"form-control",3,"ngModel","ngModelChange","change"],["disabled","","value","null"],["class","form-control","type","text","name","option",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","number","name","option",3,"ngModel","ngModelChange",4,"ngIf"],["class","form-control","type","date","name","option",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-md-2","col-sm-12","btn","btn-primary",3,"disabled","click"],[1,"alert","alert-success"],[1,"fa","fa-check-circle"],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-minus"],["type","text","name","value",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","value",1,"form-control",3,"ngModel","ngModelChange"],["name","value",1,"form-control",3,"ngModel","ngModelChange"],["value","1"],["value","0"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange","onChange"],[1,"alert","bg-light",2,"margin-top","15px"],[1,"fa","fa-info-circle"],[1,"btn","btn-sm","btn-secondary","fa-pull-right",3,"click"],[1,"fa","fa-sync"],["type","text","name","option",1,"form-control",3,"ngModel","ngModelChange"],["type","number","name","option",1,"form-control",3,"ngModel","ngModelChange"],["type","date","name","option",1,"form-control",3,"ngModel","ngModelChange"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.YNc(0,jf,3,0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"i",3),c._uU(4," Bulk Changes "),c.qZA(),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"table",7),c.TgZ(9,"thead"),c.TgZ(10,"tr"),c.TgZ(11,"th",8),c._uU(12,"Attribute"),c.qZA(),c._UZ(13,"th",9),c.TgZ(14,"th",8),c._uU(15,"Value"),c.qZA(),c._UZ(16,"th",9),c.qZA(),c.qZA(),c.YNc(17,zf,10,3,"tr",10),c._UZ(18,"tr"),c.TgZ(19,"tr"),c.TgZ(20,"td",8),c.TgZ(21,"select",11),c.NdJ("ngModelChange",function(e){return t.filter_input.key=e})("ngModelChange",function(){return t.showProperInput()}),c.YNc(22,Gf,2,2,"option",12),c.qZA(),c.qZA(),c.TgZ(23,"td",9),c.TgZ(24,"select",13),c.NdJ("ngModelChange",function(e){return t.filter_input.op=e}),c.TgZ(25,"option",14),c._uU(26," = "),c.qZA(),c.TgZ(27,"option",14),c._uU(28," != "),c.qZA(),c.TgZ(29,"option",14),c._uU(30," < "),c.qZA(),c.TgZ(31,"option",14),c._uU(32," > "),c.qZA(),c.TgZ(33,"option",14),c._uU(34," like "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(35,"td",8),c.YNc(36,Wf,1,1,"input",15),c.YNc(37,$f,1,1,"input",16),c.YNc(38,Xf,5,1,"select",17),c.YNc(39,ep,3,4,"div",18),c.YNc(40,tp,3,4,"div",18),c.YNc(41,ap,3,4,"div",18),c.YNc(42,ip,3,4,"div",18),c.qZA(),c.TgZ(43,"td",19),c.TgZ(44,"button",20),c.NdJ("click",function(){return t.addFilterRow()}),c._UZ(45,"i",21),c.qZA(),c._uU(46,"\xa0 "),c.TgZ(47,"button",22),c.NdJ("click",function(){return t.resetFilterRow()}),c._UZ(48,"i",23),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(49,np,8,1,"div",24),c.qZA(),c.TgZ(50,"div",25),c.TgZ(51,"div",26),c.TgZ(52,"select",27),c.NdJ("ngModelChange",function(e){return t.action.name=e})("change",function(){return t.showProperActionInput()}),c.TgZ(53,"option",28),c._uU(54,"Select Action"),c.qZA(),c.YNc(55,op,2,2,"option",12),c.qZA(),c.qZA(),c.TgZ(56,"div",26),c.YNc(57,rp,1,1,"input",29),c.YNc(58,lp,1,1,"input",30),c.YNc(59,sp,1,1,"input",31),c.YNc(60,cp,3,4,"div",18),c.YNc(61,up,3,4,"div",18),c.YNc(62,dp,3,4,"div",18),c.YNc(63,fp,3,4,"div",18),c.qZA(),c.TgZ(64,"button",32),c.NdJ("click",function(){return t.applyAction()}),c._uU(65,"Apply"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.bulk_changes_applied),c.xp6(17),c.Q6J("ngForOf",t.filter),c.xp6(4),c.Q6J("ngModel",t.filter_input.key),c.xp6(1),c.Q6J("ngForOf",t.fields),c.xp6(2),c.Q6J("ngModel",t.filter_input.op)("hidden","bool"==t.input_type),c.xp6(1),c.Q6J("value","="),c.xp6(2),c.Q6J("value","!="),c.xp6(2),c.Q6J("value","<"),c.xp6(2),c.Q6J("value",">"),c.xp6(2),c.Q6J("value","like"),c.xp6(3),c.Q6J("ngIf","text"===t.input_type),c.xp6(1),c.Q6J("ngIf","date"===t.input_type),c.xp6(1),c.Q6J("ngIf","bool"==t.input_type),c.xp6(1),c.Q6J("ngIf","profiles"==t.input_type),c.xp6(1),c.Q6J("ngIf","managers"==t.input_type),c.xp6(1),c.Q6J("ngIf","sites"==t.input_type),c.xp6(1),c.Q6J("ngIf","groups"==t.input_type),c.xp6(2),c.Q6J("disabled",null===t.filter_input.value||!t.filter_input.key),c.xp6(5),c.Q6J("ngIf",t.n_records_found>0),c.xp6(1),c.Q6J("hidden",!t.n_records_found||0===t.n_records_found||0===t.filter.length),c.xp6(2),c.Q6J("ngModel",t.action.name),c.xp6(3),c.Q6J("ngForOf",t.actions),c.xp6(2),c.Q6J("ngIf","text"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","number"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","date"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","profiles"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","managers"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","sites"==t.action_input_type),c.xp6(1),c.Q6J("ngIf","groups"==t.action_input_type),c.xp6(1),c.Q6J("disabled",0===t.n_records_found||null===t.action.name))},directives:[Q.O5,Q.sg,A.EJ,A.JJ,A.On,A.YN,A.Kr,A.Fj,ya.Lt,A.wV],styles:[".filter-table[_ngcontent-%COMP%]{width:100%}.action-box[_ngcontent-%COMP%]{margin:20px;padding:10px;box-sizing:border-box;border:1px solid lightgrey}"]}),(0,g.gn)([(0,m.bH)()],pp.prototype,"blockUI",void 0);var gp=["sessions_model_view"];function hp(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterFields",a.filterFields)}}var mp=function(){var e=function(){function e(t){o(this,e),this.tr=t,this.tableColumns=[{dataKey:"username",label:this.tr.translate("global_username")},{dataKey:"acctstarttime",label:this.tr.translate("user_session_table_started")},{dataKey:"acctstoptime",label:this.tr.translate("user_session_table_ended")},{dataKey:"framedipaddress",label:this.tr.translate("user_session_table_ip")},{dataKey:"nasipaddress",label:"NAS"},{dataKey:"callingstationid",label:"MAC"},{dataKey:"framedprotocol",label:this.tr.translate("user_session_table_protocol"),hidden:!0},{dataKey:"acctinputoctets",label:this.tr.translate("user_session_table_upload"),pipe:"bytes"},{dataKey:"acctoutputoctets",label:this.tr.translate("user_session_table_download"),pipe:"bytes"},{dataKey:"calledstationid",label:this.tr.translate("user_session_table_service")},{dataKey:"acctterminatecause",label:this.tr.translate("user_session_table_termination_cause")}],this.filterFields=[{key:"framedipaddress",label:"IP Address",type:"text",cols:12},{key:"username",label:"Username",type:"text",cols:12},{key:"mac",label:"MAC",type:"text",cols:12},{key:"start_date",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"end_date",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/UserSessions",primaryKey:"radacctid",sortBy:"acctstarttime",title:"Users Sessions",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,icon:"fa fa-list",actions:null,hasInlineActions:!1,allowSelect:!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-sessions-report"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(gp,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","sessions_model_view",3,"modelViewConfig","advancedFilterFields",4,"ngIf"],["name","sessions_model_view",3,"modelViewConfig","advancedFilterFields"],["sessions_model_view",""]],template:function(e,t){1&e&&c.YNc(0,hp,2,2,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),_p=["activationForm"];function vp(e,t){1&e&&(c.TgZ(0,"div",10),c._UZ(1,"i",11),c._uU(2," No enough information available for this activation, system unable to refund it. "),c.qZA())}function bp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",12,13),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().refund(e)})("cancel",function(){return c.CHM(a),c.oxw().cancel()}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var Zp=function(){function e(t,a,i,n,r,l,s){o(this,e),this.tr=t,this.formLoader=a,this.route=i,this.toastr=n,this.location=r,this.confirmationService=l,this.api=s,this.form_config={layout:"horizontal",cancelText:this.tr.translate("global_button_dismiss"),submitText:this.tr.translate("global_button_refund"),fields:this.formLoader.getForm("user_cancellation_form"),helpBlock:"hidden"},this.options=[],this.user_id=null,this.refund_data={},this.no_refund=!1}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.getRefundData(e.user_id))})}},{key:"getRefundData",value:function(e){var t=this;this.api.get("user/refundData/"+e).subscribe(function(e){200===e.status?(t.refund_data=e.data,t.formView.setFormValue(t.refund_data)):t.no_refund=!0})}},{key:"refund",value:function(){var e=this;this.confirmationService.confirm({message:"Are you sure ?",accept:function(){e.blockUI.start(),e.api.post("user/refund",{user_id:e.user_id,refund_comment:e.formView.form.value.refund_comment}).subscribe(function(t){e.blockUI.stop(),200===t.status?e.toastr.success("operation performed successfully"):e.toastr.error("something went wrong, unable to perform operation"),e.location.back()})}})}},{key:"cancel",value:function(){this.location.back()}}]),e}();Zp.\u0275fac=function(e){return new(e||Zp)(c.Y36(I),c.Y36(ki),c.Y36(_.gz),c.Y36(v._W),c.Y36(Q.Ye),c.Y36(Ci.YP),c.Y36(Z))},Zp.\u0275cmp=c.Xpm({type:Zp,selectors:[["app-user-subscription-cancelation"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(_p,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:11,vars:4,consts:[["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"card"],[1,"card-header"],[1,"fa","fa-user"],[1,"card-body"],[1,"row"],[1,"col"],["class","alert alert-warning",4,"ngIf"],[3,"hidden"],["name","activationForm",3,"formConfig","options","submit","cancel",4,"ngIf"],[1,"alert","alert-warning"],[1,"fa","fa-exclamation-triangle"],["name","activationForm",3,"formConfig","options","submit","cancel"],["activationForm",""]],template:function(e,t){1&e&&(c._UZ(0,"p-confirmDialog",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"i",3),c._uU(4),c.qZA(),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.YNc(8,vp,3,0,"div",7),c.TgZ(9,"div",8),c.YNc(10,bp,2,2,"dynamic-form",9),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.hij(" ",t.tr.translate("user_cancellation_form_title")," "),c.xp6(4),c.Q6J("ngIf",t.no_refund),c.xp6(1),c.Q6J("hidden",t.no_refund),c.xp6(1),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[F.Q,Q.O5,qi],styles:[""]}),(0,g.gn)([(0,m.bH)()],Zp.prototype,"blockUI",void 0);var yp=["myForm"];function wp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var xp=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("settings_billing"),this.form_config.fields=this.formFields,this.load()}},{key:"load",value:function(){var e=this;this.api.get("settings/billing_").subscribe(function(t){200===t.status&&e.myForm.setFormValue(t.data)})}},{key:"save",value:function(e){var t=this;this.api.post("settings/billing_",e.value).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-postpaid-billing-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(yp,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-link"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Postpaid & Billing Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,wp,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[""]}),e}();function Ap(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterFields",a.filterFields)("advancedFilterOptions",a.filterOptions)}}var qp=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.tr=i,this.auth=n,this.tableColumns=[{dataKey:"receipt_number",label:this.tr.translate("manager_receipt_table_no")},{dataKey:"created_at",label:this.tr.translate("manager_receipt_table_date")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("global_username")},{dataKey:"type",label:this.tr.translate("manager_receipt_table_type")},{dataKey:"amount",label:this.tr.translate("manager_receipt_table_amount")},{dataKey:"description",label:this.tr.translate("manager_receipt_table_description")},{dataKey:"username",parentKey:"issuer_details",label:this.tr.translate("manager_receipt_table_created_by")}],this.filterFields=[{key:"type",label:"Receipt Type",type:"select",value:-1,layout:"vertical",cols:12,options:[{value:-1,label:"All"},{value:"deposit",label:"Deposit"}]},{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={hasHeader:!0,dataUrl:"index/ManagerReceipts",primaryKey:"id",sortBy:"created_at",direction:"desc",columns:this.tableColumns,title:"Manager Receipts",showSearchBox:!0,hasAdvancedFilter:!0,allowExport:!0},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[{value:null,label:"All Managers"}],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.manager_id=n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(I),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-receipts-report"]],decls:1,vars:1,consts:[["name","receipts_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions",4,"ngIf"],["name","receipts_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions"],["receipts_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Ap,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),Tp=n(56185),kp=n(49457),Cp=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.summary=[],this.data=[]}return l(e,[{key:"ngOnInit",value:function(){this.load()}},{key:"load",value:function(){var e=this;this.api.get("usersReport/summary").subscribe(function(t){e.summary=t.data}),this.api.get("usersReport/perManager").subscribe(function(t){200===t.status&&(e._initChart(t.data),e.data=t.data)})}},{key:"_initChart",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top 10 Managers"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Users",colorByPoint:!0}]},a=0,i=[];a<e.length&&a<11;)i.push({name:e[a].manager_name,y:e[a].c}),a++;t.series[0].data=i,this.chart=E.chart("users_per_manager_chart",t)}},{key:"download",value:function(){var e=this;this.api.get("usersReport/perManager/10000").subscribe(function(t){200===t.status&&e.generateExcelSheet(t.data)})}},{key:"generateExcelSheet",value:function(e){var t=new Tp.Workbook;t.creator="SASRADIUS 4";var a=t.addWorksheet("Users per Manager");a.columns=[{header:"Manager",key:"username"},{header:"Total Users",key:"total"},{header:"Active Users",key:"active"},{header:"Expired Users",key:"expired"}];var n,o=i(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.addRow({username:r.manager_name,total:r.c,active:r.active,expired:r.expired})}}catch(l){o.e(l)}finally{o.f()}t.xlsx.writeBuffer().then(function(e){var t=new Blob([e],{type:"application/octet-stream"});(0,kp.saveAs)(t,"sasradius_report_users_per_manager.xlsx")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-report-per-manager"]],decls:27,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],[1,"row","row-eq-height"],[1,"col-12","col-md-8","order-2","order-md-1"],["id","users_per_manager_chart"],[1,"col-12","col-md-4","order-1","order-md-2"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"badge"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"button",2),c.NdJ("click",function(){return t.load()}),c._UZ(3,"i",3),c._uU(4),c.qZA(),c.TgZ(5,"button",2),c.NdJ("click",function(){return t.download()}),c._UZ(6,"i",4),c._uU(7),c.qZA(),c.qZA(),c.qZA(),c._UZ(8,"br"),c.TgZ(9,"div",5),c.TgZ(10,"div",6),c.TgZ(11,"div",7),c._uU(12," Chart is loading... "),c.qZA(),c.qZA(),c.TgZ(13,"div",8),c.TgZ(14,"ul",9),c.TgZ(15,"li",10),c._uU(16),c.TgZ(17,"span",11),c._uU(18),c.qZA(),c.qZA(),c.TgZ(19,"li",10),c._uU(20),c.TgZ(21,"span",11),c._uU(22),c.qZA(),c.qZA(),c.TgZ(23,"li",10),c._uU(24),c.TgZ(25,"span",11),c._uU(26),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.hij(" ",t.tr.translate("global_reload"),""),c.xp6(3),c.hij(" ",t.tr.translate("global_download"),""),c.xp6(9),c.hij(" ",t.tr.translate("global_total")," "),c.xp6(2),c.Oqu(t.summary.total),c.xp6(2),c.hij(" ",t.tr.translate("users_status_active")," "),c.xp6(2),c.Oqu(t.summary.active),c.xp6(2),c.hij(" ",t.tr.translate("users_status_expired")," "),c.xp6(2),c.Oqu(t.summary.expired))},styles:[".list-group[_ngcontent-%COMP%]{height:100%}.list-group-item[_ngcontent-%COMP%]{font-size:1.2rem}.badge[_ngcontent-%COMP%]{font-size:1.2rem!important}"]}),e}();function Up(e,t){if(1&e&&(c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.qZA()),2&e){var a=t.$implicit;c.xp6(2),c.Oqu(a.profile_name),c.xp6(2),c.Oqu(a.c),c.xp6(2),c.Oqu(a.active),c.xp6(2),c.Oqu(a.expired)}}var Mp=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.data=[],this.filter={manager_id:-1},this.managers_list=[]}return l(e,[{key:"ngOnInit",value:function(){this.loadResources(),this.load()}},{key:"load",value:function(){var e=this;this.api.post("usersReport/perProfile",this.filter).subscribe(function(t){200===t.status&&(e._initChart(t.data),e.data=t.data)})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[],e.managers_list.unshift({value:-1,label:"All Managers"});var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}})}},{key:"_initChart",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top 10 Profiles"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Users",colorByPoint:!0}]},a=0,i=[];a<e.length&&a<11;)i.push({name:e[a].profile_name,y:e[a].c}),a++;t.series[0].data=i,this.chart=E.chart("users_per_profile_chart",t)}},{key:"download",value:function(){var e=new Tp.Workbook;e.creator="SASRADIUS 4";var t=e.addWorksheet("Users per Manager");t.columns=[{header:"Profile",key:"profile_name"},{header:"Total Users",key:"total"},{header:"Active Users",key:"active"},{header:"Expired Users",key:"expired"}];var a,n=i(this.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;t.addRow({profile_name:o.profile_name,total:o.c,active:o.active,expired:o.expired})}}catch(r){n.e(r)}finally{n.f()}e.xlsx.writeBuffer().then(function(e){var t=new Blob([e],{type:"application/octet-stream"});(0,kp.saveAs)(t,"sasradius_report_users_per_profile.xlsx")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-report-per-profile"]],decls:30,vars:12,consts:[[1,"row"],[1,"col-12"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","placeholder","ngModelChange","onChange"],["id","users_per_profile_chart"],[1,"table","table-hover"],[1,"thead-dark"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"button",2),c.NdJ("click",function(){return t.load()}),c._UZ(3,"i",3),c._uU(4),c.qZA(),c.TgZ(5,"button",2),c.NdJ("click",function(){return t.download()}),c._UZ(6,"i",4),c._uU(7),c.qZA(),c.TgZ(8,"div",5),c.TgZ(9,"div",6),c.TgZ(10,"p-dropdown",7),c.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",0),c.TgZ(12,"div",1),c.TgZ(13,"div",8),c._uU(14," Chart is loading... "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",0),c.TgZ(16,"div",1),c.TgZ(17,"table",9),c.TgZ(18,"thead",10),c.TgZ(19,"tr"),c.TgZ(20,"td"),c._uU(21),c.qZA(),c.TgZ(22,"td"),c._uU(23),c.qZA(),c.TgZ(24,"td"),c._uU(25),c.qZA(),c.TgZ(26,"td"),c._uU(27),c.qZA(),c.qZA(),c.qZA(),c.TgZ(28,"tbody"),c.YNc(29,Up,9,4,"tr",11),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.hij(" ",t.tr.translate("global_reload"),""),c.xp6(3),c.hij(" ",t.tr.translate("global_download"),""),c.xp6(3),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id)("placeholder","All Managers"),c.xp6(11),c.Oqu(t.tr.translate("global_profile")),c.xp6(2),c.Oqu(t.tr.translate("global_total")),c.xp6(2),c.Oqu(t.tr.translate("users_status_active")),c.xp6(2),c.Oqu(t.tr.translate("users_status_expired")),c.xp6(2),c.Q6J("ngForOf",t.data))},directives:[ya.Lt,A.JJ,A.On,Q.sg],styles:[""]}),e}();function Fp(e,t){if(1&e&&(c.TgZ(0,"option",8),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a),c.xp6(1),c.Oqu(a)}}var Jp=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.year_list=[],this.date=new Date,this.filter={month:this.date.getMonth()+1,year:this.date.getFullYear()},this.data=[]}return l(e,[{key:"ngOnInit",value:function(){for(var e=this.date.getFullYear();e>2016;e--)this.year_list.push(e);this.load()}},{key:"load",value:function(){for(var e=this,t=0;t<12;t++)this.data[t]=0;this.api.post("usersReport/registration",this.filter).subscribe(function(t){if(200===t.status){var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value,r=o.m;r-=1,e.data[r]=o.total}}catch(l){n.e(l)}finally{n.f()}e.initChart()}})}},{key:"initChart",value:function(){var e={title:{text:this.tr.translate("report_users_registrations_per_month")},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:1}},series:[{name:"New Users",data:this.data}]};console.log(e),this.chart=E.chart("registrations_chart",e)}},{key:"download",value:function(){var e=new Tp.Workbook;e.creator="SASRADIUS 4";var t=e.addWorksheet("Registrations "+this.filter.year);t.columns=[{header:"Month",key:"month"},{header:"New Users",key:"total"}];for(var a=0;a<12;a++)t.addRow({month:a+1,total:this.data[a]});e.xlsx.writeBuffer().then(function(e){var t=new Blob([e],{type:"application/octet-stream"});(0,kp.saveAs)(t,"sasradius_report_registrations.xlsx")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-report-registration"]],decls:14,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"form-control","input-sm","d-inline",2,"width","100px !important",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-outline-secondary","btn-100px","float-right",3,"click"],[1,"fa","fa-sync"],[1,"fa","fa-file-excel"],["id","registrations_chart"],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("ngModelChange",function(){return t.load()}),c.YNc(3,Fp,2,2,"option",3),c.qZA(),c.TgZ(4,"button",4),c.NdJ("click",function(){return t.load()}),c._UZ(5,"i",5),c._uU(6),c.qZA(),c.TgZ(7,"button",4),c.NdJ("click",function(){return t.download()}),c._UZ(8,"i",6),c._uU(9),c.qZA(),c.qZA(),c.qZA(),c.TgZ(10,"div",0),c.TgZ(11,"div",1),c.TgZ(12,"div",7),c._uU(13," Chart is loading... "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.year_list),c.xp6(3),c.hij(" ",t.tr.translate("global_reload"),""),c.xp6(3),c.hij(" ",t.tr.translate("global_download"),""))},directives:[A.EJ,A.JJ,A.On,Q.sg,A.YN,A.Kr],styles:[""]}),e}(),Op=function(){var e=function(){function e(t){o(this,e),this.tr=t}return l(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-users-report"]],decls:7,vars:3,consts:[[3,"header"]],template:function(e,t){1&e&&(c.TgZ(0,"p-tabView"),c.TgZ(1,"p-tabPanel",0),c._UZ(2,"app-users-report-per-manager"),c.qZA(),c.TgZ(3,"p-tabPanel",0),c._UZ(4,"app-users-report-per-profile"),c.qZA(),c.TgZ(5,"p-tabPanel",0),c._UZ(6,"app-users-report-registration"),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.s9C("header",t.tr.translate("report_users_per_manager_title")),c.xp6(2),c.s9C("header",t.tr.translate("report_users_per_profile_title")),c.xp6(2),c.s9C("header",t.tr.translate("report_users_registrations_title")))},directives:[fd.xf,fd.x4,Cp,Mp,Jp],styles:[""]}),e}(),Np=function(){return{width:"50vw"}},Ip=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.toastr=a,this.tr=i,this.confirmationService=n,this.paperSize="A4",this.orientation="P",this.editorOptions={theme:"vs-dark",language:"html"}}return l(e,[{key:"ngOnInit",value:function(){this.load()}},{key:"load",value:function(){var e=this;this.api.get("userInvoice/template").subscribe(function(t){e.template=t.data.template,e.paperSize=t.data.size,e.orientation=t.data.orientation})}},{key:"restoreOriginal",value:function(){var e=this;this.confirmationService.confirm({message:"Restore orignal template? current one will get overwritten",header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.api.delete("userInvoice/template").subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.load())})}})}},{key:"save",value:function(){var e=this;this.api.post("userInvoice/template",{size:this.paperSize,template:this.template,orientation:this.orientation}).subscribe(function(t){200===t.status&&e.toastr.success(t.message)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(v._W),c.Y36(I),c.Y36(Ci.YP))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-user-invoice-designer"]],decls:37,vars:7,consts:[[1,"row"],[1,"col-10","editor-container"],[1,"alert","alert-info"],[1,"fa","fa-info-circle"],[1,"code-editor",3,"options","ngModel","ngModelChange"],[1,"col-2"],[1,"col-12"],[1,"form-control-static"],[1,"form-control",3,"ngModel","ngModelChange"],["value","A4"],["value","A5"],["value","80mm"],["value","P"],["value","L"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(c._UZ(0,"p-confirmDialog"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c._UZ(4,"i",3),c._uU(5,"\xa0 This is a Laravel Blade template. Mind the PHP ($) variables when editing. "),c.qZA(),c.TgZ(6,"ngx-monaco-editor",4),c.NdJ("ngModelChange",function(e){return t.template=e}),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"div",0),c.TgZ(9,"div",6),c.TgZ(10,"label",7),c._uU(11," PDF Paper Size "),c.qZA(),c.TgZ(12,"select",8),c.NdJ("ngModelChange",function(e){return t.paperSize=e}),c.TgZ(13,"option",9),c._uU(14,"A4"),c.qZA(),c.TgZ(15,"option",10),c._uU(16,"A5"),c.qZA(),c.TgZ(17,"option",11),c._uU(18,"80mx200m"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(19,"div",6),c.TgZ(20,"label",7),c._uU(21," Page Orientation "),c.qZA(),c.TgZ(22,"select",8),c.NdJ("ngModelChange",function(e){return t.orientation=e}),c.TgZ(23,"option",12),c._uU(24,"Portrait"),c.qZA(),c.TgZ(25,"option",13),c._uU(26,"Landscape"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(27,"hr"),c.TgZ(28,"div",0),c.TgZ(29,"div",6),c.TgZ(30,"button",14),c.NdJ("click",function(){return t.save()}),c._uU(31,"Save"),c.qZA(),c.qZA(),c.qZA(),c._UZ(32,"hr"),c.TgZ(33,"div",0),c.TgZ(34,"div",6),c.TgZ(35,"button",15),c.NdJ("click",function(){return t.restoreOriginal()}),c._uU(36,"Factory Default"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Akn(c.DdM(6,Np)),c.xp6(6),c.Q6J("options",t.editorOptions)("ngModel",t.template),c.xp6(6),c.Q6J("ngModel",t.paperSize),c.xp6(10),c.Q6J("ngModel",t.orientation))},directives:[F.Q,cd.PG,A.JJ,A.On,A.EJ,A.YN,A.Kr],styles:[".btn[_ngcontent-%COMP%]{width:100%}.code-editor[_ngcontent-%COMP%]{height:100%;min-height:500px;width:100%}.editor-container[_ngcontent-%COMP%]{height:calc(100vh - 200px)}"]}),e}();function Yp(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a),c.xp6(1),c.Oqu(a)}}function Qp(e,t){if(1&e&&(c.TgZ(0,"option",13),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a.id),c.xp6(1),c.Oqu(a.name)}}function Sp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"select",2),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter.month=e})("change",function(){return c.CHM(a),c.oxw().load()}),c.TgZ(1,"option",14),c._uU(2,"All Months"),c.qZA(),c.YNc(3,Qp,2,2,"option",3),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.filter.month),c.xp6(3),c.Q6J("ngForOf",i.ch.months)}}var Pp=function(){function e(t,a){o(this,e),this.api=t,this.ch=a,this.year_list=[],this.date=new Date,this.filter={year:this.date.getFullYear(),month:-1}}return l(e,[{key:"ngOnInit",value:function(){for(var e=this.date.getFullYear();e>2017;e--)this.year_list.push(e);this.load()}},{key:"load",value:function(){var e=this;this.blockUI.start(),this.api.post("trafficReport/all",this.filter).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e._initChart_topDownloads(t.data.topDownloaders),e._initChart_topUploaders(t.data.topUploaders),e._initChart_topConsumers(t.data.topConsumers),e._initChart_period(t.data.periodTraffic))})}},{key:"_initChart_topConsumers",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Consumers"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0,i=[];a<e.length&&a<11;){var n="(deleted user)";null!=e[a].user_details&&(n=e[a].user_details.username),i.push({name:n||"(deleted user)",y:parseInt(e[a].traffic)}),a++}t.series[0].data=i,this.chart=E.chart("top_consumers",t)}},{key:"_initChart_topDownloads",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Downloaders"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0,i=[];a<e.length&&a<11;){var n="(deleted user)";null!=e[a].user_details&&(n=e[a].user_details.username),i.push({name:n||"(deleted user)",y:parseInt(e[a].dl)}),a++}t.series[0].data=i,this.chart=E.chart("top_downloaders",t)}},{key:"_initChart_topUploaders",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Top Uploaders"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Bytes",colorByPoint:!0}],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}},a=0,i=[];a<e.length&&a<11;){var n="(deleted user)";null!=e[a].user_details&&(n=e[a].user_details.username),i.push({name:n||"(deleted user)",y:parseInt(e[a].ul)}),a++}t.series[0].data=i,this.chart=E.chart("top_uploaders",t)}},{key:"_initChart_period",value:function(e){var t=[];if(-1==this.filter.month){for(var a=0;a<12;a++)t[a]=0;e.map(function(e){t[e.month-1]=parseInt(e.traffic)})}else{for(var i=0;i<31;i++)t[i]=0;e.map(function(e){t[e.day-1]=parseInt(e.traffic)})}var n={title:{text:"Total Traffic Usage"},plotOptions:{series:{label:{connectorAllowed:!1},pointStart:1,pointInterval:1}},series:[{name:"Data Usage",data:t,pointStart:0,pointInterval:1}],tooltip:{formatter:function(){var e=this.y;if(isNaN(parseFloat(String(e)))||!isFinite(e))return"0";var t="";e<0&&(t="-",e*=-1);for(var a=0;e>=1024;)e/=1024,a++;return t+e.toFixed(2)+" "+["bytes","KB","MB","GB","TB","PB"][a]}}};n.xAxis=-1==this.filter.month?{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}:{categories:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},this.chart=E.chart("period_chart",n)}}]),e}();function Dp(e,t){if(1&e&&(c.TgZ(0,"option",12),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.s9C("value",a),c.xp6(1),c.Oqu(a)}}function Hp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"select",2),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().filter.year=e})("change",function(){return c.CHM(a),c.oxw().load()}),c.YNc(1,Dp,2,2,"option",11),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("ngModel",i.filter.year),c.xp6(1),c.Q6J("ngForOf",i.year_list)}}function Rp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"p-calendar",15),c.NdJ("onSelect",function(){return c.CHM(a),c.oxw().load()})("ngModelChange",function(e){return c.CHM(a),c.oxw().selectedDate=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("yearNavigator",!0)("ngModel",i.selectedDate)}}function Vp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",13),c.TgZ(1,"div",14),c.TgZ(2,"p-calendar",16),c.NdJ("onSelect",function(){return c.CHM(a),c.oxw().load()})("ngModelChange",function(e){return c.CHM(a),c.oxw().selectedDate=e}),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(2),c.Q6J("yearNavigator",!0)("ngModel",i.selectedDate)}}Pp.\u0275fac=function(e){return new(e||Pp)(c.Y36(Z),c.Y36(y))},Pp.\u0275cmp=c.Xpm({type:Pp,selectors:[["app-traffic-report"]],decls:24,vars:3,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","form-control filter-select",3,"ngModel","ngModelChange","change",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-12","col-md-12"],["id","period_chart"],["id","top_consumers"],["id","top_downloaders"],["id","top_uploaders"],[3,"value"],["value","-1"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.filter.year=e})("change",function(){return t.load()}),c.YNc(3,Yp,2,2,"option",3),c.qZA(),c.YNc(4,Sp,4,2,"select",4),c.qZA(),c.qZA(),c._UZ(5,"br"),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"div",8),c.TgZ(10,"div",9),c._uU(11," loading... "),c.qZA(),c._UZ(12,"hr"),c.TgZ(13,"div",10),c._uU(14," loading... "),c.qZA(),c._UZ(15,"hr"),c.qZA(),c.TgZ(16,"div",8),c.TgZ(17,"div",11),c._uU(18," loading... "),c.qZA(),c._UZ(19,"hr"),c.qZA(),c.TgZ(20,"div",8),c.TgZ(21,"div",12),c._uU(22," loading... "),c.qZA(),c._UZ(23,"hr"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngModel",t.filter.year),c.xp6(1),c.Q6J("ngForOf",t.year_list),c.xp6(1),c.Q6J("ngIf",-1!=t.filter.year))},directives:[Y.M2,A.EJ,A.JJ,A.On,Q.sg,Q.O5,A.YN,A.Kr],styles:[""]}),(0,g.gn)([(0,m.bH)()],Pp.prototype,"blockUI",void 0);var Lp=function(){var e=function(){function e(t){o(this,e),this.api=t,this.year_list=[],this.date=new Date,this.filter={type:"hourly",day:this.date.getDate(),month:this.date.getMonth()+1,year:this.date.getFullYear()},this.data=[],this.selectedDate=new Date}return l(e,[{key:"ngOnInit",value:function(){for(var e=this.date.getFullYear();e>=2019;e--)this.year_list.push(e);this.load()}},{key:"load",value:function(){var e=this;"hourly"===this.filter.type&&(this.filter.day=this.selectedDate.getDate(),this.filter.month=this.selectedDate.getMonth()+1,this.filter.year=this.selectedDate.getFullYear()),"daily"===this.filter.type&&(this.filter.day=null,this.filter.month=this.selectedDate.getMonth()+1,this.filter.year=this.selectedDate.getFullYear()),this.api.post("onlineReport",this.filter).subscribe(function(t){200===t.status&&("hourly"===e.filter.type&&e.drawHourlyChart(t.data),"daily"===e.filter.type&&e.drawDailyChart(t.data),"monthly"===e.filter.type&&e.drawMonthlyChart(t.data))})}},{key:"drawHourlyChart",value:function(e){for(var t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[],n=function(t){var n=0,o=0;e.map(function(e){e.hour==t&&(n=parseInt(e.n_online),o=parseInt(e.n_total))}),a.push([t,n]),i.push([t,o])},o=0;o<24;o++)n(o);var r={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(r),console.log("drawing chart"),this.chart=E.chart("chart_container",t)}},{key:"drawDailyChart",value:function(e){for(var t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[],n=function(t){var n=0,o=0;e.map(function(e){e.day==t&&(n=parseInt(e.n_online),o=parseInt(e.n_total))}),a.push([t,n]),i.push([t,o])},o=1;o<=31;o++)n(o);var r={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(r),console.log("drawing chart"),this.chart=E.chart("chart_container",t)}},{key:"drawMonthlyChart",value:function(e){for(var t={chart:{type:"area"},options:{tooltip:{style:{padding:10,fontWeight:"bold"},valueSuffix:" User"}},series:[],title:{text:"Online Users Report"},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%e"},categories:["0","1","2","3","4","5","6","7","8","9","10","11","12"]},yAxis:{title:{text:"Users"},currentMin:0}},a=[],i=[],n=function(t){var n=0,o=0;e.map(function(e){e.month===t&&(n=parseInt(e.n_online),o=parseInt(e.n_total))}),a.push([t,n]),i.push([t,o])},o=1;o<=12;o++)n(o);var r={name:"Online Users",data:a,pointInterval:1,color:"#65a2f7"};t.series.push({name:"Active Users",data:i,pointInterval:1,color:"#d9d9d9"}),t.series.push(r),console.log("drawing chart"),this.chart=E.chart("chart_container",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-online-history-report"]],decls:17,vars:4,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"form-control","filter-select",3,"ngModel","ngModelChange","change"],["value","hourly"],["value","daily"],["value","monthly"],["class","form-control filter-select",3,"ngModel","ngModelChange","change",4,"ngIf"],["class","ui-g ui-fluid",4,"ngIf"],[1,"card"],[1,"card-body"],["id","chart_container"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"ui-g","ui-fluid"],[1,"ui-g-12","p-0"],["showButtonBar","true","showIcon","true","view","month","dateFormat","mm/yy","yearRange","2019:2030",3,"yearNavigator","ngModel","onSelect","ngModelChange"],["showButtonBar","true","showIcon","true","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"yearNavigator","ngModel","onSelect","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"select",2),c.NdJ("ngModelChange",function(e){return t.filter.type=e})("change",function(){return t.load()}),c.TgZ(3,"option",3),c._uU(4,"Hourly"),c.qZA(),c.TgZ(5,"option",4),c._uU(6,"Daily"),c.qZA(),c.TgZ(7,"option",5),c._uU(8,"Monthly"),c.qZA(),c.qZA(),c.YNc(9,Hp,2,2,"select",6),c.YNc(10,Rp,3,2,"div",7),c.YNc(11,Vp,3,2,"div",7),c.qZA(),c.qZA(),c._UZ(12,"br"),c.TgZ(13,"div",8),c.TgZ(14,"div",9),c.TgZ(15,"div",10),c._uU(16," Chart is loading... "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngModel",t.filter.type),c.xp6(7),c.Q6J("ngIf","monthly"==t.filter.type),c.xp6(1),c.Q6J("ngIf","daily"==t.filter.type),c.xp6(1),c.Q6J("ngIf","hourly"==t.filter.type))},directives:[Y.M2,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.O5,Q.sg,Ha.f],styles:[""]}),e}();function Ep(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterOptions",a.filterOptions)("advancedFilterFields",a.filterFields)}}var Kp=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.route=a,this.auth=i,this.tr=n,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"operation",label:this.tr.translate("manager_journal_table_operation")},{dataKey:"cr_manager",label:this.tr.translate("manager_journal_table_cr"),sortBy:"cr"},{dataKey:"dr_manager",label:this.tr.translate("manager_journal_table_dr"),sortBy:"dr"},{dataKey:"amount",label:this.tr.translate("manager_journal_table_amount")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"operation",label:"Operation",type:"select",cols:12,value:"deposit",options:[{label:"Deposit",value:"deposit"},{label:"Withdrawal",value:"withdrawal"}]},{key:"manager_id",label:"Manager",type:"select2",cols:12,value:-1,options:[]},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={dataUrl:"report/depodrawal",primaryKey:"id",title:"Money Transfer Report",icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:!0},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:"All Managers"}),e.filterOptions.manager_id=n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz),c.Y36(w),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-depodrawals-report"]],decls:1,vars:1,consts:[["name","depodrawal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","depodrawal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["depodrawal_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Ep,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),Bp=n(78556),jp=function(){return{height:"450px"}};function zp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"p-editor",11),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().messageBody=e}),c.qZA()}if(2&e){var i=c.oxw();c.Akn(c.DdM(3,jp)),c.Q6J("ngModel",i.messageBody)}}function Gp(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"textarea",12),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().messageBody=e}),c.qZA()}if(2&e){var i=c.oxw();c.Akn(c.DdM(3,jp)),c.Q6J("ngModel",i.messageBody)}}var Wp=function(){function e(t,a,i){o(this,e),this.api=t,this.toast=a,this.tr=i,this.editorMode="normal"}return l(e,[{key:"ngOnInit",value:function(){this.load(),Bp.builtinPlugins.map(function(e){console.log(e.pluginName)})}},{key:"load",value:function(){var e=this;this.blockUI.start(),this.api.get("welcomeScreen").subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.messageBody=t.data)})}},{key:"save",value:function(){var e=this;this.api.post("welcomeScreen",{data:this.messageBody}).subscribe(function(t){200===t.status&&e.toast.success(e.tr.translate(t.message))})}}]),e}();function $p(e,t){if(1&e&&(c.TgZ(0,"div",8),c.TgZ(1,"div",9),c.TgZ(2,"span",10),c._uU(3),c.qZA(),c.TgZ(4,"span",11),c._uU(5),c.qZA(),c.qZA(),c._UZ(6,"br"),c.TgZ(7,"div",12),c._uU(8),c.qZA(),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(3),c.AsE("(",a.user_details.username,") ",a.user_details.firstname+" "+a.user_details.lastname,""),c.xp6(2),c.Oqu(a.created_at),c.xp6(3),c.hij(" ",a.message," ")}}function Xp(e,t){if(1&e&&(c.TgZ(0,"div",13),c.TgZ(1,"div",9),c.TgZ(2,"span",10),c._uU(3),c.qZA(),c.TgZ(4,"span",11),c._uU(5),c.qZA(),c.qZA(),c._UZ(6,"br"),c.TgZ(7,"div",12),c._uU(8),c.qZA(),c.qZA()),2&e){var a=c.oxw().$implicit;c.xp6(3),c.Oqu(a.manager_details.username),c.xp6(2),c.Oqu(a.created_at),c.xp6(3),c.hij(" ",a.message," ")}}function eg(e,t){if(1&e&&(c.TgZ(0,"div"),c.YNc(1,$p,9,4,"div",6),c.YNc(2,Xp,9,3,"div",7),c.qZA()),2&e){var a=t.$implicit;c.xp6(1),c.Q6J("ngIf",null==a.user_details?null:a.user_details.id),c.xp6(1),c.Q6J("ngIf",null==a.manager_details?null:a.manager_details.id)}}Wp.\u0275fac=function(e){return new(e||Wp)(c.Y36(Z),c.Y36(v._W),c.Y36(I))},Wp.\u0275cmp=c.Xpm({type:Wp,selectors:[["app-welcome-screen"]],decls:16,vars:2,consts:[[1,"card"],[1,"card-header","card-default"],[1,"fa","fa-sign"],["tooltip","Toggle HTML source view",1,"float-right",2,"cursor","pointer",3,"click"],[1,"fa","fa-code"],[1,"card-body"],[3,"ngModel","style","ngModelChange",4,"ngIf"],["class","form-control",3,"ngModel","style","ngModelChange",4,"ngIf"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"click"],["type","button",1,"btn","btn-default","form-action-button",3,"click"],[3,"ngModel","ngModelChange"],[1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Welcome Screen Editor "),c.TgZ(4,"a",3),c.NdJ("click",function(){return t.editorMode="normal"==t.editorMode?"html":"normal"}),c._UZ(5,"i",4),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.YNc(7,zp,1,4,"p-editor",6),c.YNc(8,Gp,1,4,"textarea",7),c.TgZ(9,"div"),c._UZ(10,"hr"),c.TgZ(11,"div",8),c.TgZ(12,"button",9),c.NdJ("click",function(){return t.save()}),c._uU(13,"Save"),c.qZA(),c.TgZ(14,"button",10),c.NdJ("click",function(){return t.load()}),c._uU(15,"Reset"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf","normal"==t.editorMode),c.xp6(1),c.Q6J("ngIf","html"==t.editorMode))},directives:[Q.O5,cc.ML,A.JJ,A.On,A.Fj],styles:["[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:500px!important}"]}),(0,g.gn)([(0,m.bH)()],Wp.prototype,"blockUI",void 0);var tg=function(){var e=function(){function e(t){o(this,e),this.api=t,this.thread_id=null,this.message=null}return l(e,[{key:"ngOnInit",value:function(){}},{key:"scrollToButtom",value:function(){var e=document.getElementById("messages_container");e.scrollTop=e.scrollHeight}},{key:"loadThread",value:function(e){var t=this;this.api.get("ticket/"+e).subscribe(function(a){200===a.status&&(t.thread_id=e,t.thread=a.data,t.scrollToButtom())})}},{key:"sendMessage",value:function(){var e=this;this.message&&this.message.length>1&&this.api.post("ticket",{thread_id:this.thread_id,message:this.message}).subscribe(function(t){200===t.status&&(e.loadThread(e.thread_id),e.message=null)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-ticket-thread"]],decls:10,vars:3,consts:[[1,"wrapper"],["id","messages_container",1,"messages-wrapper"],[4,"ngFor","ngForOf"],[1,"message-reply"],["placeholder","write your response here",1,"form-control",2,"height","90%",3,"ngModel","ngModelChange"],[1,"btn","btn-primary","float-right",2,"margin-top","5px","width","100px",3,"click"],["class","message-container user-message-container",4,"ngIf"],["class","message-container manager-message-container",4,"ngIf"],[1,"message-container","user-message-container"],[2,"width","100%"],[1,"message-writer","float-left"],[1,"message-writer","float-right"],[1,"message-content"],[1,"message-container","manager-message-container"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"h4"),c._uU(2),c.qZA(),c._UZ(3,"hr"),c.TgZ(4,"div",1),c.YNc(5,eg,3,2,"div",2),c.qZA(),c.TgZ(6,"div",3),c.TgZ(7,"textarea",4),c.NdJ("ngModelChange",function(e){return t.message=e}),c.qZA(),c.TgZ(8,"button",5),c.NdJ("click",function(){return t.sendMessage()}),c._uU(9,"Send"),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Oqu(null==t.thread?null:t.thread.subject),c.xp6(3),c.Q6J("ngForOf",null==t.thread?null:t.thread.messages),c.xp6(2),c.Q6J("ngModel",t.message))},directives:[Q.sg,A.Fj,A.JJ,A.On,Q.O5],styles:['.wrapper[_ngcontent-%COMP%]{height:100%;width:100%}.messages-wrapper[_ngcontent-%COMP%]{width:100%;height:70%;overflow-y:scroll;padding:5px}.message-container[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:5px;width:85%;margin-top:10px;padding:10px;min-height:40px}.user-message-container[_ngcontent-%COMP%]{background:rgb(255,255,255);background:linear-gradient(to bottom,rgba(255,255,255,1) 0%,rgba(246,246,246,1) 47%,rgba(237,237,237,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#ededed",GradientType=0);float:left}.manager-message-container[_ngcontent-%COMP%]{background:rgb(234,239,181);background:linear-gradient(to bottom,rgba(234,239,181,1) 0%,rgba(225,233,160,1) 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#eaefb5",endColorstr="#e1e9a0",GradientType=0);float:right}.message-writer[_ngcontent-%COMP%]{font-size:.8rem;font-weight:lighter}.message-content[_ngcontent-%COMP%]{display:block;padding-top:5px}.message-reply[_ngcontent-%COMP%]{height:20%;width:100%;margin-top:5px}']}),e}(),ag=["ticket_thread"],ig=["tickets_model_view"];function ng(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",20,21),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var og=function(){return{width:"400px"}},rg=function(){return{width:"550px"}},lg=function(){function e(t,a,i,n){o(this,e),this.api=t,this.tr=a,this.toastr=i,this.confirmationService=n,this.columns=[{dataKey:"id",label:"ID",hidden:!0},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"subject",label:this.tr.translate("global_subject"),class:"href"},{dataKey:"username",label:this.tr.translate("global_username"),parentKey:"user_details"},{dataKey:"firstname",label:this.tr.translate("global_firstname"),parentKey:"user_details"},{dataKey:"lastname",label:this.tr.translate("global_lastname"),parentKey:"user_details"},{dataKey:"closed",label:this.tr.translate("global_status"),dataResolver:function(e,t){var a="";return a+=1===t.closed?" closed ":" open ",a+=1===t.solved?" ,solved ":" ,unsolved "},classFn:function(e){return 1===e.closed?"row-ticket-closed":"row-ticket-open"}}],this.actions=[{name:"create_ticket",label:this.tr.translate("tickets_action_create"),icon:"",requiresRow:!1,acl:"prm_any",inline:!1},{name:"close_ticket",label:this.tr.translate("tickets_action_close"),icon:"",requiresRow:!0,acl:"prm_any",inline:!0},{name:"delete_ticket",label:this.tr.translate("global_actions_delete"),icon:"",requiresRow:!0,acl:"prm_any",inline:!0}],this.sidebar_visible=!1,this.modelViewConfig=null,this.close_ticket_dialog_visible=!1,this.close_status=!1,this.selected_user=null,this.suggestions=[],this.selected_thread_id=null,this.new_ticket_dialog_visible=!1,this.new_ticket={user:null,subject:""}}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"User Tickets",icon:"fa fa-life-ring",columns:this.columns,dataUrl:"index/tickets",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:!0,modelName:"ticket",hasAdvancedFilter:!1,showRowsCount:!0,sortBy:"id",direction:"desc",hasInlineActions:!0}}},{key:"onCellClicked",value:function(e){"subject"===e.column&&(this.sidebar_visible=!0,this.threadComponent.loadThread(e.row.id))}},{key:"onAction",value:function(e){switch(e.row&&(this.selected_thread_id=e.row.id),e.action){case"close_ticket":this.close_ticket_dialog_visible=!0;break;case"create_ticket":this.new_ticket_dialog_visible=!0;break;case"delete_ticket":this.deleteTicket()}}},{key:"closeTicket",value:function(){var e=this;this.api.post("ticket/close",{thread_id:this.selected_thread_id,is_solved:this.close_status}).subscribe(function(t){200===t.status&&(e.ticketsModalView.reload(),e.close_ticket_dialog_visible=!1)})}},{key:"search",value:function(e){var t=this,a=e.query;a.length<2||this.api.post("index/user",{search:a}).subscribe(function(e){t.suggestions=[],e.data.map(function(e){t.suggestions.push({id:e.id,name:"<"+e.username+"> "+e.firstname+" "+e.lastname})})})}},{key:"create",value:function(){var e=this;this.api.post("ticket/create",{user_id:this.new_ticket.user.id,subject:this.new_ticket.subject}).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.ticketsModalView.reload())})}},{key:"deleteTicket",value:function(){var e=this;this.confirmationService.confirm({message:this.tr.translate("tickets_confirm_delete"),header:"Confirmation",icon:"pi pi-exclamation-triangle",accept:function(){e.blockUI.start(),e.api.delete("ticket/"+e.selected_thread_id).subscribe(function(t){e.blockUI.stop(),e.toastr.success(e.tr.translate(t.message)),e.ticketsModalView.reload()})}})}}]),e}();function sg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td",12),c._uU(2),c.qZA(),c.TgZ(3,"td",13),c.TgZ(4,"div",17),c._uU(5),c.qZA(),c.TgZ(6,"p-slider",14),c.NdJ("ngModelChange",function(e){var t=c.CHM(a).$implicit;return c.oxw().multiplier[t.id]=e}),c.qZA(),c.qZA(),c.TgZ(7,"td",15),c._uU(8),c.ALo(9,"bitrate"),c.ALo(10,"bitrate"),c.qZA(),c.qZA()}if(2&e){var i=t.$implicit,n=c.oxw();c.xp6(2),c.Oqu(i.name),c.xp6(3),c.hij("%",n.multiplier[i.id],""),c.xp6(1),c.Q6J("min",25)("max",200)("ngModel",n.multiplier[i.id]),c.xp6(2),c.AsE(" ",c.lcZ(9,7,(i.downrate*(n.multiplier[i.id]/100)).toString())," / ",c.lcZ(10,9,(i.uprate*(n.multiplier[i.id]/100)).toString())," ")}}lg.\u0275fac=function(e){return new(e||lg)(c.Y36(Z),c.Y36(I),c.Y36(v._W),c.Y36(Ci.YP))},lg.\u0275cmp=c.Xpm({type:lg,selectors:[["app-user-tickets"]],viewQuery:function(e,t){var a;(1&e&&(c.Gf(ag,5),c.Gf(ig,5)),2&e)&&(c.iGM(a=c.CRH())&&(t.threadComponent=a.first),c.iGM(a=c.CRH())&&(t.ticketsModalView=a.first))},decls:33,vars:20,consts:[["name","tickets_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["position","right","baseZIndex","999","styleClass","ui-sidebar-md",3,"visible","visibleChange"],["id","ticket_thread"],["ticket_thread",""],["header","Close Ticket",3,"visible","modal","draggable","visibleChange"],["closeTicketDialog",""],[1,"form-check"],["type","checkbox","id","exampleCheck1",1,"form-check-input",3,"ngModel","ngModelChange"],["for","exampleCheck1",1,"form-check-label"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["header","New Support Ticket",3,"visible","modal","draggable","visibleChange"],["newTicketDialog",""],[1,"form"],[1,"mb-3"],[1,"ui-g","ui-fluid","w-100"],[1,"ui-g-12","p-0"],["name","user",3,"ngModel","suggestions","field","placeholder","ngModelChange","completeMethod"],["type","text","name","subject","id","subject","placeholder","Subject",1,"form-control",3,"ngModel","ngModelChange"],["name","tickets_model_view",3,"modelViewConfig","onAction","onCellClicked"],["tickets_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,ng,2,1,"model-table-view",0),c.TgZ(1,"p-sidebar",1),c.NdJ("visibleChange",function(e){return t.sidebar_visible=e}),c._UZ(2,"app-ticket-thread",2,3),c.qZA(),c.TgZ(4,"p-dialog",4,5),c.NdJ("visibleChange",function(e){return t.close_ticket_dialog_visible=e}),c.TgZ(6,"div",6),c.TgZ(7,"input",7),c.NdJ("ngModelChange",function(e){return t.close_status=e}),c.qZA(),c.TgZ(8,"label",8),c._uU(9,"Problem Solved"),c.qZA(),c.qZA(),c._UZ(10,"br"),c.TgZ(11,"div",9),c.TgZ(12,"button",10),c.NdJ("click",function(){return t.close_ticket_dialog_visible=!1}),c._uU(13,"Cancel"),c.qZA(),c.TgZ(14,"button",11),c.NdJ("click",function(){return t.closeTicket()}),c._uU(15,"Close Ticket"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"p-dialog",12,13),c.NdJ("visibleChange",function(e){return t.new_ticket_dialog_visible=e}),c.TgZ(18,"form",14),c._UZ(19,"br"),c.TgZ(20,"div",15),c.TgZ(21,"div",16),c.TgZ(22,"div",17),c.TgZ(23,"p-autoComplete",18),c.NdJ("ngModelChange",function(e){return t.new_ticket.user=e})("completeMethod",function(e){return t.search(e)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(24,"div",15),c.TgZ(25,"input",19),c.NdJ("ngModelChange",function(e){return t.new_ticket.subject=e}),c.qZA(),c.qZA(),c.qZA(),c._UZ(26,"br"),c.TgZ(27,"div",9),c.TgZ(28,"button",10),c.NdJ("click",function(){return t.new_ticket_dialog_visible=!1}),c._uU(29,"Cancel"),c.qZA(),c.TgZ(30,"button",11),c.NdJ("click",function(){return t.create()}),c._uU(31,"Create"),c.qZA(),c.qZA(),c.qZA(),c._UZ(32,"p-confirmDialog")),2&e&&(c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Q6J("visible",t.sidebar_visible),c.xp6(3),c.Akn(c.DdM(18,og)),c.Q6J("visible",t.close_ticket_dialog_visible)("modal",!0)("draggable",!0),c.xp6(3),c.Q6J("ngModel",t.close_status),c.xp6(9),c.Akn(c.DdM(19,rg)),c.Q6J("visible",t.new_ticket_dialog_visible)("modal",!0)("draggable",!0),c.xp6(7),c.Q6J("ngModel",t.new_ticket.user)("suggestions",t.suggestions)("field","name")("placeholder","Select Client"),c.xp6(2),c.Q6J("ngModel",t.new_ticket.subject))},directives:[Q.O5,Ua.Y,tg,Oi.V,A.Wl,A.JJ,A.On,A._Y,A.JL,A.F,Zu.Qc,A.Fj,F.Q,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],lg.prototype,"blockUI",void 0);var cg=function(){var e=function(){function e(t,a,i){o(this,e),this.api=t,this.tr=a,this.toastr=i,this.profiles=[],this.multiplier=[],this.master_multiplier=100}return l(e,[{key:"ngOnInit",value:function(){this.load()}},{key:"load",value:function(){var e=this;this.api.get("bandwidthController").subscribe(function(t){200===t.status&&(e.profiles=t.data),e.profiles.map(function(t){e.multiplier[t.id]=t.bandwidth_multiplier})})}},{key:"changeAll",value:function(){var e=this;this.profiles.map(function(t){e.multiplier[t.id]=e.master_multiplier})}},{key:"reset",value:function(){var e=this;this.profiles.map(function(t){e.multiplier[t.id]=100}),this.master_multiplier=100}},{key:"save",value:function(){var e=this,t=[];this.profiles.map(function(a){t.push({profile_id:a.id,multiplier:e.multiplier[a.id]})}),this.api.post("bandwidthController",{multipliers:t}).subscribe(function(t){200===t.status&&e.toastr.success(e.tr.translate(t.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I),c.Y36(v._W))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-bandwidth-controller"]],decls:27,vars:4,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-cogs"],[1,"card-body"],[1,"row"],[1,"col-12"],[1,"toolbar"],[1,"btn","btn-secondary",3,"click"],[1,"fa","fa-sync"],[1,"btn-group"],[1,"btn","btn-primary","btn-100px",3,"click"],[1,"btn","btn-secondary","btn-100px",3,"click"],["width","20%",1,"td-profile-name"],[1,"td-speed-slider"],[3,"min","max","ngModel","ngModelChange"],["width","30%",1,"td-profile-speed"],[4,"ngFor","ngForOf"],["stlye","width: 100%",1,"text-center"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Bandwidth Controller "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"button",7),c.NdJ("click",function(){return t.load()}),c._UZ(9,"i",8),c.qZA(),c.TgZ(10,"div",9),c.TgZ(11,"button",10),c.NdJ("click",function(){return t.save()}),c._uU(12,"Save"),c.qZA(),c.TgZ(13,"button",11),c.NdJ("click",function(){return t.reset()}),c._uU(14,"Reset"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(15,"div",4),c.TgZ(16,"div",5),c.TgZ(17,"table"),c.TgZ(18,"tr"),c.TgZ(19,"td",12),c._uU(20,"All Profiles"),c.qZA(),c.TgZ(21,"td",13),c.TgZ(22,"p-slider",14),c.NdJ("ngModelChange",function(e){return t.master_multiplier=e})("ngModelChange",function(){return t.changeAll()}),c.qZA(),c.qZA(),c._UZ(23,"td",15),c.qZA(),c.qZA(),c._UZ(24,"br"),c.TgZ(25,"table"),c.YNc(26,sg,11,11,"tr",16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(22),c.Q6J("min",25)("max",200)("ngModel",t.master_multiplier),c.xp6(4),c.Q6J("ngForOf",t.profiles))},directives:[pd.iR,A.JJ,A.On,Q.sg],pipes:[Et],styles:["table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e9e9e9;padding:15px}.td-profile-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:lighter;text-align:right}.td-profile-speed[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:lighter;text-align:left}.toolbar[_ngcontent-%COMP%]{width:100%;padding:6px;background:#eaeaea}.toolbar[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]{float:right}.toolbar[_ngcontent-%COMP%]   .btn-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]}),e}(),ug=n(4207),dg=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.tr=a,this.config=i,this.auth=n,this.managers_list=[],this.filter={manager_id:null,from_date:null,to_date:null},this.stats={qty:null,val:null},this.currency=this.config.siteConfig.site_currency}return l(e,[{key:"ngOnInit",value:function(){this.loadResources(),this.filter.manager_id=this.auth.client.id}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){e.managers_list=[],e.managers_list.unshift({value:-1,label:e.tr.translate("global_user_control_panel")});var a,n=i(t.data);try{for(n.s();!(a=n.n()).done;){var o=a.value;e.managers_list.push({value:o.id,label:o.username})}}catch(r){n.e(r)}finally{n.f()}})}},{key:"load",value:function(){var e=this,t={manager_id:this.filter.manager_id},a=null,i=null;this.filter.from_date&&(a=this.filter.from_date.getFullYear()+"-"+parseInt(this.filter.from_date.getMonth()+1)+"-"+this.filter.from_date.getDate()),this.filter.to_date&&(i=this.filter.to_date.getFullYear()+"-"+parseInt(this.filter.to_date.getMonth()+1)+"-"+this.filter.to_date.getDate()),t.from_date=a,t.to_date=i,this.api.post("cardsReport/usage",t).subscribe(function(t){200===t.status&&(e.stats=t.data.stats,e._initChart(t.data.distribution))})}},{key:"_initChart",value:function(e){for(var t={chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie"},title:{text:"Cards Usage By Value"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0},showInLegend:!0}},series:[{name:"Qty",colorByPoint:!0}]},a=0,i=[];a<e.length&&a<11;)i.push({name:e[a].value,y:e[a].qty}),a++;t.series[0].data=i,E.chart("chart_container",t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I),c.Y36(p),c.Y36(w))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-cards-usage-report"]],decls:34,vars:20,consts:[[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],[1,"ui-g"],[1,"ui-g-12","p-0"],["name","value",3,"options","autoDisplayFirst","filter","ngModel","ngModelChange","onChange"],[1,"ui-g","ui-fluid"],["showButtonBar","true","showIcon","true","placeholder","From Date","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"inputId","name","yearNavigator","ngModel","maxDate","onSelect","ngModelChange"],["showButtonBar","true","showIcon","true","placeholder","To Date","dateFormat","dd/mm/yy","yearRange","2019:2030",3,"inputId","name","yearNavigator","ngModel","minDate","onSelect","ngModelChange"],["label","",3,"icon","onClick"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-sm-12","col-md-7"],["id","chart_container"],[1,"col-sm-12","col-md-5"],[1,"stats-table"],[1,"td-label"],[1,"td-value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"p-dropdown",4),c.NdJ("ngModelChange",function(e){return t.filter.manager_id=e})("onChange",function(){return t.load()}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(5,"div",5),c.TgZ(6,"div",3),c.TgZ(7,"p-calendar",6),c.NdJ("onSelect",function(){return t.load()})("ngModelChange",function(e){return t.filter.from_date=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(8,"div",5),c.TgZ(9,"div",3),c.TgZ(10,"p-calendar",7),c.NdJ("onSelect",function(){return t.load()})("ngModelChange",function(e){return t.filter.to_date=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(11,"div",5),c.TgZ(12,"div",3),c.TgZ(13,"p-button",8),c.NdJ("onClick",function(){return t.load()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(14,"br"),c.TgZ(15,"div",9),c.TgZ(16,"div",10),c.TgZ(17,"div",11),c.TgZ(18,"div",12),c.TgZ(19,"div",13),c._uU(20," Chart is loading... "),c.qZA(),c.qZA(),c.TgZ(21,"div",14),c.TgZ(22,"table",15),c.TgZ(23,"tr"),c.TgZ(24,"td",16),c._uU(25,"Cards Used"),c.qZA(),c.TgZ(26,"td",17),c._uU(27),c.qZA(),c.qZA(),c.TgZ(28,"tr"),c.TgZ(29,"td",16),c._uU(30,"Total Value"),c.qZA(),c.TgZ(31,"td",17),c._uU(32),c.ALo(33,"currency"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("options",t.managers_list)("autoDisplayFirst",!1)("filter",!0)("ngModel",t.filter.manager_id),c.xp6(3),c.Q6J("inputId","a31")("name","from_date")("yearNavigator",!0)("ngModel",t.filter.from_date)("maxDate",t.filter.to_date),c.xp6(3),c.Q6J("inputId","a32")("name","to_date")("yearNavigator",!0)("ngModel",t.filter.to_date)("minDate",t.filter.from_date),c.xp6(3),c.Q6J("icon","fa fa-sync"),c.xp6(14),c.Oqu(t.stats.qty),c.xp6(5),c.Oqu(c.xi3(33,17,t.stats.val,t.currency)))},directives:[Y.M2,ya.Lt,A.JJ,A.On,Ha.f,ug.zx],pipes:[Q.H9],styles:[".ui-fluid[_ngcontent-%COMP%]{margin-left:5px!important;margin-right:5px!important}.stats-table[_ngcontent-%COMP%]{width:100%}.stats-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eee8d5;height:50px}.td-label[_ngcontent-%COMP%]{font-size:1rem;font-weight:lighter}.td-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:lighter}"]}),e}();function fg(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c._UZ(2,"br"),c.qZA()),2&e){var a=t.$implicit;c.xp6(1),c.hij(" ",a,"")}}var pg=function(){var e=function(){function e(t){o(this,e),this.api=t,this.log=[]}return l(e,[{key:"ngOnInit",value:function(){this.poll()}},{key:"poll",value:function(){this.consoleDiv=document.getElementById("console"),this.xhr=this.api.xhr("radius/log"),this.xhr.onprogress=(function(e){var t=this.xhr.responseText.split("\n");this.log=t,this.consoleDiv.scrollTop=this.consoleDiv.scrollHeight}).bind(this),this.xhr.onload=(function(e){console.log("finished")}).bind(this),this.xhr.send()}},{key:"ngOnDestroy",value:function(){console.log("aborting xhr"),this.xhr.abort()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-radius-log"]],decls:8,vars:1,consts:[[1,"card"],[1,"card-header","card-default"],[1,"card-body"],[1,"row"],[1,"col-12"],["id","console",1,"console"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._uU(2," FreeRADIUS Log "),c.qZA(),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,fg,3,1,"span",6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngForOf",t.log))},directives:[Q.sg],styles:['.console[_ngcontent-%COMP%]{width:100%;height:75rem;background:#464646;color:#eee8d5;font-family:"Courier New","Monospace";font-size:14px;overflow-y:auto;padding:10px}']}),e}(),gg=["myForm"];function hg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"dynamic-form",7,8),c.NdJ("submit",function(e){return c.CHM(a),c.oxw().save(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("formConfig",i.form_config)("options",i.options)}}var mg=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.formsLoader=a,this.toastr=i,this.tr=n,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options={}}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("settings_telegram"),this.form_config.fields=this.formFields,this.load()}},{key:"load",value:function(){var e=this;this.api.get("settings/telegram_").subscribe(function(t){200===t.status&&e.myForm.setFormValue(t.data)})}},{key:"save",value:function(e){var t=this;this.api.post("settings/telegram",e.value).subscribe(function(e){200===e.status&&t.toastr.success(t.tr.translate(e.message))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(ki),c.Y36(v._W),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-telegram-settings"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(gg,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:8,vars:1,consts:[[1,"card"],[1,"card-header"],[1,"fab","fa-telegram-plane"],[1,"card-body"],[1,"row"],[1,"col"],["name","myForm",3,"formConfig","options","submit",4,"ngIf"],["name","myForm",3,"formConfig","options","submit"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3," Telegram Settings "),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,hg,2,2,"dynamic-form",6),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngIf",t.form_config.fields.length>0))},directives:[Q.O5,qi],styles:[""]}),e}();function _g(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",3),c._UZ(2,"i",4),c._UZ(3,"br"),c._uU(4," Waiting for Kushok "),c.qZA(),c.qZA())}function vg(e,t){if(1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",5),c._UZ(2,"i",6),c._UZ(3,"br"),c._uU(4," Your payment was successful. "),c.qZA(),c._UZ(5,"br"),c.TgZ(6,"p",7),c._uU(7," Deposit amount is "),c.TgZ(8,"b"),c._uU(9),c.qZA(),c._UZ(10,"br"),c._UZ(11,"br"),c._uU(12," Thank you for using Kushok. "),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(9),c.AsE("",a.transaction_data.currency," ",a.transaction_data.amount,"")}}function bg(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",8),c._UZ(2,"i",9),c._UZ(3,"br"),c._uU(4," Payment Failed ! "),c.qZA(),c.qZA())}var Zg=function(){var e=function(){function e(t,a){o(this,e),this.route=t,this.api=a,this.payment_status="pending",this.transaction_data={}}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.trans_id&&e.api.get("paymentGatewayTransaction/"+t.trans_id).subscribe(function(t){200===t.status?"success"===t.data.status&&(e.payment_status="success",e.transaction_data=t.data):e.payment_status="failure"})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.gz),c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-kushok-result"]],decls:5,vars:3,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"payment-success"],[1,"fa","fa-3x","fa-check-circle"],[1,"text-center"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,_g,5,0,"div",2),c.YNc(3,vg,13,2,"div",2),c.YNc(4,bg,5,0,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf","pending"===t.payment_status),c.xp6(1),c.Q6J("ngIf","success"===t.payment_status),c.xp6(1),c.Q6J("ngIf","failure"===t.payment_status))},directives:[Q.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e}(),yg=["notifications_model_view"];function wg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filter_fields)("advancedFilterOptions",i.filter_options)}}var xg=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.swal=a,this.toastr=i,this.tr=n,this.router=r,this.columns=[{dataKey:"threshold",label:"Threshold",class:"href",dataResolver:function(e){return"threshold_"+e+"%"}},{dataKey:"ProfileName",parentKey:"profile_details",label:"Profile",class:"href",sortBy:"profile_id"},{dataKey:"check_counter",label:"Counter"},{dataKey:"sms_enabled",label:"SMS",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"telegram_enabled",label:"Telegram",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"email_enabled",label:"Email",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"webhook_enabled",label:"Webhook",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.actions=[{name:"create",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus"},{name:"copy",label:this.tr.translate("global_actions_copy"),icon:"fa fa-copy",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"edit",label:this.tr.translate("global_actions_edit"),icon:"fa fa-edit",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_managers_sysadmin",requiresRow:!0}],this.filter_options=[],this.filter_fields=[{key:"profile_id",label:"Profile",type:"select2",options:[],layout:"vertical",cols:12,value:-1}]}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Profile Notifications",icon:"",columns:this.columns,dataUrl:"index/ProfileNotification",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"ProfileNotification",hasAdvancedFilter:!0,showRowsCount:!0},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("list/profile/0").subscribe(function(t){var a=[];a.push({value:-1,label:"All"}),200===t.status&&(t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.filter_options.profile_id=a)})}},{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"create":this.router.navigate(["profiles/notification"]);break;case"edit":this.router.navigate(["profiles/notification",t]);break;case"delete":this.destroy(t);break;case"copy":this.copy()}}},{key:"onCellClicked",value:function(e){"threshold"===e.column&&this.router.navigate(["profiles/notification",e.row.id]),"ProfileName"===e.column&&this.router.navigate(["profile",e.row.profile_id])}},{key:"destroy",value:function(e){var t=this;this.swal.confirm({title:"Delete Notification",type:"warning",text:"Delete Selected Notification ?",confirmButtonText:"Yes"}).subscribe(function(a){t.api.delete("ProfileNotification/"+e).subscribe(function(e){200===e.status&&(t.toastr.success(t.tr.translate(e.message)),t.modelView.reload())})})}},{key:"copy",value:function(){var e=this,t=null;this.modelView.currentRow&&(t=this.modelView.currentRow.id),this.swal.prompt("New Threshold").subscribe(function(a){e.api.post("ProfileNotification/copy",{notification_id:t,new_threshold:a}).subscribe(function(t){200===t.status&&(e.toastr.success(e.tr.translate(t.message)),e.modelView.reload())})})}}]),e}();xg.\u0275fac=function(e){return new(e||xg)(c.Y36(Z),c.Y36(tt),c.Y36(v._W),c.Y36(I),c.Y36(_.F0))},xg.\u0275cmp=c.Xpm({type:xg,selectors:[["app-profile-notifications"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(yg,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","notifications_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["name","notifications_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["notifications_model_view",""]],template:function(e,t){1&e&&c.YNc(0,wg,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],xg.prototype,"blockUI",void 0);var Ag=["myForm"],qg=function(){var e=function(){function e(t,a,i){o(this,e),this.location=t,this.formsLoader=a,this.api=i,this.options=[]}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("traffic_usage_notifications"),this.loadResources()}},{key:"loadResources",value:function(){var e=this,t=[],a=[];this.api.get("list/profile/0").subscribe(function(a){200===a.status&&(a.data.map(function(e){t.push({label:e.name,value:e.id})}),e.options.profile_id=t)}),this.api.get("emailTemplate").subscribe(function(t){t.data.map(function(e){a.push({value:e.id,label:e.name})}),e.options.email_template_id=a})}},{key:"onSubmit",value:function(e){this.location.back()}},{key:"onFormChanged",value:function(e){1==e.sms_enabled&&this.myForm.showField("sms_message"),0==e.sms_enabled&&this.myForm.hideField("sms_message"),1==e.telegram_enabled&&this.myForm.showField("telegram_message"),0==e.telegram_enabled&&this.myForm.hideField("telegram_message"),1==e.email_enabled&&this.myForm.showField("email_template_id"),0==e.email_enabled&&this.myForm.hideField("email_template_id"),1==e.webhook_enabled&&this.myForm.showField("webhook_url"),0==e.webhook_enabled&&this.myForm.hideField("webhook_url")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Q.Ye),c.Y36(ki),c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-usage-notification-form"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Ag,5),2&e)&&(c.iGM(a=c.CRH())&&(t.myForm=a.first))},decls:2,vars:4,consts:[["name","myForm",3,"fields","options","title","icon","resourceRoute","submit","formChanged","cancel"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0,1),c.NdJ("submit",function(e){return t.onSubmit(e)})("formChanged",function(e){return t.onFormChanged(e)})("cancel",function(){return t.location.back()}),c.qZA()),2&e&&c.Q6J("fields",t.formFields)("options",t.options)("title","Usage Notification Form")("resourceRoute","ProfileNotification")},directives:[Ji],styles:[""]}),e}(),Tg=["model_view"];function kg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",1,2),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filter_fields)("advancedFilterOptions",i.filter_options)}}var Cg=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.swal=a,this.toastr=i,this.tr=n,this.router=r,this.columns=[{dataKey:"name",label:"Addon Name",class:"href"},{dataKey:"expiration_amount",label:"Expiration",dataResolver:function(e,t){var a=e.toString(),i="Day(s)";return 1==t.expiration_unit&&(i="Month(s)"),2==t.expiration_unit&&(i="Hour(s)"),3==t.expiration_unit&&(i="Minute(s)"),a+" "+i}},{dataKey:"set_address_list",label:"Set Address List",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"set_pool_name",label:"Set Pool Name",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}},{dataKey:"call_url",label:"Call Url",type:"icon",dataResolver:function(e){if(1==e)return"fa fa-check"}}],this.modelViewConfig=null,this.actions=[{name:"create",label:"New",icon:"fa fa-plus"},{name:"edit",label:"Edit",icon:"fa fa-edit",inline:!0,requiresRow:!0,acl:"prm_managers_sysadmin"},{name:"delete",label:"Delete",icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_managers_sysadmin",requiresRow:!0}],this.filter_options=[],this.filter_fields=[{key:"profile_id",label:"Profile",type:"select2",options:[],layout:"vertical",cols:12,value:-1}]}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Addons",icon:"",columns:this.columns,dataUrl:"index/Addon",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!1,allowExport:!1,modelName:"Addon",hasAdvancedFilter:!0,showRowsCount:!0}}},{key:"onAction",value:function(e){var t=null;switch(this.modelView.currentRow&&(t=this.modelView.currentRow.id),e.action){case"create":this.router.navigate(["profiles/addon"]);break;case"edit":this.router.navigate(["profiles/addon",t]);break;case"delete":this.destroy(t)}}},{key:"onCellClicked",value:function(e){"name"===e.column&&this.router.navigate(["profiles/addon",e.row.id])}},{key:"destroy",value:function(e){var t=this;this.swal.confirm({title:"Delete Addon",type:"warning",text:"deleted the selected addon ?",confirmButtonText:"Yes"}).subscribe(function(a){t.api.delete("Addon/"+e).subscribe(function(e){200===e.status&&(t.toastr.success(t.tr.translate(e.message)),t.modelView.reload())})})}}]),e}();Cg.\u0275fac=function(e){return new(e||Cg)(c.Y36(Z),c.Y36(tt),c.Y36(v._W),c.Y36(I),c.Y36(_.F0))},Cg.\u0275cmp=c.Xpm({type:Cg,selectors:[["app-addons"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Tg,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:1,vars:1,consts:[["name","model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked",4,"ngIf"],["name","model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction","onCellClicked"],["model_view",""]],template:function(e,t){1&e&&c.YNc(0,kg,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Cg.prototype,"blockUI",void 0);var Ug=["myForm"],Mg=function(){var e=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.toastr=a,this.location=i,this.tr=n,this.formsLoader=r,this.form_config={layout:"horizontal",submitText:"Save",fields:[],helpBlock:"hidden"},this.options=[]}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("addon_form"),this.form_config.fields=this.formFields}},{key:"onFormChange",value:function(e){1==e.set_address_list&&this.formView.showField("address_list"),0==e.set_address_list&&this.formView.hideField("address_list"),1==e.set_pool_name&&this.formView.showField("pool_name"),0==e.set_pool_name&&this.formView.hideField("pool_name"),1==e.call_url&&this.formView.showField("url"),0==e.call_url&&this.formView.hideField("url")}},{key:"onSubmit",value:function(e){this.location.back()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(v._W),c.Y36(Q.Ye),c.Y36(I),c.Y36(ki))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-addon-form"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Ug,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:2,vars:4,consts:[["name","myForm",3,"fields","options","title","icon","resourceRoute","submit","formChanged","cancel"],["myForm",""]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0,1),c.NdJ("submit",function(e){return t.onSubmit(e)})("formChanged",function(e){return t.onFormChange(e)})("cancel",function(){return t.location.back()}),c.qZA()),2&e&&c.Q6J("fields",t.formFields)("options",t.options)("title","Addon Form")("resourceRoute","Addon")},directives:[Ji],styles:[""]}),e}(),Fg=["dataForm"];function Jg(e,t){if(1&e&&c._UZ(0,"dynamic-form",17,18),2&e){var a=c.oxw();c.Q6J("formConfig",a.form_config)("options",a.options)}}function Og(e,t){if(1&e&&(c.TgZ(0,"option",19),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.id),c.xp6(1),c.Oqu(a.name)}}var Ng=function(){function e(t,a,i,n,r,l,s,c,u,d,f){o(this,e),this.tr=t,this.formLoader=a,this.route=i,this.config=n,this.toastr=r,this.ch=l,this.router=s,this.confirmationService=c,this.location=u,this.auth=d,this.api=f,this.form_config={layout:"horizontal",fields:this.formLoader.getForm("user_addon_form"),helpBlock:"hidden",showDiscardButton:!1,showSubmitButton:!1},this.options=[],this.user_id=null,this.user_data={},this.addons_list=[],this.selected_addon_id=-1,this.selected_addon={},this.transaction_id=null,this.activation_data={},this.addon_price=0}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe(function(t){t.id&&(e.user_id=t.id,e.getActivationData(e.user_id))}),this.api.get("Addon").subscribe(function(t){200===t.status&&(e.addons_list=t.data)})}},{key:"onAddonSelected",value:function(){var e=this;this.addons_list.map(function(t){t.id==e.selected_addon_id&&(e.selected_addon=t,e.addon_price=0==e.selected_addon.pricing_type?e.selected_addon.price*e.activation_data.n_required_amount:e.selected_addon.price)})}},{key:"getActivationData",value:function(e){var t=this;this.api.get("user/activationData/"+e).subscribe(function(e){t.activation_data=e.data,t.formView.setFormValue(t.activation_data)})}},{key:"purchase",value:function(){var e=this;this.confirmationService.confirm({message:this.tr.translate("user_addon_form_confirm"),accept:function(){e.api.post("user/addon",{user_id:e.user_id,addon_id:e.selected_addon_id}).subscribe(function(t){200===t.status?(e.toastr.success(e.tr.translate(t.message)),e.location.back()):e.toastr.warning(e.tr.translate(t.message))})}})}}]),e}();function Ig(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",5),c.TgZ(1,"div",6),c.TgZ(2,"h5",7),c._uU(3,"Click the button bellow to enable Two Factor Authentication"),c.qZA(),c._UZ(4,"br"),c.TgZ(5,"button",8),c.NdJ("click",function(){return c.CHM(a),c.oxw().enable2FA()}),c._UZ(6,"i",9),c._uU(7," Enable 2FA"),c.qZA(),c.qZA(),c.qZA()}}function Yg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",10),c.TgZ(1,"div",6),c.TgZ(2,"h4"),c._uU(3,"Please enter the code from your Authenticator app"),c.qZA(),c.TgZ(4,"p",11),c.TgZ(5,"input",12,13),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().otp=e}),c.qZA(),c.qZA(),c.TgZ(7,"button",14),c.NdJ("click",function(){return c.CHM(a),c.oxw().confirm2FA()}),c._uU(8,"Verify Code"),c.qZA(),c._UZ(9,"br"),c._UZ(10,"hr"),c._UZ(11,"img",15),c._UZ(12,"br"),c._UZ(13,"br"),c.TgZ(14,"h5"),c._uU(15,"Please scan the above QR using "),c.TgZ(16,"b"),c._uU(17,"Google Authenticator App"),c.qZA(),c.qZA(),c._UZ(18,"br"),c.TgZ(19,"div",16),c.TgZ(20,"div",17),c.TgZ(21,"a",18),c._UZ(22,"img",19),c.qZA(),c.qZA(),c.TgZ(23,"div",17),c.TgZ(24,"a",20),c._UZ(25,"img",21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(5),c.Q6J("ngModel",i.otp),c.xp6(6),c.MGl("src","data:image/png;base64,",i.qr_image,"",c.LSH)}}function Qg(e,t){if(1&e&&(c.TgZ(0,"div",10),c.TgZ(1,"div",6),c.TgZ(2,"p"),c._UZ(3,"i",22),c.qZA(),c._UZ(4,"br"),c.TgZ(5,"h4"),c._uU(6,"Two Factor Authentication is now enabled for your account"),c.qZA(),c._UZ(7,"br"),c._UZ(8,"img",15),c._UZ(9,"br"),c._UZ(10,"br"),c.TgZ(11,"h5"),c._uU(12,"Please scan the above QR using "),c.TgZ(13,"b"),c._uU(14,"Google Authenticator App"),c.qZA(),c.qZA(),c._UZ(15,"br"),c.TgZ(16,"div",16),c.TgZ(17,"div",17),c.TgZ(18,"a",18),c._UZ(19,"img",19),c.qZA(),c.qZA(),c.TgZ(20,"div",17),c.TgZ(21,"a",20),c._UZ(22,"img",21),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(8),c.MGl("src","data:image/png;base64,",a.qr_image,"",c.LSH)}}function Sg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"div",6),c.TgZ(2,"h4",24),c._uU(3,"Two Factor Authentication is already enabled for your account"),c.qZA(),c.TgZ(4,"div",25),c.NdJ("click",function(){return c.CHM(a),c.oxw().disable2FA()}),c.TgZ(5,"h5",26),c._uU(6,"Disable 2FA?"),c.qZA(),c.qZA(),c.TgZ(7,"h5",24),c._uU(8,"Use "),c.TgZ(9,"b"),c._uU(10,"Google Authenticator App"),c.qZA(),c._uU(11," to login into your account"),c.qZA(),c._UZ(12,"br"),c.TgZ(13,"div",16),c.TgZ(14,"div",27),c.TgZ(15,"a",18),c._UZ(16,"img",28),c.qZA(),c.qZA(),c.TgZ(17,"div",27),c.TgZ(18,"a",20),c._UZ(19,"img",29),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}Ng.\u0275fac=function(e){return new(e||Ng)(c.Y36(I),c.Y36(ki),c.Y36(_.gz),c.Y36(p),c.Y36(v._W),c.Y36(y),c.Y36(_.F0),c.Y36(Ci.YP),c.Y36(Q.Ye),c.Y36(w),c.Y36(Z))},Ng.\u0275cmp=c.Xpm({type:Ng,selectors:[["app-purchase-addon"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Fg,5),2&e)&&(c.iGM(a=c.CRH())&&(t.formView=a.first))},decls:34,vars:16,consts:[[1,"card"],[1,"card-header"],[1,"fa","fa-puzzle-piece"],[1,"card-body"],[1,"row"],[1,"col-md-6","col-sm-12"],["name","dataForm",3,"formConfig","options",4,"ngIf"],[1,"form-group","row"],[1,"col-form-label","text-right"],[1,"col"],["name","selected_addon_id",1,"form-control",3,"ngModel","change","ngModelChange"],["disabled","","value","-1"],[3,"value",4,"ngFor","ngForOf"],[1,"col","form-control-plaintext"],[1,"col","form-control-plaintext",3,"hidden"],[1,"form-actions","float-right"],["type","button",1,"btn","btn-primary","form-action-button",3,"disabled","click"],["name","dataForm",3,"formConfig","options"],["dataForm",""],[3,"value"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"i",2),c._uU(3),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.YNc(7,Jg,2,2,"dynamic-form",6),c.qZA(),c.TgZ(8,"div",5),c.TgZ(9,"div",7),c._UZ(10,"label",8),c.TgZ(11,"div",9),c.TgZ(12,"select",10),c.NdJ("change",function(){return t.onAddonSelected()})("ngModelChange",function(e){return t.selected_addon_id=e}),c.TgZ(13,"option",11),c._uU(14),c.qZA(),c.YNc(15,Og,2,2,"option",12),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",7),c._UZ(17,"label",8),c.TgZ(18,"div",13),c._uU(19),c.ALo(20,"currency"),c.qZA(),c.qZA(),c.TgZ(21,"div",7),c._UZ(22,"label",8),c.TgZ(23,"div",13),c._uU(24),c.qZA(),c.qZA(),c.TgZ(25,"div",7),c._UZ(26,"label",8),c.TgZ(27,"div",14),c._uU(28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(29,"hr"),c.TgZ(30,"div",15),c.TgZ(31,"button",16),c.NdJ("click",function(){return t.purchase()}),c._uU(32),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(33,"p-confirmDialog")),2&e&&(c.xp6(3),c.hij(" ",t.tr.translate("user_addon_form_title")," "),c.xp6(4),c.Q6J("ngIf",t.form_config.fields.length>0),c.xp6(5),c.Q6J("ngModel",t.selected_addon_id),c.xp6(2),c.Oqu(t.tr.translate("user_addon_form_select_addon")),c.xp6(1),c.Q6J("ngForOf",t.addons_list),c.xp6(4),c.hij(" ",c.xi3(20,13,t.addon_price,t.config.siteConfig.site_currency+" ")," "),c.xp6(5),c.hij(" ",t.selected_addon.description," "),c.xp6(3),c.Q6J("hidden",!t.selected_addon.expiration_amount||t.selected_addon.expiration_amount<1),c.xp6(1),c.lnq(" ",t.tr.translate("user_addon_form_valid_for")," ",t.selected_addon.expiration_amount," ",t.tr.translate(0==t.selected_addon.expiration_unit?"global_days":"global_months")," "),c.xp6(3),c.Q6J("disabled",t.selected_addon_id<=0),c.xp6(1),c.Oqu(t.tr.translate("users_action_addon")))},directives:[Q.O5,A.EJ,A.JJ,A.On,A.YN,A.Kr,Q.sg,F.Q,qi],pipes:[Q.H9],styles:[""]}),(0,g.gn)([(0,m.bH)()],Ng.prototype,"blockUI",void 0);var Pg=function(){function e(t,a,i,n,r,l){o(this,e),this.auth=t,this.toastr=a,this.api=i,this.tr=n,this.confirmationService=r,this.router=l,this.setup_finished=!1,this.setup_already_enabled=!1,this.setup_waiting_confirmation=!1,this.qr_image=null,this.otp=""}return l(e,[{key:"ngOnInit",value:function(){1===this.auth.client.requires_2fa&&(this.setup_already_enabled=!0)}},{key:"enable2FA",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/enable2FA",{confirm:!1}).subscribe(function(t){e.blockUI.stop(),200===t.status&&(e.setup_waiting_confirmation=!0,e.qr_image=t.data)})}},{key:"disable2FA",value:function(){var e=this;this.confirmationService.confirm({header:"Disable 2FA",message:"Disable two factor authentication ?",accept:function(){e.api.post("manager/disable2FA",[]).subscribe(function(t){200===t.status&&(e.auth.client.requires_2fa=0,e.toastr.success(e.tr.translate(t.message)),e.router.navigate(["manager/profile"]))})}})}},{key:"confirm2FA",value:function(){var e=this;this.blockUI.start(),this.api.post("manager/enable2FA",{confirm:!0,otp:this.otp}).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.auth.client.requires_2fa=1,e.setup_waiting_confirmation=!1,e.setup_finished=!0):e.toastr.warning("Incorrect code, please try again")})}}]),e}();function Dg(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterOptions",a.filterOptions)("advancedFilterFields",a.filterFields)}}Pg.\u0275fac=function(e){return new(e||Pg)(c.Y36(w),c.Y36(v._W),c.Y36(Z),c.Y36(I),c.Y36(Ci.YP),c.Y36(_.F0))},Pg.\u0275cmp=c.Xpm({type:Pg,selectors:[["app-two-factor-setup"]],decls:7,vars:4,consts:[[2,"direction","ltr","text-align","center"],["src","assets/img/2fa-icon.png"],["class","v-container","style","height: 250px;",4,"ngIf"],["class","v-container","style","height: 500px;",4,"ngIf"],["class","v-container","style","height:250px !important;",4,"ngIf"],[1,"v-container",2,"height","250px"],[1,"vertical-center"],[1,"font-weight-lighter"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-shield-alt"],[1,"v-container",2,"height","500px"],[1,"text-center"],["type","text","name","otp","placeholder","6-digit code","maxlength","6",1,"form-control-lg",2,"letter-spacing","0.25em","text-align","center",3,"ngModel","ngModelChange"],["username","ngModel"],[1,"btn","btn-lg","btn-primary",3,"click"],["height","200",3,"src"],[1,"row"],[1,"col","col-md-6","text-center"],["href","https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=en&gl=US","target","_blank"],["src","assets/img/GooglePlay.png","width","200",1,"float-right"],["href","https://apps.apple.com/us/app/google-authenticator/id388497605","target","_blank"],["src","assets/img/iTunes.png","width","200",1,"float-left"],[1,"fa","fa-check-circle","fa-4x"],[1,"v-container",2,"height","250px !important"],[1,"font-weight-light"],[3,"click"],[1,"font-weight-bold","text-primary",2,"cursor","pointer","text-decoration","underline"],[1,"col-sm-12","col-md-6","text-center"],["src","assets/img/GooglePlay.png","width","200"],["src","assets/img/iTunes.png","width","200"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"img",1),c.YNc(2,Ig,8,0,"div",2),c.YNc(3,Yg,26,2,"div",3),c.YNc(4,Qg,23,1,"div",3),c.YNc(5,Sg,20,0,"div",4),c.qZA(),c._UZ(6,"p-confirmDialog")),2&e&&(c.xp6(2),c.Q6J("ngIf",0===t.auth.client.requires_2fa&&!t.setup_waiting_confirmation),c.xp6(1),c.Q6J("ngIf",!0===t.setup_waiting_confirmation),c.xp6(1),c.Q6J("ngIf",!0===t.setup_finished),c.xp6(1),c.Q6J("ngIf",t.setup_already_enabled))},directives:[Q.O5,F.Q,A.Fj,A.nD,A.JJ,A.On],styles:[".vertical-center[_ngcontent-%COMP%]{margin:0;position:absolute;top:50%;transform:translateY(-50%);text-align:center;width:100%}.v-container[_ngcontent-%COMP%]{width:100%;position:relative;height:100%}"]}),(0,g.gn)([(0,m.bH)()],Pg.prototype,"blockUI",void 0);var Hg=function(){var e=function(){function e(t,a,i,n){o(this,e),this.api=t,this.auth=a,this.tr=i,this.route=n,this.tableColumns=[{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"cr",label:this.tr.translate("report_journal_cr")},{dataKey:"dr",label:this.tr.translate("report_journal_dr")},{dataKey:"amount",label:this.tr.translate("report_journal_amount")},{dataKey:"balance",label:this.tr.translate("report_journal_balance")},{dataKey:"comment",label:this.tr.translate("global_comment")}],this.filterFields=[{key:"manager_id",label:"Manager",type:"select2",value:this.auth.client.id,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={manager_id:[]},this.modelViewConfig=null,this.modelViewConfig={dataUrl:"index/ManagerDebtsJournal",primaryKey:"id",title:this.tr.translate("report_manager_debts_journal_title"),icon:"fas fa-book",sortBy:"created_at",direction:"desc",columns:this.tableColumns,useUrlFilter:!0,hasAdvancedFilter:!0,showAdvancedFilter:!1,showSearchBox:!1,allowExport:this.auth.has("prm_journal_export"),exportPagination:!0}}return l(e,[{key:"ngOnInit",value:function(){this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.manager_id=n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(w),c.Y36(I),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-manager-debts-journal"]],decls:1,vars:1,consts:[["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields",4,"ngIf"],["name","journal_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields"],["journal_model_view",""]],template:function(e,t){1&e&&c.YNc(0,Dg,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}();function Rg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",3,4),c.NdJ("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterOptions",i.filterOptions)("advancedFilterFields",i.filterFields)}}var Vg=function(){return{width:"50vw"}},Lg=function(){var e=function(){function e(t,a){o(this,e),this.tr=t,this.api=a,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"gateway_name",parentKey:"gateway_details",label:this.tr.translate("payment_gateways_transactions_table_gateway"),sortBy:"gateway_id"},{dataKey:"manager_name",parentKey:"manager_details",label:this.tr.translate("payment_gateways_transactions_table_manager"),sortBy:"manager_id"},{dataKey:"user_name",parentKey:"user_details",label:this.tr.translate("payment_gateways_transactions_table_user"),sortBy:"user_id"},{dataKey:"amount",label:this.tr.translate("payment_gateways_transactions_table_amount")},{dataKey:"currency",label:this.tr.translate("payment_gateways_transactions_table_currency")},{dataKey:"local_reference",label:"Local Reference",hidden:!0},{dataKey:"remote_reference",label:"Remote Reference",hidden:!0},{dataKey:"status",label:this.tr.translate("payment_gateways_transactions_table_status"),classFn:function(e){return"pending"===e.status?"text-warning":"success"===e.status?"text-success":void 0}}],this.modelViewConfig=null,this.dialog_visible=!1,this.transaction_details="",this.filterFields=[{key:"manager_id",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"gateway_id",label:this.tr.translate("menu_settings_payment_gateways"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"status",label:this.tr.translate("payment_gateways_transactions_table_status"),type:"select",layout:"vertical",cols:12,value:-1,options:[{value:-1,label:this.tr.translate("global_all")},{value:"pending",label:"Pending"},{value:"success",label:"Success"}]}],this.filterOptions={manager_id:[],gateway_id:[]}}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("report_payment_gateway_transactions_title"),icon:"",columns:this.columns,dataUrl:"index/PaymentGatewayTransaction",page:1,showSearchBox:!0,allowExport:!1,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"PaymentGatewayTransaction",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}},{key:"onCellClicked",value:function(e){"remote_reference"===e.column&&this.showRemoteReference(e.row.id)}},{key:"showRemoteReference",value:function(e){var t=this;this.api.get("paymentGatewayTransactionResponse/"+e.toString()).subscribe(function(e){200===e.status&&(t.transaction_details=e.data,t.dialog_visible=!0)})}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:e.tr.translate("global_filter_all_managers")}),e.filterOptions.manager_id=n}),this.api.get("paymentgateways/list").subscribe(function(t){if(200===t.status){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.name})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:e.tr.translate("global_all")}),e.filterOptions.gateway_id=n}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I),c.Y36(Z))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-payment-gateway-transactions-report"]],decls:4,vars:7,consts:[["name","gateway_transactions_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onCellClicked",4,"ngIf"],["header","Transaction Details",3,"visible","visibleChange"],[2,"padding","1px","width","100%","font-family","Courier New",3,"rows"],["name","gateway_transactions_model_view",3,"modelViewConfig","advancedFilterOptions","advancedFilterFields","onCellClicked"],["gateway_transactions_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,Rg,2,3,"model-table-view",0),c.TgZ(1,"p-dialog",1),c.NdJ("visibleChange",function(e){return t.dialog_visible=e}),c.TgZ(2,"textarea",2),c._uU(3),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Akn(c.DdM(6,Vg)),c.Q6J("visible",t.dialog_visible),c.xp6(1),c.Q6J("rows",5),c.xp6(1),c.hij("    ",t.transaction_details,"\n  "))},directives:[Q.O5,Oi.V,Tt],styles:[""]}),e}();function Eg(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",3),c._UZ(2,"i",4),c._UZ(3,"br"),c._uU(4," Waiting for Switch "),c.qZA(),c.qZA())}function Kg(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",3),c._UZ(2,"i",5),c._UZ(3,"br"),c._uU(4," Your request is being processed. "),c.qZA(),c.qZA())}function Bg(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",6),c._UZ(2,"i",5),c._UZ(3,"br"),c._uU(4," Your payment was successful. "),c.qZA(),c.qZA())}function jg(e,t){1&e&&(c.TgZ(0,"div"),c.TgZ(1,"p",7),c._UZ(2,"i",8),c._UZ(3,"br"),c._uU(4," Payment Failed ! "),c.qZA(),c.qZA())}var zg=function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.route=a,this.paymentStatus="pending"}return l(e,[{key:"ngOnInit",value:function(){var e=this.route.snapshot.queryParamMap.get("resultIndicator"),t=this.route.snapshot.queryParamMap.get("sessionVersion");this.processToken(e,t)}},{key:"ngOnChanges",value:function(){}},{key:"processToken",value:function(e,t){var a=this;this.api.post("paymentgateway/process/switch",{gateway:"switch",indicator:e,session_id:t}).subscribe(function(e){a.paymentStatus=200===e.status?"success":"failure"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-switch-gateway"]],features:[c.TTD],decls:6,vars:4,consts:[[1,"card"],[1,"card-body",2,"min-height","300px"],[4,"ngIf"],[1,"payment-processing"],[1,"fa","fa-3x","fa-circle-notch","fa-spin"],[1,"fa","fa-3x","fa-check-circle"],[1,"payment-success"],[1,"payment-failure"],[1,"fa","fa-3x","exclamation-triangle"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,Eg,5,0,"div",2),c.YNc(3,Kg,5,0,"div",2),c.YNc(4,Bg,5,0,"div",2),c.YNc(5,jg,5,0,"div",2),c.qZA(),c.qZA()),2&e&&(c.xp6(2),c.Q6J("ngIf","pending"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","waiting_webhook"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","success"==t.paymentStatus),c.xp6(1),c.Q6J("ngIf","failure"==t.paymentStatus))},directives:[Q.O5],styles:[".payment-processing[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-processing[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:gray}.payment-success[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-success[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:green}.payment-failure[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:200;margin-top:4rem}.payment-failure[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:orange}"]}),e}(),Gg=["groups_model_view"];function Wg(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",4,5),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)})("onCellClicked",function(e){return c.CHM(a),c.oxw().onCellClicked(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)}}var $g=function(){return{width:"35vw"}},Xg=function(){function e(t,a,i,n,r){o(this,e),this.api=t,this.router=a,this.confirmationService=i,this.toastr=n,this.tr=r,this.columns=[{dataKey:"id",label:"#",hidden:!0},{dataKey:"name",label:this.tr.translate("global_name"),class:"href"},{dataKey:"description",label:this.tr.translate("global_description")},{dataKey:"users_count",label:this.tr.translate("group_table_users"),sortBy:"none"},{dataKey:"managers_count",label:this.tr.translate("group_table_managers"),sortBy:"none"}],this.actions=[{name:"new",label:this.tr.translate("global_actions_new"),icon:"fa fa-plus",acl:"prm_groups_create"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,inline:!0,acl:"prm_groups_delete",requiresRow:!0}]}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("groups_index_title"),icon:"fas fa-users-class",columns:this.columns,dataUrl:"index/group",page:1,actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,allowMultipleSelect:!0,allowExport:!1,hasInlineActions:!0,modelName:"group",hasAdvancedFilter:!1,showRowsCount:!0}}},{key:"onAction",value:function(e){switch(e.action){case"new":this.router.navigate(["group"]);break;case"delete":this.destroy(e)}}},{key:"onCellClicked",value:function(e){"name"===e.column&&this.router.navigate(["group",e.row.id])}},{key:"destroy",value:function(e){var t=this;this.confirmationService.confirm({message:this.tr.translate("global_prompt_delete_selected_item"),header:this.tr.translate("global_confirmation"),icon:"pi pi-exclamation-triangle",accept:function(){t.blockUI.start(),t.api.delete("group/"+e.row.id).subscribe(function(e){t.blockUI.stop(),t.toastr.success(t.tr.translate(e.message)),t.modelView.reload()})}})}}]),e}();Xg.\u0275fac=function(e){return new(e||Xg)(c.Y36(Z),c.Y36(_.F0),c.Y36(Ci.YP),c.Y36(v._W),c.Y36(I))},Xg.\u0275cmp=c.Xpm({type:Xg,selectors:[["app-groups-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(Gg,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},decls:5,vars:5,consts:[["role","alert",1,"alert","alert-info","mb-2"],[1,"fa","fa-info-circle"],["name","groups_model_view",3,"modelViewConfig","onAction","onCellClicked",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","groups_model_view",3,"modelViewConfig","onAction","onCellClicked"],["groups_model_view",""]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"i",1),c._uU(2),c.qZA(),c.YNc(3,Wg,2,1,"model-table-view",2),c._UZ(4,"p-confirmDialog",3)),2&e&&(c.xp6(2),c.hij("\xa0 ",t.tr.translate("group_note"),"\n"),c.xp6(1),c.Q6J("ngIf",t.modelViewConfig),c.xp6(1),c.Akn(c.DdM(4,$g)))},directives:[Q.O5,F.Q,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],Xg.prototype,"blockUI",void 0);var eh=function(){var e=function(){function e(t,a,i){o(this,e),this.location=t,this.formsLoader=a,this.tr=i,this.options={}}return l(e,[{key:"ngOnInit",value:function(){this.formFields=this.formsLoader.getForm("group_form")}},{key:"onSubmit",value:function(e){this.location.back()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Q.Ye),c.Y36(ki),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-group-form"]],decls:1,vars:5,consts:[[3,"fields","options","title","icon","resourceRoute","submit","cancel"]],template:function(e,t){1&e&&(c.TgZ(0,"model-form",0),c.NdJ("submit",function(e){return t.onSubmit(e)})("cancel",function(){return t.location.back()}),c.qZA()),2&e&&c.Q6J("fields",t.formFields)("options",t.options)("title",t.tr.translate("group_form_name"))("icon","fas fa-users-class")("resourceRoute","group")},directives:[Ji],styles:[""]}),e}(),th=function(){var e=function(){function e(t,a){o(this,e),this.route=t,this.tr=a,this.message="",this.title="",this.type="info"}return l(e,[{key:"ngOnInit",value:function(){this.message=this.route.snapshot.queryParamMap.get("message"),this.title=this.route.snapshot.queryParamMap.get("title")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(_.gz),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-common-message"]],decls:5,vars:4,consts:[[1,"common-message-container"],[1,"common-message-title",3,"hidden"],[1,"common-message",3,"hidden"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"h1",1),c._uU(2),c.qZA(),c.TgZ(3,"h3",2),c._uU(4),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.Q6J("hidden",""===t.title),c.xp6(1),c.Oqu(t.tr.translate(t.title)),c.xp6(1),c.Q6J("hidden",""===t.message),c.xp6(1),c.Oqu(t.tr.translate(t.message)))},styles:[".common-message-container[_ngcontent-%COMP%]{text-align:center;height:100%}.common-message-title[_ngcontent-%COMP%]{margin-top:10%}.common-message[_ngcontent-%COMP%]{margin-top:40px}"]}),e}();function ah(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.AsE("",null==a.records[a.current_page]?null:a.records[a.current_page].days," ",a.tr.translate("user_compensation_target_days"),"")}}function ih(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.hij("",null==a.records[a.current_page]?null:a.records[a.current_page].traffic," MB")}}function nh(e,t){if(1&e&&(c.TgZ(0,"span"),c._uU(1),c.qZA()),2&e){var a=c.oxw();c.xp6(1),c.AsE("",null==a.records[a.current_page]?null:a.records[a.current_page].hours," ",a.tr.translate("global_hours"),"")}}var oh=function(){function e(t,a,i,n,r){o(this,e),this.tr=t,this.ref=a,this.api=i,this.toastr=n,this.dialogConfig=r,this.current_page=0,this.admin_notes="",this.records=[]}return l(e,[{key:"ngOnInit",value:function(){var e=this,t={data:this.dialogConfig.data.rows};this.blockUI.start(),this.api.post("compensation/details",t).subscribe(function(t){e.blockUI.stop(),200===t.status?(e.records=t.data,0===e.records.length&&(e.toastr.warning("No Records Found"),e.ref.close())):e.toastr.error(e.tr.translate("rsp_unknown_error"))})}},{key:"dismiss",value:function(){this.ref.close()}},{key:"submit",value:function(){var e=this;this.api.post("compensation/approve",{records:this.dialogConfig.data.rows,comment:this.admin_notes}).subscribe(function(t){200===t.status&&(e.toastr.success(t.message),e.ref.close())})}},{key:"pageChanged",value:function(e){this.current_page=e.page}}]),e}();oh.\u0275fac=function(e){return new(e||oh)(c.Y36(I),c.Y36(ba.E7),c.Y36(Z),c.Y36(v._W),c.Y36(ba.S))},oh.\u0275cmp=c.Xpm({type:oh,selectors:[["app-user-compensation-approve"]],decls:59,vars:19,consts:[[1,"text-center","text-warning"],[1,"far","fa-3x","fa-exclamation-triangle"],[1,"mt-3","text-secondary",2,"font-size","medium"],[1,"mb-4",3,"hidden"],[3,"rows","totalRecords","pageLinkSize","onPageChange"],[1,"row"],[1,"col","col-md-6"],[1,"from-group"],["for","username"],["type","text","readonly","","id","username",1,"form-control-plaintext","font-weight-bold",3,"value"],[1,"form-text","text-muted"],["for","expiration"],["type","text","readonly","","id","expiration",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","req_by"],["type","text","readonly","","id","req_by",1,"form-control-plaintext","font-weight-bold",3,"value"],["for","target"],["id","target",1,"mt-1","font-weight-bold"],[4,"ngIf"],[1,"col"],["for","comment1"],["readonly","","placeholder","reason/comment","id","comment1",1,"form-control"],["for","note"],["placeholder","reason/comment","id","note",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"i",1),c.qZA(),c.TgZ(2,"p",2),c._uU(3," You are about to approve compensations for the select users(s).\n"),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"p-paginator",4),c.NdJ("onPageChange",function(e){return t.pageChanged(e)}),c.qZA(),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"div",7),c.TgZ(9,"label",8),c._uU(10),c.qZA(),c._UZ(11,"input",9),c.TgZ(12,"small",10),c._uU(13,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(14,"div",6),c.TgZ(15,"div",7),c.TgZ(16,"label",11),c._uU(17),c.qZA(),c._UZ(18,"input",12),c.TgZ(19,"small",10),c._uU(20,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(21,"div",5),c.TgZ(22,"div",6),c.TgZ(23,"div",7),c.TgZ(24,"label",13),c._uU(25),c.qZA(),c._UZ(26,"input",14),c.TgZ(27,"small",10),c._uU(28,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(29,"div",6),c.TgZ(30,"div",7),c.TgZ(31,"label",15),c._uU(32),c.qZA(),c.TgZ(33,"div",16),c.YNc(34,ah,2,2,"span",17),c.YNc(35,ih,2,1,"span",17),c.YNc(36,nh,2,2,"span",17),c.qZA(),c.TgZ(37,"small",10),c._uU(38,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(39,"div",5),c.TgZ(40,"div",18),c.TgZ(41,"div",7),c.TgZ(42,"label",19),c._uU(43),c.qZA(),c.TgZ(44,"textarea",20),c._uU(45),c.qZA(),c.TgZ(46,"small",10),c._uU(47,"\xa0"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(48,"div",7),c.TgZ(49,"label",21),c._uU(50,"Notes"),c.qZA(),c.TgZ(51,"textarea",22),c.NdJ("ngModelChange",function(e){return t.admin_notes=e}),c.qZA(),c.TgZ(52,"small",10),c._uU(53,"\xa0"),c.qZA(),c.qZA(),c.TgZ(54,"div",23),c.TgZ(55,"button",24),c.NdJ("click",function(){return t.dismiss()}),c._uU(56),c.qZA(),c.TgZ(57,"button",25),c.NdJ("click",function(){return t.submit()}),c._uU(58),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("hidden",t.records.length<2),c.xp6(1),c.Q6J("rows",1)("totalRecords",t.records.length)("pageLinkSize",1),c.xp6(5),c.Oqu(t.tr.translate("global_username")),c.xp6(1),c.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].user_details?null:t.records[t.current_page].user_details.username),c.xp6(6),c.Oqu(t.tr.translate("global_expiration")),c.xp6(1),c.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].user_details?null:t.records[t.current_page].user_details.expiration),c.xp6(7),c.Oqu(t.tr.translate("user_compensation_requested_by")),c.xp6(1),c.s9C("value",null==t.records[t.current_page]||null==t.records[t.current_page].manager_details?null:t.records[t.current_page].manager_details.created_by_username),c.xp6(6),c.Oqu(t.tr.translate("user_compensation_target")),c.xp6(2),c.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].days)>0),c.xp6(1),c.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].traffic)>0),c.xp6(1),c.Q6J("ngIf",(null==t.records[t.current_page]?null:t.records[t.current_page].hours)>0),c.xp6(7),c.Oqu(t.tr.translate("user_compensation_manager_reason")),c.xp6(2),c.Oqu(null==t.records[t.current_page]?null:t.records[t.current_page].comment),c.xp6(6),c.Q6J("ngModel",t.admin_notes),c.xp6(5),c.Oqu(t.tr.translate("global_button_dismiss")),c.xp6(2),c.Oqu(t.tr.translate("global_button_submit")))},directives:[md.D,Q.O5,A.Fj,A.JJ,A.On],styles:[""]}),(0,g.gn)([(0,m.bH)()],oh.prototype,"blockUI",void 0);var rh=["compensations_model_view"];function lh(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"model-table-view",2,3),c.NdJ("onAction",function(e){return c.CHM(a),c.oxw().onAction(e)}),c.qZA()}if(2&e){var i=c.oxw();c.Q6J("modelViewConfig",i.modelViewConfig)("advancedFilterFields",i.filterFields)("advancedFilterOptions",i.filterOptions)}}var sh=function(){function e(t,a,i,n,r){var l=this;o(this,e),this.api=t,this.toastr=a,this.dialogService=i,this.confirmationService=n,this.tr=r,this.columns=[{dataKey:"id",label:"id",hidden:!0},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"username",parentKey:"user_details",sortBy:"user_id",label:this.tr.translate("global_username")},{dataKey:"days",label:this.tr.translate("global_days")},{dataKey:"traffic",label:this.tr.translate("user_compensation_target_traffic")},{dataKey:"hours",label:this.tr.translate("user_compensation_target_uptime")},{dataKey:"created_by_username",parentKey:"manager_details",label:this.tr.translate("global_manager")},{dataKey:"approved",label:this.tr.translate("user_compensation_approved"),dataResolver:function(e){return l.tr.translate(1===e?"user_compensation_approved":"user_compensation_not_approved")},classFn:function(e){return 1===e.approved?"text-success":"text-warning"}},{dataKey:"approved_by_username",parentKey:"approval_details",label:this.tr.translate("user_compensation_approved_by")}],this.filterFields=[{key:"status",label:this.tr.translate("global_status"),type:"select",value:0,layout:"vertical",cols:12,options:[{value:-1,label:this.tr.translate("global_all")},{value:1,label:this.tr.translate("user_compensation_approved")},{value:0,label:this.tr.translate("user_compensation_not_approved")}]},{key:"created_by",label:this.tr.translate("global_manager"),type:"select2",value:-1,layout:"vertical",cols:12},{key:"approved_by",label:this.tr.translate("user_compensation_approved_by"),type:"select2",value:-1,layout:"vertical",cols:12},{key:"date_start",label:"From Date",type:"date",value:null,layout:"vertical",cols:12},{key:"date_end",label:"To Date",type:"date",value:null,layout:"vertical",cols:12}],this.filterOptions={created_by:[],approved_by:[]},this.actions=[{name:"approve",label:this.tr.translate("user_compensation_action_approve"),icon:"fa fa-check",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_any"},{name:"",label:"",type:"separator"},{name:"delete",label:this.tr.translate("global_actions_delete"),icon:"fa fa-trash",multipleRows:!0,requiresRow:!1,inline:!0,acl:"prm_any"}],this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:"Compensations",icon:"fa fa-user",columns:this.columns,dataUrl:"index/compensation",page:1,sortBy:"id",direction:"desc",actions:this.actions,showSearchBox:!0,rowsPerPage:10,primaryKey:"id",allowSelect:!0,hasInlineActions:!0,allowMultipleSelect:!0,allowExport:!0,modelName:"compensation",hasAdvancedFilter:!0,showRowsCount:!0},this.loadResources()}},{key:"onAction",value:function(e){switch(e.action){case"approve":this.showApprovalDialog();break;case"delete":this.destroy()}}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a=[];a.push({value:-1,label:e.tr.translate("global_all")});var n,o=i(t.data);try{for(o.s();!(n=o.n()).done;){var r=n.value;a.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}e.filterOptions.created_by=a,e.filterOptions.approved_by=a})}},{key:"showApprovalDialog",value:function(){var e=this,t=this.modelView.currentRow,a=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(function(e){a.push(e.id)}):a.push(t.id),0!==a.length&&this.dialogService.open(oh,{header:this.tr.translate("user_compensation_approval_dialog_label"),width:"500px",data:{rows:a}}).onClose.subscribe(function(){e.modelView.reload()})}},{key:"destroy",value:function(){var e=this,t=this.modelView.currentRow,a=[];this.modelView.selectedRows().length>1?this.modelView.selectedRows().map(function(e){a.push(e.id)}):a.push(t.id),0!==a.length&&this.confirmationService.confirm({message:this.tr.translate("global_prompt_delete_selected_item"),accept:function(){e.api.post("compensation/destroy",{rows:a}).subscribe(function(t){e.toastr.success(e.tr.translate(t.message)),e.modelView.reload()})}})}}]),e}();function ch(e,t){if(1&e&&c._UZ(0,"model-table-view",1,2),2&e){var a=c.oxw();c.Q6J("modelViewConfig",a.modelViewConfig)("advancedFilterFields",a.filterFields)("advancedFilterOptions",a.filterOptions)}}sh.\u0275fac=function(e){return new(e||sh)(c.Y36(Z),c.Y36(v._W),c.Y36(ba.xA),c.Y36(Ci.YP),c.Y36(I))},sh.\u0275cmp=c.Xpm({type:sh,selectors:[["app-user-compensation-index"]],viewQuery:function(e,t){var a;(1&e&&c.Gf(rh,5),2&e)&&(c.iGM(a=c.CRH())&&(t.modelView=a.first))},features:[c._Bn([ba.xA])],decls:2,vars:1,consts:[["name","compensations_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction",4,"ngIf"],["header","Confirmation","icon","pi pi-exclamation-triangle"],["name","compensations_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions","onAction"],["compensations_model_view",""]],template:function(e,t){1&e&&(c.YNc(0,lh,2,3,"model-table-view",0),c._UZ(1,"p-confirmDialog",1)),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,F.Q,Tt],styles:[""]}),(0,g.gn)([(0,m.bH)()],sh.prototype,"blockUI",void 0);var uh=[{path:"dashboard",component:we,data:{title:"dashboard"}},{path:"message",component:th,data:{title:"message"}},{path:"managers/index",component:Sa,data:{title:"managers / index",prm:"prm_managers_index"}},{path:"manager/profile",component:cu,data:{title:"manager / profile"}},{path:"manager/twofactorsetup",component:Pg,data:{title:"manager / two factor authentication"}},{path:"manager/loginAs",component:yu,data:{title:"manager / login as...",prm:"prm_managers_login_as"}},{path:"manager/selfDeposit",component:wf,data:{title:"manager / self deposit"}},{path:"manager",component:Di,data:{title:"manager / form",prm:"prm_managers_index"}},{path:"manager/:id",component:Ol,data:{title:"manager / form",prm:"prm_managers_index"}},{path:"profiles/index",component:tn,data:{title:"profile / index",prm:"prm_profiles_index"}},{path:"profile",component:Bi,data:{title:"profile / form",prm:"prm_profiles_create"}},{path:"profiles/addons",component:Cg,data:{title:"addons / index",prm:"prm_profiles_create"}},{path:"profiles/addon",component:Mg,data:{title:"addons / form",prm:"prm_profiles_create"}},{path:"profiles/addon/:id",component:Mg,data:{title:"addons / form",prm:"prm_profiles_create"}},{path:"profiles/notifications",component:xg,data:{title:"usage notifications / index",prm:"prm_profiles_create"}},{path:"profiles/notification/:id",component:qg,data:{title:"usage notifications / form",prm:"prm_profiles_create"}},{path:"profiles/notification",component:qg,data:{title:"usage notifications / form",prm:"prm_profiles_create"}},{path:"profile/policy/:profile_id",component:dn,data:{title:"profile policy / form",prm:"prm_profiles_policy_manager"}},{path:"profile/policy/:profile_id/:policy_id",component:dn,data:{title:"profile policy / form",prm:"prm_profiles_policy_manager"}},{path:"profile/policies/:profile_id",component:Tn,data:{title:"policies",prm:"prm_profiles_policy_manager"}},{path:"profiles/pricing",component:el,data:{title:"profile / pricing",prm:"prm_profiles_pricing"}},{path:"profile/:id",component:Bi,data:{title:"profile / form",prm:"prm_profiles_update"}},{path:"nas/index",component:Wi,data:{title:"NAS / index",prm:"prm_nas_index"}},{path:"nas",component:ji,data:{title:"NAS / form",prm:"prm_nas_create"}},{path:"nas/:id",component:ji,data:{title:"NAS / form",prm:"prm_nas_update"}},{path:"compensations/index",component:sh,data:{title:"users / compensations"}},{path:"users/index",component:oo,data:{title:"users / index"}},{path:"users/online",component:Uc,data:{title:"users / online"}},{path:"users/tickets",component:lg,data:{title:"users / tickets"}},{path:"user",component:In,data:{title:"user / form"}},{path:"user/activate/:id",component:zr,data:{title:"user / activate"}},{path:"user/addon/:id",component:Ng,data:{title:"user / activate"}},{path:"user/bulkActivate/:data",component:Qf,data:{title:"user / activate"}},{path:"user/extend/:id",component:rf,data:{title:"user / extend"}},{path:"user/cancel/:id",component:Zp,data:{title:"user / cancel subscription"}},{path:"user/profile/:id",component:rl,data:{title:"user / profile"}},{path:"user/:id",component:Er,data:{title:"user / form"}},{path:"cards/index",component:Rl,data:{title:"cards / index",prm:"prm_cards_index"}},{path:"cards/generate",component:El,data:{title:"cards / generate",prm:"prm_cards_generate_refill"}},{path:"cards/list/:series",component:jl,data:{title:"cards / list",prm:"prm_cards_index"}},{path:"cards/designer",component:ls,data:{title:"cards / designer",prm:"prm_cards_index"}},{path:"cards/print/:series",component:_s,data:{title:"cards / printer",prm:"prm_cards_index"}},{path:"cards/job/index",component:vc,data:{title:"cards / jobs",prm:"prm_cards_generate_user"}},{path:"cards/verify",component:Gd,data:{title:"cards / verify",prm:"prm_cards_verify"}},{path:"settings/general",component:Bs,data:{title:"settings/ general",prm:"prm_settings"}},{path:"settings/acl",component:St,data:{title:"settings/ acl",prm:"prm_settings"}},{path:"settings/sites",component:Ts,data:{title:"settings / sites",prm:"prm_settings"}},{path:"settings/sms",component:sc,data:{title:"settings / sms",prm:"prm_settings"}},{path:"settings/email",component:mc,data:{title:"settings / email",prm:"prm_settings"}},{path:"settings/emailTemplates",component:pc,data:{title:"settings / email / templates",prm:"prm_settings"}},{path:"settings/freezone",component:oc,data:{title:"settings / freezone",prm:"prm_settings"}},{path:"settings/backup",component:Yc,data:{title:"settings / backup",prm:"prm_settings"}},{path:"settings/notifications",component:Lc,data:{title:"settings / notifications",prm:"prm_settings"}},{path:"settings/license",component:Dc,data:{title:"settings / license",prm:"prm_settings"}},{path:"settings/network",component:jc,data:{title:"settings / network",prm:"prm_settings"}},{path:"settings/advanced",component:Mu,data:{title:"settings / advanced",prm:"prm_settings"}},{path:"settings/portal",component:Zd,data:{title:"settings / portal",prm:"prm_settings"}},{path:"settings/sastrack",component:Dd,data:{title:"settings / sastrack",prm:"prm_settings"}},{path:"settings/billing",component:xp,data:{title:"settings / billing",prm:"prm_settings"}},{path:"settings/ucp",component:cf,data:{title:"settings / user portal",prm:"prm_settings"}},{path:"settings/paymentgateways",component:hf,data:{title:"settings / payment gateways",prm:"prm_settings"}},{path:"settings/googleDrive",component:Rf,data:{title:"settings / google drive",prm:"prm_settings"}},{path:"settings/userInvoiceDesigner",component:Ip,data:{title:"settings / user invoice designer",prm:"prm_settings"}},{path:"settings/welcomeScreen",component:Wp,data:{title:"settings / welcome screen",prm:"prm_settings"}},{path:"settings/telegram",component:mg,data:{title:"settings / telegram",prm:"prm_settings"}},{path:"report/syslog",component:Us,data:{title:"report / system log"}},{path:"report/journal/managers",component:Ou,data:{title:"report / manager journal"}},{path:"report/invoice/managers",component:Pu,data:{title:"report / managers invoices"}},{path:"report/userauthlog",component:Xu,data:{title:"report / users authentication log"}},{path:"report/activations",component:Qd,data:{title:"report / activations"}},{path:"report/activations_statistics",component:zd,data:{title:"report / activations"}},{path:"report/sessions",component:mp,data:{title:"report / sessions"}},{path:"report/profits",component:ef,data:{title:"report / profits"}},{path:"report/receipts/managers",component:qp,data:{title:"report / receipts"}},{path:"report/users",component:Op,data:{title:"report / users"}},{path:"report/traffic",component:Pp,data:{title:"report / traffic"}},{path:"report/online",component:Lp,data:{title:"report / online history"}},{path:"report/money_transfer",component:Kp,data:{title:"report / money transfers"}},{path:"report/debtsJournal",component:Hg,data:{title:"report / debts journal"}},{path:"report/cardsUsage",component:dg,data:{title:"report / cards usage"}},{path:"report/radiusLog",component:pg,data:{title:"report / radius log"}},{path:"report/payment_gateway_transactions",component:Lg,data:{title:"report / payment gateway transactions"}},{path:"report/cardsTransfer",component:function(){var e=function(){function e(t,a){o(this,e),this.api=t,this.tr=a,this.columns=[{dataKey:"id",hidden:!0,label:"id"},{dataKey:"created_at",label:this.tr.translate("global_date")},{dataKey:"old_owner_username",parentKey:"old_owner_details",label:this.tr.translate("cards_log_old_owner"),sortBy:"old_owner_id"},{dataKey:"new_owner_username",parentKey:"new_owner_details",label:this.tr.translate("cards_log_new_owner"),sortBy:"new_owner_id"},{dataKey:"qty",label:this.tr.translate("global_qty")},{dataKey:"unit_value",label:this.tr.translate("cards_log_unit_value")},{dataKey:"total_value",label:this.tr.translate("cards_log_total_value")},{dataKey:"card_type",label:this.tr.translate("global_type")},{dataKey:"range_start",label:this.tr.translate("cards_log_range_start")},{dataKey:"range_end",label:this.tr.translate("cards_log_range_end")},{dataKey:"username",parentKey:"manager_details",label:this.tr.translate("global_manager")},{dataKey:"profile_name",parentKey:"profile_details",label:this.tr.translate("global_profile"),hidden:!0,sortBy:"profile_id"}],this.filterFields=[{key:"created_by",label:this.tr.translate("global_manager"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"old_owner_id",label:this.tr.translate("cards_log_old_owner"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"new_owner_id",label:this.tr.translate("cards_log_new_owner"),type:"select2",options:[],layout:"vertical",cols:12,value:-1},{key:"qty",label:this.tr.translate("global_qty"),type:"text",pattern:"[0-9]*",cols:12,required:!1},{key:"unit_value",label:this.tr.translate("cards_log_unit_value"),type:"text",pattern:"[0-9]*",cols:12,required:!1},{key:"range_start",label:this.tr.translate("cards_log_range_start"),type:"text",pattern:"[0-9]*",cols:12,required:!1}],this.filterOptions={created_by:[],old_owner_id:[],new_owner_id:[]},this.modelViewConfig=null}return l(e,[{key:"ngOnInit",value:function(){this.modelViewConfig={title:this.tr.translate("cards_log_report_title"),icon:"",columns:this.columns,dataUrl:"index/cardsTransferLog",page:1,showSearchBox:!0,showRowsCount:!0,allowExport:!0,rowsPerPage:10,sortBy:"id",direction:"desc",primaryKey:"id",allowSelect:!0,allowMultipleSelect:!1,modelName:"cardTransferLog",hasAdvancedFilter:!0,showAdvancedFilter:!1},this.loadResources()}},{key:"loadResources",value:function(){var e=this;this.api.get("index/manager").subscribe(function(t){var a,n=[],o=i(t.data);try{for(o.s();!(a=o.n()).done;){var r=a.value;n.push({value:r.id,label:r.username})}}catch(l){o.e(l)}finally{o.f()}n.unshift({value:-1,label:e.tr.translate("global_filter_all_managers")}),e.filterOptions.created_by=n,e.filterOptions.new_owner_id=n,e.filterOptions.old_owner_id=n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(Z),c.Y36(I))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-cards-transfers-report"]],decls:1,vars:1,consts:[["name","cards_log_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions",4,"ngIf"],["name","cards_log_model_view",3,"modelViewConfig","advancedFilterFields","advancedFilterOptions"],["cards_log_model_view",""]],template:function(e,t){1&e&&c.YNc(0,ch,2,3,"model-table-view",0),2&e&&c.Q6J("ngIf",t.modelViewConfig)},directives:[Q.O5,Tt],styles:[""]}),e}(),data:{title:"report / cards transfers log"}},{path:"tools/dashboard-manager",component:Ls,data:{title:"tools / dashboard manager"}},{path:"tools/widget-factory",component:Os,data:{title:"tools / widget factory"}},{path:"tools/systemServices",component:bu,data:{title:"tools / system services"}},{path:"tools/systemUpdate",component:ku,data:{title:"tools / system update"}},{path:"tools/maintenance",component:Yu,data:{title:"tools / system maintenance"}},{path:"tools/migration",component:Gu,data:{title:"tools / database migration"}},{path:"tools/import",component:Bd,data:{title:"tools / import"}},{path:"tools/bulk-changes",component:pp,data:{title:"tools / bulk changes"}},{path:"tools/announcements",component:ld,data:{title:"tools / announcements"}},{path:"tools/bandwidthcontroller",component:cg,data:{title:"tools / bandwidth control"}},{path:"radius/custom/:entity/:id",component:lr,data:{title:"radius / custom attributes"}},{path:"backup/index",component:Xc,data:{title:"backup / index"}},{path:"billing/userInvoiceForm",component:qd,data:{title:"billing / invoice"}},{path:"billing/userInvoiceForm/:user_id",component:qd,data:{title:"billing / invoice"}},{path:"billing/invoices/index",component:Cd,data:{title:"billing / invoices"}},{path:"ippool/index",component:Ef,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"ippool",component:Bf,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"ippool/:id",component:Bf,data:{title:"IP Pools / index",prm:"prm_managers_sysadmin"}},{path:"groups",component:Xg,data:{title:"Groups",prm:"prm_groups_index"}},{path:"group/:id",component:eh,data:{title:"Group Form",prm:"prm_groups_index"}},{path:"group",component:eh,data:{title:"Group Form",prm:"prm_groups_index"}},{path:"about",component:Nd,data:{title:"About..."}},{path:"zaincash/process",component:kf,data:{title:"ZainCash"}},{path:"switch/process",component:zg,data:{title:"Switch Payment Gateway"}},{path:"kushok/process/:trans_id",component:Zg,data:{title:"kushok"}},{path:"",redirectTo:"dashboard",pathMatch:"full"}],dh=function(){var e=function(){function e(t){o(this,e),this.el=t,this.focus=!0}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.focus&&window.setTimeout(function(){e.el.nativeElement.focus()})}},{key:"autofocus",set:function(e){this.focus=!1!==e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(c.SBq))},e.\u0275dir=c.lG2({type:e,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}}),e}();function fh(e,t){1&e&&(c.TgZ(0,"div",11),c._UZ(1,"i",12),c._uU(2,"\xa0\xa0 please wait ... "),c.qZA())}function ph(e,t){if(1&e&&(c.TgZ(0,"div",13),c.TgZ(1,"div",14),c._uU(2),c.qZA(),c.qZA()),2&e){var a=c.oxw();c.xp6(2),c.hij(" ",a.settings.login_message," ")}}function gh(e,t){if(1&e&&(c.TgZ(0,"div",42),c._UZ(1,"i",43),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" \xa0\xa0",a.errorMessage," ")}}function hh(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",23),c.TgZ(1,"div",24),c.TgZ(2,"span",25),c._UZ(3,"i",44),c.qZA(),c.qZA(),c.TgZ(4,"input",45,46),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw(2).loginData.captcha_text=e}),c.qZA(),c.qZA()}if(2&e){var i=c.oxw(2);c.xp6(4),c.Q6J("ngModel",i.loginData.captcha_text)}}function mh(e,t){if(1&e&&(c.TgZ(0,"option",47),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.value),c.xp6(1),c.Oqu(a.label)}}function _h(e,t){if(1&e&&(c.TgZ(0,"div",23),c._UZ(1,"div",24),c._UZ(2,"img",48),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.MGl("src","data:image/jpeg;base64,",a.captcah_image,"",c.LSH)}}function vh(e,t){1&e&&c._UZ(0,"i",49)}function bh(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Login"),c.qZA())}function Zh(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",15),c.TgZ(1,"div",16),c.TgZ(2,"div",17),c.TgZ(3,"div",18),c.TgZ(4,"form",19,20),c.NdJ("ngSubmit",function(){c.CHM(a);var e=c.MAs(5);return c.oxw().login(e.value)}),c.TgZ(6,"h1"),c._uU(7,"Login"),c.qZA(),c.TgZ(8,"p",21),c._uU(9,"Sign In to your account"),c.qZA(),c.YNc(10,gh,3,1,"div",22),c.TgZ(11,"div",23),c.TgZ(12,"div",24),c.TgZ(13,"span",25),c._UZ(14,"i",26),c.qZA(),c.qZA(),c.TgZ(15,"input",27,28),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.username=e}),c.qZA(),c.qZA(),c.TgZ(17,"div",23),c.TgZ(18,"div",24),c.TgZ(19,"span",25),c._UZ(20,"i",29),c.qZA(),c.qZA(),c.TgZ(21,"input",30,31),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.password=e}),c.qZA(),c.qZA(),c.YNc(23,hh,6,1,"div",32),c.TgZ(24,"div",33),c.TgZ(25,"div",24),c.TgZ(26,"span",25),c._UZ(27,"i",34),c.qZA(),c.qZA(),c.TgZ(28,"select",35),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.language=e}),c.YNc(29,mh,2,2,"option",36),c.qZA(),c.qZA(),c._UZ(30,"hr"),c.YNc(31,_h,3,1,"div",32),c.TgZ(32,"div",37),c.TgZ(33,"div",38),c.TgZ(34,"button",39),c.YNc(35,vh,1,0,"i",40),c.YNc(36,bh,2,0,"span",41),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(10),c.Q6J("ngIf",i.showAlert),c.xp6(5),c.Q6J("ngModel",i.loginData.username)("autofocus",!0),c.xp6(6),c.Q6J("ngModel",i.loginData.password),c.xp6(2),c.Q6J("ngIf",i.requires_captcha),c.xp6(5),c.Q6J("ngModel",i.loginData.language),c.xp6(1),c.Q6J("ngForOf",i.languages),c.xp6(2),c.Q6J("ngIf",i.requires_captcha),c.xp6(3),c.Q6J("disabled",i.busy),c.xp6(1),c.Q6J("ngIf",i.busy),c.xp6(1),c.Q6J("ngIf",!i.busy)}}function yh(e,t){if(1&e&&(c.TgZ(0,"div",42),c._UZ(1,"i",43),c._uU(2),c.qZA()),2&e){var a=c.oxw(2);c.xp6(2),c.hij(" \xa0\xa0",a.errorMessage," ")}}function wh(e,t){if(1&e&&(c.TgZ(0,"option",47),c._uU(1),c.qZA()),2&e){var a=t.$implicit;c.Q6J("value",a.value),c.xp6(1),c.Oqu(a.label)}}function xh(e,t){1&e&&c._UZ(0,"i",49)}function Ah(e,t){1&e&&(c.TgZ(0,"span"),c._uU(1,"Verify Code"),c.qZA())}function qh(e,t){if(1&e){var a=c.EpF();c.TgZ(0,"div",15),c.TgZ(1,"div",16),c.TgZ(2,"div",17),c.TgZ(3,"div",18),c.TgZ(4,"div",50),c._UZ(5,"img",51),c.qZA(),c.TgZ(6,"form",19,20),c.NdJ("ngSubmit",function(){c.CHM(a);var e=c.MAs(7);return c.oxw().login(e.value)}),c.TgZ(8,"h3"),c._uU(9,"Two-factor authentication"),c.qZA(),c.TgZ(10,"p"),c._uU(11,"Open your authentication app and enter the code for SAS Radius."),c.qZA(),c.YNc(12,yh,3,1,"div",22),c.TgZ(13,"div",52),c.TgZ(14,"div",24),c.TgZ(15,"span",25),c._UZ(16,"i",29),c.qZA(),c.qZA(),c.TgZ(17,"input",53,28),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.username=e}),c.qZA(),c.qZA(),c.TgZ(19,"div",52),c.TgZ(20,"div",24),c.TgZ(21,"span",25),c._UZ(22,"i",29),c.qZA(),c.qZA(),c.TgZ(23,"input",54,31),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.password=e}),c.qZA(),c.qZA(),c.TgZ(25,"div",55),c.TgZ(26,"div",24),c.TgZ(27,"span",25),c._UZ(28,"i",56),c.qZA(),c.qZA(),c.TgZ(29,"input",57,28),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.otp=e}),c.qZA(),c.qZA(),c.TgZ(31,"div",58),c.TgZ(32,"div",24),c.TgZ(33,"span",25),c._UZ(34,"i",34),c.qZA(),c.qZA(),c.TgZ(35,"select",35),c.NdJ("ngModelChange",function(e){return c.CHM(a),c.oxw().loginData.language=e}),c.YNc(36,wh,2,2,"option",36),c.qZA(),c.qZA(),c.TgZ(37,"div",37),c.TgZ(38,"div",38),c.TgZ(39,"button",39),c.YNc(40,xh,1,0,"i",40),c.YNc(41,Ah,2,0,"span",41),c.qZA(),c.qZA(),c.qZA(),c.TgZ(42,"div",37),c.TgZ(43,"div",38),c.TgZ(44,"p",59),c.TgZ(45,"a",60),c.NdJ("click",function(){return c.CHM(a),c.oxw().reset()}),c._uU(46,"Back To Login"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){var i=c.oxw();c.xp6(12),c.Q6J("ngIf",i.showAlert),c.xp6(5),c.Q6J("ngModel",i.loginData.username),c.xp6(6),c.Q6J("ngModel",i.loginData.password),c.xp6(6),c.Q6J("ngModel",i.loginData.otp),c.xp6(6),c.Q6J("ngModel",i.loginData.language),c.xp6(1),c.Q6J("ngForOf",i.languages),c.xp6(3),c.Q6J("disabled",i.busy),c.xp6(1),c.Q6J("ngIf",i.busy),c.xp6(1),c.Q6J("ngIf",!i.busy)}}var Th=function(){function e(t,a,i,n,r,l){o(this,e),this.api=t,this.config=a,this.auth=i,this.router=n,this.toastr=r,this.log=l,this.loginData={username:"",password:"",language:null,otp:null,captcha_text:null},this.busy=!1,this.showAlert=!1,this.settings={site_status:0,site_title:"SASRadius",site_language:"en"},this.errorMessage="",this.languages=[],this.logo_url="",this.background_image=null,this.otp_required=!1,this.requires_captcha=!1,this.captcah_image=null}return l(e,[{key:"ngOnInit",value:function(){var e=this;this.blockUI.start(),this.api.get("auth").subscribe(function(t){e.blockUI.stop(),e.router.navigate(["dashboard"])},function(t){e.blockUI.stop()}),this.logo_url=this.config.getApiUrl()+"resources/logo",this.background_image=this.config.getApiUrl()+"resources/background_image",this.removeRTL(),this.api._get("resources/login").subscribe(function(t){var a,i;e.settings=t.data,e.languages=[],t.data.languages.map(function(t){e.languages.push({value:t.id,label:t.name})}),1===t.data.requires_captcha&&(e.requires_captcha=!0,e.loadCaptcha(e.auth.session_id)),(null===(a=t.data.site.login_background)||void 0===a?void 0:a.length)>5&&$(".login-background").css({"background-image":"url("+e.background_image+")"}),document.title=e.settings.site.title,e.loginData.language=e.settings.site_language,(null===(i=localStorage.getItem("remember_language"))||void 0===i?void 0:i.length)>1&&(e.loginData.language=localStorage.getItem("remember_language"))}),""!==localStorage.getItem("remember_username")&&(this.loginData.username=localStorage.getItem("remember_username"))}},{key:"login",value:function(e){var t=this;this.showAlert=!1,localStorage.removeItem(this.config.tokenName),this.busy=!0,e.session_id=this.auth.session_id,this.api._post("login",e).subscribe(function(e){if(t.busy=!1,-10===e.status&&(t.otp_required=!0),-11===e.status&&(t.errorMessage="Invalid Secret",t.showAlert=!0,t.loginData.otp=null),200===e.status){var a=e.token;localStorage.setItem("remember_username",t.loginData.username),localStorage.setItem("remember_language",t.loginData.language),localStorage.setItem("user_language",t.loginData.language),localStorage.setItem(t.config.tokenName,a),t.router.navigate(["dashboard"])}},function(e){t.busy=!1,401===e.status||(403===e.status?(t.errorMessage="Invalid Username or Password",t.showAlert=!0,t.loginData.captcha_text=null,t.loginData.password=null,t.loadCaptcha(t.auth.session_id)):429===e.status?(t.errorMessage="Too many tries, try again in 1 minute",t.showAlert=!0,t.loginData.captcha_text=null,t.loginData.password=null,t.loadCaptcha(t.auth.session_id)):402===e.status?(t.errorMessage="Server offline, only Administrator allowed to login",t.showAlert=!0):t.toastr.error("unable to connect to server","SAS"))})}},{key:"removeRTL",value:function(){var e=document.getElementById("rtl_css");e&&e.parentNode.removeChild(e),document.getElementsByTagName("HTML")[0].setAttribute("dir","ltr")}},{key:"reset",value:function(){this.otp_required=!1,this.loginData.username=null,this.loginData.password=null,this.loginData.otp=null,this.loginData.captcha_text=null,this.errorMessage=null,this.showAlert=!1}},{key:"ngAfterViewInit",value:function(){window.setTimeout(function(){$(".image-container").fadeTo(600,.4,"swing",function(){$(".image-container").fadeTo(900,.1)})},300)}},{key:"loadCaptcha",value:function(e){var t=this;this.api._get("login/captcha/"+this.auth.session_id).subscribe(function(e){200===e.status&&(t.captcah_image=e.data)})}}]),e}();function kh(e,t){1&e&&(c.TgZ(0,"div",10),c._UZ(1,"img",11),c.qZA())}function Ch(e,t){1&e&&c._UZ(0,"app-update-notification")}Th.\u0275fac=function(e){return new(e||Th)(c.Y36(Z),c.Y36(p),c.Y36(w),c.Y36(_.F0),c.Y36(v._W),c.Y36(b))},Th.\u0275cmp=c.Xpm({type:Th,selectors:[["login-page"]],decls:13,vars:4,consts:[["sas_block_ui",""],[1,"app","flex-row","align-items-center","login-background"],["class","acp-alert-container",4,"ngIf"],["id","iot","name","iot",1,"image-container"],[1,"container"],[1,"row","justify-content-center","align-items-start",2,"margin-bottom","20px"],[1,"col-md-auto","text-center"],[1,"logo_image",3,"src","error"],[1,"row","justify-content-center"],[1,"row","justify-content-center",2,"opacity","1.0"],["class","col-lg-5 col-md-7 col-sm-8 col-xs-11",4,"ngIf"],[1,"block-ui-template","sas-block-ui"],[1,"fa","fa-spin","fa-circle-o-notch"],[1,"acp-alert-container"],["role","alert",1,"alert","alert-info","alert-dismissible","text-center"],[1,"col-lg-5","col-md-7","col-sm-8","col-xs-11"],[1,"card-group","mb-0"],[1,"card","p-4","login-card"],[1,"card-body"],["autocomplete","off",3,"ngSubmit"],["loginForm","ngForm"],[1,"text-muted"],["class","alert alert-warning alert-dismissible fade show","role","alert",4,"ngIf"],[1,"input-group","mb-3"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","text","placeholder","Username","name","username","autocomplete","off",1,"form-control",3,"ngModel","autofocus","ngModelChange"],["username","ngModel"],[1,"fa","fa-lock"],["type","password","placeholder","Password","name","password","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],["class","input-group mb-3",4,"ngIf"],[1,"input-group","mb-4"],[1,"fa","fa-language"],["name","language",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"col-12"],["type","submit",1,"btn","btn-primary","px-4",2,"width","100%",3,"disabled"],["class","fa fa-cog fa-spin",4,"ngIf"],[4,"ngIf"],["role","alert",1,"alert","alert-warning","alert-dismissible","fade","show"],[1,"fa","fa-exclamation-triangle"],[1,"fa","fa-robot"],["type","text","placeholder","Captcha","name","captcha_text","autocomplete","off",1,"form-control",3,"ngModel","ngModelChange"],["captcha_text","ngModel"],[3,"value"],["alt","",3,"src"],[1,"fa","fa-cog","fa-spin"],[1,"text-center"],["src","assets/img/2fa-icon.png","height","120"],[1,"input-group","mb-3","d-none"],["type","text","name","username",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],[1,"input-group","input-group-lg","mb-3"],[1,"fad","fa-key"],["type","text","name","otp","placeholder","6-digit code","maxlength","6",1,"form-control",2,"letter-spacing","0.25em",3,"ngModel","ngModelChange"],[1,"input-group","mb-4","d-none"],[1,"text-center","mt-2"],[3,"routerLink","click"]],template:function(e,t){1&e&&(c.YNc(0,fh,3,0,"ng-template",null,0,c.W1O),c.TgZ(2,"div",1),c.YNc(3,ph,3,1,"div",2),c._UZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c.TgZ(8,"img",7),c.NdJ("error",function(){return t.logo_url="assets/img/sas.png"}),c.qZA(),c.qZA(),c.qZA(),c._UZ(9,"div",8),c.TgZ(10,"div",9),c.YNc(11,Zh,37,11,"div",10),c.YNc(12,qh,47,9,"div",10),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("ngIf",t.settings.login_message),c.xp6(5),c.s9C("src",t.logo_url,c.LSH),c.xp6(3),c.Q6J("ngIf",!1===t.otp_required),c.xp6(1),c.Q6J("ngIf",!0===t.otp_required))},directives:[Q.O5,A._Y,A.JL,A.F,A.Fj,A.JJ,A.On,dh,A.EJ,Q.sg,A.YN,A.Kr,A.nD,_.yS],styles:[".login-background[_ngcontent-%COMP%]{background:#314755;background:linear-gradient(to right,#26a0da,#314755)}.image-container[_ngcontent-%COMP%]{background-image:url(bg1.a19009bf4e504228c1e8.png);background-position:center;background-size:cover;background-repeat:no-repeat;opacity:.1;position:absolute;width:100%;height:100%}.logo_image[_ngcontent-%COMP%]{opacity:.8;max-width:400px;height:auto}.login-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.7)}.acp-alert-container[_ngcontent-%COMP%]{position:fixed;top:0px;padding:10px;width:100%}.acp-alert-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{width:100%}"]}),(0,g.gn)([(0,m.bH)()],Th.prototype,"blockUI",void 0);var Uh=function(){return{width:"85%",maxWidth:"700px"}},Mh=[{path:"login",component:Th},{path:"",component:function(){var e=function(){function e(t,a,i,n,r,l,s){o(this,e),this.translator=t,this.auth=a,this.api=i,this.config=n,this.sanitizer=r,this.router=l,this.route=s,this.disabled=!1,this.status={isopen:!1},this.profile={},this.welcomeScreen={visible:!1,message:""}}return l(e,[{key:"ngOnInit",value:function(){var e=localStorage.getItem("user_language");("ar"===e||"ku"===e)&&this.enableRTL(e),document.title=this.config.siteConfig.site.title,(null===this.router.url||"/dashboard"===this.router.url)&&this.showWelcomeScreen();var t=this.route.snapshot.queryParamMap.get("resultIndicator");(null==t?void 0:t.length)>4&&(console.log("this is a switch return"),console.log("ri = "+t))}},{key:"showWelcomeScreen",value:function(){var e=this;this.api.get("resources/welcomeScreen").subscribe(function(t){200===t.status&&(e.welcomeScreen.visible=!0,e.welcomeScreen.message=e.sanitizer.bypassSecurityTrustHtml(t.data))})}},{key:"enableRTL",value:function(e){var t=document.createElement("link");if(t.href="assets/css/rtl.css",t.type="text/css",t.id="rtl_css",t.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(t),document.getElementsByTagName("HTML")[0].setAttribute("dir","rtl"),"ku"===e){var a=document.createElement("link");a.href="assets/css/kurdi.css",a.type="text/css",a.id="rtl_ku_css",a.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(a)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Y36(I),c.Y36(w),c.Y36(Z),c.Y36(p),c.Y36(s.H7),c.Y36(_.F0),c.Y36(_.gz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["ng-component"]],decls:18,vars:10,consts:[["sas_block_ui",""],[3,"visible","modal","closable","visibleChange"],[1,"messageContainer",3,"innerHTML"],[4,"ngIf"],[1,"app-body"],[1,"sidebar"],[1,"main"],[1,"breadcrumb"],[1,"container-fluid"],[3,"template"],[1,"block-ui-template","sas-block-ui"],["src","assets/img/loading/animation2.gif"]],template:function(e,t){if(1&e&&(c.YNc(0,kh,2,0,"ng-template",null,0,c.W1O),c.TgZ(2,"p-dialog",1),c.NdJ("visibleChange",function(e){return t.welcomeScreen.visible=e}),c.TgZ(3,"p-header"),c._uU(4),c.qZA(),c._UZ(5,"div",2),c.qZA(),c.YNc(6,Ch,1,0,"app-update-notification",3),c._UZ(7,"app-header"),c.TgZ(8,"div",4),c.TgZ(9,"div",5),c._UZ(10,"app-sidebar-nav"),c.qZA(),c.TgZ(11,"main",6),c.TgZ(12,"ol",7),c._UZ(13,"app-breadcrumbs"),c.qZA(),c.TgZ(14,"div",8),c.TgZ(15,"block-ui",9),c._UZ(16,"router-outlet"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(17,"app-footer")),2&e){var a=c.MAs(1);c.xp6(2),c.Akn(c.DdM(9,Uh)),c.Q6J("visible",t.welcomeScreen.visible)("modal",!0)("closable",!0),c.xp6(2),c.hij(" ",t.translator.translate("label_welcome_screen_header")," "),c.xp6(1),c.Q6J("innerHTML",t.welcomeScreen.message,c.oJD),c.xp6(1),c.Q6J("ngIf",t.auth.has("prm_managers_sysadmin")),c.xp6(9),c.Q6J("template",a)}},directives:[Oi.V,Ci.h4,Q.O5,C,R,Ge,Fe,m.G8,_.lC,L,Fu],styles:[".sas-block-ui[_ngcontent-%COMP%]{text-align:center;font-size:20px;#background-color: #3a3a3a;color:#fff;width:200px;border-radius:5px;padding:15px}.block-ui-wrapper[_ngcontent-%COMP%]{background:rgba(0,0,0,.4)!important}.messageContainer[_ngcontent-%COMP%]{width:100%!important;min-height:300px;background:white;padding:5px}body[_ngcontent-%COMP%]{background:#e4e5e6}"]}),e}(),children:uh,canActivateChild:[I,ki,w,p]}],Fh=function(){var e=l(function e(){o(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e,bootstrap:[x]}),e.\u0275inj=c.cJS({providers:[Z,w,p,v._W,b,tt,{provide:Q.S$,useClass:Q.Do}],imports:[[s.b2,f.JF,A.u5,u.PW,v.Rh.forRoot(),_d,_.Bz.forRoot(Mh,{relativeLinkResolution:"legacy"}),ya.kW,m.uh.forRoot({delayStart:0,delayStop:500})]]}),e}();(0,c.G48)(),s.q6().bootstrapModule(Fh).catch(function(e){return console.log(e)})}},function(e){e.O(0,[736],function(){return e(e.s=48452)}),e.O()}])}();